
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../xy_stage_controller_PI/">
      
      
        <link rel="next" href="../xy_stage_controller_dummy/">
      
      
        
      
      
      <link rel="icon" href="../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>xy_stage_controller_PI_dll - ORM-IRIS Library Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.484c7ddc.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#iris.controllers.xy_stage_controller_PI_dll" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../.." title="ORM-IRIS Library Documentation" class="md-header__button md-logo" aria-label="ORM-IRIS Library Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ORM-IRIS Library Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              xy_stage_controller_PI_dll
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../.." title="ORM-IRIS Library Documentation" class="md-nav__button md-logo" aria-label="ORM-IRIS Library Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    ORM-IRIS Library Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    API Reference
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    API Reference
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1" checked>
        
          
          <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    iris
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    iris
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_1" >
        
          
          <label class="md-nav__link" for="__nav_2_1_1" id="__nav_2_1_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    calibration
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_1_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    calibration
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../calibration/calibration_generator/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    calibration_generator
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../calibration/test_calibrator_wavelength/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    test_calibrator_wavelength
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2_1_2" id="__nav_2_1_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    controllers
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_1_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_1_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    controllers
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../camera_controller_dummy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    camera_controller_dummy
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../camera_controller_thorlabs_color/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    camera_controller_thorlabs_color
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../camera_controller_thorlabs_mono/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    camera_controller_thorlabs_mono
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../camera_controller_webcam/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    camera_controller_webcam
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../class_camera_controller/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    class_camera_controller
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../class_spectrometer_controller/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    class_spectrometer_controller
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../class_xy_stage_controller/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    class_xy_stage_controller
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../class_z_stage_controller/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    class_z_stage_controller
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mcm301_wrapper/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    mcm301_wrapper
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../oceandirect_wrapper/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    oceandirect_wrapper
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../raman_spectrometer_controller_Andor_dll/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    raman_spectrometer_controller_Andor_dll
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../raman_spectrometer_controller_Andor_pylablib/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    raman_spectrometer_controller_Andor_pylablib
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../raman_spectrometer_controller_PI_dll/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    raman_spectrometer_controller_PI_dll
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../raman_spectrometer_controller_PI_pylablib/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    raman_spectrometer_controller_PI_pylablib
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../raman_spectrometer_controller_PI_trial/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    raman_spectrometer_controller_PI_trial
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../raman_spectrometer_controller_QEPro/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    raman_spectrometer_controller_QEPro
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../raman_spectrometer_controller_WasatchEnlighten/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    raman_spectrometer_controller_WasatchEnlighten
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../raman_spectrometer_controller_dummy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    raman_spectrometer_controller_dummy
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../xy_stage_controller_PI/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    xy_stage_controller_PI
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    xy_stage_controller_PI_dll
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    xy_stage_controller_PI_dll
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#iris.controllers.xy_stage_controller_PI_dll" class="md-nav__link">
    <span class="md-ellipsis">
      
        xy_stage_controller_PI_dll
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.controllers.xy_stage_controller_PI_dll.XYController_PI" class="md-nav__link">
    <span class="md-ellipsis">
      
        XYController_PI
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="XYController_PI">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#iris.controllers.xy_stage_controller_PI_dll.XYController_PI.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __init__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.controllers.xy_stage_controller_PI_dll.XYController_PI.auto_reconnect" class="md-nav__link">
    <span class="md-ellipsis">
      
        auto_reconnect
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.controllers.xy_stage_controller_PI_dll.XYController_PI.calculate_vel_relative" class="md-nav__link">
    <span class="md-ellipsis">
      
        calculate_vel_relative
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.controllers.xy_stage_controller_PI_dll.XYController_PI.get_coordinates" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_coordinates
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.controllers.xy_stage_controller_PI_dll.XYController_PI.get_coordinates_ts" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_coordinates_ts
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.controllers.xy_stage_controller_PI_dll.XYController_PI.get_jog" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_jog
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.controllers.xy_stage_controller_PI_dll.XYController_PI.get_vel_acc_relative" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_vel_acc_relative
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.controllers.xy_stage_controller_PI_dll.XYController_PI.homing_n_coor_calibration" class="md-nav__link">
    <span class="md-ellipsis">
      
        homing_n_coor_calibration
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.controllers.xy_stage_controller_PI_dll.XYController_PI.move_continuous" class="md-nav__link">
    <span class="md-ellipsis">
      
        move_continuous
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.controllers.xy_stage_controller_PI_dll.XYController_PI.move_direct" class="md-nav__link">
    <span class="md-ellipsis">
      
        move_direct
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.controllers.xy_stage_controller_PI_dll.XYController_PI.move_jog" class="md-nav__link">
    <span class="md-ellipsis">
      
        move_jog
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.controllers.xy_stage_controller_PI_dll.XYController_PI.reinitialise_connection" class="md-nav__link">
    <span class="md-ellipsis">
      
        reinitialise_connection
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.controllers.xy_stage_controller_PI_dll.XYController_PI.set_jog" class="md-nav__link">
    <span class="md-ellipsis">
      
        set_jog
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.controllers.xy_stage_controller_PI_dll.XYController_PI.set_vel_acc_relative" class="md-nav__link">
    <span class="md-ellipsis">
      
        set_vel_acc_relative
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.controllers.xy_stage_controller_PI_dll.XYController_PI.stop_move" class="md-nav__link">
    <span class="md-ellipsis">
      
        stop_move
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.controllers.xy_stage_controller_PI_dll.XYController_PI.terminate" class="md-nav__link">
    <span class="md-ellipsis">
      
        terminate
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.controllers.xy_stage_controller_PI_dll.check_and_create_config_file" class="md-nav__link">
    <span class="md-ellipsis">
      
        check_and_create_config_file
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.controllers.xy_stage_controller_PI_dll.convert_ramanshift_to_wavelength" class="md-nav__link">
    <span class="md-ellipsis">
      
        convert_ramanshift_to_wavelength
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.controllers.xy_stage_controller_PI_dll.convert_timestamp_us_int_to_str" class="md-nav__link">
    <span class="md-ellipsis">
      
        convert_timestamp_us_int_to_str
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.controllers.xy_stage_controller_PI_dll.convert_timestamp_us_str_to_int" class="md-nav__link">
    <span class="md-ellipsis">
      
        convert_timestamp_us_str_to_int
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.controllers.xy_stage_controller_PI_dll.convert_wavelength_to_ramanshift" class="md-nav__link">
    <span class="md-ellipsis">
      
        convert_wavelength_to_ramanshift
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.controllers.xy_stage_controller_PI_dll.generate_test_app" class="md-nav__link">
    <span class="md-ellipsis">
      
        generate_test_app
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.controllers.xy_stage_controller_PI_dll.get_all_widgets" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_all_widgets
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.controllers.xy_stage_controller_PI_dll.get_all_widgets_from_layout" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_all_widgets_from_layout
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.controllers.xy_stage_controller_PI_dll.get_timestamp_day" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_timestamp_day
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.controllers.xy_stage_controller_PI_dll.get_timestamp_sec" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_timestamp_sec
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.controllers.xy_stage_controller_PI_dll.get_timestamp_us_int" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_timestamp_us_int
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.controllers.xy_stage_controller_PI_dll.get_timestamp_us_str" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_timestamp_us_str
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.controllers.xy_stage_controller_PI_dll.messagebox_request_input" class="md-nav__link">
    <span class="md-ellipsis">
      
        messagebox_request_input
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.controllers.xy_stage_controller_PI_dll.read_update_config_file_section" class="md-nav__link">
    <span class="md-ellipsis">
      
        read_update_config_file_section
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.controllers.xy_stage_controller_PI_dll.run_with_timeout" class="md-nav__link">
    <span class="md-ellipsis">
      
        run_with_timeout
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.controllers.xy_stage_controller_PI_dll.test_movecontinuous_slow_with_coorRecord" class="md-nav__link">
    <span class="md-ellipsis">
      
        test_movecontinuous_slow_with_coorRecord
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.controllers.xy_stage_controller_PI_dll.validator_float_greaterThanZero" class="md-nav__link">
    <span class="md-ellipsis">
      
        validator_float_greaterThanZero
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../xy_stage_controller_dummy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    xy_stage_controller_dummy
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../xy_stage_controller_m30xy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    xy_stage_controller_m30xy
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../xy_stage_controller_zaber/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    xy_stage_controller_zaber
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../z_stage_controller_dummy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    z_stage_controller_dummy
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../z_stage_controller_mcm301/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    z_stage_controller_mcm301
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../z_stage_controller_pfm450/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    z_stage_controller_pfm450
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../z_stage_controller_z825b/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    z_stage_controller_z825b
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_3" >
        
          
          <label class="md-nav__link" for="__nav_2_1_3" id="__nav_2_1_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    data
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_1_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    data
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data/calibration_objective/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    calibration_objective
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data/measurement_Raman/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    measurement_Raman
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data/measurement_RamanMap/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    measurement_RamanMap
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data/measurement_coordinates/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    measurement_coordinates
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data/measurement_image/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    measurement_image
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_4" >
        
          
          <label class="md-nav__link" for="__nav_2_1_4" id="__nav_2_1_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    gui
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_1_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    gui
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/dataHub_MeaImg/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    dataHub_MeaImg
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/dataHub_MeaRMap/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    dataHub_MeaRMap
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/hilvl_Brightfield/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    hilvl_Brightfield
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/hilvl_Raman/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    hilvl_Raman
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/hilvl_coorGen/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    hilvl_coorGen
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_4_6" >
        
          
          <label class="md-nav__link" for="__nav_2_1_4_6" id="__nav_2_1_4_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    image_calibration
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_1_4_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1_4_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    image_calibration
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/image_calibration/Canvas_ROIdefinition/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Canvas_ROIdefinition
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/image_calibration/objective_calibration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    objective_calibration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/image_calibration/plotter_heatmap_overlay/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    plotter_heatmap_overlay
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/motion_video/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    motion_video
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/raman/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    raman
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/shortcut_handler/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    shortcut_handler
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_4_10" >
        
          
          <label class="md-nav__link" for="__nav_2_1_4_10" id="__nav_2_1_4_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    submodules
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_1_4_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1_4_10">
            <span class="md-nav__icon md-icon"></span>
            
  
    submodules
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/submodules/heatmap_plotter_MeaRMap/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    heatmap_plotter_MeaRMap
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/submodules/image_tiling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    image_tiling
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_4_10_3" >
        
          
          <label class="md-nav__link" for="__nav_2_1_4_10_3" id="__nav_2_1_4_10_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    meaCoor_generator
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_2_1_4_10_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1_4_10_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    meaCoor_generator
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/submodules/meaCoor_generator/line_zScan/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    line_zScan
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/submodules/meaCoor_generator/points_image/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    points_image
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/submodules/meaCoor_generator/rectangle_aroundCentre/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    rectangle_aroundCentre
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/submodules/meaCoor_generator/rectangle_endToEnd/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    rectangle_endToEnd
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/submodules/meaCoor_generator/rectangle_image/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    rectangle_image
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/submodules/meaCoor_generator/rectangle_video/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    rectangle_video
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/submodules/meaCoor_generator/singlePoint_zScan/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    singlePoint_zScan
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/submodules/meaCoor_generator/ssfrm_tilemthd1_rect_around/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ssfrm_tilemthd1_rect_around
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_4_10_4" >
        
          
          <label class="md-nav__link" for="__nav_2_1_4_10_4" id="__nav_2_1_4_10_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    meaCoor_modifier
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_2_1_4_10_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1_4_10_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    meaCoor_modifier
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/submodules/meaCoor_modifier/every_z/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    every_z
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/submodules/meaCoor_modifier/gridify/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    gridify
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/submodules/meaCoor_modifier/topology_visualiser/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    topology_visualiser
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/submodules/meaCoor_modifier/translateXYZ/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    translateXYZ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/submodules/meaCoor_modifier/zInterpolate/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    zInterpolate
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/submodules/peakfinder_plotter_MeaRaman/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    peakfinder_plotter_MeaRaman
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/timestamp_coorshift/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    timestamp_coorshift
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../main_analyser/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    main_analyser
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_6" >
        
          
          <label class="md-nav__link" for="__nav_2_1_6" id="__nav_2_1_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    multiprocessing
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_1_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    multiprocessing
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../multiprocessing/basemanager/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    basemanager
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../multiprocessing/dataStreamer_Raman/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    dataStreamer_Raman
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../multiprocessing/dataStreamer_StageCam/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    dataStreamer_StageCam
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_7" >
        
          
          <label class="md-nav__link" for="__nav_2_1_7" id="__nav_2_1_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    resources
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_1_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    resources
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_7_1" >
        
          
          <label class="md-nav__link" for="__nav_2_1_7_1" id="__nav_2_1_7_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    coordinate_generators
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_1_7_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1_7_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    coordinate_generators
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/coordinate_generators/convert_2Dto3D_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    convert_2Dto3D_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/coordinate_generators/point_image_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    point_image_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/coordinate_generators/point_zScanLinear_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    point_zScanLinear_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/coordinate_generators/rect_aroundcentre_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    rect_aroundcentre_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/coordinate_generators/rect_image_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    rect_image_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/coordinate_generators/rect_startend_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    rect_startend_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/coordinate_generators/rect_video_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    rect_video_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_7_2" >
        
          
          <label class="md-nav__link" for="__nav_2_1_7_2" id="__nav_2_1_7_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    coordinate_modifiers
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_1_7_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1_7_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    coordinate_modifiers
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/coordinate_modifiers/every_z_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    every_z_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/coordinate_modifiers/gridify_setup_finetuning_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    gridify_setup_finetuning_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/coordinate_modifiers/gridify_setup_naming_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    gridify_setup_naming_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/coordinate_modifiers/gridify_setup_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    gridify_setup_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/coordinate_modifiers/topology_visuliser_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    topology_visuliser_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/coordinate_modifiers/translator_xyz_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    translator_xyz_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/coordinate_modifiers/zInterpolate_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    zInterpolate_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/dataHubPlus_Raman_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    dataHubPlus_Raman_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/dataHub_Raman_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    dataHub_Raman_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/dataHub_coor_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    dataHub_coor_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/dataHub_image_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    dataHub_image_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/heatmap_plotter_overlay_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    heatmap_plotter_overlay_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/heatmap_plotter_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    heatmap_plotter_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/hilvl_Raman_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    hilvl_Raman_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/hilvl_brightfield_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    hilvl_brightfield_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/hilvl_coorGen_coorMod_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    hilvl_coorGen_coorMod_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/hilvl_coorGen_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    hilvl_coorGen_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/main_analyser_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    main_analyser_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/main_controller_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    main_controller_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_7_15" >
        
          
          <label class="md-nav__link" for="__nav_2_1_7_15" id="__nav_2_1_7_15_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    motion_video
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_1_7_15_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1_7_15">
            <span class="md-nav__icon md-icon"></span>
            
  
    motion_video
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/motion_video/brightfieldcontrol_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    brightfieldcontrol_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/motion_video/stagecontrol_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    stagecontrol_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/objective_calibration_controls_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    objective_calibration_controls_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/objective_calibration_main_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    objective_calibration_main_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/objectives_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    objectives_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/raman_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    raman_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/spectra_peak_finder_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    spectra_peak_finder_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/spectrometer_calibration_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    spectrometer_calibration_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/tiling_method_control_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    tiling_method_control_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/tiling_method_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    tiling_method_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_8" >
        
          
          <label class="md-nav__link" for="__nav_2_1_8" id="__nav_2_1_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    utils
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_1_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    utils
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/general/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    general
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/gridify/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    gridify
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#iris.controllers.xy_stage_controller_PI_dll" class="md-nav__link">
    <span class="md-ellipsis">
      
        xy_stage_controller_PI_dll
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.controllers.xy_stage_controller_PI_dll.XYController_PI" class="md-nav__link">
    <span class="md-ellipsis">
      
        XYController_PI
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="XYController_PI">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#iris.controllers.xy_stage_controller_PI_dll.XYController_PI.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __init__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.controllers.xy_stage_controller_PI_dll.XYController_PI.auto_reconnect" class="md-nav__link">
    <span class="md-ellipsis">
      
        auto_reconnect
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.controllers.xy_stage_controller_PI_dll.XYController_PI.calculate_vel_relative" class="md-nav__link">
    <span class="md-ellipsis">
      
        calculate_vel_relative
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.controllers.xy_stage_controller_PI_dll.XYController_PI.get_coordinates" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_coordinates
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.controllers.xy_stage_controller_PI_dll.XYController_PI.get_coordinates_ts" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_coordinates_ts
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.controllers.xy_stage_controller_PI_dll.XYController_PI.get_jog" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_jog
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.controllers.xy_stage_controller_PI_dll.XYController_PI.get_vel_acc_relative" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_vel_acc_relative
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.controllers.xy_stage_controller_PI_dll.XYController_PI.homing_n_coor_calibration" class="md-nav__link">
    <span class="md-ellipsis">
      
        homing_n_coor_calibration
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.controllers.xy_stage_controller_PI_dll.XYController_PI.move_continuous" class="md-nav__link">
    <span class="md-ellipsis">
      
        move_continuous
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.controllers.xy_stage_controller_PI_dll.XYController_PI.move_direct" class="md-nav__link">
    <span class="md-ellipsis">
      
        move_direct
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.controllers.xy_stage_controller_PI_dll.XYController_PI.move_jog" class="md-nav__link">
    <span class="md-ellipsis">
      
        move_jog
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.controllers.xy_stage_controller_PI_dll.XYController_PI.reinitialise_connection" class="md-nav__link">
    <span class="md-ellipsis">
      
        reinitialise_connection
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.controllers.xy_stage_controller_PI_dll.XYController_PI.set_jog" class="md-nav__link">
    <span class="md-ellipsis">
      
        set_jog
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.controllers.xy_stage_controller_PI_dll.XYController_PI.set_vel_acc_relative" class="md-nav__link">
    <span class="md-ellipsis">
      
        set_vel_acc_relative
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.controllers.xy_stage_controller_PI_dll.XYController_PI.stop_move" class="md-nav__link">
    <span class="md-ellipsis">
      
        stop_move
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.controllers.xy_stage_controller_PI_dll.XYController_PI.terminate" class="md-nav__link">
    <span class="md-ellipsis">
      
        terminate
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.controllers.xy_stage_controller_PI_dll.check_and_create_config_file" class="md-nav__link">
    <span class="md-ellipsis">
      
        check_and_create_config_file
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.controllers.xy_stage_controller_PI_dll.convert_ramanshift_to_wavelength" class="md-nav__link">
    <span class="md-ellipsis">
      
        convert_ramanshift_to_wavelength
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.controllers.xy_stage_controller_PI_dll.convert_timestamp_us_int_to_str" class="md-nav__link">
    <span class="md-ellipsis">
      
        convert_timestamp_us_int_to_str
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.controllers.xy_stage_controller_PI_dll.convert_timestamp_us_str_to_int" class="md-nav__link">
    <span class="md-ellipsis">
      
        convert_timestamp_us_str_to_int
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.controllers.xy_stage_controller_PI_dll.convert_wavelength_to_ramanshift" class="md-nav__link">
    <span class="md-ellipsis">
      
        convert_wavelength_to_ramanshift
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.controllers.xy_stage_controller_PI_dll.generate_test_app" class="md-nav__link">
    <span class="md-ellipsis">
      
        generate_test_app
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.controllers.xy_stage_controller_PI_dll.get_all_widgets" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_all_widgets
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.controllers.xy_stage_controller_PI_dll.get_all_widgets_from_layout" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_all_widgets_from_layout
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.controllers.xy_stage_controller_PI_dll.get_timestamp_day" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_timestamp_day
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.controllers.xy_stage_controller_PI_dll.get_timestamp_sec" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_timestamp_sec
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.controllers.xy_stage_controller_PI_dll.get_timestamp_us_int" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_timestamp_us_int
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.controllers.xy_stage_controller_PI_dll.get_timestamp_us_str" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_timestamp_us_str
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.controllers.xy_stage_controller_PI_dll.messagebox_request_input" class="md-nav__link">
    <span class="md-ellipsis">
      
        messagebox_request_input
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.controllers.xy_stage_controller_PI_dll.read_update_config_file_section" class="md-nav__link">
    <span class="md-ellipsis">
      
        read_update_config_file_section
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.controllers.xy_stage_controller_PI_dll.run_with_timeout" class="md-nav__link">
    <span class="md-ellipsis">
      
        run_with_timeout
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.controllers.xy_stage_controller_PI_dll.test_movecontinuous_slow_with_coorRecord" class="md-nav__link">
    <span class="md-ellipsis">
      
        test_movecontinuous_slow_with_coorRecord
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.controllers.xy_stage_controller_PI_dll.validator_float_greaterThanZero" class="md-nav__link">
    <span class="md-ellipsis">
      
        validator_float_greaterThanZero
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



  <h1>xy_stage_controller_PI_dll</h1>

<div class="doc doc-object doc-module">



<a id="iris.controllers.xy_stage_controller_PI_dll"></a>
    <div class="doc doc-contents first">

        <p>This is a Python script that handles the control of the Physik Instrumente (PI)
U-751.24 XY stage controller. To be used with the Open Raman Microscopy (ORM) controller
app.</p>










<div class="doc doc-children">









<div class="doc doc-object doc-class">



<h2 id="iris.controllers.xy_stage_controller_PI_dll.XYController_PI" class="doc doc-heading">
            <code>XYController_PI</code>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="Class_XYController (iris.controllers.class_xy_stage_controller.Class_XYController)" href="../class_xy_stage_controller/#iris.controllers.class_xy_stage_controller.Class_XYController">Class_XYController</a></code></p>










              <details class="mkdocstrings-source">
                <summary>Source code in <code>iris/controllers/xy_stage_controller_PI_dll.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span>
<span class="normal">724</span>
<span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span>
<span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span>
<span class="normal">736</span>
<span class="normal">737</span>
<span class="normal">738</span>
<span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span>
<span class="normal">742</span>
<span class="normal">743</span>
<span class="normal">744</span>
<span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span>
<span class="normal">749</span>
<span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">XYController_PI</span><span class="p">(</span><span class="n">Class_XYController</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">sim</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialises the xy stage controller class.</span>

<span class="sd">        Args:</span>
<span class="sd">            sim (bool, optional): Not used in this case</span>

<span class="sd">        Important note:</span>
<span class="sd">            When developing this for use with image capture-related functionalities,</span>
<span class="sd">            the x-axis has to be the horizontal axis in the image capture and y-axis for </span>
<span class="sd">            the vertical axis. Otherwise some of the image processing functions will not work.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="p">:</span><span class="n">GCS2Device</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_serial_no</span> <span class="o">=</span> <span class="n">ControllerSpecificConfigEnum</span><span class="o">.</span><span class="n">PISTAGE_SERIAL</span><span class="o">.</span><span class="n">value</span>

        <span class="c1"># Axes names placeholder</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_allaxes</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="c1"># Axes control remapping</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dict_ctrl_remap</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;xfwd&#39;</span><span class="p">:</span><span class="n">ControllerDirectionEnum</span><span class="o">.</span><span class="n">XFWD</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
            <span class="s1">&#39;xrev&#39;</span><span class="p">:</span><span class="n">ControllerDirectionEnum</span><span class="o">.</span><span class="n">XREV</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
            <span class="s1">&#39;yfwd&#39;</span><span class="p">:</span><span class="n">ControllerDirectionEnum</span><span class="o">.</span><span class="n">YFWD</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
            <span class="s1">&#39;yrev&#39;</span><span class="p">:</span><span class="n">ControllerDirectionEnum</span><span class="o">.</span><span class="n">YREV</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
        <span class="p">}</span>   <span class="c1"># Dictionary to remap the controls (only for the continuous and jog movements)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_flipxy</span> <span class="o">=</span> <span class="n">ControllerConfigEnum</span><span class="o">.</span><span class="n">STAGE_FLIPXY</span><span class="o">.</span><span class="n">value</span>      <span class="c1"># Flag to indicate if the x and y axes are flipped</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_invertx</span> <span class="o">=</span> <span class="n">ControllerConfigEnum</span><span class="o">.</span><span class="n">STAGE_INVERTX</span><span class="o">.</span><span class="n">value</span>   <span class="c1"># Flag to indicate if the x-axis is flipped (inversed, *= -1)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_inverty</span> <span class="o">=</span> <span class="n">ControllerConfigEnum</span><span class="o">.</span><span class="n">STAGE_INVERTY</span><span class="o">.</span><span class="n">value</span>   <span class="c1"># Flag to indicate if the y-axis is flipped (inversed, *= -1)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_dict_axes</span> <span class="o">=</span> <span class="p">{</span> <span class="c1"># Placeholder for the axes names</span>
            <span class="s1">&#39;x&#39;</span><span class="p">:</span><span class="kc">None</span><span class="p">,</span>
            <span class="s1">&#39;y&#39;</span><span class="p">:</span><span class="kc">None</span>
        <span class="p">}</span>

        <span class="c1"># Movement parameters setup</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_max_vel_mmPerSec</span><span class="p">:</span><span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span>     <span class="c1"># Maximum velocity in mm/s</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_min_vel_mmPerSec</span><span class="p">:</span><span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span>     <span class="c1"># Minimum velocity in mm/s</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vel_mmPerSec</span><span class="p">:</span><span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span>         <span class="c1"># Current velocity in mm/s</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_max_acc_mmPerSec2</span><span class="p">:</span><span class="nb">float</span> <span class="o">=</span> <span class="mf">250.0</span>   <span class="c1"># Maximum acceleration in mm/s^2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_min_acc_mmPerSec2</span><span class="p">:</span><span class="nb">float</span> <span class="o">=</span> <span class="mf">0.01</span>    <span class="c1"># Minimum acceleration in mm/s^2</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_slow_vel_tresh_mmPerSec</span><span class="p">:</span><span class="nb">float</span> <span class="o">=</span> <span class="mf">2.0</span>   <span class="c1"># Threshold velocity for slow movements</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_slow_jogsize_mm</span><span class="p">:</span><span class="nb">float</span> <span class="o">=</span> <span class="mf">1e-3</span>          <span class="c1"># Jog size for slow movements [mm]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_slow_minJogsize_mm</span><span class="p">:</span><span class="nb">float</span> <span class="o">=</span> <span class="mf">1e-4</span>       <span class="c1"># Minimum jog size for slow movements [mm]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_slow_commRate_ms</span><span class="p">:</span><span class="nb">float</span> <span class="o">=</span> <span class="n">ControllerSpecificConfigEnum</span><span class="o">.</span><span class="n">PI_SLOW_COMRATE_MS</span><span class="o">.</span><span class="n">value</span>  <span class="c1"># Command rate for slow movements [ms]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_slow_flg_stop</span> <span class="o">=</span> <span class="n">Event</span><span class="p">()</span>               <span class="c1"># Flag to stop the slow movement</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_slow_stepsize_modifier</span> <span class="o">=</span> <span class="mf">1.1</span>          <span class="c1"># Modifier for the step size when it&#39;s too slow (to dynamically increase the step size)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_min_travelx</span><span class="p">:</span><span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_min_travely</span><span class="p">:</span><span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_max_travelx</span><span class="p">:</span><span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_max_travely</span><span class="p">:</span><span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_jog_min_mm</span><span class="p">:</span><span class="nb">float</span> <span class="o">=</span> <span class="mf">0.001</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_jog_max_mm</span><span class="p">:</span><span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_jog_mm</span><span class="p">:</span><span class="nb">float</span> <span class="o">=</span> <span class="mi">1</span>

        <span class="c1"># Coordinate logging setup</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_init_uptime_us</span> <span class="o">=</span> <span class="kc">None</span>         <span class="c1"># Initial uptime in microseconds</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_init_uptime_TsRef_us</span> <span class="o">=</span> <span class="kc">None</span>   <span class="c1"># Reference timestamp in microseconds</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_delay_ms</span> <span class="o">=</span> <span class="mi">0</span>                  <span class="c1"># Delay in milliseconds</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span> <span class="o">=</span> <span class="n">Lock</span><span class="p">()</span>

        <span class="c1"># Calculation initialisation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_max_vel_mmS</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_max_vel_mmPerSec</span>  <span class="c1"># Maximum velocity of the motor in mm/s</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_min_vel_mmS</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_min_vel_mmPerSec</span>  <span class="c1"># Minimum velocity of the motor in mm/s</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_flg_isrunning_autoreconnect</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Event</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_reconnect_freq_sec</span> <span class="o">=</span> <span class="mi">3600</span> <span class="o">*</span> <span class="n">ControllerSpecificConfigEnum</span><span class="o">.</span><span class="n">PISTAGE_AUTORECONNECT_HOURS</span><span class="o">.</span><span class="n">value</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_reconnect_freq_sec</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_thread_reconnect</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">auto_reconnect</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_thread_reconnect</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
        <span class="c1"># Data recorder setup</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_flg_useDrec</span> <span class="o">=</span> <span class="n">ControllerSpecificConfigEnum</span><span class="o">.</span><span class="n">PISTAGE_DEVTIMESTAMP</span><span class="o">.</span><span class="n">value</span> <span class="c1"># To activate/deactivate the data recorder</span>

        <span class="c1"># Initialises the device</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_identifier</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">try</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">initialisation</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;__init__ Error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_identifier</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_identifier</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_identifier</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_hardware_identifier</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_identifier</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;Error getting identifier: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_identifier</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_get_hardware_identifier</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the hardware identifier of the stage.</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: The hardware identifier of the stage</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_devname</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_devname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">devname</span>
        <span class="n">serialnum</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_serial_no</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Physik Instrumente device model: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_devname</span><span class="si">}</span><span class="s2">, S/N:</span><span class="si">{</span><span class="n">serialnum</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">auto_reconnect</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Automatically reconnect to the device after some time</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_flg_isrunning_autoreconnect</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Auto-reconnect thread started&#39;</span><span class="p">)</span>
        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">_flg_isrunning_autoreconnect</span><span class="o">.</span><span class="n">is_set</span><span class="p">():</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_reconnect_freq_sec</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Attempting to forcefully reconnect to the device...&#39;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">reinitialise_connection</span><span class="p">()</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Forcefully reconnected the device&#39;</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Error during reconnection: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="k">continue</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">reinitialise_connection</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Reinitialise the connection to the device</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">coor</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_coordinates</span><span class="p">())</span>
        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_flg_movedone</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
            <span class="n">new_coor</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_coordinates</span><span class="p">())</span>
            <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">allclose</span><span class="p">(</span><span class="n">coor</span><span class="p">,</span> <span class="n">new_coor</span><span class="p">,</span> <span class="n">atol</span><span class="o">=</span><span class="mf">1e-3</span><span class="p">):</span> <span class="k">break</span>
            <span class="n">coor</span> <span class="o">=</span> <span class="n">new_coor</span>

        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Terminating&#39;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">terminate</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;reinitialise_connection Error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Reinitialising&#39;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">initialisation</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;reinitialise_connection Error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_remap_coordinates_flip</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">coor</span><span class="p">:</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">],</span><span class="n">get</span><span class="p">:</span><span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Remaps the coordinates if the x and y axes are flipped</span>

<span class="sd">        Args:</span>
<span class="sd">            coor (tuple[float,float]): the coordinate to remap</span>
<span class="sd">            get (bool): True if the coordinate is to be retrieved, False if the coordinate is to be set</span>
<span class="sd">                this is to ensure that the flip is done before/after the inversion of the axes depending on the get flag</span>

<span class="sd">        Returns:</span>
<span class="sd">            tuple[float,float]: the remapped coordinate</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">x</span><span class="p">,</span><span class="n">y</span> <span class="o">=</span> <span class="n">coor</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_flipxy</span> <span class="ow">and</span> <span class="n">get</span><span class="p">:</span>
            <span class="n">x</span><span class="p">,</span><span class="n">y</span> <span class="o">=</span> <span class="n">y</span><span class="p">,</span><span class="n">x</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_invertx</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="o">*</span><span class="n">x</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_inverty</span><span class="p">:</span>
            <span class="n">y</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="o">*</span><span class="n">y</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_flipxy</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">get</span><span class="p">:</span>
            <span class="n">x</span><span class="p">,</span><span class="n">y</span> <span class="o">=</span> <span class="n">y</span><span class="p">,</span><span class="n">x</span>
        <span class="c1"># Note:</span>
        <span class="c1"># The flip is done before/after the inversion of the axes depending on the get flag because</span>
        <span class="c1"># a matrix multiplication is not commutative. i.e., A*B != B*A</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">initialisation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="p">:</span><span class="n">GCS2Device</span> <span class="o">=</span> <span class="n">GCSDevice</span><span class="p">()</span>

        <span class="k">try</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">ConnectUSB</span><span class="p">(</span><span class="n">serialnum</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_serial_no</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span> <span class="k">assert</span> <span class="kc">False</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;Error during connection (typically device serial number is not found): </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;connected: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">qIDN</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()))</span>

        <span class="c1"># Get axes names</span>
        <span class="c1">## NOTE: Flip the axes indices if the stage is mounted in a different orientation</span>
        <span class="c1">## make sure that the x-axis is the horizontal axis in the image capture and y-axis for</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_allaxes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">allaxes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dict_axes</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;x&#39;</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
            <span class="s1">&#39;y&#39;</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="p">}</span>

        <span class="c1"># Get max velocity</span>
        <span class="k">pass</span> <span class="c1"># Todo: Get max velocity and acceleration from the device</span>
        <span class="c1"># self._max_vel_mmPerSec:float = 50.0</span>
        <span class="c1"># self._min_vel_mmPerSec:float = 0.01</span>

        <span class="c1"># self._max_acc:float = 250.0</span>
        <span class="c1"># self._min_acc:float = 0.01</span>

        <span class="c1"># Get max acceleration and deceleration </span>
        <span class="k">pass</span>

        <span class="c1"># Enable the servos</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">SVO</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_allaxes</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span>

        <span class="c1"># Get max velocity</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_max_vel_mmPerSec</span><span class="p">:</span><span class="nb">float</span> <span class="o">=</span> <span class="mf">25.0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_min_vel_mmPerSec</span><span class="p">:</span><span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0001</span>

        <span class="c1"># Get max travel range</span>
        <span class="n">minrange</span> <span class="o">=</span> <span class="n">pitools</span><span class="o">.</span><span class="n">getmintravelrange</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">allaxes</span><span class="p">)</span>
        <span class="n">maxrange</span> <span class="o">=</span> <span class="n">pitools</span><span class="o">.</span><span class="n">getmaxtravelrange</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">allaxes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_min_travelx</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_min_travely</span> <span class="o">=</span> <span class="n">minrange</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_dict_axes</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">]],</span> <span class="n">minrange</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_dict_axes</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">]]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_max_travelx</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_max_travely</span> <span class="o">=</span> <span class="n">maxrange</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_dict_axes</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">]],</span> <span class="n">maxrange</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_dict_axes</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">]]</span>

        <span class="c1"># # Set velocity and acceleration</span>
        <span class="c1"># self.get_vel_acc_relative()</span>

    <span class="c1"># # &gt;&gt; Recording setup &lt;&lt;</span>
    <span class="c1">#     self.device.RTR(1)     # Record every servo cycle</span>

    <span class="c1">#     # Set up data recorder</span>
    <span class="c1">#     self.device.DRC(1,self._dict_axes[&#39;x&#39;],44)</span>
    <span class="c1">#     self.device.DRC(2,self._dict_axes[&#39;x&#39;],2)</span>
    <span class="c1">#     self.device.DRC(3,self._dict_axes[&#39;y&#39;],2)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_flg_useDrec</span><span class="p">:</span>
            <span class="c1"># Set the initial uptime</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_init_uptime_us</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">qTIM</span><span class="p">()</span><span class="o">*</span><span class="mf">1e3</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_init_uptime_us</span> <span class="o">=</span> <span class="n">get_timestamp_us_int</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_init_uptime_TsRef_us</span> <span class="o">=</span> <span class="n">get_timestamp_us_int</span><span class="p">()</span>

        <span class="c1"># Calculation initialisation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_max_vel_mmS</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_max_vel_mmPerSec</span>  <span class="c1"># Maximum velocity of the motor in mm/s</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_min_vel_mmS</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_min_vel_mmPerSec</span>  <span class="c1"># Minimum velocity of the motor in mm/s</span>

        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>  <span class="c1"># Wait for the device to be ready</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_flg_isrunning_autoreconnect</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_flg_movedone</span> <span class="o">=</span> <span class="n">Event</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_flg_movedone</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_convert_uptime_to_timestamp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">uptime_us</span><span class="p">:</span><span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Converts the uptime in microseconds to a timestamp</span>

<span class="sd">        Args:</span>
<span class="sd">            uptime_us (int): the uptime in microseconds</span>

<span class="sd">        Returns:</span>
<span class="sd">            int: the timestamp in microseconds</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">diff_us</span> <span class="o">=</span> <span class="n">uptime_us</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_init_uptime_us</span>
        <span class="n">timestamp_us</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_init_uptime_TsRef_us</span> <span class="o">+</span> <span class="n">diff_us</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_delay_ms</span><span class="o">*</span><span class="mf">1e3</span>
        <span class="k">return</span> <span class="n">timestamp_us</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_dev_ReadDataRecorder</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Function to read the data recorder of the device</span>

<span class="sd">        Returns:</span>
<span class="sd">            tuple[int,float,float]: 3 elements: (timestamp_us, axis1_pos_mm, axis2_pos_mm)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">while</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">IsControllerReady</span><span class="p">():</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.01</span><span class="p">)</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_flg_useDrec</span><span class="p">:</span>
                <span class="n">timestamp_us</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">qTIM</span><span class="p">()</span><span class="o">*</span><span class="mf">1e3</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span> <span class="n">timestamp_us</span> <span class="o">=</span> <span class="n">get_timestamp_us_int</span><span class="p">()</span>
            <span class="n">pos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">qPOS</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_allaxes</span><span class="p">)</span>
            <span class="n">axis1_pos_mm</span> <span class="o">=</span> <span class="n">pos</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_dict_axes</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">]]</span>
            <span class="n">axis2_pos_mm</span> <span class="o">=</span> <span class="n">pos</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_dict_axes</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">]]</span>

        <span class="k">return</span> <span class="n">timestamp_us</span><span class="p">,</span> <span class="n">axis1_pos_mm</span><span class="p">,</span> <span class="n">axis2_pos_mm</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">terminate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">close_connection</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Terminate the operation. Returns the stage to home and disconnects the device.</span>

<span class="sd">        Args:</span>
<span class="sd">            close_connection (bool): True to close the connection to the device</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">while</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">IsControllerReady</span><span class="p">():</span> <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.01</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">close_connection</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_flg_isrunning_autoreconnect</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>  <span class="c1"># Stop the auto-reconnect thread</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">CloseConnection</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">calculate_vel_relative</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">speed_mm_s</span><span class="p">:</span><span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates the relative velocity parameter for the motor given the speed in mm/s</span>

<span class="sd">        Args:</span>
<span class="sd">            speed_mm_s (float): The speed to be converted in mm/s</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: The relative velocity parameter in percentage</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Adjust the speed to the limits if it is out of bounds</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">abs</span><span class="p">(</span><span class="n">speed_mm_s</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">_min_vel_mmS</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">speed_mm_s</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_min_vel_mmS</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;!!!!! The requested speed is out of bounds. Adjusted to minimum speed </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_min_vel_mmS</span><span class="si">}</span><span class="s1"> [mm/s] !!!!!&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">abs</span><span class="p">(</span><span class="n">speed_mm_s</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">_max_vel_mmS</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">speed_mm_s</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_max_vel_mmS</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;!!!!! The requested speed is out of bounds. Adjusted to maximum speed </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_max_vel_mmS</span><span class="si">}</span><span class="s1"> [mm/s] !!!!!&#39;</span><span class="p">)</span>

        <span class="c1"># Calculate the relative speed</span>
        <span class="n">speed_rel</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">speed_mm_s</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">_max_vel_mmS</span> <span class="o">*</span> <span class="mi">100</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">speed_rel</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_vel_acc_relative</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">vel_homing</span><span class="p">:</span><span class="nb">float</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">vel_move</span><span class="p">:</span><span class="nb">float</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">acc_move</span><span class="p">:</span><span class="nb">float</span><span class="o">=</span><span class="mi">100</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the velocity and acceleration parameters of the motors for both homing and typical movements.</span>

<span class="sd">        Args:</span>
<span class="sd">            vel_homing (int, optional): Legacy parameter. Is ignored.</span>
<span class="sd">            vel_move (int, optional): New motor movement velocity in percentage of max velocity. Defaults to 100.</span>
<span class="sd">            acc_move (int, optional): Legacy parameter. Is ignored.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="mi">0</span> <span class="o">&lt;</span> <span class="n">vel_move</span> <span class="o">&lt;=</span> <span class="mi">100</span><span class="p">,</span> <span class="s1">&#39;Velocity must be between 0 and 100&#39;</span>

        <span class="c1"># Set velocity</span>
        <span class="n">vel_mmPerSec</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_max_vel_mmPerSec</span> <span class="o">*</span> <span class="n">vel_move</span> <span class="o">/</span> <span class="mi">100</span>

        <span class="k">while</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">IsControllerReady</span><span class="p">():</span> <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.01</span><span class="p">)</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">VEL</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_allaxes</span><span class="p">,</span> <span class="p">[</span><span class="n">vel_mmPerSec</span><span class="p">]</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_vel_mmPerSec</span> <span class="o">=</span> <span class="n">vel_mmPerSec</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_vel_acc_relative</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the current velocity and acceleration parameters of the motors</span>

<span class="sd">        Returns:</span>
<span class="sd">            tuple of floats: 3 elements: (vel_homing, vel_move, acc_move)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">while</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">IsControllerReady</span><span class="p">():</span> <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.01</span><span class="p">)</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span> <span class="n">dict_relvel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">qVEL</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_allaxes</span><span class="p">)</span>
        <span class="n">relvel1</span> <span class="o">=</span> <span class="n">dict_relvel</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_dict_axes</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">]]</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">_max_vel_mmPerSec</span> <span class="o">*</span> <span class="mi">100</span>
        <span class="n">relvel2</span> <span class="o">=</span> <span class="n">dict_relvel</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_dict_axes</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">]]</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">_max_vel_mmPerSec</span> <span class="o">*</span> <span class="mi">100</span>

        <span class="k">if</span> <span class="n">relvel1</span> <span class="o">!=</span> <span class="n">relvel2</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Axes have different velocities&#39;</span><span class="p">);</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vel_mmPerSec</span> <span class="o">=</span> <span class="n">relvel1</span>

        <span class="k">return</span> <span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="n">relvel1</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">report_attributes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&gt;&gt;&gt;&gt;&gt; Device and motor attributes &lt;&lt;&lt;&lt;&lt;&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">attr</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="nb">vars</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">attr</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_coordinates</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the current motor coordinates</span>

<span class="sd">        Returns:</span>
<span class="sd">            tuple of floats: 2 elements: (coor_x, coor_y), in millimetre (float)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">def</span><span class="w"> </span><span class="nf">interpolate_coor</span><span class="p">(</span><span class="n">target_ts</span><span class="p">:</span><span class="nb">int</span><span class="p">,</span><span class="n">list_ts</span><span class="p">:</span><span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span><span class="n">list_coor_x</span><span class="p">:</span><span class="nb">list</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span>
                             <span class="n">list_coor_y</span><span class="p">:</span><span class="nb">list</span><span class="p">[</span><span class="nb">float</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">]:</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Interpolates the coordinates based on the timestamps</span>

<span class="sd">            Args:</span>
<span class="sd">                target_ts (int): the target timestamp to retrieve the coordinates</span>
<span class="sd">                list_ts (list[int]): list of timestamps</span>
<span class="sd">                list_coor_x (list[float]): list of x coordinates</span>
<span class="sd">                list_coor_y (list[float]): list of y coordinates</span>

<span class="sd">            Returns:</span>
<span class="sd">                tuple[float,float]: the interpolated coordinates</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">list_ts</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">list_coor_x</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">list_coor_y</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">,</span>\
            <span class="s2">&quot;Length of the lists must be 2&quot;</span>
            <span class="k">assert</span> <span class="n">list_ts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">target_ts</span> <span class="o">&lt;</span> <span class="n">list_ts</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="s2">&quot;Target timestamp must be within the range&quot;</span>

            <span class="c1"># Interpolate the coordinates</span>
            <span class="n">coor_x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">interp</span><span class="p">(</span><span class="n">target_ts</span><span class="p">,</span><span class="n">list_ts</span><span class="p">,</span><span class="n">list_coor_x</span><span class="p">)</span>
            <span class="n">coor_y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">interp</span><span class="p">(</span><span class="n">target_ts</span><span class="p">,</span><span class="n">list_ts</span><span class="p">,</span><span class="n">list_coor_y</span><span class="p">)</span>
            <span class="k">return</span> <span class="p">(</span><span class="n">coor_x</span><span class="p">,</span><span class="n">coor_y</span><span class="p">)</span>

        <span class="n">ts_request</span> <span class="o">=</span> <span class="n">get_timestamp_us_int</span><span class="p">()</span>
        <span class="n">ts_return</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">coor_x_return</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">coor_y_return</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">ts</span><span class="p">,</span> <span class="n">coor_x</span><span class="p">,</span> <span class="n">coor_y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dev_ReadDataRecorder</span><span class="p">()</span>
            <span class="n">ts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_convert_uptime_to_timestamp</span><span class="p">(</span><span class="n">ts</span><span class="p">)</span>
            <span class="n">ts_return</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ts</span><span class="p">)</span>
            <span class="n">coor_x_return</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">coor_x</span><span class="p">)</span>
            <span class="n">coor_y_return</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">coor_y</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">ts</span> <span class="o">&gt;=</span> <span class="n">ts_request</span><span class="p">:</span> <span class="k">break</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="mi">1000</span><span class="p">)</span>  <span class="c1"># delay to prevent overloading the comm port</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ts_return</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">coor_x</span><span class="p">,</span> <span class="n">coor_y</span> <span class="o">=</span> <span class="n">coor_x_return</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">coor_y_return</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">coor_x</span><span class="p">,</span> <span class="n">coor_y</span> <span class="o">=</span> <span class="n">interpolate_coor</span><span class="p">(</span><span class="n">ts_request</span><span class="p">,</span><span class="n">ts_return</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">:],</span>
                <span class="n">coor_x_return</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">:],</span><span class="n">coor_y_return</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">:])</span>

        <span class="n">coor_x</span><span class="p">,</span> <span class="n">coor_y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_remap_coordinates_flip</span><span class="p">((</span><span class="n">coor_x</span><span class="p">,</span><span class="n">coor_y</span><span class="p">),</span><span class="n">get</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="k">return</span> <span class="p">(</span><span class="n">coor_x</span><span class="p">,</span> <span class="n">coor_y</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_coordinates_ts</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the current motor coordinates and timestamp</span>

<span class="sd">        Returns:</span>
<span class="sd">            tuple[int,float,float]: 3 elements: (timestamp_us, coor_x, coor_y), in microseconds and millimetre (float)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ts_request</span> <span class="o">=</span> <span class="n">get_timestamp_us_int</span><span class="p">()</span>
        <span class="n">ts_return</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">coor_x_return</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">coor_y_return</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">ts</span><span class="p">,</span> <span class="n">coor_x</span><span class="p">,</span> <span class="n">coor_y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dev_ReadDataRecorder</span><span class="p">()</span>
            <span class="n">ts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_convert_uptime_to_timestamp</span><span class="p">(</span><span class="n">ts</span><span class="p">)</span>
            <span class="n">ts_return</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ts</span><span class="p">)</span>
            <span class="n">coor_x_return</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">coor_x</span><span class="p">)</span>
            <span class="n">coor_y_return</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">coor_y</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">ts</span> <span class="o">&gt;=</span> <span class="n">ts_request</span><span class="p">:</span> <span class="k">break</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="mi">1000</span><span class="p">)</span>  <span class="c1"># delay to prevent overloading the comm port</span>

        <span class="n">ts</span> <span class="o">=</span> <span class="n">ts_return</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">coor_x</span><span class="p">,</span> <span class="n">coor_y</span> <span class="o">=</span> <span class="n">coor_x_return</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">coor_y_return</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

        <span class="k">return</span> <span class="p">(</span><span class="n">ts</span><span class="p">,</span> <span class="n">coor_x</span><span class="p">,</span> <span class="n">coor_y</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_coordinates_old</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">while</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">IsControllerReady</span><span class="p">():</span> <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.01</span><span class="p">)</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span> <span class="n">positions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">qPOS</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">allaxes</span><span class="p">)</span>
        <span class="n">x</span><span class="p">,</span><span class="n">y</span> <span class="o">=</span> <span class="n">positions</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_dict_axes</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">]],</span> <span class="n">positions</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_dict_axes</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">]]</span>

        <span class="n">x</span><span class="p">,</span><span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_remap_coordinates_flip</span><span class="p">((</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">),</span><span class="n">get</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">homing_n_coor_calibration</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        A function to recalibrate the coordinate system of the device.</span>
<span class="sd">        - Also called as &#39;homing&#39;</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># Set velocity</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_vel_acc_relative</span><span class="p">(</span><span class="n">vel_homing</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">vel_move</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">acc_move</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>

        <span class="c1"># Move to home position</span>
        <span class="k">while</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">IsControllerReady</span><span class="p">():</span> <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.01</span><span class="p">)</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">FRF</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_allaxes</span><span class="p">)</span>
        <span class="n">pitools</span><span class="o">.</span><span class="n">waitontarget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_allaxes</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;&gt;&gt;&gt;&gt;&gt; Coordinate calibration/Homing finished &lt;&lt;&lt;&lt;&lt;&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">move_direct</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">coor_abs</span><span class="p">:</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">],</span><span class="n">remap</span><span class="p">:</span><span class="nb">bool</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Function to direct the motors to move at the same time towards a certain coordinate.</span>

<span class="sd">        Args:</span>
<span class="sd">            coor_abs (tuple[float,float]): the absolute coordinate to move to in [mm]</span>
<span class="sd">            remap (bool): Option to remap the coor according to the set flip (made specifically</span>
<span class="sd">                for jog)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Moving to coordinates: </span><span class="si">{</span><span class="n">coor_abs</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">remap</span><span class="p">:</span> <span class="n">coor_abs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_remap_coordinates_flip</span><span class="p">(</span><span class="n">coor_abs</span><span class="p">,</span><span class="n">get</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Remapped coordinates: </span><span class="si">{</span><span class="n">coor_abs</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">_min_travelx</span> <span class="o">&lt;=</span> <span class="n">coor_abs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_max_travelx</span><span class="p">,</span> <span class="s1">&#39;Coordinate x is out of range&#39;</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">_min_travely</span> <span class="o">&lt;=</span> <span class="n">coor_abs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_max_travely</span><span class="p">,</span> <span class="s1">&#39;Coordinate y is out of range&#39;</span>

        <span class="c1"># if self._vel_mmPerSec &lt; self._slow_vel_tresh_mmPerSec:</span>
        <span class="c1">#     self._move_direct_slow(coor_abs)</span>
        <span class="c1"># else:</span>
        <span class="c1">#     with self._lock: self.device.MOV([self._dict_axes[&#39;x&#39;],self._dict_axes[&#39;y&#39;]], coor_abs)</span>

        <span class="c1">#     # Wait until target is reached</span>
        <span class="c1">#     pitools.waitontarget(self.device, self._allaxes)</span>

        <span class="k">while</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">IsControllerReady</span><span class="p">():</span> <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.01</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_flg_movedone</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">MOV</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">_dict_axes</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">],</span><span class="bp">self</span><span class="o">.</span><span class="n">_dict_axes</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">]],</span> <span class="n">coor_abs</span><span class="p">)</span>

        <span class="c1"># Wait until target is reached</span>
        <span class="n">pitools</span><span class="o">.</span><span class="n">waitontarget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_allaxes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_flg_movedone</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>

        <span class="k">return</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">move_continuous</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="nb">dir</span><span class="p">:</span><span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Moves the motor with a continuous motion until a stop command</span>

<span class="sd">        Args:</span>
<span class="sd">            dir (str): &#39;xfwd&#39;, &#39;xrev&#39;, &#39;yfwd&#39;, &#39;yrev&#39; for the direction of the movement</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="nb">dir</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;xfwd&#39;</span><span class="p">,</span><span class="s1">&#39;xrev&#39;</span><span class="p">,</span><span class="s1">&#39;yfwd&#39;</span><span class="p">,</span><span class="s1">&#39;yrev&#39;</span><span class="p">],</span> <span class="s1">&#39;Invalid direction&#39;</span>

        <span class="nb">dir</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dict_ctrl_remap</span><span class="p">[</span><span class="nb">dir</span><span class="p">]</span>

        <span class="k">while</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">IsControllerReady</span><span class="p">():</span> <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.01</span><span class="p">)</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_flg_movedone</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
            <span class="k">if</span> <span class="nb">dir</span> <span class="o">==</span> <span class="s1">&#39;xfwd&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">MOV</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_dict_axes</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_max_travelx</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">dir</span> <span class="o">==</span> <span class="s1">&#39;xrev&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">MOV</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_dict_axes</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_min_travelx</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">dir</span> <span class="o">==</span> <span class="s1">&#39;yfwd&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">MOV</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_dict_axes</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_max_travely</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">dir</span> <span class="o">==</span> <span class="s1">&#39;yrev&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">MOV</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_dict_axes</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_min_travely</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">stop_move</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Stops the continuous movement of the motors by sending a new</span>
<span class="sd">        target position to the current position</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">while</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">IsControllerReady</span><span class="p">():</span> <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.01</span><span class="p">)</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">HLT</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_allaxes</span><span class="p">,</span><span class="n">noraise</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_flg_movedone</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>
        <span class="k">return</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_jog</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the current jog step in [mm]:</span>

<span class="sd">        Returns:</span>
<span class="sd">            tuple of floats: 6 elements:</span>
<span class="sd">            (jog_step_x, jog_step_y, jog_vel_x, jog_vel_y, jog_acc_x, jog_acc_y)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_jog_mm</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_jog_mm</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vel_mmPerSec</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vel_mmPerSec</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_jog</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">dist_mm</span><span class="p">:</span><span class="nb">float</span><span class="p">,</span><span class="n">vel_rel</span><span class="p">:</span><span class="nb">int</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span><span class="n">acc_rel</span><span class="p">:</span><span class="nb">int</span><span class="o">=</span><span class="mi">100</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the jog parameters for the motor</span>

<span class="sd">        Args:</span>
<span class="sd">            dist_mm (float): distance to jog in mm</span>
<span class="sd">            vel_rel (int, optional): Legacy parameter. Is ignored.</span>
<span class="sd">            acc_rel (int, optional): Legacy parameter. Is ignored.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">_jog_min_mm</span> <span class="o">&lt;=</span> <span class="n">dist_mm</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_jog_max_mm</span><span class="p">,</span> <span class="s1">&#39;Jog distance is out of range&#39;</span>
        <span class="k">assert</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">vel_rel</span> <span class="o">&lt;=</span> <span class="mi">100</span><span class="p">,</span> <span class="s1">&#39;Velocity must be between 0 and 100&#39;</span>
        <span class="k">assert</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">acc_rel</span> <span class="o">&lt;=</span> <span class="mi">100</span><span class="p">,</span> <span class="s1">&#39;Acceleration must be between 0 and 100&#39;</span>

        <span class="c1"># Set velocity</span>
        <span class="c1">## Currently not implemented. i.e., it will jog at the same velocity as</span>
        <span class="c1">## the last set velocity</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_jog_mm</span> <span class="o">=</span> <span class="n">dist_mm</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">move_jog</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">direction</span><span class="p">:</span><span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Moves the motor with a single jogging motion.</span>

<span class="sd">        Args:</span>
<span class="sd">            direction (str): &#39;xfwd&#39;, &#39;xrev&#39;, &#39;yfwd&#39;, &#39;yrev&#39; for the direction of the jog.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="n">direction</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;xfwd&#39;</span><span class="p">,</span><span class="s1">&#39;xrev&#39;</span><span class="p">,</span><span class="s1">&#39;yfwd&#39;</span><span class="p">,</span><span class="s1">&#39;yrev&#39;</span><span class="p">],</span> <span class="s1">&#39;Invalid direction&#39;</span>

        <span class="n">direction</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dict_ctrl_remap</span><span class="p">[</span><span class="n">direction</span><span class="p">]</span>

        <span class="n">coor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_coordinates</span><span class="p">()</span>
        <span class="n">coor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_remap_coordinates_flip</span><span class="p">(</span><span class="n">coor</span><span class="p">,</span><span class="n">get</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_flg_movedone</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">direction</span> <span class="o">==</span> <span class="s1">&#39;xfwd&#39;</span><span class="p">:</span> <span class="n">coor</span> <span class="o">=</span> <span class="p">(</span><span class="n">coor</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">_jog_mm</span><span class="p">,</span> <span class="n">coor</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">elif</span> <span class="n">direction</span> <span class="o">==</span> <span class="s1">&#39;xrev&#39;</span><span class="p">:</span> <span class="n">coor</span> <span class="o">=</span> <span class="p">(</span><span class="n">coor</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">_jog_mm</span><span class="p">,</span> <span class="n">coor</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">elif</span> <span class="n">direction</span> <span class="o">==</span> <span class="s1">&#39;yfwd&#39;</span><span class="p">:</span> <span class="n">coor</span> <span class="o">=</span> <span class="p">(</span><span class="n">coor</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">coor</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">_jog_mm</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">direction</span> <span class="o">==</span> <span class="s1">&#39;yrev&#39;</span><span class="p">:</span> <span class="n">coor</span> <span class="o">=</span> <span class="p">(</span><span class="n">coor</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">coor</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">_jog_mm</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">move_direct</span><span class="p">(</span><span class="n">coor</span><span class="p">,</span><span class="n">remap</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">pitools</span><span class="o">.</span><span class="n">waitontarget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_allaxes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_flg_movedone</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>

        <span class="k">return</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">movementtest</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&gt;&gt;&gt;&gt;&gt; MOTOR TEST: CIRCULAR MOTION &lt;&lt;&lt;&lt;&lt;&quot;</span><span class="p">)</span>
        <span class="c1"># Create circle coordinates</span>
        <span class="n">angles</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">)</span>
        <span class="n">radius</span> <span class="o">=</span> <span class="mf">10.0</span>    <span class="c1"># mm</span>
        <span class="n">xs</span> <span class="o">=</span> <span class="n">radius</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">angles</span><span class="p">)</span><span class="o">+</span><span class="n">radius</span>
        <span class="n">ys</span> <span class="o">=</span> <span class="n">radius</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">angles</span><span class="p">)</span><span class="o">+</span><span class="n">radius</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">angles</span><span class="p">)):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{}</span><span class="s1">. Moving to coordinates: (</span><span class="si">{}</span><span class="s1">,</span><span class="si">{}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">xs</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">ys</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span>
            <span class="n">coor</span> <span class="o">=</span> <span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="n">xs</span><span class="p">[</span><span class="n">i</span><span class="p">]),</span> <span class="nb">float</span><span class="p">(</span><span class="n">ys</span><span class="p">[</span><span class="n">i</span><span class="p">])]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">move_direct</span><span class="p">(</span><span class="n">coor</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Current coordinates: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_coordinates</span><span class="p">()))</span>
</code></pre></div></td></tr></table></div>
              </details>



<div class="doc doc-children">










<div class="doc doc-object doc-function">


<h3 id="iris.controllers.xy_stage_controller_PI_dll.XYController_PI.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">sim</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Initialises the xy stage controller class.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>sim</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Not used in this case</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


<details class="important-note" open>
  <summary>Important note</summary>
  <p>When developing this for use with image capture-related functionalities,
the x-axis has to be the horizontal axis in the image capture and y-axis for 
the vertical axis. Otherwise some of the image processing functions will not work.</p>
</details>

            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/controllers/xy_stage_controller_PI_dll.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">sim</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialises the xy stage controller class.</span>

<span class="sd">    Args:</span>
<span class="sd">        sim (bool, optional): Not used in this case</span>

<span class="sd">    Important note:</span>
<span class="sd">        When developing this for use with image capture-related functionalities,</span>
<span class="sd">        the x-axis has to be the horizontal axis in the image capture and y-axis for </span>
<span class="sd">        the vertical axis. Otherwise some of the image processing functions will not work.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="p">:</span><span class="n">GCS2Device</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_serial_no</span> <span class="o">=</span> <span class="n">ControllerSpecificConfigEnum</span><span class="o">.</span><span class="n">PISTAGE_SERIAL</span><span class="o">.</span><span class="n">value</span>

    <span class="c1"># Axes names placeholder</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_allaxes</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="c1"># Axes control remapping</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">dict_ctrl_remap</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;xfwd&#39;</span><span class="p">:</span><span class="n">ControllerDirectionEnum</span><span class="o">.</span><span class="n">XFWD</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
        <span class="s1">&#39;xrev&#39;</span><span class="p">:</span><span class="n">ControllerDirectionEnum</span><span class="o">.</span><span class="n">XREV</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
        <span class="s1">&#39;yfwd&#39;</span><span class="p">:</span><span class="n">ControllerDirectionEnum</span><span class="o">.</span><span class="n">YFWD</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
        <span class="s1">&#39;yrev&#39;</span><span class="p">:</span><span class="n">ControllerDirectionEnum</span><span class="o">.</span><span class="n">YREV</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
    <span class="p">}</span>   <span class="c1"># Dictionary to remap the controls (only for the continuous and jog movements)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_flipxy</span> <span class="o">=</span> <span class="n">ControllerConfigEnum</span><span class="o">.</span><span class="n">STAGE_FLIPXY</span><span class="o">.</span><span class="n">value</span>      <span class="c1"># Flag to indicate if the x and y axes are flipped</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_invertx</span> <span class="o">=</span> <span class="n">ControllerConfigEnum</span><span class="o">.</span><span class="n">STAGE_INVERTX</span><span class="o">.</span><span class="n">value</span>   <span class="c1"># Flag to indicate if the x-axis is flipped (inversed, *= -1)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_inverty</span> <span class="o">=</span> <span class="n">ControllerConfigEnum</span><span class="o">.</span><span class="n">STAGE_INVERTY</span><span class="o">.</span><span class="n">value</span>   <span class="c1"># Flag to indicate if the y-axis is flipped (inversed, *= -1)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_dict_axes</span> <span class="o">=</span> <span class="p">{</span> <span class="c1"># Placeholder for the axes names</span>
        <span class="s1">&#39;x&#39;</span><span class="p">:</span><span class="kc">None</span><span class="p">,</span>
        <span class="s1">&#39;y&#39;</span><span class="p">:</span><span class="kc">None</span>
    <span class="p">}</span>

    <span class="c1"># Movement parameters setup</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_max_vel_mmPerSec</span><span class="p">:</span><span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span>     <span class="c1"># Maximum velocity in mm/s</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_min_vel_mmPerSec</span><span class="p">:</span><span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span>     <span class="c1"># Minimum velocity in mm/s</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_vel_mmPerSec</span><span class="p">:</span><span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span>         <span class="c1"># Current velocity in mm/s</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_max_acc_mmPerSec2</span><span class="p">:</span><span class="nb">float</span> <span class="o">=</span> <span class="mf">250.0</span>   <span class="c1"># Maximum acceleration in mm/s^2</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_min_acc_mmPerSec2</span><span class="p">:</span><span class="nb">float</span> <span class="o">=</span> <span class="mf">0.01</span>    <span class="c1"># Minimum acceleration in mm/s^2</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_slow_vel_tresh_mmPerSec</span><span class="p">:</span><span class="nb">float</span> <span class="o">=</span> <span class="mf">2.0</span>   <span class="c1"># Threshold velocity for slow movements</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_slow_jogsize_mm</span><span class="p">:</span><span class="nb">float</span> <span class="o">=</span> <span class="mf">1e-3</span>          <span class="c1"># Jog size for slow movements [mm]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_slow_minJogsize_mm</span><span class="p">:</span><span class="nb">float</span> <span class="o">=</span> <span class="mf">1e-4</span>       <span class="c1"># Minimum jog size for slow movements [mm]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_slow_commRate_ms</span><span class="p">:</span><span class="nb">float</span> <span class="o">=</span> <span class="n">ControllerSpecificConfigEnum</span><span class="o">.</span><span class="n">PI_SLOW_COMRATE_MS</span><span class="o">.</span><span class="n">value</span>  <span class="c1"># Command rate for slow movements [ms]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_slow_flg_stop</span> <span class="o">=</span> <span class="n">Event</span><span class="p">()</span>               <span class="c1"># Flag to stop the slow movement</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_slow_stepsize_modifier</span> <span class="o">=</span> <span class="mf">1.1</span>          <span class="c1"># Modifier for the step size when it&#39;s too slow (to dynamically increase the step size)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_min_travelx</span><span class="p">:</span><span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_min_travely</span><span class="p">:</span><span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_max_travelx</span><span class="p">:</span><span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_max_travely</span><span class="p">:</span><span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_jog_min_mm</span><span class="p">:</span><span class="nb">float</span> <span class="o">=</span> <span class="mf">0.001</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_jog_max_mm</span><span class="p">:</span><span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_jog_mm</span><span class="p">:</span><span class="nb">float</span> <span class="o">=</span> <span class="mi">1</span>

    <span class="c1"># Coordinate logging setup</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_init_uptime_us</span> <span class="o">=</span> <span class="kc">None</span>         <span class="c1"># Initial uptime in microseconds</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_init_uptime_TsRef_us</span> <span class="o">=</span> <span class="kc">None</span>   <span class="c1"># Reference timestamp in microseconds</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_delay_ms</span> <span class="o">=</span> <span class="mi">0</span>                  <span class="c1"># Delay in milliseconds</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span> <span class="o">=</span> <span class="n">Lock</span><span class="p">()</span>

    <span class="c1"># Calculation initialisation</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_max_vel_mmS</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_max_vel_mmPerSec</span>  <span class="c1"># Maximum velocity of the motor in mm/s</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_min_vel_mmS</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_min_vel_mmPerSec</span>  <span class="c1"># Minimum velocity of the motor in mm/s</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_flg_isrunning_autoreconnect</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Event</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_reconnect_freq_sec</span> <span class="o">=</span> <span class="mi">3600</span> <span class="o">*</span> <span class="n">ControllerSpecificConfigEnum</span><span class="o">.</span><span class="n">PISTAGE_AUTORECONNECT_HOURS</span><span class="o">.</span><span class="n">value</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_reconnect_freq_sec</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_thread_reconnect</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">auto_reconnect</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_thread_reconnect</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
    <span class="c1"># Data recorder setup</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_flg_useDrec</span> <span class="o">=</span> <span class="n">ControllerSpecificConfigEnum</span><span class="o">.</span><span class="n">PISTAGE_DEVTIMESTAMP</span><span class="o">.</span><span class="n">value</span> <span class="c1"># To activate/deactivate the data recorder</span>

    <span class="c1"># Initialises the device</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_identifier</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">try</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">initialisation</span><span class="p">()</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;__init__ Error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.controllers.xy_stage_controller_PI_dll.XYController_PI.auto_reconnect" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">auto_reconnect</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Automatically reconnect to the device after some time</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/controllers/xy_stage_controller_PI_dll.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">auto_reconnect</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Automatically reconnect to the device after some time</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_flg_isrunning_autoreconnect</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Auto-reconnect thread started&#39;</span><span class="p">)</span>
    <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">_flg_isrunning_autoreconnect</span><span class="o">.</span><span class="n">is_set</span><span class="p">():</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_reconnect_freq_sec</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Attempting to forcefully reconnect to the device...&#39;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">reinitialise_connection</span><span class="p">()</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Forcefully reconnected the device&#39;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Error during reconnection: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">continue</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.controllers.xy_stage_controller_PI_dll.XYController_PI.calculate_vel_relative" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">calculate_vel_relative</span><span class="p">(</span><span class="n">speed_mm_s</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Calculates the relative velocity parameter for the motor given the speed in mm/s</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>speed_mm_s</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The speed to be converted in mm/s</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>float</code></td>            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The relative velocity parameter in percentage</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/controllers/xy_stage_controller_PI_dll.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">calculate_vel_relative</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">speed_mm_s</span><span class="p">:</span><span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculates the relative velocity parameter for the motor given the speed in mm/s</span>

<span class="sd">    Args:</span>
<span class="sd">        speed_mm_s (float): The speed to be converted in mm/s</span>

<span class="sd">    Returns:</span>
<span class="sd">        float: The relative velocity parameter in percentage</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Adjust the speed to the limits if it is out of bounds</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">abs</span><span class="p">(</span><span class="n">speed_mm_s</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">_min_vel_mmS</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">speed_mm_s</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_min_vel_mmS</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;!!!!! The requested speed is out of bounds. Adjusted to minimum speed </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_min_vel_mmS</span><span class="si">}</span><span class="s1"> [mm/s] !!!!!&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">abs</span><span class="p">(</span><span class="n">speed_mm_s</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">_max_vel_mmS</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">speed_mm_s</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_max_vel_mmS</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;!!!!! The requested speed is out of bounds. Adjusted to maximum speed </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_max_vel_mmS</span><span class="si">}</span><span class="s1"> [mm/s] !!!!!&#39;</span><span class="p">)</span>

    <span class="c1"># Calculate the relative speed</span>
    <span class="n">speed_rel</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">speed_mm_s</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">_max_vel_mmS</span> <span class="o">*</span> <span class="mi">100</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">speed_rel</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.controllers.xy_stage_controller_PI_dll.XYController_PI.get_coordinates" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_coordinates</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Returns the current motor coordinates</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>tuple of floats: 2 elements: (coor_x, coor_y), in millimetre (float)</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/controllers/xy_stage_controller_PI_dll.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_coordinates</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the current motor coordinates</span>

<span class="sd">    Returns:</span>
<span class="sd">        tuple of floats: 2 elements: (coor_x, coor_y), in millimetre (float)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">interpolate_coor</span><span class="p">(</span><span class="n">target_ts</span><span class="p">:</span><span class="nb">int</span><span class="p">,</span><span class="n">list_ts</span><span class="p">:</span><span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span><span class="n">list_coor_x</span><span class="p">:</span><span class="nb">list</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span>
                         <span class="n">list_coor_y</span><span class="p">:</span><span class="nb">list</span><span class="p">[</span><span class="nb">float</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Interpolates the coordinates based on the timestamps</span>

<span class="sd">        Args:</span>
<span class="sd">            target_ts (int): the target timestamp to retrieve the coordinates</span>
<span class="sd">            list_ts (list[int]): list of timestamps</span>
<span class="sd">            list_coor_x (list[float]): list of x coordinates</span>
<span class="sd">            list_coor_y (list[float]): list of y coordinates</span>

<span class="sd">        Returns:</span>
<span class="sd">            tuple[float,float]: the interpolated coordinates</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">list_ts</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">list_coor_x</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">list_coor_y</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">,</span>\
        <span class="s2">&quot;Length of the lists must be 2&quot;</span>
        <span class="k">assert</span> <span class="n">list_ts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">target_ts</span> <span class="o">&lt;</span> <span class="n">list_ts</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="s2">&quot;Target timestamp must be within the range&quot;</span>

        <span class="c1"># Interpolate the coordinates</span>
        <span class="n">coor_x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">interp</span><span class="p">(</span><span class="n">target_ts</span><span class="p">,</span><span class="n">list_ts</span><span class="p">,</span><span class="n">list_coor_x</span><span class="p">)</span>
        <span class="n">coor_y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">interp</span><span class="p">(</span><span class="n">target_ts</span><span class="p">,</span><span class="n">list_ts</span><span class="p">,</span><span class="n">list_coor_y</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">coor_x</span><span class="p">,</span><span class="n">coor_y</span><span class="p">)</span>

    <span class="n">ts_request</span> <span class="o">=</span> <span class="n">get_timestamp_us_int</span><span class="p">()</span>
    <span class="n">ts_return</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">coor_x_return</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">coor_y_return</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">ts</span><span class="p">,</span> <span class="n">coor_x</span><span class="p">,</span> <span class="n">coor_y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dev_ReadDataRecorder</span><span class="p">()</span>
        <span class="n">ts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_convert_uptime_to_timestamp</span><span class="p">(</span><span class="n">ts</span><span class="p">)</span>
        <span class="n">ts_return</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ts</span><span class="p">)</span>
        <span class="n">coor_x_return</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">coor_x</span><span class="p">)</span>
        <span class="n">coor_y_return</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">coor_y</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ts</span> <span class="o">&gt;=</span> <span class="n">ts_request</span><span class="p">:</span> <span class="k">break</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="mi">1000</span><span class="p">)</span>  <span class="c1"># delay to prevent overloading the comm port</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ts_return</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">coor_x</span><span class="p">,</span> <span class="n">coor_y</span> <span class="o">=</span> <span class="n">coor_x_return</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">coor_y_return</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">coor_x</span><span class="p">,</span> <span class="n">coor_y</span> <span class="o">=</span> <span class="n">interpolate_coor</span><span class="p">(</span><span class="n">ts_request</span><span class="p">,</span><span class="n">ts_return</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">:],</span>
            <span class="n">coor_x_return</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">:],</span><span class="n">coor_y_return</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">:])</span>

    <span class="n">coor_x</span><span class="p">,</span> <span class="n">coor_y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_remap_coordinates_flip</span><span class="p">((</span><span class="n">coor_x</span><span class="p">,</span><span class="n">coor_y</span><span class="p">),</span><span class="n">get</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">return</span> <span class="p">(</span><span class="n">coor_x</span><span class="p">,</span> <span class="n">coor_y</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.controllers.xy_stage_controller_PI_dll.XYController_PI.get_coordinates_ts" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_coordinates_ts</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Returns the current motor coordinates and timestamp</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="tuple">tuple</span>[<span title="int">int</span>, <span title="float">float</span>, <span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>tuple[int,float,float]: 3 elements: (timestamp_us, coor_x, coor_y), in microseconds and millimetre (float)</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/controllers/xy_stage_controller_PI_dll.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_coordinates_ts</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the current motor coordinates and timestamp</span>

<span class="sd">    Returns:</span>
<span class="sd">        tuple[int,float,float]: 3 elements: (timestamp_us, coor_x, coor_y), in microseconds and millimetre (float)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">ts_request</span> <span class="o">=</span> <span class="n">get_timestamp_us_int</span><span class="p">()</span>
    <span class="n">ts_return</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">coor_x_return</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">coor_y_return</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">ts</span><span class="p">,</span> <span class="n">coor_x</span><span class="p">,</span> <span class="n">coor_y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dev_ReadDataRecorder</span><span class="p">()</span>
        <span class="n">ts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_convert_uptime_to_timestamp</span><span class="p">(</span><span class="n">ts</span><span class="p">)</span>
        <span class="n">ts_return</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ts</span><span class="p">)</span>
        <span class="n">coor_x_return</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">coor_x</span><span class="p">)</span>
        <span class="n">coor_y_return</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">coor_y</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ts</span> <span class="o">&gt;=</span> <span class="n">ts_request</span><span class="p">:</span> <span class="k">break</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="mi">1000</span><span class="p">)</span>  <span class="c1"># delay to prevent overloading the comm port</span>

    <span class="n">ts</span> <span class="o">=</span> <span class="n">ts_return</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">coor_x</span><span class="p">,</span> <span class="n">coor_y</span> <span class="o">=</span> <span class="n">coor_x_return</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">coor_y_return</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

    <span class="k">return</span> <span class="p">(</span><span class="n">ts</span><span class="p">,</span> <span class="n">coor_x</span><span class="p">,</span> <span class="n">coor_y</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.controllers.xy_stage_controller_PI_dll.XYController_PI.get_jog" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_jog</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Returns the current jog step in [mm]:</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>tuple of floats: 6 elements:</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>(jog_step_x, jog_step_y, jog_vel_x, jog_vel_y, jog_acc_x, jog_acc_y)</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/controllers/xy_stage_controller_PI_dll.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_jog</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the current jog step in [mm]:</span>

<span class="sd">    Returns:</span>
<span class="sd">        tuple of floats: 6 elements:</span>
<span class="sd">        (jog_step_x, jog_step_y, jog_vel_x, jog_vel_y, jog_acc_x, jog_acc_y)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_jog_mm</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_jog_mm</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vel_mmPerSec</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vel_mmPerSec</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.controllers.xy_stage_controller_PI_dll.XYController_PI.get_vel_acc_relative" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_vel_acc_relative</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Returns the current velocity and acceleration parameters of the motors</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>tuple of floats: 3 elements: (vel_homing, vel_move, acc_move)</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/controllers/xy_stage_controller_PI_dll.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_vel_acc_relative</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the current velocity and acceleration parameters of the motors</span>

<span class="sd">    Returns:</span>
<span class="sd">        tuple of floats: 3 elements: (vel_homing, vel_move, acc_move)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">while</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">IsControllerReady</span><span class="p">():</span> <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.01</span><span class="p">)</span>
    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span> <span class="n">dict_relvel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">qVEL</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_allaxes</span><span class="p">)</span>
    <span class="n">relvel1</span> <span class="o">=</span> <span class="n">dict_relvel</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_dict_axes</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">]]</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">_max_vel_mmPerSec</span> <span class="o">*</span> <span class="mi">100</span>
    <span class="n">relvel2</span> <span class="o">=</span> <span class="n">dict_relvel</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_dict_axes</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">]]</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">_max_vel_mmPerSec</span> <span class="o">*</span> <span class="mi">100</span>

    <span class="k">if</span> <span class="n">relvel1</span> <span class="o">!=</span> <span class="n">relvel2</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Axes have different velocities&#39;</span><span class="p">);</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vel_mmPerSec</span> <span class="o">=</span> <span class="n">relvel1</span>

    <span class="k">return</span> <span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="n">relvel1</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.controllers.xy_stage_controller_PI_dll.XYController_PI.homing_n_coor_calibration" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">homing_n_coor_calibration</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>A function to recalibrate the coordinate system of the device.
- Also called as 'homing'</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/controllers/xy_stage_controller_PI_dll.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">homing_n_coor_calibration</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A function to recalibrate the coordinate system of the device.</span>
<span class="sd">    - Also called as &#39;homing&#39;</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Set velocity</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_vel_acc_relative</span><span class="p">(</span><span class="n">vel_homing</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">vel_move</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">acc_move</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>

    <span class="c1"># Move to home position</span>
    <span class="k">while</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">IsControllerReady</span><span class="p">():</span> <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.01</span><span class="p">)</span>
    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">FRF</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_allaxes</span><span class="p">)</span>
    <span class="n">pitools</span><span class="o">.</span><span class="n">waitontarget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_allaxes</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;&gt;&gt;&gt;&gt;&gt; Coordinate calibration/Homing finished &lt;&lt;&lt;&lt;&lt;&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.controllers.xy_stage_controller_PI_dll.XYController_PI.move_continuous" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">move_continuous</span><span class="p">(</span><span class="nb">dir</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Moves the motor with a continuous motion until a stop command</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>dir</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>'xfwd', 'xrev', 'yfwd', 'yrev' for the direction of the movement</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/controllers/xy_stage_controller_PI_dll.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">move_continuous</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="nb">dir</span><span class="p">:</span><span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Moves the motor with a continuous motion until a stop command</span>

<span class="sd">    Args:</span>
<span class="sd">        dir (str): &#39;xfwd&#39;, &#39;xrev&#39;, &#39;yfwd&#39;, &#39;yrev&#39; for the direction of the movement</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">assert</span> <span class="nb">dir</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;xfwd&#39;</span><span class="p">,</span><span class="s1">&#39;xrev&#39;</span><span class="p">,</span><span class="s1">&#39;yfwd&#39;</span><span class="p">,</span><span class="s1">&#39;yrev&#39;</span><span class="p">],</span> <span class="s1">&#39;Invalid direction&#39;</span>

    <span class="nb">dir</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dict_ctrl_remap</span><span class="p">[</span><span class="nb">dir</span><span class="p">]</span>

    <span class="k">while</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">IsControllerReady</span><span class="p">():</span> <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.01</span><span class="p">)</span>
    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_flg_movedone</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">dir</span> <span class="o">==</span> <span class="s1">&#39;xfwd&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">MOV</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_dict_axes</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_max_travelx</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">dir</span> <span class="o">==</span> <span class="s1">&#39;xrev&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">MOV</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_dict_axes</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_min_travelx</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">dir</span> <span class="o">==</span> <span class="s1">&#39;yfwd&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">MOV</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_dict_axes</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_max_travely</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">dir</span> <span class="o">==</span> <span class="s1">&#39;yrev&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">MOV</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_dict_axes</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_min_travely</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.controllers.xy_stage_controller_PI_dll.XYController_PI.move_direct" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">move_direct</span><span class="p">(</span><span class="n">coor_abs</span><span class="p">,</span> <span class="n">remap</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Function to direct the motors to move at the same time towards a certain coordinate.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>coor_abs</code>
            </td>
            <td>
                  <code><span title="tuple">tuple</span>[<span title="float">float</span>, <span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the absolute coordinate to move to in [mm]</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>remap</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Option to remap the coor according to the set flip (made specifically
for jog)</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/controllers/xy_stage_controller_PI_dll.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">move_direct</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">coor_abs</span><span class="p">:</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">],</span><span class="n">remap</span><span class="p">:</span><span class="nb">bool</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Function to direct the motors to move at the same time towards a certain coordinate.</span>

<span class="sd">    Args:</span>
<span class="sd">        coor_abs (tuple[float,float]): the absolute coordinate to move to in [mm]</span>
<span class="sd">        remap (bool): Option to remap the coor according to the set flip (made specifically</span>
<span class="sd">            for jog)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Moving to coordinates: </span><span class="si">{</span><span class="n">coor_abs</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">remap</span><span class="p">:</span> <span class="n">coor_abs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_remap_coordinates_flip</span><span class="p">(</span><span class="n">coor_abs</span><span class="p">,</span><span class="n">get</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Remapped coordinates: </span><span class="si">{</span><span class="n">coor_abs</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">_min_travelx</span> <span class="o">&lt;=</span> <span class="n">coor_abs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_max_travelx</span><span class="p">,</span> <span class="s1">&#39;Coordinate x is out of range&#39;</span>
    <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">_min_travely</span> <span class="o">&lt;=</span> <span class="n">coor_abs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_max_travely</span><span class="p">,</span> <span class="s1">&#39;Coordinate y is out of range&#39;</span>

    <span class="c1"># if self._vel_mmPerSec &lt; self._slow_vel_tresh_mmPerSec:</span>
    <span class="c1">#     self._move_direct_slow(coor_abs)</span>
    <span class="c1"># else:</span>
    <span class="c1">#     with self._lock: self.device.MOV([self._dict_axes[&#39;x&#39;],self._dict_axes[&#39;y&#39;]], coor_abs)</span>

    <span class="c1">#     # Wait until target is reached</span>
    <span class="c1">#     pitools.waitontarget(self.device, self._allaxes)</span>

    <span class="k">while</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">IsControllerReady</span><span class="p">():</span> <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.01</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_flg_movedone</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">MOV</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">_dict_axes</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">],</span><span class="bp">self</span><span class="o">.</span><span class="n">_dict_axes</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">]],</span> <span class="n">coor_abs</span><span class="p">)</span>

    <span class="c1"># Wait until target is reached</span>
    <span class="n">pitools</span><span class="o">.</span><span class="n">waitontarget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_allaxes</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_flg_movedone</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>

    <span class="k">return</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.controllers.xy_stage_controller_PI_dll.XYController_PI.move_jog" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">move_jog</span><span class="p">(</span><span class="n">direction</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Moves the motor with a single jogging motion.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>direction</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>'xfwd', 'xrev', 'yfwd', 'yrev' for the direction of the jog.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/controllers/xy_stage_controller_PI_dll.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span>
<span class="normal">724</span>
<span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span>
<span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span>
<span class="normal">736</span>
<span class="normal">737</span>
<span class="normal">738</span>
<span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">move_jog</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">direction</span><span class="p">:</span><span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Moves the motor with a single jogging motion.</span>

<span class="sd">    Args:</span>
<span class="sd">        direction (str): &#39;xfwd&#39;, &#39;xrev&#39;, &#39;yfwd&#39;, &#39;yrev&#39; for the direction of the jog.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">assert</span> <span class="n">direction</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;xfwd&#39;</span><span class="p">,</span><span class="s1">&#39;xrev&#39;</span><span class="p">,</span><span class="s1">&#39;yfwd&#39;</span><span class="p">,</span><span class="s1">&#39;yrev&#39;</span><span class="p">],</span> <span class="s1">&#39;Invalid direction&#39;</span>

    <span class="n">direction</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dict_ctrl_remap</span><span class="p">[</span><span class="n">direction</span><span class="p">]</span>

    <span class="n">coor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_coordinates</span><span class="p">()</span>
    <span class="n">coor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_remap_coordinates_flip</span><span class="p">(</span><span class="n">coor</span><span class="p">,</span><span class="n">get</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_flg_movedone</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">direction</span> <span class="o">==</span> <span class="s1">&#39;xfwd&#39;</span><span class="p">:</span> <span class="n">coor</span> <span class="o">=</span> <span class="p">(</span><span class="n">coor</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">_jog_mm</span><span class="p">,</span> <span class="n">coor</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="k">elif</span> <span class="n">direction</span> <span class="o">==</span> <span class="s1">&#39;xrev&#39;</span><span class="p">:</span> <span class="n">coor</span> <span class="o">=</span> <span class="p">(</span><span class="n">coor</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">_jog_mm</span><span class="p">,</span> <span class="n">coor</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="k">elif</span> <span class="n">direction</span> <span class="o">==</span> <span class="s1">&#39;yfwd&#39;</span><span class="p">:</span> <span class="n">coor</span> <span class="o">=</span> <span class="p">(</span><span class="n">coor</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">coor</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">_jog_mm</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">direction</span> <span class="o">==</span> <span class="s1">&#39;yrev&#39;</span><span class="p">:</span> <span class="n">coor</span> <span class="o">=</span> <span class="p">(</span><span class="n">coor</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">coor</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">_jog_mm</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">move_direct</span><span class="p">(</span><span class="n">coor</span><span class="p">,</span><span class="n">remap</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">pitools</span><span class="o">.</span><span class="n">waitontarget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_allaxes</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_flg_movedone</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>

    <span class="k">return</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.controllers.xy_stage_controller_PI_dll.XYController_PI.reinitialise_connection" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">reinitialise_connection</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Reinitialise the connection to the device</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/controllers/xy_stage_controller_PI_dll.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">reinitialise_connection</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Reinitialise the connection to the device</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">coor</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_coordinates</span><span class="p">())</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_flg_movedone</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
        <span class="n">new_coor</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_coordinates</span><span class="p">())</span>
        <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">allclose</span><span class="p">(</span><span class="n">coor</span><span class="p">,</span> <span class="n">new_coor</span><span class="p">,</span> <span class="n">atol</span><span class="o">=</span><span class="mf">1e-3</span><span class="p">):</span> <span class="k">break</span>
        <span class="n">coor</span> <span class="o">=</span> <span class="n">new_coor</span>

    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Terminating&#39;</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">terminate</span><span class="p">()</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;reinitialise_connection Error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Reinitialising&#39;</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">initialisation</span><span class="p">()</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;reinitialise_connection Error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.controllers.xy_stage_controller_PI_dll.XYController_PI.set_jog" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_jog</span><span class="p">(</span><span class="n">dist_mm</span><span class="p">,</span> <span class="n">vel_rel</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">acc_rel</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Set the jog parameters for the motor</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>dist_mm</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>distance to jog in mm</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>vel_rel</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Legacy parameter. Is ignored.</p>
              </div>
            </td>
            <td>
                  <code>100</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>acc_rel</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Legacy parameter. Is ignored.</p>
              </div>
            </td>
            <td>
                  <code>100</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/controllers/xy_stage_controller_PI_dll.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_jog</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">dist_mm</span><span class="p">:</span><span class="nb">float</span><span class="p">,</span><span class="n">vel_rel</span><span class="p">:</span><span class="nb">int</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span><span class="n">acc_rel</span><span class="p">:</span><span class="nb">int</span><span class="o">=</span><span class="mi">100</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Set the jog parameters for the motor</span>

<span class="sd">    Args:</span>
<span class="sd">        dist_mm (float): distance to jog in mm</span>
<span class="sd">        vel_rel (int, optional): Legacy parameter. Is ignored.</span>
<span class="sd">        acc_rel (int, optional): Legacy parameter. Is ignored.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">_jog_min_mm</span> <span class="o">&lt;=</span> <span class="n">dist_mm</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_jog_max_mm</span><span class="p">,</span> <span class="s1">&#39;Jog distance is out of range&#39;</span>
    <span class="k">assert</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">vel_rel</span> <span class="o">&lt;=</span> <span class="mi">100</span><span class="p">,</span> <span class="s1">&#39;Velocity must be between 0 and 100&#39;</span>
    <span class="k">assert</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">acc_rel</span> <span class="o">&lt;=</span> <span class="mi">100</span><span class="p">,</span> <span class="s1">&#39;Acceleration must be between 0 and 100&#39;</span>

    <span class="c1"># Set velocity</span>
    <span class="c1">## Currently not implemented. i.e., it will jog at the same velocity as</span>
    <span class="c1">## the last set velocity</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_jog_mm</span> <span class="o">=</span> <span class="n">dist_mm</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.controllers.xy_stage_controller_PI_dll.XYController_PI.set_vel_acc_relative" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_vel_acc_relative</span><span class="p">(</span><span class="n">vel_homing</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">vel_move</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">acc_move</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Set the velocity and acceleration parameters of the motors for both homing and typical movements.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>vel_homing</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Legacy parameter. Is ignored.</p>
              </div>
            </td>
            <td>
                  <code>100</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>vel_move</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>New motor movement velocity in percentage of max velocity. Defaults to 100.</p>
              </div>
            </td>
            <td>
                  <code>100</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>acc_move</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Legacy parameter. Is ignored.</p>
              </div>
            </td>
            <td>
                  <code>100</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/controllers/xy_stage_controller_PI_dll.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_vel_acc_relative</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">vel_homing</span><span class="p">:</span><span class="nb">float</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">vel_move</span><span class="p">:</span><span class="nb">float</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">acc_move</span><span class="p">:</span><span class="nb">float</span><span class="o">=</span><span class="mi">100</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Set the velocity and acceleration parameters of the motors for both homing and typical movements.</span>

<span class="sd">    Args:</span>
<span class="sd">        vel_homing (int, optional): Legacy parameter. Is ignored.</span>
<span class="sd">        vel_move (int, optional): New motor movement velocity in percentage of max velocity. Defaults to 100.</span>
<span class="sd">        acc_move (int, optional): Legacy parameter. Is ignored.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">assert</span> <span class="mi">0</span> <span class="o">&lt;</span> <span class="n">vel_move</span> <span class="o">&lt;=</span> <span class="mi">100</span><span class="p">,</span> <span class="s1">&#39;Velocity must be between 0 and 100&#39;</span>

    <span class="c1"># Set velocity</span>
    <span class="n">vel_mmPerSec</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_max_vel_mmPerSec</span> <span class="o">*</span> <span class="n">vel_move</span> <span class="o">/</span> <span class="mi">100</span>

    <span class="k">while</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">IsControllerReady</span><span class="p">():</span> <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.01</span><span class="p">)</span>
    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">VEL</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_allaxes</span><span class="p">,</span> <span class="p">[</span><span class="n">vel_mmPerSec</span><span class="p">]</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_vel_mmPerSec</span> <span class="o">=</span> <span class="n">vel_mmPerSec</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.controllers.xy_stage_controller_PI_dll.XYController_PI.stop_move" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">stop_move</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Stops the continuous movement of the motors by sending a new
target position to the current position</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/controllers/xy_stage_controller_PI_dll.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">stop_move</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Stops the continuous movement of the motors by sending a new</span>
<span class="sd">    target position to the current position</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">while</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">IsControllerReady</span><span class="p">():</span> <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.01</span><span class="p">)</span>
    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">HLT</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_allaxes</span><span class="p">,</span><span class="n">noraise</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_flg_movedone</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>
    <span class="k">return</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.controllers.xy_stage_controller_PI_dll.XYController_PI.terminate" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">terminate</span><span class="p">(</span><span class="n">close_connection</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Terminate the operation. Returns the stage to home and disconnects the device.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>close_connection</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True to close the connection to the device</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/controllers/xy_stage_controller_PI_dll.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">terminate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">close_connection</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Terminate the operation. Returns the stage to home and disconnects the device.</span>

<span class="sd">    Args:</span>
<span class="sd">        close_connection (bool): True to close the connection to the device</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">while</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">IsControllerReady</span><span class="p">():</span> <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.01</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">close_connection</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_flg_isrunning_autoreconnect</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>  <span class="c1"># Stop the auto-reconnect thread</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">CloseConnection</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>


<div class="doc doc-object doc-function">


<h2 id="iris.controllers.xy_stage_controller_PI_dll.check_and_create_config_file" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">check_and_create_config_file</span><span class="p">(</span><span class="n">config_file_path</span><span class="o">=</span><span class="s1">&#39;config.ini&#39;</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Generate a default config file if it does not exist</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>config_file</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Path to the config file. Defaults to 'config.ini'</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/utils/general.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">check_and_create_config_file</span><span class="p">(</span><span class="n">config_file_path</span><span class="p">:</span><span class="nb">str</span><span class="o">=</span><span class="s1">&#39;config.ini&#39;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generate a default config file if it does not exist</span>

<span class="sd">    Args:</span>
<span class="sd">        config_file (str): Path to the config file. Defaults to &#39;config.ini&#39;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Generate a default config file if it does not exist</span>
    <span class="n">updater</span> <span class="o">=</span> <span class="n">ConfigUpdater</span><span class="p">(</span><span class="n">allow_no_value</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">config_file_path</span><span class="p">):</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">config_file_path</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">configfile</span><span class="p">:</span> <span class="n">updater</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">configfile</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="iris.controllers.xy_stage_controller_PI_dll.convert_ramanshift_to_wavelength" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">convert_ramanshift_to_wavelength</span><span class="p">(</span><span class="n">raman_shift</span><span class="p">,</span> <span class="n">excitation_wavelength</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Converts Raman shift to wavelength</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>raman_shift</code>
            </td>
            <td>
                  <code><span title="float">float</span> | <span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Raman shift in cm^-1</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>excitation_wavelength</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Excitation laser wavelength in nm</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="float">float</span> | <span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>float|np.ndarray: Wavelength in nm</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/utils/general.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">convert_ramanshift_to_wavelength</span><span class="p">(</span><span class="n">raman_shift</span><span class="p">:</span><span class="nb">float</span><span class="o">|</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span><span class="n">excitation_wavelength</span><span class="p">:</span><span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="o">|</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Converts Raman shift to wavelength</span>

<span class="sd">    Args:</span>
<span class="sd">        raman_shift (float|np.ndarray): Raman shift in cm^-1</span>
<span class="sd">        excitation_wavelength (float): Excitation laser wavelength in nm</span>

<span class="sd">    Returns:</span>
<span class="sd">        float|np.ndarray: Wavelength in nm</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">wavelength</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="n">excitation_wavelength</span> <span class="o">-</span> <span class="n">raman_shift</span><span class="o">/</span><span class="mf">1e7</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">wavelength</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="iris.controllers.xy_stage_controller_PI_dll.convert_timestamp_us_int_to_str" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">convert_timestamp_us_int_to_str</span><span class="p">(</span><span class="n">timestamp</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Converts timestamp integer to string</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>timestamp</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Timestamp in us</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Timestamp as string in the format %y%m%d_%H%M%S_%f</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/utils/general.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">convert_timestamp_us_int_to_str</span><span class="p">(</span><span class="n">timestamp</span><span class="p">:</span><span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Converts timestamp integer to string</span>

<span class="sd">    Args:</span>
<span class="sd">        timestamp (int): Timestamp in us</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: Timestamp as string in the format %y%m%d_%H%M%S_%f</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">timestamp_str</span> <span class="o">=</span> <span class="n">dt</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">(</span><span class="n">timestamp</span><span class="o">*</span><span class="mf">1e-6</span><span class="p">)</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%y%m</span><span class="si">%d</span><span class="s2">_%H%M%S_</span><span class="si">%f</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">timestamp_str</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="iris.controllers.xy_stage_controller_PI_dll.convert_timestamp_us_str_to_int" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">convert_timestamp_us_str_to_int</span><span class="p">(</span><span class="n">timestamp</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Converts timestamp string to integer</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>timestamp</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Timestamp, has to be in the format %y%m%d_%H%M%S_%f</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>int</code></td>            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Timestamp as integer in us</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/utils/general.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">convert_timestamp_us_str_to_int</span><span class="p">(</span><span class="n">timestamp</span><span class="p">:</span><span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Converts timestamp string to integer</span>

<span class="sd">    Args:</span>
<span class="sd">        timestamp (str): Timestamp, has to be in the format %y%m%d_%H%M%S_%f</span>

<span class="sd">    Returns:</span>
<span class="sd">        int: Timestamp as integer in us</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">timestamp_int</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">timestamp</span><span class="p">,</span> <span class="s2">&quot;%y%m</span><span class="si">%d</span><span class="s2">_%H%M%S_</span><span class="si">%f</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">timestamp</span><span class="p">()</span><span class="o">*</span><span class="mf">1e6</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">timestamp_int</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="iris.controllers.xy_stage_controller_PI_dll.convert_wavelength_to_ramanshift" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">convert_wavelength_to_ramanshift</span><span class="p">(</span><span class="n">wavelength</span><span class="p">,</span> <span class="n">excitation_wavelength</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Converts wavelength to Raman shift</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>wavelength</code>
            </td>
            <td>
                  <code><span title="float">float</span> | <span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Wavelength in nm</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>excitation_wavelength</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Excitation laser wavelength in nm</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="float">float</span> | <span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>float|np.ndarray: Raman shift in cm^-1</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/utils/general.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">convert_wavelength_to_ramanshift</span><span class="p">(</span><span class="n">wavelength</span><span class="p">:</span><span class="nb">float</span><span class="o">|</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span><span class="n">excitation_wavelength</span><span class="p">:</span><span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="o">|</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Converts wavelength to Raman shift</span>

<span class="sd">    Args:</span>
<span class="sd">        wavelength (float|np.ndarray): Wavelength in nm</span>
<span class="sd">        excitation_wavelength (float): Excitation laser wavelength in nm</span>

<span class="sd">    Returns:</span>
<span class="sd">        float|np.ndarray: Raman shift in cm^-1</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">wavelength</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span> <span class="ow">and</span> <span class="n">wavelength</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span> <span class="n">wavelength</span> <span class="o">=</span> <span class="mf">0.0001</span>
    <span class="k">else</span><span class="p">:</span> <span class="n">wavelength</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">wavelength</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.0001</span><span class="p">,</span> <span class="n">wavelength</span><span class="p">)</span>
    <span class="n">raman_shift</span> <span class="o">=</span> <span class="mf">1e7</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="n">excitation_wavelength</span> <span class="o">-</span> <span class="mi">1</span><span class="o">/</span><span class="n">wavelength</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">raman_shift</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="iris.controllers.xy_stage_controller_PI_dll.generate_test_app" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">generate_test_app</span><span class="p">(</span><span class="n">lyt</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Generates a test QApplication and QVBoxLayout for testing purposes</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="tuple">tuple</span>[<span title="PySide6.QtWidgets.QApplication">QApplication</span>, <span title="PySide6.QtWidgets.QWidget">QWidget</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>tuple[qw.QApplication, qw.QWidget]: The QApplication and QWidget instances</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/utils/general.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">generate_test_app</span><span class="p">(</span><span class="n">lyt</span><span class="p">:</span><span class="n">qw</span><span class="o">.</span><span class="n">QVBoxLayout</span><span class="o">|</span><span class="n">qw</span><span class="o">.</span><span class="n">QHBoxLayout</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">qw</span><span class="o">.</span><span class="n">QApplication</span><span class="p">,</span><span class="n">qw</span><span class="o">.</span><span class="n">QWidget</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generates a test QApplication and QVBoxLayout for testing purposes</span>

<span class="sd">    Returns:</span>
<span class="sd">        tuple[qw.QApplication, qw.QWidget]: The QApplication and QWidget instances</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">app</span> <span class="o">=</span> <span class="n">qw</span><span class="o">.</span><span class="n">QApplication</span><span class="p">([])</span>
    <span class="n">main_window</span> <span class="o">=</span> <span class="n">qw</span><span class="o">.</span><span class="n">QMainWindow</span><span class="p">()</span>
    <span class="n">main_window</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
    <span class="n">wdg</span> <span class="o">=</span> <span class="n">qw</span><span class="o">.</span><span class="n">QWidget</span><span class="p">()</span>
    <span class="n">main_window</span><span class="o">.</span><span class="n">setCentralWidget</span><span class="p">(</span><span class="n">wdg</span><span class="p">)</span>
    <span class="n">wdg</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">lyt</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">app</span><span class="p">,</span> <span class="n">wdg</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="iris.controllers.xy_stage_controller_PI_dll.get_all_widgets" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_all_widgets</span><span class="p">(</span><span class="n">parent_widget</span><span class="p">,</span> <span class="n">get_all</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>A function that returns all widgets in a frame and optionally, its subframes (all levels)</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>parent_widget</code>
            </td>
            <td>
                  <code><span title="PySide6.QtWidgets.QWidget">QWidget</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Widget which children need to be listed</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>get_all</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True it will get the widgets in the sub-widgets as well</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<span title="PySide6.QtWidgets.QWidget">QWidget</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>list[qw.QWidget]: List of all widgets in the widget</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/utils/general.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_all_widgets</span><span class="p">(</span><span class="n">parent_widget</span><span class="p">:</span><span class="n">qw</span><span class="o">.</span><span class="n">QWidget</span><span class="p">,</span><span class="n">get_all</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">qw</span><span class="o">.</span><span class="n">QWidget</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A function that returns all widgets in a frame and optionally, its subframes (all levels)</span>

<span class="sd">    Args:</span>
<span class="sd">        parent_widget (qw.QWidget): Widget which children need to be listed</span>
<span class="sd">        get_all (bool, optional): If True it will get the widgets in the sub-widgets as well</span>

<span class="sd">    Returns:</span>
<span class="sd">        list[qw.QWidget]: List of all widgets in the widget</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">get_all</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">parent_widget</span><span class="o">.</span><span class="n">findChildren</span><span class="p">(</span><span class="n">qw</span><span class="o">.</span><span class="n">QWidget</span><span class="p">)</span>   <span class="c1"># The default findChildren() is already recursive</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># findChildren() with a search option that limits depth</span>
        <span class="c1"># For a single level, findChildren(type, options) is useful</span>
        <span class="c1"># We find widgets that are immediate children of the parent.</span>
        <span class="k">return</span> <span class="n">parent_widget</span><span class="o">.</span><span class="n">findChildren</span><span class="p">(</span><span class="n">qw</span><span class="o">.</span><span class="n">QWidget</span><span class="p">,</span> <span class="n">qc</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">FindChildOption</span><span class="o">.</span><span class="n">FindDirectChildrenOnly</span><span class="p">)</span> <span class="c1"># type: ignore</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="iris.controllers.xy_stage_controller_PI_dll.get_all_widgets_from_layout" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_all_widgets_from_layout</span><span class="p">(</span><span class="n">parent_layout</span><span class="p">,</span> <span class="n">get_all</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>A function that returns all widgets in a layout and optionally, its sub-layouts (all levels)</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>parent_layout</code>
            </td>
            <td>
                  <code><span title="PySide6.QtWidgets.QLayout">QLayout</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Layout which children need to be listed</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>get_all</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True it will get the widgets in the sub-layouts as well</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<span title="PySide6.QtWidgets.QWidget">QWidget</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>list[qw.QWidget]: List of all widgets in the layout</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/utils/general.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_all_widgets_from_layout</span><span class="p">(</span><span class="n">parent_layout</span><span class="p">:</span><span class="n">qw</span><span class="o">.</span><span class="n">QLayout</span><span class="p">,</span><span class="n">get_all</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">qw</span><span class="o">.</span><span class="n">QWidget</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A function that returns all widgets in a layout and optionally, its sub-layouts (all levels)</span>

<span class="sd">    Args:</span>
<span class="sd">        parent_layout (qw.QLayout): Layout which children need to be listed</span>
<span class="sd">        get_all (bool, optional): If True it will get the widgets in the sub-layouts as well</span>

<span class="sd">    Returns:</span>
<span class="sd">        list[qw.QWidget]: List of all widgets in the layout</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">list_widget</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">parent_layout</span><span class="o">.</span><span class="n">count</span><span class="p">()):</span>
        <span class="n">item</span> <span class="o">=</span> <span class="n">parent_layout</span><span class="o">.</span><span class="n">itemAt</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">widget</span><span class="p">():</span>
            <span class="n">list_widget</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">widget</span><span class="p">())</span>
            <span class="k">if</span> <span class="n">get_all</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">widget</span><span class="p">(),</span> <span class="n">qw</span><span class="o">.</span><span class="n">QWidget</span><span class="p">):</span>
                <span class="n">child_widgets</span> <span class="o">=</span> <span class="n">get_all_widgets</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">widget</span><span class="p">(),</span> <span class="n">get_all</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                <span class="n">list_widget</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">child_widgets</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">item</span><span class="o">.</span><span class="n">layout</span><span class="p">()</span> <span class="ow">and</span> <span class="n">get_all</span><span class="p">:</span>
            <span class="n">child_widgets</span> <span class="o">=</span> <span class="n">get_all_widgets_from_layout</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">layout</span><span class="p">(),</span> <span class="n">get_all</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">list_widget</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">child_widgets</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">list_widget</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="iris.controllers.xy_stage_controller_PI_dll.get_timestamp_day" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_timestamp_day</span><span class="p">()</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Gets the current timestamp in days</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Timestamp without time: yymmdd</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/utils/general.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_timestamp_day</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Gets the current timestamp in days</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: Timestamp without time: yymmdd</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">dt</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%y%m</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="iris.controllers.xy_stage_controller_PI_dll.get_timestamp_sec" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_timestamp_sec</span><span class="p">()</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Gets the current timestamp in seconds</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Timestamp with time: yymmdd_hhmmss</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/utils/general.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_timestamp_sec</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Gets the current timestamp in seconds</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: Timestamp with time: yymmdd_hhmmss</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">dt</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%y%m</span><span class="si">%d</span><span class="s2">_%H%M%S&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="iris.controllers.xy_stage_controller_PI_dll.get_timestamp_us_int" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_timestamp_us_int</span><span class="p">()</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Gets the current timestamp in us as integer</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>int</code></td>            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Timestamp in us</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/utils/general.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_timestamp_us_int</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Gets the current timestamp in us as integer</span>

<span class="sd">    Returns:</span>
<span class="sd">        int: Timestamp in us</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">timestamp</span><span class="p">()</span><span class="o">*</span><span class="mf">1e6</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="iris.controllers.xy_stage_controller_PI_dll.get_timestamp_us_str" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_timestamp_us_str</span><span class="p">()</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Gets the current timestamp in us as string</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Timestamp with time and milliseconds: yymmdd_hhmmss_us(6 digits)</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/utils/general.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_timestamp_us_str</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Gets the current timestamp in us as string</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: Timestamp with time and milliseconds: yymmdd_hhmmss_us(6 digits)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">dt</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%y%m</span><span class="si">%d</span><span class="s2">_%H%M%S_</span><span class="si">%f</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="iris.controllers.xy_stage_controller_PI_dll.messagebox_request_input" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">messagebox_request_input</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">message</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">validator</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">invalid_msg</span><span class="o">=</span><span class="s1">&#39;The entered value is invalid. Please try again.&#39;</span><span class="p">,</span> <span class="n">loop_until_valid</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>A function that creates a QInputDialog to request input with optional validation.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>parent</code>
            </td>
            <td>
                  <code><span title="PySide6.QtWidgets.QWidget">QWidget</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The parent widget for the dialog (recommended).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>title</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Title of the dialog box.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>message</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Message/label to be displayed for the input field.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>default</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Default value of the input.</p>
              </div>
            </td>
            <td>
                  <code>&#39;&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>validator</code>
            </td>
            <td>
                  <code><span title="typing.Callable">Callable</span>[[<span title="str">str</span>], <span title="bool">bool</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A function that takes the 
input string and returns True if valid, False otherwise.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>invalid_msg</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Message to show if validation fails.</p>
              </div>
            </td>
            <td>
                  <code>&#39;The entered value is invalid. Please try again.&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>loop_until_valid</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, keeps asking until the input is valid 
or the user presses Cancel.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>str | None: User input string if OK was pressed and validation passed, 
        otherwise None (if Cancel was pressed).</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/utils/general.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">messagebox_request_input</span><span class="p">(</span>
        <span class="n">parent</span><span class="p">:</span> <span class="n">qw</span><span class="o">.</span><span class="n">QWidget</span><span class="p">,</span> 
        <span class="n">title</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> 
        <span class="n">message</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> 
        <span class="n">default</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
        <span class="n">validator</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="nb">str</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]</span><span class="o">|</span><span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">invalid_msg</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;The entered value is invalid. Please try again.&quot;</span><span class="p">,</span>
        <span class="n">loop_until_valid</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A function that creates a QInputDialog to request input with optional validation.</span>

<span class="sd">    Args:</span>
<span class="sd">        parent (qw.QWidget): The parent widget for the dialog (recommended).</span>
<span class="sd">        title (str): Title of the dialog box.</span>
<span class="sd">        message (str): Message/label to be displayed for the input field.</span>
<span class="sd">        default (str, optional): Default value of the input.</span>
<span class="sd">        validator (Callable[[str], bool]|None, optional): A function that takes the </span>
<span class="sd">            input string and returns True if valid, False otherwise.</span>
<span class="sd">        invalid_msg (str): Message to show if validation fails.</span>
<span class="sd">        loop_until_valid (bool): If True, keeps asking until the input is valid </span>
<span class="sd">            or the user presses Cancel.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str | None: User input string if OK was pressed and validation passed, </span>
<span class="sd">                    otherwise None (if Cancel was pressed).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">current_default</span> <span class="o">=</span> <span class="n">default</span>

    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="c1"># 1. Show the input dialog</span>
        <span class="n">user_input</span><span class="p">,</span> <span class="n">ok</span> <span class="o">=</span> <span class="n">qw</span><span class="o">.</span><span class="n">QInputDialog</span><span class="o">.</span><span class="n">getText</span><span class="p">(</span>
            <span class="n">parent</span><span class="p">,</span>
            <span class="n">title</span><span class="p">,</span>
            <span class="n">message</span><span class="p">,</span>
            <span class="n">qw</span><span class="o">.</span><span class="n">QLineEdit</span><span class="o">.</span><span class="n">Normal</span><span class="p">,</span> <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
            <span class="n">current_default</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">ok</span><span class="p">:</span> <span class="k">return</span> <span class="kc">None</span>  <span class="c1"># User pressed Cancel</span>

        <span class="n">is_valid</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="n">validator</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span> <span class="n">is_valid</span> <span class="o">=</span> <span class="n">validator</span><span class="p">(</span><span class="n">user_input</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">is_valid</span><span class="p">:</span> <span class="k">return</span> <span class="n">user_input</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">loop_until_valid</span><span class="p">:</span> <span class="k">return</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">qw</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="s2">&quot;Invalid Input&quot;</span><span class="p">,</span> <span class="n">invalid_msg</span><span class="p">)</span>
            <span class="n">current_default</span> <span class="o">=</span> <span class="n">user_input</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="iris.controllers.xy_stage_controller_PI_dll.read_update_config_file_section" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">read_update_config_file_section</span><span class="p">(</span><span class="n">dict_controllers_default</span><span class="p">,</span> <span class="n">dict_controllers_comments</span><span class="p">,</span> <span class="n">section</span><span class="p">,</span> <span class="n">config_file</span><span class="o">=</span><span class="s1">&#39;config.ini&#39;</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Read the config file and automatically add an entry if it does not exist
based on the given default values (dict form) and returns the read values
after the update. Additionally, it will also automatically append comments
given by the comments dictionary at the end of each respective key's value
in the config file. If the values are already present, it will just read the values.
If the config file is not present, it will automatically try to create one.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>dict_controllers_default</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dictionary of the default values</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>dict_controllers_comments</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dictionary of the comments for each key in the default values</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>section</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Section name in the config file</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>config_file</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Path to the config file. Defaults to 'config.ini'.</p>
              </div>
            </td>
            <td>
                  <code>&#39;config.ini&#39;</code>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="NotImplementedError">NotImplementedError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the conversion of the default value type is not implemented</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>dict</code></td>            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dictionary of the read values (after the update) in the correct format
given by the default values dictionary</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/utils/general.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">read_update_config_file_section</span><span class="p">(</span><span class="n">dict_controllers_default</span><span class="p">:</span><span class="nb">dict</span><span class="p">,</span> <span class="n">dict_controllers_comments</span><span class="p">:</span><span class="nb">dict</span><span class="p">,</span>
    <span class="n">section</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">config_file</span><span class="p">:</span><span class="nb">str</span><span class="o">=</span><span class="s1">&#39;config.ini&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Read the config file and automatically add an entry if it does not exist</span>
<span class="sd">    based on the given default values (dict form) and returns the read values</span>
<span class="sd">    after the update. Additionally, it will also automatically append comments</span>
<span class="sd">    given by the comments dictionary at the end of each respective key&#39;s value</span>
<span class="sd">    in the config file. If the values are already present, it will just read the values.</span>
<span class="sd">    If the config file is not present, it will automatically try to create one.</span>

<span class="sd">    Args:</span>
<span class="sd">        dict_controllers_default (dict): Dictionary of the default values</span>
<span class="sd">        dict_controllers_comments (dict): Dictionary of the comments for each key in the default values</span>
<span class="sd">        section (str): Section name in the config file</span>
<span class="sd">        config_file (str, optional): Path to the config file. Defaults to &#39;config.ini&#39;.</span>

<span class="sd">    Raises:</span>
<span class="sd">        NotImplementedError: If the conversion of the default value type is not implemented</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: Dictionary of the read values (after the update) in the correct format</span>
<span class="sd">            given by the default values dictionary</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">check_and_create_config_file</span><span class="p">(</span><span class="n">config_file</span><span class="p">)</span>

    <span class="c1"># Read the config file and automatically add an entry if it does not exist </span>
    <span class="c1"># (along with its comments)</span>
    <span class="n">updater</span> <span class="o">=</span> <span class="n">ConfigUpdater</span><span class="p">(</span><span class="n">allow_no_value</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">updater</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">config_file</span><span class="p">)</span>

    <span class="n">splitter</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\t</span><span class="s1">&#39;</span>
    <span class="n">commenter</span> <span class="o">=</span> <span class="s1">&#39;; &#39;</span>
    <span class="n">list_splitters</span> <span class="o">=</span> <span class="p">[</span><span class="n">splitter</span><span class="p">,</span> <span class="n">commenter</span><span class="p">]</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">updater</span><span class="o">.</span><span class="n">has_section</span><span class="p">(</span><span class="n">section</span><span class="p">):</span>
        <span class="n">updater</span><span class="o">.</span><span class="n">add_section</span><span class="p">(</span><span class="n">section</span><span class="p">)</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">config_file</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">updater</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">dict_controllers_default</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">updater</span><span class="o">.</span><span class="n">has_option</span><span class="p">(</span><span class="n">section</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">dict_controllers_default</span><span class="p">[</span><span class="n">key</span><span class="p">])</span> <span class="o">!=</span> <span class="nb">str</span><span class="p">:</span>
                <span class="n">updater</span><span class="o">.</span><span class="n">set</span><span class="p">(</span>
                    <span class="n">section</span><span class="o">=</span><span class="n">section</span><span class="p">,</span>
                    <span class="n">option</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
                    <span class="n">value</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">dict_controllers_default</span><span class="p">[</span><span class="n">key</span><span class="p">])</span> <span class="o">+</span> <span class="n">splitter</span> <span class="o">+</span> <span class="n">commenter</span> <span class="o">+</span> <span class="n">dict_controllers_comments</span><span class="p">[</span><span class="n">key</span><span class="p">],</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>   <span class="c1"># Add quotes to the string values</span>
                <span class="n">updater</span><span class="o">.</span><span class="n">set</span><span class="p">(</span>
                    <span class="n">section</span><span class="o">=</span><span class="n">section</span><span class="p">,</span>
                    <span class="n">option</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
                    <span class="n">value</span><span class="o">=</span><span class="s1">&#39;&quot;&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">dict_controllers_default</span><span class="p">[</span><span class="n">key</span><span class="p">])</span> <span class="o">+</span> <span class="s1">&#39;&quot;&#39;</span> <span class="o">+</span> <span class="n">splitter</span> <span class="o">+</span> <span class="n">commenter</span> <span class="o">+</span> <span class="n">dict_controllers_comments</span><span class="p">[</span><span class="n">key</span><span class="p">],</span>
                <span class="p">)</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">config_file</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span> <span class="n">updater</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

    <span class="n">dict_controllers_read</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">updater</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">config_file</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span><span class="n">value</span> <span class="ow">in</span> <span class="n">updater</span><span class="o">.</span><span class="n">items</span><span class="p">(</span><span class="n">section</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">dict_controllers_default</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span> <span class="k">continue</span>
        <span class="n">def_val_type</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">dict_controllers_default</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>

        <span class="c1"># Process different types of values separately</span>
        <span class="c1"># note that the splits are to remove the comments</span>
        <span class="k">if</span> <span class="n">def_val_type</span> <span class="o">==</span> <span class="nb">bool</span><span class="p">:</span>
            <span class="n">read_line</span><span class="p">:</span><span class="nb">str</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">value</span>
            <span class="k">for</span> <span class="n">splitter</span> <span class="ow">in</span> <span class="n">list_splitters</span><span class="p">:</span>
                <span class="n">read_line</span> <span class="o">=</span> <span class="n">read_line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">splitter</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">val</span> <span class="o">=</span> <span class="n">read_line</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">val</span> <span class="o">!=</span> <span class="s1">&#39;true&#39;</span> <span class="ow">and</span> <span class="n">val</span> <span class="o">!=</span> <span class="s1">&#39;false&#39;</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error: </span><span class="si">{</span><span class="n">val</span><span class="si">}</span><span class="s2"> is not a boolean value.&quot;</span><span class="p">)</span>
            <span class="n">dict_controllers_read</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">read_line</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;true&#39;</span>
        <span class="k">elif</span> <span class="n">def_val_type</span> <span class="ow">in</span> <span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
            <span class="n">read_line</span><span class="p">:</span><span class="nb">str</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">value</span>
            <span class="k">for</span> <span class="n">splitter</span> <span class="ow">in</span> <span class="n">list_splitters</span><span class="p">:</span>
                <span class="n">read_line</span> <span class="o">=</span> <span class="n">read_line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">splitter</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">conv_val</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">dict_controllers_default</span><span class="p">[</span><span class="n">key</span><span class="p">])(</span><span class="n">read_line</span><span class="p">)</span>
            <span class="n">dict_controllers_read</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">conv_val</span>
        <span class="k">elif</span> <span class="n">def_val_type</span> <span class="o">==</span> <span class="nb">str</span><span class="p">:</span>
            <span class="k">if</span> <span class="s1">&#39;&quot;&#39;</span> <span class="ow">in</span> <span class="n">value</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
                <span class="n">conv_val</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">conv_val</span><span class="p">:</span><span class="nb">str</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">value</span>
                <span class="k">for</span> <span class="n">splitter</span> <span class="ow">in</span> <span class="n">list_splitters</span><span class="p">:</span>
                    <span class="n">conv_val</span> <span class="o">=</span> <span class="n">conv_val</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">splitter</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">dict_controllers_read</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">conv_val</span>
        <span class="k">else</span><span class="p">:</span> <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error: </span><span class="si">{</span><span class="n">def_val_type</span><span class="si">}</span><span class="s2"> conversion is not implemented.&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">dict_controllers_read</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="iris.controllers.xy_stage_controller_PI_dll.run_with_timeout" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">run_with_timeout</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(),</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{},</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Runs a function with a timeout.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>func</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The function to execute.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>args</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Tuple of positional arguments for the function.</p>
              </div>
            </td>
            <td>
                  <code>()</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>kwargs</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dictionary of keyword arguments for the function.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>timeout</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The timeout in seconds.</p>
              </div>
            </td>
            <td>
                  <code>5</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The result of the function if it completes within the timeout.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="iris.utils.general.TimeoutError">TimeoutError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the function does not complete within the timeout.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/utils/general.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">run_with_timeout</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(),</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{},</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">5</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Runs a function with a timeout.</span>

<span class="sd">    Args:</span>
<span class="sd">        func: The function to execute.</span>
<span class="sd">        args: Tuple of positional arguments for the function.</span>
<span class="sd">        kwargs: Dictionary of keyword arguments for the function.</span>
<span class="sd">        timeout: The timeout in seconds.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The result of the function if it completes within the timeout.</span>

<span class="sd">    Raises:</span>
<span class="sd">        TimeoutError: If the function does not complete within the timeout.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">result</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">exception</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">finished</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Event</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">target</span><span class="p">():</span>
        <span class="k">nonlocal</span> <span class="n">result</span><span class="p">,</span> <span class="n">exception</span>
        <span class="k">try</span><span class="p">:</span> <span class="n">result</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span> <span class="n">exception</span> <span class="o">=</span> <span class="n">e</span>
        <span class="k">finally</span><span class="p">:</span> <span class="n">finished</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>

    <span class="n">timer</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Timer</span><span class="p">(</span><span class="n">timeout</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">finished</span><span class="o">.</span><span class="n">set</span><span class="p">())</span>
    <span class="n">thread</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">target</span><span class="p">)</span>

    <span class="n">timer</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
    <span class="n">thread</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

    <span class="n">finished</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>
    <span class="n">timer</span><span class="o">.</span><span class="n">cancel</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">thread</span><span class="o">.</span><span class="n">is_alive</span><span class="p">():</span>
        <span class="k">raise</span> <span class="ne">TimeoutError</span><span class="p">(</span><span class="s2">&quot;Function execution timed out&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">exception</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">exception</span>

    <span class="k">return</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="iris.controllers.xy_stage_controller_PI_dll.test_movecontinuous_slow_with_coorRecord" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">test_movecontinuous_slow_with_coorRecord</span><span class="p">(</span><span class="n">rel_speed</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Test the continuous movement with a slow velocity and record the coordinates at the same time.
The coordinates are then reported at the end of the movement.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/controllers/xy_stage_controller_PI_dll.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">825</span>
<span class="normal">826</span>
<span class="normal">827</span>
<span class="normal">828</span>
<span class="normal">829</span>
<span class="normal">830</span>
<span class="normal">831</span>
<span class="normal">832</span>
<span class="normal">833</span>
<span class="normal">834</span>
<span class="normal">835</span>
<span class="normal">836</span>
<span class="normal">837</span>
<span class="normal">838</span>
<span class="normal">839</span>
<span class="normal">840</span>
<span class="normal">841</span>
<span class="normal">842</span>
<span class="normal">843</span>
<span class="normal">844</span>
<span class="normal">845</span>
<span class="normal">846</span>
<span class="normal">847</span>
<span class="normal">848</span>
<span class="normal">849</span>
<span class="normal">850</span>
<span class="normal">851</span>
<span class="normal">852</span>
<span class="normal">853</span>
<span class="normal">854</span>
<span class="normal">855</span>
<span class="normal">856</span>
<span class="normal">857</span>
<span class="normal">858</span>
<span class="normal">859</span>
<span class="normal">860</span>
<span class="normal">861</span>
<span class="normal">862</span>
<span class="normal">863</span>
<span class="normal">864</span>
<span class="normal">865</span>
<span class="normal">866</span>
<span class="normal">867</span>
<span class="normal">868</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">test_movecontinuous_slow_with_coorRecord</span><span class="p">(</span><span class="n">rel_speed</span><span class="o">=</span><span class="mf">0.2</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Test the continuous movement with a slow velocity and record the coordinates at the same time.</span>
<span class="sd">    The coordinates are then reported at the end of the movement.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>

    <span class="n">xystage</span> <span class="o">=</span> <span class="n">XYController_PI</span><span class="p">()</span>
    <span class="n">xystage</span><span class="o">.</span><span class="n">homing_n_coor_calibration</span><span class="p">()</span>
    <span class="n">xystage</span><span class="o">.</span><span class="n">set_vel_acc_relative</span><span class="p">(</span><span class="n">vel_homing</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">vel_move</span><span class="o">=</span><span class="n">rel_speed</span><span class="p">,</span> <span class="n">acc_move</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>

    <span class="nd">@thread_assign</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">record_coor</span><span class="p">(</span><span class="n">flg</span><span class="p">:</span><span class="n">threading</span><span class="o">.</span><span class="n">Event</span><span class="p">,</span> <span class="n">ts_coor_list</span><span class="p">:</span><span class="nb">list</span><span class="p">):</span>
        <span class="k">while</span> <span class="ow">not</span> <span class="n">flg</span><span class="o">.</span><span class="n">is_set</span><span class="p">():</span>
            <span class="n">ts</span><span class="p">,</span><span class="n">coorx</span><span class="p">,</span><span class="n">coory</span> <span class="o">=</span> <span class="n">xystage</span><span class="o">.</span><span class="n">get_coordinates_ts</span><span class="p">()</span>
            <span class="n">ts_coor_list</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">ts</span><span class="p">,</span><span class="n">coorx</span><span class="p">,</span><span class="n">coory</span><span class="p">))</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">20</span><span class="o">/</span><span class="mi">1000</span><span class="p">)</span> <span class="c1"># 20 ms</span>

    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Move continuous test&#39;</span><span class="p">)</span>
    <span class="n">xystage</span><span class="o">.</span><span class="n">move_continuous</span><span class="p">(</span><span class="s1">&#39;xfwd&#39;</span><span class="p">)</span>
    <span class="n">xystage</span><span class="o">.</span><span class="n">move_continuous</span><span class="p">(</span><span class="s1">&#39;yfwd&#39;</span><span class="p">)</span>

    <span class="c1"># Record the coordinates</span>
    <span class="n">flg_stop</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Event</span><span class="p">()</span>
    <span class="n">ts_coor_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">record_coor</span><span class="p">(</span><span class="n">flg_stop</span><span class="p">,</span><span class="n">ts_coor_list</span><span class="p">)</span>

    <span class="c1"># Allow the stage to move for 2 seconds</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
    <span class="n">xystage</span><span class="o">.</span><span class="n">stop_move</span><span class="p">()</span>
    <span class="n">flg_stop</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>

    <span class="c1"># Plot the coordinates</span>
    <span class="n">ts_coor_list</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">ts_coor_list</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ts_coor_list</span><span class="p">[:,</span><span class="mi">0</span><span class="p">],</span><span class="n">ts_coor_list</span><span class="p">[:,</span><span class="mi">1</span><span class="p">],</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;X-coordinate&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ts_coor_list</span><span class="p">[:,</span><span class="mi">0</span><span class="p">],</span><span class="n">ts_coor_list</span><span class="p">[:,</span><span class="mi">2</span><span class="p">],</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;Y-coordinate&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Timestamp (us)&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Coordinate (mm)&#39;</span><span class="p">)</span>

    <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

    <span class="n">xystage</span><span class="o">.</span><span class="n">terminate</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Termination complete&#39;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="iris.controllers.xy_stage_controller_PI_dll.validator_float_greaterThanZero" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">validator_float_greaterThanZero</span><span class="p">(</span><span class="n">input_str</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>A validator function that checks if the input string can be converted to a non-negative float</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>input_str</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Input string to validate</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>bool</code></td>            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if valid, False otherwise</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/utils/general.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">validator_float_greaterThanZero</span><span class="p">(</span><span class="n">input_str</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A validator function that checks if the input string can be converted to a non-negative float</span>

<span class="sd">    Args:</span>
<span class="sd">        input_str (str): Input string to validate</span>

<span class="sd">    Returns:</span>
<span class="sd">        bool: True if valid, False otherwise</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">val</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">input_str</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">val</span> <span class="o">&gt;=</span> <span class="mf">0.0</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../../..", "features": [], "search": "../../../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>