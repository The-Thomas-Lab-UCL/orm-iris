
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../measurement_coordinates/">
      
      
        <link rel="next" href="../../gui/dataHub_MeaImg/">
      
      
        
      
      
      <link rel="icon" href="../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>measurement_image - ORM-IRIS Library Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.484c7ddc.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#iris.data.measurement_image" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../.." title="ORM-IRIS Library Documentation" class="md-header__button md-logo" aria-label="ORM-IRIS Library Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ORM-IRIS Library Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              measurement_image
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../.." title="ORM-IRIS Library Documentation" class="md-nav__button md-logo" aria-label="ORM-IRIS Library Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    ORM-IRIS Library Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    API Reference
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    API Reference
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1" checked>
        
          
          <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    iris
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    iris
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_1" >
        
          
          <label class="md-nav__link" for="__nav_2_1_1" id="__nav_2_1_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    calibration
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_1_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    calibration
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../calibration/calibration_generator/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    calibration_generator
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../calibration/test_calibrator_wavelength/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    test_calibrator_wavelength
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_2" >
        
          
          <label class="md-nav__link" for="__nav_2_1_2" id="__nav_2_1_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    controllers
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_1_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    controllers
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../controllers/camera_controller_dummy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    camera_controller_dummy
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../controllers/camera_controller_thorlabs_color/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    camera_controller_thorlabs_color
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../controllers/camera_controller_thorlabs_mono/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    camera_controller_thorlabs_mono
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../controllers/camera_controller_webcam/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    camera_controller_webcam
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../controllers/class_camera_controller/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    class_camera_controller
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../controllers/class_spectrometer_controller/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    class_spectrometer_controller
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../controllers/class_xy_stage_controller/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    class_xy_stage_controller
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../controllers/class_z_stage_controller/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    class_z_stage_controller
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../controllers/mcm301_wrapper/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    mcm301_wrapper
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../controllers/oceandirect_wrapper/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    oceandirect_wrapper
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../controllers/raman_spectrometer_controller_Andor_dll/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    raman_spectrometer_controller_Andor_dll
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../controllers/raman_spectrometer_controller_Andor_pylablib/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    raman_spectrometer_controller_Andor_pylablib
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../controllers/raman_spectrometer_controller_PI_dll/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    raman_spectrometer_controller_PI_dll
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../controllers/raman_spectrometer_controller_PI_pylablib/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    raman_spectrometer_controller_PI_pylablib
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../controllers/raman_spectrometer_controller_PI_trial/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    raman_spectrometer_controller_PI_trial
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../controllers/raman_spectrometer_controller_QEPro/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    raman_spectrometer_controller_QEPro
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../controllers/raman_spectrometer_controller_WasatchEnlighten/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    raman_spectrometer_controller_WasatchEnlighten
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../controllers/raman_spectrometer_controller_dummy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    raman_spectrometer_controller_dummy
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../controllers/xy_stage_controller_PI/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    xy_stage_controller_PI
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../controllers/xy_stage_controller_PI_dll/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    xy_stage_controller_PI_dll
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../controllers/xy_stage_controller_dummy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    xy_stage_controller_dummy
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../controllers/xy_stage_controller_m30xy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    xy_stage_controller_m30xy
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../controllers/xy_stage_controller_zaber/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    xy_stage_controller_zaber
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../controllers/z_stage_controller_dummy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    z_stage_controller_dummy
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../controllers/z_stage_controller_mcm301/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    z_stage_controller_mcm301
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../controllers/z_stage_controller_pfm450/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    z_stage_controller_pfm450
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../controllers/z_stage_controller_z825b/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    z_stage_controller_z825b
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_3" checked>
        
          
          <label class="md-nav__link" for="__nav_2_1_3" id="__nav_2_1_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    data
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_1_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_1_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    data
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../calibration_objective/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    calibration_objective
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../measurement_Raman/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    measurement_Raman
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../measurement_RamanMap/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    measurement_RamanMap
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../measurement_coordinates/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    measurement_coordinates
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    measurement_image
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    measurement_image
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#iris.data.measurement_image" class="md-nav__link">
    <span class="md-ellipsis">
      
        measurement_image
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Handler" class="md-nav__link">
    <span class="md-ellipsis">
      
        MeaImg_Handler
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="MeaImg_Handler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Handler.load_ImageMeasurementHub_database" class="md-nav__link">
    <span class="md-ellipsis">
      
        load_ImageMeasurementHub_database
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Handler.load_ImageMeasurementUnit_database" class="md-nav__link">
    <span class="md-ellipsis">
      
        load_ImageMeasurementUnit_database
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Handler.load_calibration_json" class="md-nav__link">
    <span class="md-ellipsis">
      
        load_calibration_json
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Handler.save_ImageMeasurementHub_database" class="md-nav__link">
    <span class="md-ellipsis">
      
        save_ImageMeasurementHub_database
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Handler.save_ImageMeasurementUnit_database" class="md-nav__link">
    <span class="md-ellipsis">
      
        save_ImageMeasurementUnit_database
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Handler.save_calibration_json" class="md-nav__link">
    <span class="md-ellipsis">
      
        save_calibration_json
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Handler.save_calibration_json_from_ImgMea" class="md-nav__link">
    <span class="md-ellipsis">
      
        save_calibration_json_from_ImgMea
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Hub" class="md-nav__link">
    <span class="md-ellipsis">
      
        MeaImg_Hub
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="MeaImg_Hub">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Hub.add_observer" class="md-nav__link">
    <span class="md-ellipsis">
      
        add_observer
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Hub.append_ImageMeasurementUnit" class="md-nav__link">
    <span class="md-ellipsis">
      
        append_ImageMeasurementUnit
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Hub.check_measurement_exist" class="md-nav__link">
    <span class="md-ellipsis">
      
        check_measurement_exist
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Hub.get_ImageMeasurementUnit" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_ImageMeasurementUnit
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Hub.get_dict_IDtoName" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_dict_IDtoName
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Hub.get_dict_nameToID" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_dict_nameToID
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Hub.get_list_ImageUnit_ids" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_list_ImageUnit_ids
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Hub.get_list_ImageUnit_names" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_list_ImageUnit_names
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Hub.get_summary_units" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_summary_units
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Hub.notify_observers" class="md-nav__link">
    <span class="md-ellipsis">
      
        notify_observers
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Hub.remove_ImageMeasurementUnit" class="md-nav__link">
    <span class="md-ellipsis">
      
        remove_ImageMeasurementUnit
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Hub.remove_observer" class="md-nav__link">
    <span class="md-ellipsis">
      
        remove_observer
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Hub.reset_ImageMeasurementUnits" class="md-nav__link">
    <span class="md-ellipsis">
      
        reset_ImageMeasurementUnits
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Hub.test_generate_dummy" class="md-nav__link">
    <span class="md-ellipsis">
      
        test_generate_dummy
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Unit" class="md-nav__link">
    <span class="md-ellipsis">
      
        MeaImg_Unit
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="MeaImg_Unit">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Unit.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __init__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Unit.add_measurement" class="md-nav__link">
    <span class="md-ellipsis">
      
        add_measurement
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Unit.check_calibration_exist" class="md-nav__link">
    <span class="md-ellipsis">
      
        check_calibration_exist
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Unit.check_measurement_exist" class="md-nav__link">
    <span class="md-ellipsis">
      
        check_measurement_exist
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Unit.check_readyForProcessing" class="md-nav__link">
    <span class="md-ellipsis">
      
        check_readyForProcessing
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Unit.convert_imgpt2stg" class="md-nav__link">
    <span class="md-ellipsis">
      
        convert_imgpt2stg
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Unit.convert_mea2stg" class="md-nav__link">
    <span class="md-ellipsis">
      
        convert_mea2stg
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Unit.convert_stg2imgpt" class="md-nav__link">
    <span class="md-ellipsis">
      
        convert_stg2imgpt
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Unit.convert_stg2mea" class="md-nav__link">
    <span class="md-ellipsis">
      
        convert_stg2mea
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Unit.get_IdName" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_IdName
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Unit.get_ImageMeasurement_Calibration" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_ImageMeasurement_Calibration
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Unit.get_calibration_asdict" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_calibration_asdict
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Unit.get_dict_measurement" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_dict_measurement
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Unit.get_dict_measurement_types" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_dict_measurement_types
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Unit.get_image_all_stitched" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_image_all_stitched
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Unit.get_metadata" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_metadata
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Unit.get_metadata_types" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_metadata_types
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Unit.get_numMeasurements" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_numMeasurements
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Unit.refresh_metadata" class="md-nav__link">
    <span class="md-ellipsis">
      
        refresh_metadata
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Unit.reprocess_lowres_images" class="md-nav__link">
    <span class="md-ellipsis">
      
        reprocess_lowres_images
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Unit.reset_measurement" class="md-nav__link">
    <span class="md-ellipsis">
      
        reset_measurement
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Unit.set_calibration_ImageMeasurement_Calibration" class="md-nav__link">
    <span class="md-ellipsis">
      
        set_calibration_ImageMeasurement_Calibration
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Unit.set_dict_measurement_fromfile" class="md-nav__link">
    <span class="md-ellipsis">
      
        set_dict_measurement_fromfile
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Unit.set_metadata_fromfile" class="md-nav__link">
    <span class="md-ellipsis">
      
        set_metadata_fromfile
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Unit.set_name" class="md-nav__link">
    <span class="md-ellipsis">
      
        set_name
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Unit.test_generate_dummy" class="md-nav__link">
    <span class="md-ellipsis">
      
        test_generate_dummy
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.data.measurement_image.check_and_create_config_file" class="md-nav__link">
    <span class="md-ellipsis">
      
        check_and_create_config_file
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.data.measurement_image.convert_ramanshift_to_wavelength" class="md-nav__link">
    <span class="md-ellipsis">
      
        convert_ramanshift_to_wavelength
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.data.measurement_image.convert_timestamp_us_int_to_str" class="md-nav__link">
    <span class="md-ellipsis">
      
        convert_timestamp_us_int_to_str
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.data.measurement_image.convert_timestamp_us_str_to_int" class="md-nav__link">
    <span class="md-ellipsis">
      
        convert_timestamp_us_str_to_int
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.data.measurement_image.convert_wavelength_to_ramanshift" class="md-nav__link">
    <span class="md-ellipsis">
      
        convert_wavelength_to_ramanshift
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.data.measurement_image.generate_test_app" class="md-nav__link">
    <span class="md-ellipsis">
      
        generate_test_app
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.data.measurement_image.get_all_widgets" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_all_widgets
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.data.measurement_image.get_all_widgets_from_layout" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_all_widgets_from_layout
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.data.measurement_image.get_timestamp_day" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_timestamp_day
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.data.measurement_image.get_timestamp_sec" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_timestamp_sec
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.data.measurement_image.get_timestamp_us_int" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_timestamp_us_int
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.data.measurement_image.get_timestamp_us_str" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_timestamp_us_str
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.data.measurement_image.messagebox_request_input" class="md-nav__link">
    <span class="md-ellipsis">
      
        messagebox_request_input
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.data.measurement_image.read_update_config_file_section" class="md-nav__link">
    <span class="md-ellipsis">
      
        read_update_config_file_section
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.data.measurement_image.run_with_timeout" class="md-nav__link">
    <span class="md-ellipsis">
      
        run_with_timeout
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.data.measurement_image.validator_float_greaterThanZero" class="md-nav__link">
    <span class="md-ellipsis">
      
        validator_float_greaterThanZero
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_4" >
        
          
          <label class="md-nav__link" for="__nav_2_1_4" id="__nav_2_1_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    gui
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_1_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    gui
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/dataHub_MeaImg/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    dataHub_MeaImg
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/dataHub_MeaRMap/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    dataHub_MeaRMap
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/hilvl_Brightfield/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    hilvl_Brightfield
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/hilvl_Raman/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    hilvl_Raman
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/hilvl_coorGen/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    hilvl_coorGen
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_4_6" >
        
          
          <label class="md-nav__link" for="__nav_2_1_4_6" id="__nav_2_1_4_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    image_calibration
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_1_4_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1_4_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    image_calibration
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/image_calibration/Canvas_ROIdefinition/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Canvas_ROIdefinition
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/image_calibration/objective_calibration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    objective_calibration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/image_calibration/plotter_heatmap_overlay/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    plotter_heatmap_overlay
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/motion_video/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    motion_video
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/raman/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    raman
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/shortcut_handler/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    shortcut_handler
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_4_10" >
        
          
          <label class="md-nav__link" for="__nav_2_1_4_10" id="__nav_2_1_4_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    submodules
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_1_4_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1_4_10">
            <span class="md-nav__icon md-icon"></span>
            
  
    submodules
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/submodules/heatmap_plotter_MeaRMap/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    heatmap_plotter_MeaRMap
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/submodules/image_tiling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    image_tiling
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_4_10_3" >
        
          
          <label class="md-nav__link" for="__nav_2_1_4_10_3" id="__nav_2_1_4_10_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    meaCoor_generator
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_2_1_4_10_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1_4_10_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    meaCoor_generator
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/submodules/meaCoor_generator/line_zScan/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    line_zScan
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/submodules/meaCoor_generator/points_image/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    points_image
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/submodules/meaCoor_generator/rectangle_aroundCentre/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    rectangle_aroundCentre
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/submodules/meaCoor_generator/rectangle_endToEnd/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    rectangle_endToEnd
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/submodules/meaCoor_generator/rectangle_image/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    rectangle_image
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/submodules/meaCoor_generator/rectangle_video/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    rectangle_video
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/submodules/meaCoor_generator/singlePoint_zScan/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    singlePoint_zScan
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/submodules/meaCoor_generator/ssfrm_tilemthd1_rect_around/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ssfrm_tilemthd1_rect_around
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_4_10_4" >
        
          
          <label class="md-nav__link" for="__nav_2_1_4_10_4" id="__nav_2_1_4_10_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    meaCoor_modifier
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_2_1_4_10_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1_4_10_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    meaCoor_modifier
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/submodules/meaCoor_modifier/every_z/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    every_z
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/submodules/meaCoor_modifier/gridify/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    gridify
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/submodules/meaCoor_modifier/topology_visualiser/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    topology_visualiser
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/submodules/meaCoor_modifier/translateXYZ/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    translateXYZ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/submodules/meaCoor_modifier/zInterpolate/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    zInterpolate
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/submodules/peakfinder_plotter_MeaRaman/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    peakfinder_plotter_MeaRaman
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/timestamp_coorshift/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    timestamp_coorshift
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../main_analyser/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    main_analyser
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_6" >
        
          
          <label class="md-nav__link" for="__nav_2_1_6" id="__nav_2_1_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    multiprocessing
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_1_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    multiprocessing
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../multiprocessing/basemanager/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    basemanager
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../multiprocessing/dataStreamer_Raman/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    dataStreamer_Raman
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../multiprocessing/dataStreamer_StageCam/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    dataStreamer_StageCam
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_7" >
        
          
          <label class="md-nav__link" for="__nav_2_1_7" id="__nav_2_1_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    resources
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_1_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    resources
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_7_1" >
        
          
          <label class="md-nav__link" for="__nav_2_1_7_1" id="__nav_2_1_7_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    coordinate_generators
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_1_7_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1_7_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    coordinate_generators
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/coordinate_generators/convert_2Dto3D_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    convert_2Dto3D_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/coordinate_generators/point_image_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    point_image_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/coordinate_generators/point_zScanLinear_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    point_zScanLinear_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/coordinate_generators/rect_aroundcentre_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    rect_aroundcentre_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/coordinate_generators/rect_image_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    rect_image_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/coordinate_generators/rect_startend_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    rect_startend_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/coordinate_generators/rect_video_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    rect_video_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_7_2" >
        
          
          <label class="md-nav__link" for="__nav_2_1_7_2" id="__nav_2_1_7_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    coordinate_modifiers
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_1_7_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1_7_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    coordinate_modifiers
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/coordinate_modifiers/every_z_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    every_z_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/coordinate_modifiers/gridify_setup_finetuning_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    gridify_setup_finetuning_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/coordinate_modifiers/gridify_setup_naming_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    gridify_setup_naming_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/coordinate_modifiers/gridify_setup_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    gridify_setup_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/coordinate_modifiers/topology_visuliser_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    topology_visuliser_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/coordinate_modifiers/translator_xyz_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    translator_xyz_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/coordinate_modifiers/zInterpolate_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    zInterpolate_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/dataHubPlus_Raman_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    dataHubPlus_Raman_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/dataHub_Raman_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    dataHub_Raman_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/dataHub_coor_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    dataHub_coor_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/dataHub_image_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    dataHub_image_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/heatmap_plotter_overlay_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    heatmap_plotter_overlay_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/heatmap_plotter_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    heatmap_plotter_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/hilvl_Raman_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    hilvl_Raman_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/hilvl_brightfield_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    hilvl_brightfield_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/hilvl_coorGen_coorMod_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    hilvl_coorGen_coorMod_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/hilvl_coorGen_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    hilvl_coorGen_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/main_analyser_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    main_analyser_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/main_controller_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    main_controller_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_7_15" >
        
          
          <label class="md-nav__link" for="__nav_2_1_7_15" id="__nav_2_1_7_15_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    motion_video
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_1_7_15_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1_7_15">
            <span class="md-nav__icon md-icon"></span>
            
  
    motion_video
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/motion_video/brightfieldcontrol_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    brightfieldcontrol_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/motion_video/stagecontrol_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    stagecontrol_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/objective_calibration_controls_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    objective_calibration_controls_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/objective_calibration_main_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    objective_calibration_main_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/objectives_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    objectives_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/raman_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    raman_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/spectra_peak_finder_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    spectra_peak_finder_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/spectrometer_calibration_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    spectrometer_calibration_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/tiling_method_control_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    tiling_method_control_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/tiling_method_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    tiling_method_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_8" >
        
          
          <label class="md-nav__link" for="__nav_2_1_8" id="__nav_2_1_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    utils
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_1_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    utils
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/general/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    general
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/gridify/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    gridify
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#iris.data.measurement_image" class="md-nav__link">
    <span class="md-ellipsis">
      
        measurement_image
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Handler" class="md-nav__link">
    <span class="md-ellipsis">
      
        MeaImg_Handler
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="MeaImg_Handler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Handler.load_ImageMeasurementHub_database" class="md-nav__link">
    <span class="md-ellipsis">
      
        load_ImageMeasurementHub_database
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Handler.load_ImageMeasurementUnit_database" class="md-nav__link">
    <span class="md-ellipsis">
      
        load_ImageMeasurementUnit_database
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Handler.load_calibration_json" class="md-nav__link">
    <span class="md-ellipsis">
      
        load_calibration_json
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Handler.save_ImageMeasurementHub_database" class="md-nav__link">
    <span class="md-ellipsis">
      
        save_ImageMeasurementHub_database
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Handler.save_ImageMeasurementUnit_database" class="md-nav__link">
    <span class="md-ellipsis">
      
        save_ImageMeasurementUnit_database
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Handler.save_calibration_json" class="md-nav__link">
    <span class="md-ellipsis">
      
        save_calibration_json
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Handler.save_calibration_json_from_ImgMea" class="md-nav__link">
    <span class="md-ellipsis">
      
        save_calibration_json_from_ImgMea
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Hub" class="md-nav__link">
    <span class="md-ellipsis">
      
        MeaImg_Hub
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="MeaImg_Hub">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Hub.add_observer" class="md-nav__link">
    <span class="md-ellipsis">
      
        add_observer
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Hub.append_ImageMeasurementUnit" class="md-nav__link">
    <span class="md-ellipsis">
      
        append_ImageMeasurementUnit
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Hub.check_measurement_exist" class="md-nav__link">
    <span class="md-ellipsis">
      
        check_measurement_exist
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Hub.get_ImageMeasurementUnit" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_ImageMeasurementUnit
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Hub.get_dict_IDtoName" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_dict_IDtoName
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Hub.get_dict_nameToID" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_dict_nameToID
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Hub.get_list_ImageUnit_ids" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_list_ImageUnit_ids
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Hub.get_list_ImageUnit_names" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_list_ImageUnit_names
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Hub.get_summary_units" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_summary_units
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Hub.notify_observers" class="md-nav__link">
    <span class="md-ellipsis">
      
        notify_observers
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Hub.remove_ImageMeasurementUnit" class="md-nav__link">
    <span class="md-ellipsis">
      
        remove_ImageMeasurementUnit
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Hub.remove_observer" class="md-nav__link">
    <span class="md-ellipsis">
      
        remove_observer
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Hub.reset_ImageMeasurementUnits" class="md-nav__link">
    <span class="md-ellipsis">
      
        reset_ImageMeasurementUnits
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Hub.test_generate_dummy" class="md-nav__link">
    <span class="md-ellipsis">
      
        test_generate_dummy
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Unit" class="md-nav__link">
    <span class="md-ellipsis">
      
        MeaImg_Unit
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="MeaImg_Unit">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Unit.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __init__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Unit.add_measurement" class="md-nav__link">
    <span class="md-ellipsis">
      
        add_measurement
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Unit.check_calibration_exist" class="md-nav__link">
    <span class="md-ellipsis">
      
        check_calibration_exist
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Unit.check_measurement_exist" class="md-nav__link">
    <span class="md-ellipsis">
      
        check_measurement_exist
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Unit.check_readyForProcessing" class="md-nav__link">
    <span class="md-ellipsis">
      
        check_readyForProcessing
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Unit.convert_imgpt2stg" class="md-nav__link">
    <span class="md-ellipsis">
      
        convert_imgpt2stg
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Unit.convert_mea2stg" class="md-nav__link">
    <span class="md-ellipsis">
      
        convert_mea2stg
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Unit.convert_stg2imgpt" class="md-nav__link">
    <span class="md-ellipsis">
      
        convert_stg2imgpt
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Unit.convert_stg2mea" class="md-nav__link">
    <span class="md-ellipsis">
      
        convert_stg2mea
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Unit.get_IdName" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_IdName
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Unit.get_ImageMeasurement_Calibration" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_ImageMeasurement_Calibration
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Unit.get_calibration_asdict" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_calibration_asdict
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Unit.get_dict_measurement" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_dict_measurement
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Unit.get_dict_measurement_types" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_dict_measurement_types
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Unit.get_image_all_stitched" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_image_all_stitched
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Unit.get_metadata" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_metadata
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Unit.get_metadata_types" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_metadata_types
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Unit.get_numMeasurements" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_numMeasurements
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Unit.refresh_metadata" class="md-nav__link">
    <span class="md-ellipsis">
      
        refresh_metadata
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Unit.reprocess_lowres_images" class="md-nav__link">
    <span class="md-ellipsis">
      
        reprocess_lowres_images
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Unit.reset_measurement" class="md-nav__link">
    <span class="md-ellipsis">
      
        reset_measurement
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Unit.set_calibration_ImageMeasurement_Calibration" class="md-nav__link">
    <span class="md-ellipsis">
      
        set_calibration_ImageMeasurement_Calibration
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Unit.set_dict_measurement_fromfile" class="md-nav__link">
    <span class="md-ellipsis">
      
        set_dict_measurement_fromfile
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Unit.set_metadata_fromfile" class="md-nav__link">
    <span class="md-ellipsis">
      
        set_metadata_fromfile
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Unit.set_name" class="md-nav__link">
    <span class="md-ellipsis">
      
        set_name
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.data.measurement_image.MeaImg_Unit.test_generate_dummy" class="md-nav__link">
    <span class="md-ellipsis">
      
        test_generate_dummy
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.data.measurement_image.check_and_create_config_file" class="md-nav__link">
    <span class="md-ellipsis">
      
        check_and_create_config_file
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.data.measurement_image.convert_ramanshift_to_wavelength" class="md-nav__link">
    <span class="md-ellipsis">
      
        convert_ramanshift_to_wavelength
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.data.measurement_image.convert_timestamp_us_int_to_str" class="md-nav__link">
    <span class="md-ellipsis">
      
        convert_timestamp_us_int_to_str
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.data.measurement_image.convert_timestamp_us_str_to_int" class="md-nav__link">
    <span class="md-ellipsis">
      
        convert_timestamp_us_str_to_int
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.data.measurement_image.convert_wavelength_to_ramanshift" class="md-nav__link">
    <span class="md-ellipsis">
      
        convert_wavelength_to_ramanshift
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.data.measurement_image.generate_test_app" class="md-nav__link">
    <span class="md-ellipsis">
      
        generate_test_app
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.data.measurement_image.get_all_widgets" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_all_widgets
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.data.measurement_image.get_all_widgets_from_layout" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_all_widgets_from_layout
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.data.measurement_image.get_timestamp_day" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_timestamp_day
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.data.measurement_image.get_timestamp_sec" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_timestamp_sec
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.data.measurement_image.get_timestamp_us_int" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_timestamp_us_int
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.data.measurement_image.get_timestamp_us_str" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_timestamp_us_str
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.data.measurement_image.messagebox_request_input" class="md-nav__link">
    <span class="md-ellipsis">
      
        messagebox_request_input
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.data.measurement_image.read_update_config_file_section" class="md-nav__link">
    <span class="md-ellipsis">
      
        read_update_config_file_section
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.data.measurement_image.run_with_timeout" class="md-nav__link">
    <span class="md-ellipsis">
      
        run_with_timeout
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.data.measurement_image.validator_float_greaterThanZero" class="md-nav__link">
    <span class="md-ellipsis">
      
        validator_float_greaterThanZero
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



  <h1>measurement_image</h1>

<div class="doc doc-object doc-module">



<a id="iris.data.measurement_image"></a>
    <div class="doc doc-contents first">

        <p>Note:
- When developing this class, keep in mind of the following:
        - The image frame of reference is different from the stage frame of reference.
        - The display is that of the image frame of reference, whereas the coordinates are in the stage frame of reference
            i.e., flipping the conversion factor (mm/pixel) will flip the image, but the coordinates will remain the same.</p>
<pre><code>- The flip parameter inverses the image frame of reference (flips the positive and negative directions):
    - This means that when frame 1 has a stage coor of (x1,y1) and frame 2 has a stage coor of (x2,y2),
        the difference between the two frames is (x2-x1,y2-y1) in the stage frame of reference and this will
        stay constant regardless of the flip parameter value. The flip parameter, however, will change how the
        image is displayed on the screen because the difference in the image frame of reference will be
        (-(xp2-xp1),-(yp2-yp1)) if the flip parameter is True.
        (where xp is the pixel coordinate = x/scale*flip parameter). This is important for the image stitching
        and for the overlay of the ROIs (heatmap measurement results) on the image.
    - Because the flip parameters heavily depends on the way the image is displayed (i.e., if it is flipped
        from the get-go), the flip parameters are left as a user-defined parameter to be used by other methods/
        classes that requires it, e.g., the Frm_HeatmapOverlay class.
</code></pre>










<div class="doc doc-children">









<div class="doc doc-object doc-class">



<h2 id="iris.data.measurement_image.MeaImg_Handler" class="doc doc-heading">
            <code>MeaImg_Handler</code>


</h2>


    <div class="doc doc-contents ">



        <p>Handles the saving of image measurements to a database</p>








              <details class="mkdocstrings-source">
                <summary>Source code in <code>iris/data/measurement_image.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 888</span>
<span class="normal"> 889</span>
<span class="normal"> 890</span>
<span class="normal"> 891</span>
<span class="normal"> 892</span>
<span class="normal"> 893</span>
<span class="normal"> 894</span>
<span class="normal"> 895</span>
<span class="normal"> 896</span>
<span class="normal"> 897</span>
<span class="normal"> 898</span>
<span class="normal"> 899</span>
<span class="normal"> 900</span>
<span class="normal"> 901</span>
<span class="normal"> 902</span>
<span class="normal"> 903</span>
<span class="normal"> 904</span>
<span class="normal"> 905</span>
<span class="normal"> 906</span>
<span class="normal"> 907</span>
<span class="normal"> 908</span>
<span class="normal"> 909</span>
<span class="normal"> 910</span>
<span class="normal"> 911</span>
<span class="normal"> 912</span>
<span class="normal"> 913</span>
<span class="normal"> 914</span>
<span class="normal"> 915</span>
<span class="normal"> 916</span>
<span class="normal"> 917</span>
<span class="normal"> 918</span>
<span class="normal"> 919</span>
<span class="normal"> 920</span>
<span class="normal"> 921</span>
<span class="normal"> 922</span>
<span class="normal"> 923</span>
<span class="normal"> 924</span>
<span class="normal"> 925</span>
<span class="normal"> 926</span>
<span class="normal"> 927</span>
<span class="normal"> 928</span>
<span class="normal"> 929</span>
<span class="normal"> 930</span>
<span class="normal"> 931</span>
<span class="normal"> 932</span>
<span class="normal"> 933</span>
<span class="normal"> 934</span>
<span class="normal"> 935</span>
<span class="normal"> 936</span>
<span class="normal"> 937</span>
<span class="normal"> 938</span>
<span class="normal"> 939</span>
<span class="normal"> 940</span>
<span class="normal"> 941</span>
<span class="normal"> 942</span>
<span class="normal"> 943</span>
<span class="normal"> 944</span>
<span class="normal"> 945</span>
<span class="normal"> 946</span>
<span class="normal"> 947</span>
<span class="normal"> 948</span>
<span class="normal"> 949</span>
<span class="normal"> 950</span>
<span class="normal"> 951</span>
<span class="normal"> 952</span>
<span class="normal"> 953</span>
<span class="normal"> 954</span>
<span class="normal"> 955</span>
<span class="normal"> 956</span>
<span class="normal"> 957</span>
<span class="normal"> 958</span>
<span class="normal"> 959</span>
<span class="normal"> 960</span>
<span class="normal"> 961</span>
<span class="normal"> 962</span>
<span class="normal"> 963</span>
<span class="normal"> 964</span>
<span class="normal"> 965</span>
<span class="normal"> 966</span>
<span class="normal"> 967</span>
<span class="normal"> 968</span>
<span class="normal"> 969</span>
<span class="normal"> 970</span>
<span class="normal"> 971</span>
<span class="normal"> 972</span>
<span class="normal"> 973</span>
<span class="normal"> 974</span>
<span class="normal"> 975</span>
<span class="normal"> 976</span>
<span class="normal"> 977</span>
<span class="normal"> 978</span>
<span class="normal"> 979</span>
<span class="normal"> 980</span>
<span class="normal"> 981</span>
<span class="normal"> 982</span>
<span class="normal"> 983</span>
<span class="normal"> 984</span>
<span class="normal"> 985</span>
<span class="normal"> 986</span>
<span class="normal"> 987</span>
<span class="normal"> 988</span>
<span class="normal"> 989</span>
<span class="normal"> 990</span>
<span class="normal"> 991</span>
<span class="normal"> 992</span>
<span class="normal"> 993</span>
<span class="normal"> 994</span>
<span class="normal"> 995</span>
<span class="normal"> 996</span>
<span class="normal"> 997</span>
<span class="normal"> 998</span>
<span class="normal"> 999</span>
<span class="normal">1000</span>
<span class="normal">1001</span>
<span class="normal">1002</span>
<span class="normal">1003</span>
<span class="normal">1004</span>
<span class="normal">1005</span>
<span class="normal">1006</span>
<span class="normal">1007</span>
<span class="normal">1008</span>
<span class="normal">1009</span>
<span class="normal">1010</span>
<span class="normal">1011</span>
<span class="normal">1012</span>
<span class="normal">1013</span>
<span class="normal">1014</span>
<span class="normal">1015</span>
<span class="normal">1016</span>
<span class="normal">1017</span>
<span class="normal">1018</span>
<span class="normal">1019</span>
<span class="normal">1020</span>
<span class="normal">1021</span>
<span class="normal">1022</span>
<span class="normal">1023</span>
<span class="normal">1024</span>
<span class="normal">1025</span>
<span class="normal">1026</span>
<span class="normal">1027</span>
<span class="normal">1028</span>
<span class="normal">1029</span>
<span class="normal">1030</span>
<span class="normal">1031</span>
<span class="normal">1032</span>
<span class="normal">1033</span>
<span class="normal">1034</span>
<span class="normal">1035</span>
<span class="normal">1036</span>
<span class="normal">1037</span>
<span class="normal">1038</span>
<span class="normal">1039</span>
<span class="normal">1040</span>
<span class="normal">1041</span>
<span class="normal">1042</span>
<span class="normal">1043</span>
<span class="normal">1044</span>
<span class="normal">1045</span>
<span class="normal">1046</span>
<span class="normal">1047</span>
<span class="normal">1048</span>
<span class="normal">1049</span>
<span class="normal">1050</span>
<span class="normal">1051</span>
<span class="normal">1052</span>
<span class="normal">1053</span>
<span class="normal">1054</span>
<span class="normal">1055</span>
<span class="normal">1056</span>
<span class="normal">1057</span>
<span class="normal">1058</span>
<span class="normal">1059</span>
<span class="normal">1060</span>
<span class="normal">1061</span>
<span class="normal">1062</span>
<span class="normal">1063</span>
<span class="normal">1064</span>
<span class="normal">1065</span>
<span class="normal">1066</span>
<span class="normal">1067</span>
<span class="normal">1068</span>
<span class="normal">1069</span>
<span class="normal">1070</span>
<span class="normal">1071</span>
<span class="normal">1072</span>
<span class="normal">1073</span>
<span class="normal">1074</span>
<span class="normal">1075</span>
<span class="normal">1076</span>
<span class="normal">1077</span>
<span class="normal">1078</span>
<span class="normal">1079</span>
<span class="normal">1080</span>
<span class="normal">1081</span>
<span class="normal">1082</span>
<span class="normal">1083</span>
<span class="normal">1084</span>
<span class="normal">1085</span>
<span class="normal">1086</span>
<span class="normal">1087</span>
<span class="normal">1088</span>
<span class="normal">1089</span>
<span class="normal">1090</span>
<span class="normal">1091</span>
<span class="normal">1092</span>
<span class="normal">1093</span>
<span class="normal">1094</span>
<span class="normal">1095</span>
<span class="normal">1096</span>
<span class="normal">1097</span>
<span class="normal">1098</span>
<span class="normal">1099</span>
<span class="normal">1100</span>
<span class="normal">1101</span>
<span class="normal">1102</span>
<span class="normal">1103</span>
<span class="normal">1104</span>
<span class="normal">1105</span>
<span class="normal">1106</span>
<span class="normal">1107</span>
<span class="normal">1108</span>
<span class="normal">1109</span>
<span class="normal">1110</span>
<span class="normal">1111</span>
<span class="normal">1112</span>
<span class="normal">1113</span>
<span class="normal">1114</span>
<span class="normal">1115</span>
<span class="normal">1116</span>
<span class="normal">1117</span>
<span class="normal">1118</span>
<span class="normal">1119</span>
<span class="normal">1120</span>
<span class="normal">1121</span>
<span class="normal">1122</span>
<span class="normal">1123</span>
<span class="normal">1124</span>
<span class="normal">1125</span>
<span class="normal">1126</span>
<span class="normal">1127</span>
<span class="normal">1128</span>
<span class="normal">1129</span>
<span class="normal">1130</span>
<span class="normal">1131</span>
<span class="normal">1132</span>
<span class="normal">1133</span>
<span class="normal">1134</span>
<span class="normal">1135</span>
<span class="normal">1136</span>
<span class="normal">1137</span>
<span class="normal">1138</span>
<span class="normal">1139</span>
<span class="normal">1140</span>
<span class="normal">1141</span>
<span class="normal">1142</span>
<span class="normal">1143</span>
<span class="normal">1144</span>
<span class="normal">1145</span>
<span class="normal">1146</span>
<span class="normal">1147</span>
<span class="normal">1148</span>
<span class="normal">1149</span>
<span class="normal">1150</span>
<span class="normal">1151</span>
<span class="normal">1152</span>
<span class="normal">1153</span>
<span class="normal">1154</span>
<span class="normal">1155</span>
<span class="normal">1156</span>
<span class="normal">1157</span>
<span class="normal">1158</span>
<span class="normal">1159</span>
<span class="normal">1160</span>
<span class="normal">1161</span>
<span class="normal">1162</span>
<span class="normal">1163</span>
<span class="normal">1164</span>
<span class="normal">1165</span>
<span class="normal">1166</span>
<span class="normal">1167</span>
<span class="normal">1168</span>
<span class="normal">1169</span>
<span class="normal">1170</span>
<span class="normal">1171</span>
<span class="normal">1172</span>
<span class="normal">1173</span>
<span class="normal">1174</span>
<span class="normal">1175</span>
<span class="normal">1176</span>
<span class="normal">1177</span>
<span class="normal">1178</span>
<span class="normal">1179</span>
<span class="normal">1180</span>
<span class="normal">1181</span>
<span class="normal">1182</span>
<span class="normal">1183</span>
<span class="normal">1184</span>
<span class="normal">1185</span>
<span class="normal">1186</span>
<span class="normal">1187</span>
<span class="normal">1188</span>
<span class="normal">1189</span>
<span class="normal">1190</span>
<span class="normal">1191</span>
<span class="normal">1192</span>
<span class="normal">1193</span>
<span class="normal">1194</span>
<span class="normal">1195</span>
<span class="normal">1196</span>
<span class="normal">1197</span>
<span class="normal">1198</span>
<span class="normal">1199</span>
<span class="normal">1200</span>
<span class="normal">1201</span>
<span class="normal">1202</span>
<span class="normal">1203</span>
<span class="normal">1204</span>
<span class="normal">1205</span>
<span class="normal">1206</span>
<span class="normal">1207</span>
<span class="normal">1208</span>
<span class="normal">1209</span>
<span class="normal">1210</span>
<span class="normal">1211</span>
<span class="normal">1212</span>
<span class="normal">1213</span>
<span class="normal">1214</span>
<span class="normal">1215</span>
<span class="normal">1216</span>
<span class="normal">1217</span>
<span class="normal">1218</span>
<span class="normal">1219</span>
<span class="normal">1220</span>
<span class="normal">1221</span>
<span class="normal">1222</span>
<span class="normal">1223</span>
<span class="normal">1224</span>
<span class="normal">1225</span>
<span class="normal">1226</span>
<span class="normal">1227</span>
<span class="normal">1228</span>
<span class="normal">1229</span>
<span class="normal">1230</span>
<span class="normal">1231</span>
<span class="normal">1232</span>
<span class="normal">1233</span>
<span class="normal">1234</span>
<span class="normal">1235</span>
<span class="normal">1236</span>
<span class="normal">1237</span>
<span class="normal">1238</span>
<span class="normal">1239</span>
<span class="normal">1240</span>
<span class="normal">1241</span>
<span class="normal">1242</span>
<span class="normal">1243</span>
<span class="normal">1244</span>
<span class="normal">1245</span>
<span class="normal">1246</span>
<span class="normal">1247</span>
<span class="normal">1248</span>
<span class="normal">1249</span>
<span class="normal">1250</span>
<span class="normal">1251</span>
<span class="normal">1252</span>
<span class="normal">1253</span>
<span class="normal">1254</span>
<span class="normal">1255</span>
<span class="normal">1256</span>
<span class="normal">1257</span>
<span class="normal">1258</span>
<span class="normal">1259</span>
<span class="normal">1260</span>
<span class="normal">1261</span>
<span class="normal">1262</span>
<span class="normal">1263</span>
<span class="normal">1264</span>
<span class="normal">1265</span>
<span class="normal">1266</span>
<span class="normal">1267</span>
<span class="normal">1268</span>
<span class="normal">1269</span>
<span class="normal">1270</span>
<span class="normal">1271</span>
<span class="normal">1272</span>
<span class="normal">1273</span>
<span class="normal">1274</span>
<span class="normal">1275</span>
<span class="normal">1276</span>
<span class="normal">1277</span>
<span class="normal">1278</span>
<span class="normal">1279</span>
<span class="normal">1280</span>
<span class="normal">1281</span>
<span class="normal">1282</span>
<span class="normal">1283</span>
<span class="normal">1284</span>
<span class="normal">1285</span>
<span class="normal">1286</span>
<span class="normal">1287</span>
<span class="normal">1288</span>
<span class="normal">1289</span>
<span class="normal">1290</span>
<span class="normal">1291</span>
<span class="normal">1292</span>
<span class="normal">1293</span>
<span class="normal">1294</span>
<span class="normal">1295</span>
<span class="normal">1296</span>
<span class="normal">1297</span>
<span class="normal">1298</span>
<span class="normal">1299</span>
<span class="normal">1300</span>
<span class="normal">1301</span>
<span class="normal">1302</span>
<span class="normal">1303</span>
<span class="normal">1304</span>
<span class="normal">1305</span>
<span class="normal">1306</span>
<span class="normal">1307</span>
<span class="normal">1308</span>
<span class="normal">1309</span>
<span class="normal">1310</span>
<span class="normal">1311</span>
<span class="normal">1312</span>
<span class="normal">1313</span>
<span class="normal">1314</span>
<span class="normal">1315</span>
<span class="normal">1316</span>
<span class="normal">1317</span>
<span class="normal">1318</span>
<span class="normal">1319</span>
<span class="normal">1320</span>
<span class="normal">1321</span>
<span class="normal">1322</span>
<span class="normal">1323</span>
<span class="normal">1324</span>
<span class="normal">1325</span>
<span class="normal">1326</span>
<span class="normal">1327</span>
<span class="normal">1328</span>
<span class="normal">1329</span>
<span class="normal">1330</span>
<span class="normal">1331</span>
<span class="normal">1332</span>
<span class="normal">1333</span>
<span class="normal">1334</span>
<span class="normal">1335</span>
<span class="normal">1336</span>
<span class="normal">1337</span>
<span class="normal">1338</span>
<span class="normal">1339</span>
<span class="normal">1340</span>
<span class="normal">1341</span>
<span class="normal">1342</span>
<span class="normal">1343</span>
<span class="normal">1344</span>
<span class="normal">1345</span>
<span class="normal">1346</span>
<span class="normal">1347</span>
<span class="normal">1348</span>
<span class="normal">1349</span>
<span class="normal">1350</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">MeaImg_Handler</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles the saving of image measurements to a database</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Save parameters</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_save_parameters</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;table_label_measurement&#39;</span><span class="p">:</span><span class="s1">&#39;measurement&#39;</span><span class="p">,</span>    <span class="c1"># Label for the measurement table</span>
            <span class="s1">&#39;table_label_calibration&#39;</span><span class="p">:</span><span class="s1">&#39;calibration&#39;</span><span class="p">,</span>    <span class="c1"># Label for the calibration table</span>
            <span class="s1">&#39;folder_sublevel&#39;</span><span class="p">:</span><span class="s1">&#39;images&#39;</span>    <span class="c1"># Sublevel folder to save the data</span>
        <span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_new_save_parameters</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;meta_table&#39;</span><span class="p">:</span><span class="s1">&#39;metadata&#39;</span><span class="p">,</span>    <span class="c1"># Label for the metadata table in the database</span>
            <span class="s1">&#39;folder_sublevel&#39;</span><span class="p">:</span><span class="s1">&#39;images&#39;</span><span class="p">,</span> <span class="c1"># Sublevel folder to save the data</span>
        <span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_table_prefix</span> <span class="o">=</span> <span class="n">SaveParamsEnum</span><span class="o">.</span><span class="n">IMGUNIT_DB_PREFIX</span><span class="o">.</span><span class="n">value</span>    <span class="c1"># Prefix for the database tables</span>
        <span class="c1"># self._defaultDirPath = SaveParamsEnum.DEFAULT_SAVE_PATH.value</span>
        <span class="c1"># assert os.path.exists(self._defaultDirPath), &#39;Default directory path does not exist&#39;</span>
        <span class="c1"># assert os.path.isdir(self._defaultDirPath), &#39;Default directory path is not a directory&#39;</span>

    <span class="c1"># def load_calibration_json_to_ImgMea(self,measurement:ImageMeasurement_Unit)\</span>
    <span class="c1">#     -&gt; tuple[ImageMeasurement_Unit,str,str]:</span>
    <span class="c1">#     &quot;&quot;&quot;</span>
    <span class="c1">#     Loads the calibration parameters from a JSON file and sets them to the measurement object</span>

    <span class="c1">#     Args:</span>
    <span class="c1">#         measurement (image_measurement): Image measurement object which calibration parameters are to be set</span>

    <span class="c1">#     Returns:</span>
    <span class="c1">#         tuple[image_measurement,str,str]: Image measurement object, directory path, and name of the JSON</span>
    <span class="c1">#     &quot;&quot;&quot;</span>

    <span class="c1">#     print(&#39;!!!!! TO BE MODIFIED !!!!!&#39;)</span>
    <span class="c1">#     # Modification idea: to load the calibration file into a handler or to return the</span>
    <span class="c1">#     # ImageMeasurement_Calibration obj instead of loading it into an ImageMeasurement_Unit</span>
    <span class="c1">#     # obj</span>

    <span class="c1">#     assert isinstance(measurement, ImageMeasurement_Unit), &#39;Measurement must be an image measurement object&#39;</span>

    <span class="c1">#     savepath = filedialog.askopenfilename(title=&#39;Choose a JSON file to load the calibration parameters from&#39;,</span>
    <span class="c1">#         filetypes=[(&#39;JSON files&#39;,&#39;*.json&#39;)])</span>
    <span class="c1">#     assert savepath != &#39;&#39;, &#39;Load path is empty&#39;</span>

    <span class="c1">#     cal = ImageMeasurement_Calibration()</span>
    <span class="c1">#     cal.load_calibration_json(savepath)</span>

    <span class="c1">#     saveDirPath = os.path.dirname(savepath)</span>
    <span class="c1">#     savename = os.path.basename(savepath)</span>

    <span class="c1">#     # Set the calibration parameters to the measurement object</span>
    <span class="c1">#     measurement.set_calibration_ImageMeasurement_Calibration(cal)</span>
    <span class="c1">#     return measurement, saveDirPath, savename</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">save_calibration_json</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">calibration</span><span class="p">:</span><span class="n">ImgMea_Cal</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span><span class="nb">str</span><span class="p">]</span><span class="o">|</span><span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Saves the calibration parameters to a JSON file</span>

<span class="sd">        Args:</span>
<span class="sd">            calibration (ImageMeasurement_Calibration): Calibration parameters object to be saved</span>

<span class="sd">        Returns:</span>
<span class="sd">            tuple[str,str]|None: Directory path and name of the saved JSON file or None if failed</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">calibration</span><span class="p">,</span> <span class="n">ImgMea_Cal</span><span class="p">),</span> <span class="s1">&#39;Calibration must be an ImageMeasurement_Calibration object&#39;</span>
            <span class="k">assert</span> <span class="n">calibration</span><span class="o">.</span><span class="n">check_calibration_set</span><span class="p">(),</span> <span class="s1">&#39;Calibration parameters are not set&#39;</span>

            <span class="c1"># Open a file dialog to choose the savepath</span>
            <span class="n">savepath</span> <span class="o">=</span> <span class="n">qw</span><span class="o">.</span><span class="n">QFileDialog</span><span class="o">.</span><span class="n">getSaveFileName</span><span class="p">(</span>
                <span class="kc">None</span><span class="p">,</span>
                <span class="s1">&#39;Choose a JSON file to save the calibration parameters to&#39;</span><span class="p">,</span>
                <span class="n">calibration</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                <span class="s1">&#39;JSON files (*.json)&#39;</span>
            <span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">assert</span> <span class="n">savepath</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;Save path is empty&#39;</span>

            <span class="k">if</span> <span class="n">savepath</span><span class="p">[</span><span class="o">-</span><span class="mi">5</span><span class="p">:]</span> <span class="o">!=</span> <span class="s1">&#39;.json&#39;</span><span class="p">:</span> <span class="n">savepath</span> <span class="o">+=</span> <span class="s1">&#39;.json&#39;</span>
            <span class="n">saveDirPath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">savepath</span><span class="p">)</span>
            <span class="n">savename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">savepath</span><span class="p">)</span>

            <span class="n">ret</span> <span class="o">=</span> <span class="p">(</span><span class="n">saveDirPath</span><span class="p">,</span><span class="n">savename</span><span class="p">)</span>

            <span class="n">calibration</span><span class="o">.</span><span class="n">save_calibration_json</span><span class="p">(</span><span class="n">savepath</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;save_calibration_json ERROR: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">ret</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">return</span> <span class="n">ret</span>


    <span class="k">def</span><span class="w"> </span><span class="nf">load_calibration_json</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ImgMea_Cal</span><span class="o">|</span><span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Loads the calibration parameters from a JSON file</span>

<span class="sd">        Returns:</span>
<span class="sd">            ImageMeasurement_Calibration: ImageMeasurement_Calibration object</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">cal</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">savepath</span> <span class="o">=</span> <span class="n">qw</span><span class="o">.</span><span class="n">QFileDialog</span><span class="o">.</span><span class="n">getOpenFileName</span><span class="p">(</span>
                <span class="kc">None</span><span class="p">,</span>
                <span class="s1">&#39;Choose a JSON file to load the calibration parameters from&#39;</span><span class="p">,</span>
                <span class="s1">&#39;&#39;</span><span class="p">,</span>
                <span class="s1">&#39;JSON files (*.json)&#39;</span>
            <span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">assert</span> <span class="n">savepath</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;Load path is empty&#39;</span>

            <span class="n">cal</span> <span class="o">=</span> <span class="n">ImgMea_Cal</span><span class="p">()</span>
            <span class="n">cal</span><span class="o">.</span><span class="n">load_calibration_json</span><span class="p">(</span><span class="n">savepath</span><span class="p">)</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;load_calibration_json ERROR: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">cal</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">save_calibration_json_from_ImgMea</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">measurement</span><span class="p">:</span><span class="n">MeaImg_Unit</span><span class="p">,</span><span class="n">savename</span><span class="p">:</span><span class="nb">str</span><span class="o">|</span><span class="kc">None</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Saves the calibration parameters to a JSON file</span>

<span class="sd">        Args:</span>
<span class="sd">            measurement (image_measurement): Image measurement object which calibration parameters are to be saved</span>
<span class="sd">            savename (str): Name of the JSON file. Default is the ID.</span>

<span class="sd">        Returns:</span>
<span class="sd">            tuple[str,str]: Directory path and name of the saved JSON file</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">measurement</span><span class="p">,</span> <span class="n">MeaImg_Unit</span><span class="p">),</span> <span class="s1">&#39;Measurement must be an image measurement object&#39;</span>
        <span class="k">assert</span> <span class="n">measurement</span><span class="o">.</span><span class="n">check_calibration_exist</span><span class="p">(),</span> <span class="s1">&#39;Calibration parameters are not set&#39;</span>

        <span class="c1"># Open a file dialog to choose the savepath</span>
        <span class="n">savepath</span> <span class="o">=</span> <span class="n">qw</span><span class="o">.</span><span class="n">QFileDialog</span><span class="o">.</span><span class="n">getSaveFileName</span><span class="p">(</span>
            <span class="kc">None</span><span class="p">,</span>
            <span class="s1">&#39;Choose a JSON file to save the calibration parameters to&#39;</span><span class="p">,</span>
            <span class="n">savename</span> <span class="k">if</span> <span class="n">savename</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">measurement</span><span class="o">.</span><span class="n">get_ImageMeasurement_Calibration</span><span class="p">()</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="s1">&#39;JSON files (*.json)&#39;</span>
        <span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">assert</span> <span class="n">savepath</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;Save path is empty&#39;</span>

        <span class="k">if</span> <span class="n">savepath</span><span class="p">[</span><span class="o">-</span><span class="mi">5</span><span class="p">:]</span> <span class="o">!=</span> <span class="s1">&#39;.json&#39;</span><span class="p">:</span> <span class="n">savepath</span> <span class="o">+=</span> <span class="s1">&#39;.json&#39;</span>
        <span class="n">saveDirPath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">savepath</span><span class="p">)</span>
        <span class="n">savename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">savepath</span><span class="p">)</span>

        <span class="c1"># Rename the calibration id to the savename</span>
        <span class="n">measurement</span><span class="o">.</span><span class="n">get_ImageMeasurement_Calibration</span><span class="p">()</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="n">savename</span><span class="p">[:</span><span class="o">-</span><span class="mi">5</span><span class="p">]</span>   <span class="c1"># Remove the &#39;.json&#39; extension</span>

        <span class="c1"># Save the calibration parameters to a JSON file</span>
        <span class="n">_</span><span class="p">,</span><span class="n">dict_calibration</span> <span class="o">=</span> <span class="n">measurement</span><span class="o">.</span><span class="n">get_calibration_asdict</span><span class="p">()</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">savepath</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
            <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">dict_calibration</span><span class="p">,</span><span class="n">file</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">saveDirPath</span><span class="p">,</span> <span class="n">savename</span>

    <span class="nd">@thread_assign</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">save_ImageMeasurementHub_database</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">hub</span><span class="p">:</span><span class="n">MeaImg_Hub</span><span class="p">,</span><span class="n">initdir</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span><span class="n">savename</span><span class="p">:</span><span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Saves the measurements to a database</span>

<span class="sd">        Args:</span>
<span class="sd">            hub (image_measurement_hub): Image measurement hub object to save</span>
<span class="sd">            initdir (str): Path to the directory</span>
<span class="sd">            savename (str): Name of the database</span>

<span class="sd">        Returns:</span>
<span class="sd">            threading.Thread: Thread of the saving process</span>

<span class="sd">        Raises:</span>
<span class="sd">            AssertionError: Initial directory path does not exist</span>
<span class="sd">            AssertionError: Initial directory path is not a directory</span>
<span class="sd">            AssertionError: Save name is empty</span>

<span class="sd">        Note:</span>
<span class="sd">            If the file already exist, it will still connect into the database and try to write into it</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">hub</span><span class="p">,</span> <span class="n">MeaImg_Hub</span><span class="p">),</span> <span class="s1">&#39;Hub must be an image measurement hub object&#39;</span>
        <span class="k">assert</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">initdir</span><span class="p">),</span> <span class="s1">&#39;Initial directory path does not exist&#39;</span>
        <span class="k">assert</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">initdir</span><span class="p">),</span> <span class="s1">&#39;Initial directory path is not a directory&#39;</span>
        <span class="k">assert</span> <span class="n">savename</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;Save name is empty&#39;</span>
        <span class="k">if</span> <span class="n">savename</span><span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">:]</span> <span class="o">!=</span> <span class="s1">&#39;.db&#39;</span><span class="p">:</span> <span class="n">savename</span> <span class="o">+=</span> <span class="s1">&#39;.db&#39;</span>
        <span class="n">savepath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">initdir</span><span class="p">,</span><span class="n">savename</span><span class="p">)</span>

        <span class="c1"># Connect to the database</span>
        <span class="n">conn</span> <span class="o">=</span> <span class="n">sql</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">savepath</span><span class="p">)</span>

        <span class="c1"># Save the measurements to a database</span>
        <span class="n">list_unitIDs</span> <span class="o">=</span> <span class="n">hub</span><span class="o">.</span><span class="n">get_list_ImageUnit_ids</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">unitID</span> <span class="ow">in</span> <span class="n">list_unitIDs</span><span class="p">:</span>
            <span class="n">unit</span> <span class="o">=</span> <span class="n">hub</span><span class="o">.</span><span class="n">get_ImageMeasurementUnit</span><span class="p">(</span><span class="n">unit_id</span><span class="o">=</span><span class="n">unitID</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">save_ImageMeasurementUnit_database</span><span class="p">(</span><span class="n">unit</span><span class="p">,</span><span class="n">conn</span><span class="p">,</span><span class="n">savepath</span><span class="p">)</span>

        <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">save_ImageMeasurementUnit_database</span><span class="p">(</span>\
        <span class="bp">self</span><span class="p">,</span><span class="n">unit</span><span class="p">:</span><span class="n">MeaImg_Unit</span><span class="p">,</span><span class="n">conn</span><span class="p">:</span><span class="n">sql</span><span class="o">.</span><span class="n">Connection</span><span class="p">,</span><span class="n">conn_path</span><span class="p">:</span><span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Saves the measurements to a database connected.</span>

<span class="sd">        Args:</span>
<span class="sd">            unit (ImageMeasurement_Unit): Unit to be saved</span>
<span class="sd">            conn (sql.Connection): Connection to the database</span>
<span class="sd">            conn_path (str): Path to the database</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_save_ImageMeasurementUnit_metadata_database</span><span class="p">(</span><span class="n">unit</span><span class="p">,</span><span class="n">conn</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_save_ImageMeasurementUnit_measurement_database</span><span class="p">(</span><span class="n">unit</span><span class="p">,</span><span class="n">conn</span><span class="p">,</span><span class="n">conn_path</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_save_image_to_png</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">saveDirPath</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span><span class="n">image</span><span class="p">:</span><span class="n">Image</span><span class="o">.</span><span class="n">Image</span><span class="p">,</span><span class="nb">id</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Saves an image to a PNG file and returns the relative path</span>

<span class="sd">        Args:</span>
<span class="sd">            saveDirPath (str): Path to the directory to save the image</span>
<span class="sd">            image (Image.Image): Image to be saved</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">saveDirPath</span><span class="p">,</span> <span class="nb">str</span><span class="p">),</span> <span class="s1">&#39;Save directory path must be a string&#39;</span>
        <span class="k">assert</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">saveDirPath</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">saveDirPath</span><span class="p">)</span> <span class="ow">and</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">saveDirPath</span><span class="p">)),</span>\
            <span class="s1">&#39;Save directory path is not a directory&#39;</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">Image</span><span class="o">.</span><span class="n">Image</span><span class="p">),</span> <span class="s1">&#39;Image must be an Image.Image object&#39;</span>

        <span class="c1"># Save the image to a PNG file</span>
        <span class="n">subdirpath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">saveDirPath</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_save_parameters</span><span class="p">[</span><span class="s1">&#39;folder_sublevel&#39;</span><span class="p">])</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">subdirpath</span><span class="p">):</span> <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">subdirpath</span><span class="p">)</span>
        <span class="n">imagepath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">subdirpath</span><span class="p">,</span><span class="s1">&#39;</span><span class="si">{}</span><span class="s1">.png&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">id</span><span class="p">))</span>
        <span class="n">image</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">imagepath</span><span class="p">,</span><span class="n">bitmap_format</span><span class="o">=</span><span class="s1">&#39;png&#39;</span><span class="p">)</span>

        <span class="n">relpath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">relpath</span><span class="p">(</span><span class="n">imagepath</span><span class="p">,</span><span class="n">saveDirPath</span><span class="p">)</span>
        <span class="n">relpath</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;.\</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">relpath</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\\</span><span class="s1">&#39;</span><span class="p">,</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">relpath</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_save_ImageMeasurementUnit_measurement_database</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span><span class="n">unit</span><span class="p">:</span><span class="n">MeaImg_Unit</span><span class="p">,</span><span class="n">conn</span><span class="p">:</span><span class="n">sql</span><span class="o">.</span><span class="n">Connection</span><span class="p">,</span>
        <span class="n">conn_path</span><span class="p">:</span><span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Saves the measurements to a database connected</span>

<span class="sd">        Args:</span>
<span class="sd">            unit (ImageMeasurement_Unit): Image measurement unit object to save</span>
<span class="sd">            conn (sql.Connection): Connection to the database</span>
<span class="sd">            conn_path (str): Path to the database</span>

<span class="sd">        Raises:</span>
<span class="sd">            AssertionError: Unit is not an ImageMeasurement_Unit object</span>
<span class="sd">            AssertionError: The unit does not contain any measurements and/or calibration parameters</span>
<span class="sd">            AssertionError: Connection is not a sqlite3 connection</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">unit</span><span class="p">,</span> <span class="n">MeaImg_Unit</span><span class="p">),</span> <span class="s1">&#39;Unit must be an image measurement unit object&#39;</span>
        <span class="k">assert</span> <span class="n">unit</span><span class="o">.</span><span class="n">check_measurement_exist</span><span class="p">(),</span> <span class="s1">&#39;Unit does not contain any measurements&#39;</span>
        <span class="k">assert</span> <span class="n">unit</span><span class="o">.</span><span class="n">check_calibration_exist</span><span class="p">(),</span> <span class="s1">&#39;Unit does not contain any calibration parameters&#39;</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">conn</span><span class="p">,</span> <span class="n">sql</span><span class="o">.</span><span class="n">Connection</span><span class="p">),</span> <span class="s1">&#39;Connection must be a sqlite3 connection&#39;</span>

        <span class="n">saveDirPath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">conn_path</span><span class="p">)</span>

        <span class="n">unitID</span><span class="p">,</span><span class="n">unitName</span> <span class="o">=</span> <span class="n">unit</span><span class="o">.</span><span class="n">get_IdName</span><span class="p">()</span>
        <span class="n">table_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_table_prefix</span> <span class="o">+</span> <span class="n">unitID</span>

    <span class="c1"># &gt;&gt;&gt; Image measurement save to database &lt;&lt;&lt;</span>
        <span class="n">dict_mea</span> <span class="o">=</span> <span class="n">unit</span><span class="o">.</span><span class="n">get_dict_measurement</span><span class="p">()</span>
        <span class="n">dict_mea_types</span> <span class="o">=</span> <span class="n">unit</span><span class="o">.</span><span class="n">get_dict_measurement_types</span><span class="p">()</span>

        <span class="n">query_keys</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">dict_mea</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">dict_mea_types</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="ow">in</span> <span class="p">[</span><span class="nb">int</span><span class="p">,</span><span class="nb">float</span><span class="p">]:</span>
                <span class="n">query_keys</span> <span class="o">+=</span> <span class="s1">&#39;, </span><span class="si">{}</span><span class="s1"> REAL&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">dict_mea_types</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">==</span> <span class="nb">str</span><span class="p">:</span>
                <span class="n">query_keys</span> <span class="o">+=</span> <span class="s1">&#39;, </span><span class="si">{}</span><span class="s1"> TEXT&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">dict_mea_types</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="ow">in</span> <span class="p">[</span><span class="nb">list</span><span class="p">,</span><span class="nb">tuple</span><span class="p">,</span><span class="nb">dict</span><span class="p">]:</span>
                <span class="n">query_keys</span> <span class="o">+=</span> <span class="s1">&#39;, </span><span class="si">{}</span><span class="s1"> TEXT&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">dict_mea_types</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">==</span> <span class="n">Image</span><span class="o">.</span><span class="n">Image</span><span class="p">:</span>
                <span class="n">query_keys</span> <span class="o">+=</span> <span class="s1">&#39;, </span><span class="si">{}</span><span class="s1"> TEXT&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Measurement type not recognized&#39;</span><span class="p">)</span>

        <span class="n">query_keys</span> <span class="o">=</span> <span class="n">query_keys</span><span class="p">[</span><span class="mi">2</span><span class="p">:]</span>

        <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE IF NOT EXISTS </span><span class="si">{}</span><span class="s1"> (</span><span class="si">{}</span><span class="s1">)&#39;</span>\
            <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">table_name</span><span class="p">,</span><span class="n">query_keys</span><span class="p">))</span>

        <span class="c1"># Insert the measurements into the table</span>
        <span class="n">keys</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">dict_mea</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">dict_mea</span><span class="p">[</span><span class="n">keys</span><span class="p">[</span><span class="mi">0</span><span class="p">]])):</span>
            <span class="c1"># Generate a unique id</span>
            <span class="n">unique_id</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">_</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">unitName</span><span class="p">,</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">()</span><span class="o">.</span><span class="n">hex</span><span class="p">)</span>
            <span class="n">list_values</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">dict_mea</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">dict_mea_types</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="ow">in</span> <span class="p">[</span><span class="nb">int</span><span class="p">,</span><span class="nb">float</span><span class="p">]:</span>
                    <span class="n">list_values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dict_mea</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="n">i</span><span class="p">])</span>
                <span class="k">elif</span> <span class="n">dict_mea_types</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">==</span> <span class="nb">str</span><span class="p">:</span>
                    <span class="n">list_values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dict_mea</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="n">i</span><span class="p">])</span>
                <span class="k">elif</span> <span class="n">dict_mea_types</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="ow">in</span> <span class="p">[</span><span class="nb">list</span><span class="p">,</span><span class="nb">tuple</span><span class="p">,</span><span class="nb">dict</span><span class="p">]:</span>
                    <span class="n">list_values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">dict_mea</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="n">i</span><span class="p">]))</span>
                <span class="k">elif</span> <span class="n">dict_mea_types</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">==</span> <span class="n">Image</span><span class="o">.</span><span class="n">Image</span><span class="p">:</span>
                    <span class="n">image</span> <span class="o">=</span> <span class="n">dict_mea</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="n">i</span><span class="p">]</span>
                    <span class="n">imagepath</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_save_image_to_png</span><span class="p">(</span><span class="n">saveDirPath</span><span class="p">,</span><span class="n">image</span><span class="p">,</span><span class="n">unique_id</span><span class="p">)</span>
                    <span class="n">list_values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">imagepath</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Measurement type not recognized&#39;</span><span class="p">)</span>

            <span class="n">query_values</span> <span class="o">=</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39;?&#39;</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">list_values</span><span class="p">))])</span>
            <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;INSERT INTO </span><span class="si">{}</span><span class="s1"> VALUES (</span><span class="si">{}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">table_name</span><span class="p">,</span><span class="n">query_values</span><span class="p">),</span><span class="n">list_values</span><span class="p">)</span>

        <span class="c1"># Commit the changes and close the connection</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
        <span class="k">return</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_save_ImageMeasurementUnit_metadata_database</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">unit</span><span class="p">:</span><span class="n">MeaImg_Unit</span><span class="p">,</span><span class="n">conn</span><span class="p">:</span><span class="n">sql</span><span class="o">.</span><span class="n">Connection</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Saves the metadata to a database connected</span>

<span class="sd">        Args:</span>
<span class="sd">            unit (ImageMeasurement_Unit): Image measurement unit object to save</span>
<span class="sd">            conn (sql.Connection): Connection to the database</span>

<span class="sd">        Raises:</span>
<span class="sd">            AssertionError: Unit is not an ImageMeasurement_Unit object</span>
<span class="sd">            AssertionError: The unit does not contain any metadata</span>
<span class="sd">            AssertionError: Connection is not a sqlite3 connection</span>
<span class="sd">            TypeError: Metadata type not recognized</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">unit</span><span class="p">,</span> <span class="n">MeaImg_Unit</span><span class="p">),</span> <span class="s1">&#39;Unit must be an image measurement unit object&#39;</span>
        <span class="k">assert</span> <span class="n">unit</span><span class="o">.</span><span class="n">check_calibration_exist</span><span class="p">(),</span> <span class="s1">&#39;Unit does not contain any metadata&#39;</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">conn</span><span class="p">,</span> <span class="n">sql</span><span class="o">.</span><span class="n">Connection</span><span class="p">),</span> <span class="s1">&#39;Connection must be a sqlite3 connection&#39;</span>

        <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>

        <span class="c1"># Retrieve the metadata</span>
        <span class="n">meta_dict</span> <span class="o">=</span> <span class="n">unit</span><span class="o">.</span><span class="n">get_metadata</span><span class="p">()</span>
        <span class="n">meta_types_dict</span> <span class="o">=</span> <span class="n">unit</span><span class="o">.</span><span class="n">get_metadata_types</span><span class="p">()</span>
        <span class="n">table_metadata</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_table_prefix</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_new_save_parameters</span><span class="p">[</span><span class="s1">&#39;meta_table&#39;</span><span class="p">]</span>

        <span class="c1"># Create the table for the metadata and calibration parameters</span>
        <span class="n">query_keys</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="n">list_values_metadata</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">meta_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">meta_types_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="ow">in</span> <span class="p">[</span><span class="nb">int</span><span class="p">,</span><span class="nb">float</span><span class="p">]:</span>
                <span class="n">query_keys</span> <span class="o">+=</span> <span class="s1">&#39;, </span><span class="si">{}</span><span class="s1"> REAL&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
                <span class="n">list_values_metadata</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">meta_dict</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
            <span class="k">elif</span> <span class="n">meta_types_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">==</span> <span class="nb">str</span><span class="p">:</span>
                <span class="n">query_keys</span> <span class="o">+=</span> <span class="s1">&#39;, </span><span class="si">{}</span><span class="s1"> TEXT&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
                <span class="n">list_values_metadata</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">meta_dict</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
            <span class="k">elif</span> <span class="n">meta_types_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="ow">in</span> <span class="p">[</span><span class="nb">list</span><span class="p">,</span><span class="nb">tuple</span><span class="p">,</span><span class="nb">dict</span><span class="p">]:</span>
                <span class="n">query_keys</span> <span class="o">+=</span> <span class="s1">&#39;, </span><span class="si">{}</span><span class="s1"> TEXT&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
                <span class="n">list_values_metadata</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">meta_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Metadata type not recognized&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">query_keys</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span> <span class="k">raise</span> <span class="ne">AssertionError</span><span class="p">(</span><span class="s1">&#39;No metadata found&#39;</span><span class="p">)</span>

        <span class="n">query_keys</span> <span class="o">=</span> <span class="n">query_keys</span><span class="p">[</span><span class="mi">2</span><span class="p">:]</span>
        <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE IF NOT EXISTS </span><span class="si">{}</span><span class="s1"> (</span><span class="si">{}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">table_metadata</span><span class="p">,</span><span class="n">query_keys</span><span class="p">))</span>

        <span class="c1"># Prepare the values for insertion</span>
        <span class="n">query_keys</span> <span class="o">=</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">meta_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="n">query_metadata_values</span> <span class="o">=</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39;?&#39;</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">meta_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()))])</span>
        <span class="n">query</span> <span class="o">=</span> <span class="s1">&#39;INSERT INTO </span><span class="si">{}</span><span class="s1"> (</span><span class="si">{}</span><span class="s1">) VALUES (</span><span class="si">{}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">table_metadata</span><span class="p">,</span><span class="n">query_keys</span><span class="p">,</span><span class="n">query_metadata_values</span><span class="p">)</span>
        <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">list_values_metadata</span><span class="p">)</span>

        <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
        <span class="k">return</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">load_ImageMeasurementHub_database</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">loadpath</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span><span class="n">hub</span><span class="p">:</span><span class="n">MeaImg_Hub</span><span class="o">|</span><span class="kc">None</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Loads the measurements from a database</span>

<span class="sd">        Args:</span>
<span class="sd">            loadpath (str): Path to the database</span>
<span class="sd">            hub (ImageMeasurement_Hub|None): Image measurement hub object, if None, a new hub is created.</span>
<span class="sd">                Defaults to None.</span>

<span class="sd">        Returns:</span>
<span class="sd">            ImageMeasurement_Hub: Image measurement hub object</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">loadpath</span><span class="p">),</span> <span class="s1">&#39;Path does not exist&#39;</span>
        <span class="k">assert</span> <span class="n">loadpath</span><span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">:]</span> <span class="o">==</span> <span class="s1">&#39;.db&#39;</span><span class="p">,</span> <span class="s1">&#39;File is not a database&#39;</span>

        <span class="c1"># Initialise the ImageMeasurement_Hub</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">hub</span><span class="p">,</span> <span class="n">MeaImg_Hub</span><span class="p">):</span> <span class="n">hub</span> <span class="o">=</span> <span class="n">MeaImg_Hub</span><span class="p">()</span>

        <span class="c1"># Connect to the database</span>
        <span class="n">conn</span> <span class="o">=</span> <span class="n">sql</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">loadpath</span><span class="p">)</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">row_factory</span> <span class="o">=</span> <span class="n">sql</span><span class="o">.</span><span class="n">Row</span>

        <span class="c1"># Create a cursor object</span>
        <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>

        <span class="c1"># Load the measurements from the database</span>
        <span class="n">table_metadata</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_table_prefix</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_new_save_parameters</span><span class="p">[</span><span class="s1">&#39;meta_table&#39;</span><span class="p">]</span>

        <span class="c1"># Select all the rows in the metadata table</span>
        <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;SELECT * FROM </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">table_metadata</span><span class="p">))</span>
        <span class="n">rows</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>

        <span class="n">unit</span> <span class="o">=</span> <span class="n">MeaImg_Unit</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span><span class="kc">None</span><span class="p">,</span><span class="n">reconstruct</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">metadata_types</span> <span class="o">=</span> <span class="n">unit</span><span class="o">.</span><span class="n">get_metadata_types</span><span class="p">()</span>
        <span class="n">key_dict</span> <span class="o">=</span> <span class="p">[</span><span class="n">key</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">metadata_types</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="k">if</span> <span class="n">metadata_types</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">==</span> <span class="nb">dict</span><span class="p">]</span>

        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">rows</span><span class="p">:</span>
            <span class="n">row</span><span class="p">:</span><span class="n">sql</span><span class="o">.</span><span class="n">Row</span>
            <span class="n">dict_row</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">key_dict</span><span class="p">:</span>
                <span class="n">dict_row</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">dict_row</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
            <span class="n">unit</span> <span class="o">=</span> <span class="n">MeaImg_Unit</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span><span class="kc">None</span><span class="p">,</span><span class="n">reconstruct</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">unit</span><span class="o">.</span><span class="n">set_metadata_fromfile</span><span class="p">(</span><span class="n">dict_row</span><span class="p">)</span>
            <span class="n">unit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">load_ImageMeasurementUnit_database</span><span class="p">(</span><span class="n">unit</span><span class="p">,</span><span class="n">unit</span><span class="o">.</span><span class="n">get_IdName</span><span class="p">()[</span><span class="mi">0</span><span class="p">],</span>
                                                           <span class="n">conn</span><span class="o">=</span><span class="n">conn</span><span class="p">,</span><span class="n">conn_path</span><span class="o">=</span><span class="n">loadpath</span><span class="p">)</span>
            <span class="n">hub</span><span class="o">.</span><span class="n">append_ImageMeasurementUnit</span><span class="p">(</span><span class="n">unit</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">load_ImageMeasurementUnit_database</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">unit</span><span class="p">:</span><span class="n">MeaImg_Unit</span><span class="p">,</span>
        <span class="n">unit_id</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span><span class="n">conn</span><span class="p">:</span><span class="n">sql</span><span class="o">.</span><span class="n">Connection</span><span class="p">,</span><span class="n">conn_path</span><span class="p">:</span><span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MeaImg_Unit</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Loads the measurements from a database connected</span>

<span class="sd">        Args:</span>
<span class="sd">            unit (ImageMeasurement_Unit): Image measurement unit object to load</span>
<span class="sd">            unit_id (str): ID of the ImageMeasurement_Unit</span>
<span class="sd">            conn (sql.Connection): Connection to the database</span>
<span class="sd">            conn_path (str): Path to the database</span>

<span class="sd">        Returns:</span>
<span class="sd">            ImageMeasurement_Unit: Image measurement unit object</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">unit</span><span class="p">,</span> <span class="n">MeaImg_Unit</span><span class="p">),</span> <span class="s1">&#39;Unit must be an image measurement unit object&#39;</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">unit_id</span><span class="p">,</span> <span class="nb">str</span><span class="p">),</span> <span class="s1">&#39;Unit ID must be a string&#39;</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">conn</span><span class="p">,</span> <span class="n">sql</span><span class="o">.</span><span class="n">Connection</span><span class="p">),</span> <span class="s1">&#39;Connection must be a sqlite3 connection&#39;</span>

        <span class="n">conn</span><span class="o">.</span><span class="n">row_factory</span> <span class="o">=</span> <span class="n">sql</span><span class="o">.</span><span class="n">Row</span>
        <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
        <span class="n">table_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_table_prefix</span> <span class="o">+</span> <span class="n">unit_id</span>

        <span class="c1"># Load the measurements from the database</span>
        <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;SELECT * FROM </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">table_name</span><span class="p">))</span>
        <span class="n">rows</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>

        <span class="n">dict_types</span> <span class="o">=</span> <span class="n">unit</span><span class="o">.</span><span class="n">get_dict_measurement_types</span><span class="p">()</span>
        <span class="n">dict_mea</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">dict_types</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">dict_mea</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">rows</span><span class="p">:</span>
            <span class="n">row</span><span class="p">:</span><span class="n">sql</span><span class="o">.</span><span class="n">Row</span>
            <span class="n">dict_row</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">dict_types</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">dict_types</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">==</span> <span class="nb">int</span><span class="p">:</span>
                    <span class="n">dict_mea</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">dict_row</span><span class="p">[</span><span class="n">key</span><span class="p">])))</span>
                <span class="k">elif</span> <span class="n">dict_types</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">==</span> <span class="nb">float</span><span class="p">:</span>
                    <span class="n">dict_mea</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">dict_row</span><span class="p">[</span><span class="n">key</span><span class="p">]))</span>
                <span class="k">elif</span> <span class="n">dict_types</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">==</span> <span class="nb">str</span><span class="p">:</span>
                    <span class="n">dict_mea</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">dict_row</span><span class="p">[</span><span class="n">key</span><span class="p">]))</span>
                <span class="k">elif</span> <span class="n">dict_types</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="ow">in</span> <span class="p">[</span><span class="nb">list</span><span class="p">,</span><span class="nb">tuple</span><span class="p">,</span><span class="nb">dict</span><span class="p">]:</span>
                    <span class="n">dict_mea</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">dict_row</span><span class="p">[</span><span class="n">key</span><span class="p">]))</span>
                <span class="k">elif</span> <span class="n">dict_types</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">==</span> <span class="n">Image</span><span class="o">.</span><span class="n">Image</span><span class="p">:</span>
                    <span class="n">imagepath</span> <span class="o">=</span> <span class="n">dict_row</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
                    <span class="n">imagepath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">conn_path</span><span class="p">),</span><span class="n">imagepath</span><span class="p">)</span>
                    <span class="n">image</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">imagepath</span><span class="p">)</span>
                    <span class="n">dict_mea</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Measurement type not recognized&#39;</span><span class="p">)</span>

        <span class="n">unit</span><span class="o">.</span><span class="n">set_dict_measurement_fromfile</span><span class="p">(</span><span class="n">dict_mea</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">unit</span>
</code></pre></div></td></tr></table></div>
              </details>



<div class="doc doc-children">










<div class="doc doc-object doc-function">


<h3 id="iris.data.measurement_image.MeaImg_Handler.load_ImageMeasurementHub_database" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">load_ImageMeasurementHub_database</span><span class="p">(</span><span class="n">loadpath</span><span class="p">,</span> <span class="n">hub</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Loads the measurements from a database</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>loadpath</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Path to the database</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>hub</code>
            </td>
            <td>
                  <code><span title="ImageMeasurement_Hub">ImageMeasurement_Hub</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Image measurement hub object, if None, a new hub is created.
Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>ImageMeasurement_Hub</code></td>            <td>
                  <code>None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Image measurement hub object</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/data/measurement_image.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1249</span>
<span class="normal">1250</span>
<span class="normal">1251</span>
<span class="normal">1252</span>
<span class="normal">1253</span>
<span class="normal">1254</span>
<span class="normal">1255</span>
<span class="normal">1256</span>
<span class="normal">1257</span>
<span class="normal">1258</span>
<span class="normal">1259</span>
<span class="normal">1260</span>
<span class="normal">1261</span>
<span class="normal">1262</span>
<span class="normal">1263</span>
<span class="normal">1264</span>
<span class="normal">1265</span>
<span class="normal">1266</span>
<span class="normal">1267</span>
<span class="normal">1268</span>
<span class="normal">1269</span>
<span class="normal">1270</span>
<span class="normal">1271</span>
<span class="normal">1272</span>
<span class="normal">1273</span>
<span class="normal">1274</span>
<span class="normal">1275</span>
<span class="normal">1276</span>
<span class="normal">1277</span>
<span class="normal">1278</span>
<span class="normal">1279</span>
<span class="normal">1280</span>
<span class="normal">1281</span>
<span class="normal">1282</span>
<span class="normal">1283</span>
<span class="normal">1284</span>
<span class="normal">1285</span>
<span class="normal">1286</span>
<span class="normal">1287</span>
<span class="normal">1288</span>
<span class="normal">1289</span>
<span class="normal">1290</span>
<span class="normal">1291</span>
<span class="normal">1292</span>
<span class="normal">1293</span>
<span class="normal">1294</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">load_ImageMeasurementHub_database</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">loadpath</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span><span class="n">hub</span><span class="p">:</span><span class="n">MeaImg_Hub</span><span class="o">|</span><span class="kc">None</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Loads the measurements from a database</span>

<span class="sd">    Args:</span>
<span class="sd">        loadpath (str): Path to the database</span>
<span class="sd">        hub (ImageMeasurement_Hub|None): Image measurement hub object, if None, a new hub is created.</span>
<span class="sd">            Defaults to None.</span>

<span class="sd">    Returns:</span>
<span class="sd">        ImageMeasurement_Hub: Image measurement hub object</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">assert</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">loadpath</span><span class="p">),</span> <span class="s1">&#39;Path does not exist&#39;</span>
    <span class="k">assert</span> <span class="n">loadpath</span><span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">:]</span> <span class="o">==</span> <span class="s1">&#39;.db&#39;</span><span class="p">,</span> <span class="s1">&#39;File is not a database&#39;</span>

    <span class="c1"># Initialise the ImageMeasurement_Hub</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">hub</span><span class="p">,</span> <span class="n">MeaImg_Hub</span><span class="p">):</span> <span class="n">hub</span> <span class="o">=</span> <span class="n">MeaImg_Hub</span><span class="p">()</span>

    <span class="c1"># Connect to the database</span>
    <span class="n">conn</span> <span class="o">=</span> <span class="n">sql</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">loadpath</span><span class="p">)</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">row_factory</span> <span class="o">=</span> <span class="n">sql</span><span class="o">.</span><span class="n">Row</span>

    <span class="c1"># Create a cursor object</span>
    <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>

    <span class="c1"># Load the measurements from the database</span>
    <span class="n">table_metadata</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_table_prefix</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_new_save_parameters</span><span class="p">[</span><span class="s1">&#39;meta_table&#39;</span><span class="p">]</span>

    <span class="c1"># Select all the rows in the metadata table</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;SELECT * FROM </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">table_metadata</span><span class="p">))</span>
    <span class="n">rows</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>

    <span class="n">unit</span> <span class="o">=</span> <span class="n">MeaImg_Unit</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span><span class="kc">None</span><span class="p">,</span><span class="n">reconstruct</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">metadata_types</span> <span class="o">=</span> <span class="n">unit</span><span class="o">.</span><span class="n">get_metadata_types</span><span class="p">()</span>
    <span class="n">key_dict</span> <span class="o">=</span> <span class="p">[</span><span class="n">key</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">metadata_types</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="k">if</span> <span class="n">metadata_types</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">==</span> <span class="nb">dict</span><span class="p">]</span>

    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">rows</span><span class="p">:</span>
        <span class="n">row</span><span class="p">:</span><span class="n">sql</span><span class="o">.</span><span class="n">Row</span>
        <span class="n">dict_row</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">key_dict</span><span class="p">:</span>
            <span class="n">dict_row</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">dict_row</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
        <span class="n">unit</span> <span class="o">=</span> <span class="n">MeaImg_Unit</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span><span class="kc">None</span><span class="p">,</span><span class="n">reconstruct</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">unit</span><span class="o">.</span><span class="n">set_metadata_fromfile</span><span class="p">(</span><span class="n">dict_row</span><span class="p">)</span>
        <span class="n">unit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">load_ImageMeasurementUnit_database</span><span class="p">(</span><span class="n">unit</span><span class="p">,</span><span class="n">unit</span><span class="o">.</span><span class="n">get_IdName</span><span class="p">()[</span><span class="mi">0</span><span class="p">],</span>
                                                       <span class="n">conn</span><span class="o">=</span><span class="n">conn</span><span class="p">,</span><span class="n">conn_path</span><span class="o">=</span><span class="n">loadpath</span><span class="p">)</span>
        <span class="n">hub</span><span class="o">.</span><span class="n">append_ImageMeasurementUnit</span><span class="p">(</span><span class="n">unit</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.data.measurement_image.MeaImg_Handler.load_ImageMeasurementUnit_database" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">load_ImageMeasurementUnit_database</span><span class="p">(</span><span class="n">unit</span><span class="p">,</span> <span class="n">unit_id</span><span class="p">,</span> <span class="n">conn</span><span class="p">,</span> <span class="n">conn_path</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Loads the measurements from a database connected</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>unit</code>
            </td>
            <td>
                  <code><span title="ImageMeasurement_Unit">ImageMeasurement_Unit</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Image measurement unit object to load</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>unit_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the ImageMeasurement_Unit</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>conn</code>
            </td>
            <td>
                  <code><span title="sqlite3.Connection">Connection</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Connection to the database</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>conn_path</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Path to the database</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>ImageMeasurement_Unit</code></td>            <td>
                  <code><a class="autorefs autorefs-internal" title="MeaImg_Unit (iris.data.measurement_image.MeaImg_Unit)" href="#iris.data.measurement_image.MeaImg_Unit">MeaImg_Unit</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Image measurement unit object</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/data/measurement_image.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1296</span>
<span class="normal">1297</span>
<span class="normal">1298</span>
<span class="normal">1299</span>
<span class="normal">1300</span>
<span class="normal">1301</span>
<span class="normal">1302</span>
<span class="normal">1303</span>
<span class="normal">1304</span>
<span class="normal">1305</span>
<span class="normal">1306</span>
<span class="normal">1307</span>
<span class="normal">1308</span>
<span class="normal">1309</span>
<span class="normal">1310</span>
<span class="normal">1311</span>
<span class="normal">1312</span>
<span class="normal">1313</span>
<span class="normal">1314</span>
<span class="normal">1315</span>
<span class="normal">1316</span>
<span class="normal">1317</span>
<span class="normal">1318</span>
<span class="normal">1319</span>
<span class="normal">1320</span>
<span class="normal">1321</span>
<span class="normal">1322</span>
<span class="normal">1323</span>
<span class="normal">1324</span>
<span class="normal">1325</span>
<span class="normal">1326</span>
<span class="normal">1327</span>
<span class="normal">1328</span>
<span class="normal">1329</span>
<span class="normal">1330</span>
<span class="normal">1331</span>
<span class="normal">1332</span>
<span class="normal">1333</span>
<span class="normal">1334</span>
<span class="normal">1335</span>
<span class="normal">1336</span>
<span class="normal">1337</span>
<span class="normal">1338</span>
<span class="normal">1339</span>
<span class="normal">1340</span>
<span class="normal">1341</span>
<span class="normal">1342</span>
<span class="normal">1343</span>
<span class="normal">1344</span>
<span class="normal">1345</span>
<span class="normal">1346</span>
<span class="normal">1347</span>
<span class="normal">1348</span>
<span class="normal">1349</span>
<span class="normal">1350</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">load_ImageMeasurementUnit_database</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">unit</span><span class="p">:</span><span class="n">MeaImg_Unit</span><span class="p">,</span>
    <span class="n">unit_id</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span><span class="n">conn</span><span class="p">:</span><span class="n">sql</span><span class="o">.</span><span class="n">Connection</span><span class="p">,</span><span class="n">conn_path</span><span class="p">:</span><span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MeaImg_Unit</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Loads the measurements from a database connected</span>

<span class="sd">    Args:</span>
<span class="sd">        unit (ImageMeasurement_Unit): Image measurement unit object to load</span>
<span class="sd">        unit_id (str): ID of the ImageMeasurement_Unit</span>
<span class="sd">        conn (sql.Connection): Connection to the database</span>
<span class="sd">        conn_path (str): Path to the database</span>

<span class="sd">    Returns:</span>
<span class="sd">        ImageMeasurement_Unit: Image measurement unit object</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">unit</span><span class="p">,</span> <span class="n">MeaImg_Unit</span><span class="p">),</span> <span class="s1">&#39;Unit must be an image measurement unit object&#39;</span>
    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">unit_id</span><span class="p">,</span> <span class="nb">str</span><span class="p">),</span> <span class="s1">&#39;Unit ID must be a string&#39;</span>
    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">conn</span><span class="p">,</span> <span class="n">sql</span><span class="o">.</span><span class="n">Connection</span><span class="p">),</span> <span class="s1">&#39;Connection must be a sqlite3 connection&#39;</span>

    <span class="n">conn</span><span class="o">.</span><span class="n">row_factory</span> <span class="o">=</span> <span class="n">sql</span><span class="o">.</span><span class="n">Row</span>
    <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
    <span class="n">table_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_table_prefix</span> <span class="o">+</span> <span class="n">unit_id</span>

    <span class="c1"># Load the measurements from the database</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;SELECT * FROM </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">table_name</span><span class="p">))</span>
    <span class="n">rows</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>

    <span class="n">dict_types</span> <span class="o">=</span> <span class="n">unit</span><span class="o">.</span><span class="n">get_dict_measurement_types</span><span class="p">()</span>
    <span class="n">dict_mea</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">dict_types</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="n">dict_mea</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">rows</span><span class="p">:</span>
        <span class="n">row</span><span class="p">:</span><span class="n">sql</span><span class="o">.</span><span class="n">Row</span>
        <span class="n">dict_row</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">dict_types</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">dict_types</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">==</span> <span class="nb">int</span><span class="p">:</span>
                <span class="n">dict_mea</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">dict_row</span><span class="p">[</span><span class="n">key</span><span class="p">])))</span>
            <span class="k">elif</span> <span class="n">dict_types</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">==</span> <span class="nb">float</span><span class="p">:</span>
                <span class="n">dict_mea</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">dict_row</span><span class="p">[</span><span class="n">key</span><span class="p">]))</span>
            <span class="k">elif</span> <span class="n">dict_types</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">==</span> <span class="nb">str</span><span class="p">:</span>
                <span class="n">dict_mea</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">dict_row</span><span class="p">[</span><span class="n">key</span><span class="p">]))</span>
            <span class="k">elif</span> <span class="n">dict_types</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="ow">in</span> <span class="p">[</span><span class="nb">list</span><span class="p">,</span><span class="nb">tuple</span><span class="p">,</span><span class="nb">dict</span><span class="p">]:</span>
                <span class="n">dict_mea</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">dict_row</span><span class="p">[</span><span class="n">key</span><span class="p">]))</span>
            <span class="k">elif</span> <span class="n">dict_types</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">==</span> <span class="n">Image</span><span class="o">.</span><span class="n">Image</span><span class="p">:</span>
                <span class="n">imagepath</span> <span class="o">=</span> <span class="n">dict_row</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
                <span class="n">imagepath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">conn_path</span><span class="p">),</span><span class="n">imagepath</span><span class="p">)</span>
                <span class="n">image</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">imagepath</span><span class="p">)</span>
                <span class="n">dict_mea</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Measurement type not recognized&#39;</span><span class="p">)</span>

    <span class="n">unit</span><span class="o">.</span><span class="n">set_dict_measurement_fromfile</span><span class="p">(</span><span class="n">dict_mea</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">unit</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.data.measurement_image.MeaImg_Handler.load_calibration_json" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">load_calibration_json</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Loads the calibration parameters from a JSON file</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>ImageMeasurement_Calibration</code></td>            <td>
                  <code><a class="autorefs autorefs-internal" title="ImgMea_Cal


  
      dataclass
   (iris.data.calibration_objective.ImgMea_Cal)" href="../calibration_objective/#iris.data.calibration_objective.ImgMea_Cal">ImgMea_Cal</a> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ImageMeasurement_Calibration object</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/data/measurement_image.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 980</span>
<span class="normal"> 981</span>
<span class="normal"> 982</span>
<span class="normal"> 983</span>
<span class="normal"> 984</span>
<span class="normal"> 985</span>
<span class="normal"> 986</span>
<span class="normal"> 987</span>
<span class="normal"> 988</span>
<span class="normal"> 989</span>
<span class="normal"> 990</span>
<span class="normal"> 991</span>
<span class="normal"> 992</span>
<span class="normal"> 993</span>
<span class="normal"> 994</span>
<span class="normal"> 995</span>
<span class="normal"> 996</span>
<span class="normal"> 997</span>
<span class="normal"> 998</span>
<span class="normal"> 999</span>
<span class="normal">1000</span>
<span class="normal">1001</span>
<span class="normal">1002</span>
<span class="normal">1003</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">load_calibration_json</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ImgMea_Cal</span><span class="o">|</span><span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Loads the calibration parameters from a JSON file</span>

<span class="sd">    Returns:</span>
<span class="sd">        ImageMeasurement_Calibration: ImageMeasurement_Calibration object</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">cal</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">savepath</span> <span class="o">=</span> <span class="n">qw</span><span class="o">.</span><span class="n">QFileDialog</span><span class="o">.</span><span class="n">getOpenFileName</span><span class="p">(</span>
            <span class="kc">None</span><span class="p">,</span>
            <span class="s1">&#39;Choose a JSON file to load the calibration parameters from&#39;</span><span class="p">,</span>
            <span class="s1">&#39;&#39;</span><span class="p">,</span>
            <span class="s1">&#39;JSON files (*.json)&#39;</span>
        <span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">assert</span> <span class="n">savepath</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;Load path is empty&#39;</span>

        <span class="n">cal</span> <span class="o">=</span> <span class="n">ImgMea_Cal</span><span class="p">()</span>
        <span class="n">cal</span><span class="o">.</span><span class="n">load_calibration_json</span><span class="p">(</span><span class="n">savepath</span><span class="p">)</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;load_calibration_json ERROR: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">cal</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.data.measurement_image.MeaImg_Handler.save_ImageMeasurementHub_database" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">save_ImageMeasurementHub_database</span><span class="p">(</span><span class="n">hub</span><span class="p">,</span> <span class="n">initdir</span><span class="p">,</span> <span class="n">savename</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Saves the measurements to a database</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>hub</code>
            </td>
            <td>
                  <code><span title="image_measurement_hub">image_measurement_hub</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Image measurement hub object to save</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>initdir</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Path to the directory</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>savename</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of the database</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="iris.utils.general.threading.Thread">Thread</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>threading.Thread: Thread of the saving process</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="AssertionError">AssertionError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Initial directory path does not exist</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="AssertionError">AssertionError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Initial directory path is not a directory</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="AssertionError">AssertionError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Save name is empty</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="note" open>
  <summary>Note</summary>
  <p>If the file already exist, it will still connect into the database and try to write into it</p>
</details>

            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/data/measurement_image.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1042</span>
<span class="normal">1043</span>
<span class="normal">1044</span>
<span class="normal">1045</span>
<span class="normal">1046</span>
<span class="normal">1047</span>
<span class="normal">1048</span>
<span class="normal">1049</span>
<span class="normal">1050</span>
<span class="normal">1051</span>
<span class="normal">1052</span>
<span class="normal">1053</span>
<span class="normal">1054</span>
<span class="normal">1055</span>
<span class="normal">1056</span>
<span class="normal">1057</span>
<span class="normal">1058</span>
<span class="normal">1059</span>
<span class="normal">1060</span>
<span class="normal">1061</span>
<span class="normal">1062</span>
<span class="normal">1063</span>
<span class="normal">1064</span>
<span class="normal">1065</span>
<span class="normal">1066</span>
<span class="normal">1067</span>
<span class="normal">1068</span>
<span class="normal">1069</span>
<span class="normal">1070</span>
<span class="normal">1071</span>
<span class="normal">1072</span>
<span class="normal">1073</span>
<span class="normal">1074</span>
<span class="normal">1075</span>
<span class="normal">1076</span>
<span class="normal">1077</span>
<span class="normal">1078</span>
<span class="normal">1079</span>
<span class="normal">1080</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@thread_assign</span>
<span class="k">def</span><span class="w"> </span><span class="nf">save_ImageMeasurementHub_database</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">hub</span><span class="p">:</span><span class="n">MeaImg_Hub</span><span class="p">,</span><span class="n">initdir</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span><span class="n">savename</span><span class="p">:</span><span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Saves the measurements to a database</span>

<span class="sd">    Args:</span>
<span class="sd">        hub (image_measurement_hub): Image measurement hub object to save</span>
<span class="sd">        initdir (str): Path to the directory</span>
<span class="sd">        savename (str): Name of the database</span>

<span class="sd">    Returns:</span>
<span class="sd">        threading.Thread: Thread of the saving process</span>

<span class="sd">    Raises:</span>
<span class="sd">        AssertionError: Initial directory path does not exist</span>
<span class="sd">        AssertionError: Initial directory path is not a directory</span>
<span class="sd">        AssertionError: Save name is empty</span>

<span class="sd">    Note:</span>
<span class="sd">        If the file already exist, it will still connect into the database and try to write into it</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">hub</span><span class="p">,</span> <span class="n">MeaImg_Hub</span><span class="p">),</span> <span class="s1">&#39;Hub must be an image measurement hub object&#39;</span>
    <span class="k">assert</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">initdir</span><span class="p">),</span> <span class="s1">&#39;Initial directory path does not exist&#39;</span>
    <span class="k">assert</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">initdir</span><span class="p">),</span> <span class="s1">&#39;Initial directory path is not a directory&#39;</span>
    <span class="k">assert</span> <span class="n">savename</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;Save name is empty&#39;</span>
    <span class="k">if</span> <span class="n">savename</span><span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">:]</span> <span class="o">!=</span> <span class="s1">&#39;.db&#39;</span><span class="p">:</span> <span class="n">savename</span> <span class="o">+=</span> <span class="s1">&#39;.db&#39;</span>
    <span class="n">savepath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">initdir</span><span class="p">,</span><span class="n">savename</span><span class="p">)</span>

    <span class="c1"># Connect to the database</span>
    <span class="n">conn</span> <span class="o">=</span> <span class="n">sql</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">savepath</span><span class="p">)</span>

    <span class="c1"># Save the measurements to a database</span>
    <span class="n">list_unitIDs</span> <span class="o">=</span> <span class="n">hub</span><span class="o">.</span><span class="n">get_list_ImageUnit_ids</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">unitID</span> <span class="ow">in</span> <span class="n">list_unitIDs</span><span class="p">:</span>
        <span class="n">unit</span> <span class="o">=</span> <span class="n">hub</span><span class="o">.</span><span class="n">get_ImageMeasurementUnit</span><span class="p">(</span><span class="n">unit_id</span><span class="o">=</span><span class="n">unitID</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_ImageMeasurementUnit_database</span><span class="p">(</span><span class="n">unit</span><span class="p">,</span><span class="n">conn</span><span class="p">,</span><span class="n">savepath</span><span class="p">)</span>

    <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.data.measurement_image.MeaImg_Handler.save_ImageMeasurementUnit_database" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">save_ImageMeasurementUnit_database</span><span class="p">(</span><span class="n">unit</span><span class="p">,</span> <span class="n">conn</span><span class="p">,</span> <span class="n">conn_path</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Saves the measurements to a database connected.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>unit</code>
            </td>
            <td>
                  <code><span title="ImageMeasurement_Unit">ImageMeasurement_Unit</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Unit to be saved</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>conn</code>
            </td>
            <td>
                  <code><span title="sqlite3.Connection">Connection</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Connection to the database</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>conn_path</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Path to the database</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/data/measurement_image.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1082</span>
<span class="normal">1083</span>
<span class="normal">1084</span>
<span class="normal">1085</span>
<span class="normal">1086</span>
<span class="normal">1087</span>
<span class="normal">1088</span>
<span class="normal">1089</span>
<span class="normal">1090</span>
<span class="normal">1091</span>
<span class="normal">1092</span>
<span class="normal">1093</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">save_ImageMeasurementUnit_database</span><span class="p">(</span>\
    <span class="bp">self</span><span class="p">,</span><span class="n">unit</span><span class="p">:</span><span class="n">MeaImg_Unit</span><span class="p">,</span><span class="n">conn</span><span class="p">:</span><span class="n">sql</span><span class="o">.</span><span class="n">Connection</span><span class="p">,</span><span class="n">conn_path</span><span class="p">:</span><span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Saves the measurements to a database connected.</span>

<span class="sd">    Args:</span>
<span class="sd">        unit (ImageMeasurement_Unit): Unit to be saved</span>
<span class="sd">        conn (sql.Connection): Connection to the database</span>
<span class="sd">        conn_path (str): Path to the database</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_save_ImageMeasurementUnit_metadata_database</span><span class="p">(</span><span class="n">unit</span><span class="p">,</span><span class="n">conn</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_save_ImageMeasurementUnit_measurement_database</span><span class="p">(</span><span class="n">unit</span><span class="p">,</span><span class="n">conn</span><span class="p">,</span><span class="n">conn_path</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.data.measurement_image.MeaImg_Handler.save_calibration_json" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">save_calibration_json</span><span class="p">(</span><span class="n">calibration</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Saves the calibration parameters to a JSON file</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>calibration</code>
            </td>
            <td>
                  <code><span title="ImageMeasurement_Calibration">ImageMeasurement_Calibration</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Calibration parameters object to be saved</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="tuple">tuple</span>[<span title="str">str</span>, <span title="str">str</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>tuple[str,str]|None: Directory path and name of the saved JSON file or None if failed</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/data/measurement_image.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">943</span>
<span class="normal">944</span>
<span class="normal">945</span>
<span class="normal">946</span>
<span class="normal">947</span>
<span class="normal">948</span>
<span class="normal">949</span>
<span class="normal">950</span>
<span class="normal">951</span>
<span class="normal">952</span>
<span class="normal">953</span>
<span class="normal">954</span>
<span class="normal">955</span>
<span class="normal">956</span>
<span class="normal">957</span>
<span class="normal">958</span>
<span class="normal">959</span>
<span class="normal">960</span>
<span class="normal">961</span>
<span class="normal">962</span>
<span class="normal">963</span>
<span class="normal">964</span>
<span class="normal">965</span>
<span class="normal">966</span>
<span class="normal">967</span>
<span class="normal">968</span>
<span class="normal">969</span>
<span class="normal">970</span>
<span class="normal">971</span>
<span class="normal">972</span>
<span class="normal">973</span>
<span class="normal">974</span>
<span class="normal">975</span>
<span class="normal">976</span>
<span class="normal">977</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">save_calibration_json</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">calibration</span><span class="p">:</span><span class="n">ImgMea_Cal</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span><span class="nb">str</span><span class="p">]</span><span class="o">|</span><span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Saves the calibration parameters to a JSON file</span>

<span class="sd">    Args:</span>
<span class="sd">        calibration (ImageMeasurement_Calibration): Calibration parameters object to be saved</span>

<span class="sd">    Returns:</span>
<span class="sd">        tuple[str,str]|None: Directory path and name of the saved JSON file or None if failed</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">calibration</span><span class="p">,</span> <span class="n">ImgMea_Cal</span><span class="p">),</span> <span class="s1">&#39;Calibration must be an ImageMeasurement_Calibration object&#39;</span>
        <span class="k">assert</span> <span class="n">calibration</span><span class="o">.</span><span class="n">check_calibration_set</span><span class="p">(),</span> <span class="s1">&#39;Calibration parameters are not set&#39;</span>

        <span class="c1"># Open a file dialog to choose the savepath</span>
        <span class="n">savepath</span> <span class="o">=</span> <span class="n">qw</span><span class="o">.</span><span class="n">QFileDialog</span><span class="o">.</span><span class="n">getSaveFileName</span><span class="p">(</span>
            <span class="kc">None</span><span class="p">,</span>
            <span class="s1">&#39;Choose a JSON file to save the calibration parameters to&#39;</span><span class="p">,</span>
            <span class="n">calibration</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="s1">&#39;JSON files (*.json)&#39;</span>
        <span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">assert</span> <span class="n">savepath</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;Save path is empty&#39;</span>

        <span class="k">if</span> <span class="n">savepath</span><span class="p">[</span><span class="o">-</span><span class="mi">5</span><span class="p">:]</span> <span class="o">!=</span> <span class="s1">&#39;.json&#39;</span><span class="p">:</span> <span class="n">savepath</span> <span class="o">+=</span> <span class="s1">&#39;.json&#39;</span>
        <span class="n">saveDirPath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">savepath</span><span class="p">)</span>
        <span class="n">savename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">savepath</span><span class="p">)</span>

        <span class="n">ret</span> <span class="o">=</span> <span class="p">(</span><span class="n">saveDirPath</span><span class="p">,</span><span class="n">savename</span><span class="p">)</span>

        <span class="n">calibration</span><span class="o">.</span><span class="n">save_calibration_json</span><span class="p">(</span><span class="n">savepath</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;save_calibration_json ERROR: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">return</span> <span class="n">ret</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.data.measurement_image.MeaImg_Handler.save_calibration_json_from_ImgMea" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">save_calibration_json_from_ImgMea</span><span class="p">(</span><span class="n">measurement</span><span class="p">,</span> <span class="n">savename</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Saves the calibration parameters to a JSON file</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>measurement</code>
            </td>
            <td>
                  <code><span title="image_measurement">image_measurement</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Image measurement object which calibration parameters are to be saved</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>savename</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of the JSON file. Default is the ID.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>tuple[str,str]: Directory path and name of the saved JSON file</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/data/measurement_image.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1005</span>
<span class="normal">1006</span>
<span class="normal">1007</span>
<span class="normal">1008</span>
<span class="normal">1009</span>
<span class="normal">1010</span>
<span class="normal">1011</span>
<span class="normal">1012</span>
<span class="normal">1013</span>
<span class="normal">1014</span>
<span class="normal">1015</span>
<span class="normal">1016</span>
<span class="normal">1017</span>
<span class="normal">1018</span>
<span class="normal">1019</span>
<span class="normal">1020</span>
<span class="normal">1021</span>
<span class="normal">1022</span>
<span class="normal">1023</span>
<span class="normal">1024</span>
<span class="normal">1025</span>
<span class="normal">1026</span>
<span class="normal">1027</span>
<span class="normal">1028</span>
<span class="normal">1029</span>
<span class="normal">1030</span>
<span class="normal">1031</span>
<span class="normal">1032</span>
<span class="normal">1033</span>
<span class="normal">1034</span>
<span class="normal">1035</span>
<span class="normal">1036</span>
<span class="normal">1037</span>
<span class="normal">1038</span>
<span class="normal">1039</span>
<span class="normal">1040</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">save_calibration_json_from_ImgMea</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">measurement</span><span class="p">:</span><span class="n">MeaImg_Unit</span><span class="p">,</span><span class="n">savename</span><span class="p">:</span><span class="nb">str</span><span class="o">|</span><span class="kc">None</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Saves the calibration parameters to a JSON file</span>

<span class="sd">    Args:</span>
<span class="sd">        measurement (image_measurement): Image measurement object which calibration parameters are to be saved</span>
<span class="sd">        savename (str): Name of the JSON file. Default is the ID.</span>

<span class="sd">    Returns:</span>
<span class="sd">        tuple[str,str]: Directory path and name of the saved JSON file</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">measurement</span><span class="p">,</span> <span class="n">MeaImg_Unit</span><span class="p">),</span> <span class="s1">&#39;Measurement must be an image measurement object&#39;</span>
    <span class="k">assert</span> <span class="n">measurement</span><span class="o">.</span><span class="n">check_calibration_exist</span><span class="p">(),</span> <span class="s1">&#39;Calibration parameters are not set&#39;</span>

    <span class="c1"># Open a file dialog to choose the savepath</span>
    <span class="n">savepath</span> <span class="o">=</span> <span class="n">qw</span><span class="o">.</span><span class="n">QFileDialog</span><span class="o">.</span><span class="n">getSaveFileName</span><span class="p">(</span>
        <span class="kc">None</span><span class="p">,</span>
        <span class="s1">&#39;Choose a JSON file to save the calibration parameters to&#39;</span><span class="p">,</span>
        <span class="n">savename</span> <span class="k">if</span> <span class="n">savename</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">measurement</span><span class="o">.</span><span class="n">get_ImageMeasurement_Calibration</span><span class="p">()</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
        <span class="s1">&#39;JSON files (*.json)&#39;</span>
    <span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">assert</span> <span class="n">savepath</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;Save path is empty&#39;</span>

    <span class="k">if</span> <span class="n">savepath</span><span class="p">[</span><span class="o">-</span><span class="mi">5</span><span class="p">:]</span> <span class="o">!=</span> <span class="s1">&#39;.json&#39;</span><span class="p">:</span> <span class="n">savepath</span> <span class="o">+=</span> <span class="s1">&#39;.json&#39;</span>
    <span class="n">saveDirPath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">savepath</span><span class="p">)</span>
    <span class="n">savename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">savepath</span><span class="p">)</span>

    <span class="c1"># Rename the calibration id to the savename</span>
    <span class="n">measurement</span><span class="o">.</span><span class="n">get_ImageMeasurement_Calibration</span><span class="p">()</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="n">savename</span><span class="p">[:</span><span class="o">-</span><span class="mi">5</span><span class="p">]</span>   <span class="c1"># Remove the &#39;.json&#39; extension</span>

    <span class="c1"># Save the calibration parameters to a JSON file</span>
    <span class="n">_</span><span class="p">,</span><span class="n">dict_calibration</span> <span class="o">=</span> <span class="n">measurement</span><span class="o">.</span><span class="n">get_calibration_asdict</span><span class="p">()</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">savepath</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
        <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">dict_calibration</span><span class="p">,</span><span class="n">file</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">saveDirPath</span><span class="p">,</span> <span class="n">savename</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="iris.data.measurement_image.MeaImg_Hub" class="doc doc-heading">
            <code>MeaImg_Hub</code>


</h2>


    <div class="doc doc-contents ">



        <p>A hub to store multiple ImageMeasurement_Units generated in a measurement session</p>








              <details class="mkdocstrings-source">
                <summary>Source code in <code>iris/data/measurement_image.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span>
<span class="normal">724</span>
<span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span>
<span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span>
<span class="normal">736</span>
<span class="normal">737</span>
<span class="normal">738</span>
<span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span>
<span class="normal">742</span>
<span class="normal">743</span>
<span class="normal">744</span>
<span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span>
<span class="normal">749</span>
<span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span>
<span class="normal">759</span>
<span class="normal">760</span>
<span class="normal">761</span>
<span class="normal">762</span>
<span class="normal">763</span>
<span class="normal">764</span>
<span class="normal">765</span>
<span class="normal">766</span>
<span class="normal">767</span>
<span class="normal">768</span>
<span class="normal">769</span>
<span class="normal">770</span>
<span class="normal">771</span>
<span class="normal">772</span>
<span class="normal">773</span>
<span class="normal">774</span>
<span class="normal">775</span>
<span class="normal">776</span>
<span class="normal">777</span>
<span class="normal">778</span>
<span class="normal">779</span>
<span class="normal">780</span>
<span class="normal">781</span>
<span class="normal">782</span>
<span class="normal">783</span>
<span class="normal">784</span>
<span class="normal">785</span>
<span class="normal">786</span>
<span class="normal">787</span>
<span class="normal">788</span>
<span class="normal">789</span>
<span class="normal">790</span>
<span class="normal">791</span>
<span class="normal">792</span>
<span class="normal">793</span>
<span class="normal">794</span>
<span class="normal">795</span>
<span class="normal">796</span>
<span class="normal">797</span>
<span class="normal">798</span>
<span class="normal">799</span>
<span class="normal">800</span>
<span class="normal">801</span>
<span class="normal">802</span>
<span class="normal">803</span>
<span class="normal">804</span>
<span class="normal">805</span>
<span class="normal">806</span>
<span class="normal">807</span>
<span class="normal">808</span>
<span class="normal">809</span>
<span class="normal">810</span>
<span class="normal">811</span>
<span class="normal">812</span>
<span class="normal">813</span>
<span class="normal">814</span>
<span class="normal">815</span>
<span class="normal">816</span>
<span class="normal">817</span>
<span class="normal">818</span>
<span class="normal">819</span>
<span class="normal">820</span>
<span class="normal">821</span>
<span class="normal">822</span>
<span class="normal">823</span>
<span class="normal">824</span>
<span class="normal">825</span>
<span class="normal">826</span>
<span class="normal">827</span>
<span class="normal">828</span>
<span class="normal">829</span>
<span class="normal">830</span>
<span class="normal">831</span>
<span class="normal">832</span>
<span class="normal">833</span>
<span class="normal">834</span>
<span class="normal">835</span>
<span class="normal">836</span>
<span class="normal">837</span>
<span class="normal">838</span>
<span class="normal">839</span>
<span class="normal">840</span>
<span class="normal">841</span>
<span class="normal">842</span>
<span class="normal">843</span>
<span class="normal">844</span>
<span class="normal">845</span>
<span class="normal">846</span>
<span class="normal">847</span>
<span class="normal">848</span>
<span class="normal">849</span>
<span class="normal">850</span>
<span class="normal">851</span>
<span class="normal">852</span>
<span class="normal">853</span>
<span class="normal">854</span>
<span class="normal">855</span>
<span class="normal">856</span>
<span class="normal">857</span>
<span class="normal">858</span>
<span class="normal">859</span>
<span class="normal">860</span>
<span class="normal">861</span>
<span class="normal">862</span>
<span class="normal">863</span>
<span class="normal">864</span>
<span class="normal">865</span>
<span class="normal">866</span>
<span class="normal">867</span>
<span class="normal">868</span>
<span class="normal">869</span>
<span class="normal">870</span>
<span class="normal">871</span>
<span class="normal">872</span>
<span class="normal">873</span>
<span class="normal">874</span>
<span class="normal">875</span>
<span class="normal">876</span>
<span class="normal">877</span>
<span class="normal">878</span>
<span class="normal">879</span>
<span class="normal">880</span>
<span class="normal">881</span>
<span class="normal">882</span>
<span class="normal">883</span>
<span class="normal">884</span>
<span class="normal">885</span>
<span class="normal">886</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">MeaImg_Hub</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A hub to store multiple ImageMeasurement_Units generated in a measurement session</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_version</span> <span class="o">=</span> <span class="s1">&#39;v2.5.0-2024.11.04&#39;</span> <span class="c1"># Version of the ImageMeasurement_Hub</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dict_ImageUnits</span> <span class="o">=</span> <span class="p">{</span>           <span class="c1"># Dictionary to store the ImageMeasurement_Units</span>
            <span class="s1">&#39;version&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_version</span><span class="p">,</span>
            <span class="s1">&#39;unit_id&#39;</span><span class="p">:</span> <span class="p">[],</span>
            <span class="s1">&#39;image_unit&#39;</span><span class="p">:</span> <span class="p">[]</span>
            <span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_dict_unit_NameID</span> <span class="o">=</span> <span class="p">{}</span>         <span class="c1"># Dictionary to store the unit name and ID relation (name:ID)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dict_unit_IDName</span> <span class="o">=</span> <span class="p">{}</span>         <span class="c1"># Dictionary to store the unit ID and name relation (ID:name)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_list_observer</span> <span class="o">=</span> <span class="p">[]</span>          <span class="c1"># List of observers for the hub</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">check_measurement_exist</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Checks if the measurements are stored</span>

<span class="sd">        Returns:</span>
<span class="sd">            bool: True if the measurements are stored, False otherwise</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_dict_ImageUnits</span><span class="p">[</span><span class="s1">&#39;unit_id&#39;</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">0</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_dict_IDtoName</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the dictionary of the unit ID to name</span>

<span class="sd">        Returns:</span>
<span class="sd">            dict: Dictionary of the unit ID to name</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dict_unit_IDName</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_dict_nameToID</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the dictionary of the unit name to ID</span>

<span class="sd">        Returns:</span>
<span class="sd">            dict: Dictionary of the unit name to ID</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dict_unit_NameID</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_list_ImageUnit_ids</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the list of the ImageMeasurement_Unit IDs</span>

<span class="sd">        Returns:</span>
<span class="sd">            list[str]: List of the ImageMeasurement_Unit IDs</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dict_ImageUnits</span><span class="p">[</span><span class="s1">&#39;unit_id&#39;</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_list_ImageUnit_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the list of the ImageMeasurement_Unit names</span>

<span class="sd">        Returns:</span>
<span class="sd">            list[str]: List of the ImageMeasurement_Unit names</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_dict_unit_IDName</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_summary_units</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">list</span><span class="p">,</span><span class="nb">list</span><span class="p">,</span><span class="nb">list</span><span class="p">,</span><span class="nb">list</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the summary of the ImageMeasurement_Units</span>

<span class="sd">        Returns:</span>
<span class="sd">            tuple: list of unit IDs, list of unit names,</span>
<span class="sd">                list of number of measurements in the unit,</span>
<span class="sd">                list of metadata dictionaries</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">list_units</span><span class="p">:</span><span class="nb">list</span><span class="p">[</span><span class="n">MeaImg_Unit</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dict_ImageUnits</span><span class="p">[</span><span class="s1">&#39;image_unit&#39;</span><span class="p">]</span>

        <span class="n">list_ids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dict_ImageUnits</span><span class="p">[</span><span class="s1">&#39;unit_id&#39;</span><span class="p">]</span>
        <span class="n">list_names</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_dict_unit_IDName</span><span class="p">[</span><span class="nb">id</span><span class="p">]</span> <span class="k">for</span> <span class="nb">id</span> <span class="ow">in</span> <span class="n">list_ids</span><span class="p">]</span>
        <span class="n">list_numMeasurements</span> <span class="o">=</span> <span class="p">[</span><span class="n">unit</span><span class="o">.</span><span class="n">get_numMeasurements</span><span class="p">()</span> <span class="k">for</span> <span class="n">unit</span> <span class="ow">in</span> <span class="n">list_units</span><span class="p">]</span>
        <span class="n">list_metadata</span> <span class="o">=</span> <span class="p">[</span><span class="n">unit</span><span class="o">.</span><span class="n">get_metadata</span><span class="p">(</span><span class="n">incl_nameid</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="k">for</span> <span class="n">unit</span> <span class="ow">in</span> <span class="n">list_units</span><span class="p">]</span>

        <span class="k">return</span> <span class="n">list_ids</span><span class="p">,</span> <span class="n">list_names</span><span class="p">,</span> <span class="n">list_numMeasurements</span><span class="p">,</span> <span class="n">list_metadata</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">append_ImageMeasurementUnit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">unit</span><span class="p">:</span><span class="n">MeaImg_Unit</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Appends an ImageMeasurement_Unit to the hub</span>

<span class="sd">        Args:</span>
<span class="sd">            unit (ImageMeasurement_Unit): ImageMeasurement_Unit object to be appended</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">unit</span><span class="p">,</span> <span class="n">MeaImg_Unit</span><span class="p">),</span> <span class="s1">&#39;Unit must be an ImageMeasurement_Unit object&#39;</span>
        <span class="k">assert</span> <span class="n">unit</span><span class="o">.</span><span class="n">get_IdName</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dict_unit_IDName</span><span class="p">,</span> <span class="s1">&#39;Unit ID already exists&#39;</span>
        <span class="k">assert</span> <span class="n">unit</span><span class="o">.</span><span class="n">get_IdName</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dict_unit_NameID</span><span class="p">,</span> <span class="s1">&#39;Unit name already exists&#39;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_dict_ImageUnits</span><span class="p">[</span><span class="s1">&#39;unit_id&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">unit</span><span class="o">.</span><span class="n">get_IdName</span><span class="p">()[</span><span class="mi">0</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dict_ImageUnits</span><span class="p">[</span><span class="s1">&#39;image_unit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">unit</span><span class="p">)</span>

        <span class="n">unitId</span><span class="p">,</span><span class="n">unitName</span> <span class="o">=</span> <span class="n">unit</span><span class="o">.</span><span class="n">get_IdName</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dict_unit_NameID</span><span class="p">[</span><span class="n">unitName</span><span class="p">]</span> <span class="o">=</span> <span class="n">unitId</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dict_unit_IDName</span><span class="p">[</span><span class="n">unitId</span><span class="p">]</span> <span class="o">=</span> <span class="n">unitName</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">notify_observers</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">reset_ImageMeasurementUnits</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Resets the ImageMeasurement_Units in the hub</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dict_ImageUnits</span><span class="p">[</span><span class="s1">&#39;unit_id&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dict_ImageUnits</span><span class="p">[</span><span class="s1">&#39;image_unit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dict_unit_NameID</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dict_unit_IDName</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">notify_observers</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">remove_ImageMeasurementUnit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">unit_id</span><span class="p">:</span><span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Removes an ImageMeasurement_Unit from the hub</span>

<span class="sd">        Args:</span>
<span class="sd">            unit_id (str): ID of the ImageMeasurement_Unit to be removed</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="n">unit_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dict_ImageUnits</span><span class="p">[</span><span class="s1">&#39;unit_id&#39;</span><span class="p">],</span> <span class="s1">&#39;Unit ID does not exist&#39;</span>

        <span class="n">idx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dict_ImageUnits</span><span class="p">[</span><span class="s1">&#39;unit_id&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">unit_id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dict_ImageUnits</span><span class="p">[</span><span class="s1">&#39;unit_id&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">idx</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dict_ImageUnits</span><span class="p">[</span><span class="s1">&#39;image_unit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">idx</span><span class="p">)</span>

        <span class="n">unit_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dict_unit_IDName</span><span class="p">[</span><span class="n">unit_id</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dict_unit_NameID</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">unit_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dict_unit_IDName</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">unit_id</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">notify_observers</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_ImageMeasurementUnit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="o">*</span><span class="p">,</span><span class="n">unit_id</span><span class="p">:</span><span class="nb">str</span><span class="o">|</span><span class="kc">None</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">unit_name</span><span class="p">:</span><span class="nb">str</span><span class="o">|</span><span class="kc">None</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MeaImg_Unit</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns an ImageMeasurement_Unit from the hub</span>

<span class="sd">        Args:</span>
<span class="sd">            unit_id (str): ID of the ImageMeasurement_Unit</span>

<span class="sd">        Returns:</span>
<span class="sd">            ImageMeasurement_Unit: ImageMeasurement_Unit object</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="p">(</span><span class="n">unit_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">unit_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">),</span> <span class="s1">&#39;Either unit ID or unit name must be provided&#39;</span>
        <span class="k">assert</span> <span class="ow">not</span> <span class="p">(</span><span class="n">unit_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">unit_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">),</span> <span class="s1">&#39;Only one of unit ID or unit name must be provided&#39;</span>

        <span class="c1"># Get the unit ID from the unit name if provided</span>
        <span class="k">if</span> <span class="n">unit_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">assert</span> <span class="n">unit_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dict_unit_NameID</span><span class="p">,</span> <span class="s1">&#39;Unit name does not exist&#39;</span>
            <span class="n">unit_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dict_unit_NameID</span><span class="p">[</span><span class="n">unit_name</span><span class="p">]</span>

        <span class="k">assert</span> <span class="n">unit_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dict_ImageUnits</span><span class="p">[</span><span class="s1">&#39;unit_id&#39;</span><span class="p">],</span> <span class="s1">&#39;Unit ID does not exist&#39;</span>

        <span class="n">idx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dict_ImageUnits</span><span class="p">[</span><span class="s1">&#39;unit_id&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">unit_id</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dict_ImageUnits</span><span class="p">[</span><span class="s1">&#39;image_unit&#39;</span><span class="p">][</span><span class="n">idx</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">add_observer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">observer</span><span class="p">:</span><span class="n">Callable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds an observer to the hub</span>

<span class="sd">        Args:</span>
<span class="sd">            observer (Callable): Observer function to be added</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">observer</span><span class="p">,</span> <span class="n">Callable</span><span class="p">):</span> <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Observer must be a callable function&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_list_observer</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">observer</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">remove_observer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">observer</span><span class="p">:</span><span class="n">Callable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Removes an observer from the hub</span>

<span class="sd">        Args:</span>
<span class="sd">            observer (Callable): Observer function to be removed</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">observer</span><span class="p">,</span> <span class="n">Callable</span><span class="p">):</span> <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Observer must be a callable function&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">observer</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_list_observer</span><span class="p">:</span> <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Observer does not exist in the list&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_list_observer</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">observer</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">notify_observers</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Notifies all observers of an event</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">observer</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_list_observer</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span> <span class="n">observer</span><span class="p">()</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Observer notification error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">test_generate_dummy</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generates dummy ImageMeasurement_Units for testing purposes</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">cal</span> <span class="o">=</span> <span class="n">ImgMea_Cal</span><span class="p">()</span>
        <span class="n">cal</span><span class="o">.</span><span class="n">generate_dummy_params</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
            <span class="n">unit</span> <span class="o">=</span> <span class="n">MeaImg_Unit</span><span class="p">(</span><span class="n">reconstruct</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">unit</span><span class="o">.</span><span class="n">test_generate_dummy</span><span class="p">()</span>
            <span class="n">unit</span><span class="o">.</span><span class="n">set_name</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;unit_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">unit</span><span class="o">.</span><span class="n">set_calibration_ImageMeasurement_Calibration</span><span class="p">(</span><span class="n">cal</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">append_ImageMeasurementUnit</span><span class="p">(</span><span class="n">unit</span><span class="p">)</span>
        <span class="k">return</span>
</code></pre></div></td></tr></table></div>
              </details>



<div class="doc doc-children">










<div class="doc doc-object doc-function">


<h3 id="iris.data.measurement_image.MeaImg_Hub.add_observer" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_observer</span><span class="p">(</span><span class="n">observer</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Adds an observer to the hub</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>observer</code>
            </td>
            <td>
                  <code><span title="typing.Callable">Callable</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Observer function to be added</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/data/measurement_image.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">845</span>
<span class="normal">846</span>
<span class="normal">847</span>
<span class="normal">848</span>
<span class="normal">849</span>
<span class="normal">850</span>
<span class="normal">851</span>
<span class="normal">852</span>
<span class="normal">853</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">add_observer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">observer</span><span class="p">:</span><span class="n">Callable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds an observer to the hub</span>

<span class="sd">    Args:</span>
<span class="sd">        observer (Callable): Observer function to be added</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">observer</span><span class="p">,</span> <span class="n">Callable</span><span class="p">):</span> <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Observer must be a callable function&#39;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_list_observer</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">observer</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.data.measurement_image.MeaImg_Hub.append_ImageMeasurementUnit" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">append_ImageMeasurementUnit</span><span class="p">(</span><span class="n">unit</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Appends an ImageMeasurement_Unit to the hub</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>unit</code>
            </td>
            <td>
                  <code><span title="ImageMeasurement_Unit">ImageMeasurement_Unit</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ImageMeasurement_Unit object to be appended</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/data/measurement_image.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">772</span>
<span class="normal">773</span>
<span class="normal">774</span>
<span class="normal">775</span>
<span class="normal">776</span>
<span class="normal">777</span>
<span class="normal">778</span>
<span class="normal">779</span>
<span class="normal">780</span>
<span class="normal">781</span>
<span class="normal">782</span>
<span class="normal">783</span>
<span class="normal">784</span>
<span class="normal">785</span>
<span class="normal">786</span>
<span class="normal">787</span>
<span class="normal">788</span>
<span class="normal">789</span>
<span class="normal">790</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">append_ImageMeasurementUnit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">unit</span><span class="p">:</span><span class="n">MeaImg_Unit</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Appends an ImageMeasurement_Unit to the hub</span>

<span class="sd">    Args:</span>
<span class="sd">        unit (ImageMeasurement_Unit): ImageMeasurement_Unit object to be appended</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">unit</span><span class="p">,</span> <span class="n">MeaImg_Unit</span><span class="p">),</span> <span class="s1">&#39;Unit must be an ImageMeasurement_Unit object&#39;</span>
    <span class="k">assert</span> <span class="n">unit</span><span class="o">.</span><span class="n">get_IdName</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dict_unit_IDName</span><span class="p">,</span> <span class="s1">&#39;Unit ID already exists&#39;</span>
    <span class="k">assert</span> <span class="n">unit</span><span class="o">.</span><span class="n">get_IdName</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dict_unit_NameID</span><span class="p">,</span> <span class="s1">&#39;Unit name already exists&#39;</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_dict_ImageUnits</span><span class="p">[</span><span class="s1">&#39;unit_id&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">unit</span><span class="o">.</span><span class="n">get_IdName</span><span class="p">()[</span><span class="mi">0</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_dict_ImageUnits</span><span class="p">[</span><span class="s1">&#39;image_unit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">unit</span><span class="p">)</span>

    <span class="n">unitId</span><span class="p">,</span><span class="n">unitName</span> <span class="o">=</span> <span class="n">unit</span><span class="o">.</span><span class="n">get_IdName</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_dict_unit_NameID</span><span class="p">[</span><span class="n">unitName</span><span class="p">]</span> <span class="o">=</span> <span class="n">unitId</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_dict_unit_IDName</span><span class="p">[</span><span class="n">unitId</span><span class="p">]</span> <span class="o">=</span> <span class="n">unitName</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">notify_observers</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.data.measurement_image.MeaImg_Hub.check_measurement_exist" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">check_measurement_exist</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Checks if the measurements are stored</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>bool</code></td>            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if the measurements are stored, False otherwise</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/data/measurement_image.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">check_measurement_exist</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Checks if the measurements are stored</span>

<span class="sd">    Returns:</span>
<span class="sd">        bool: True if the measurements are stored, False otherwise</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_dict_ImageUnits</span><span class="p">[</span><span class="s1">&#39;unit_id&#39;</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">0</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.data.measurement_image.MeaImg_Hub.get_ImageMeasurementUnit" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_ImageMeasurementUnit</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">unit_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">unit_name</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Returns an ImageMeasurement_Unit from the hub</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>unit_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the ImageMeasurement_Unit</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>ImageMeasurement_Unit</code></td>            <td>
                  <code><a class="autorefs autorefs-internal" title="MeaImg_Unit (iris.data.measurement_image.MeaImg_Unit)" href="#iris.data.measurement_image.MeaImg_Unit">MeaImg_Unit</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ImageMeasurement_Unit object</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/data/measurement_image.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">822</span>
<span class="normal">823</span>
<span class="normal">824</span>
<span class="normal">825</span>
<span class="normal">826</span>
<span class="normal">827</span>
<span class="normal">828</span>
<span class="normal">829</span>
<span class="normal">830</span>
<span class="normal">831</span>
<span class="normal">832</span>
<span class="normal">833</span>
<span class="normal">834</span>
<span class="normal">835</span>
<span class="normal">836</span>
<span class="normal">837</span>
<span class="normal">838</span>
<span class="normal">839</span>
<span class="normal">840</span>
<span class="normal">841</span>
<span class="normal">842</span>
<span class="normal">843</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_ImageMeasurementUnit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="o">*</span><span class="p">,</span><span class="n">unit_id</span><span class="p">:</span><span class="nb">str</span><span class="o">|</span><span class="kc">None</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">unit_name</span><span class="p">:</span><span class="nb">str</span><span class="o">|</span><span class="kc">None</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MeaImg_Unit</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns an ImageMeasurement_Unit from the hub</span>

<span class="sd">    Args:</span>
<span class="sd">        unit_id (str): ID of the ImageMeasurement_Unit</span>

<span class="sd">    Returns:</span>
<span class="sd">        ImageMeasurement_Unit: ImageMeasurement_Unit object</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">assert</span> <span class="p">(</span><span class="n">unit_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">unit_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">),</span> <span class="s1">&#39;Either unit ID or unit name must be provided&#39;</span>
    <span class="k">assert</span> <span class="ow">not</span> <span class="p">(</span><span class="n">unit_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">unit_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">),</span> <span class="s1">&#39;Only one of unit ID or unit name must be provided&#39;</span>

    <span class="c1"># Get the unit ID from the unit name if provided</span>
    <span class="k">if</span> <span class="n">unit_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">assert</span> <span class="n">unit_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dict_unit_NameID</span><span class="p">,</span> <span class="s1">&#39;Unit name does not exist&#39;</span>
        <span class="n">unit_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dict_unit_NameID</span><span class="p">[</span><span class="n">unit_name</span><span class="p">]</span>

    <span class="k">assert</span> <span class="n">unit_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dict_ImageUnits</span><span class="p">[</span><span class="s1">&#39;unit_id&#39;</span><span class="p">],</span> <span class="s1">&#39;Unit ID does not exist&#39;</span>

    <span class="n">idx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dict_ImageUnits</span><span class="p">[</span><span class="s1">&#39;unit_id&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">unit_id</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dict_ImageUnits</span><span class="p">[</span><span class="s1">&#39;image_unit&#39;</span><span class="p">][</span><span class="n">idx</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.data.measurement_image.MeaImg_Hub.get_dict_IDtoName" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_dict_IDtoName</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Returns the dictionary of the unit ID to name</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>dict</code></td>            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dictionary of the unit ID to name</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/data/measurement_image.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span>
<span class="normal">724</span>
<span class="normal">725</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_dict_IDtoName</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the dictionary of the unit ID to name</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: Dictionary of the unit ID to name</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dict_unit_IDName</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.data.measurement_image.MeaImg_Hub.get_dict_nameToID" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_dict_nameToID</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Returns the dictionary of the unit name to ID</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>dict</code></td>            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dictionary of the unit name to ID</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/data/measurement_image.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span>
<span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_dict_nameToID</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the dictionary of the unit name to ID</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: Dictionary of the unit name to ID</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dict_unit_NameID</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.data.measurement_image.MeaImg_Hub.get_list_ImageUnit_ids" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_list_ImageUnit_ids</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Returns the list of the ImageMeasurement_Unit IDs</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>list[str]: List of the ImageMeasurement_Unit IDs</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/data/measurement_image.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">736</span>
<span class="normal">737</span>
<span class="normal">738</span>
<span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span>
<span class="normal">742</span>
<span class="normal">743</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_list_ImageUnit_ids</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the list of the ImageMeasurement_Unit IDs</span>

<span class="sd">    Returns:</span>
<span class="sd">        list[str]: List of the ImageMeasurement_Unit IDs</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dict_ImageUnits</span><span class="p">[</span><span class="s1">&#39;unit_id&#39;</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.data.measurement_image.MeaImg_Hub.get_list_ImageUnit_names" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_list_ImageUnit_names</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Returns the list of the ImageMeasurement_Unit names</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>list[str]: List of the ImageMeasurement_Unit names</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/data/measurement_image.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span>
<span class="normal">749</span>
<span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_list_ImageUnit_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the list of the ImageMeasurement_Unit names</span>

<span class="sd">    Returns:</span>
<span class="sd">        list[str]: List of the ImageMeasurement_Unit names</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_dict_unit_IDName</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.data.measurement_image.MeaImg_Hub.get_summary_units" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_summary_units</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Returns the summary of the ImageMeasurement_Units</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>tuple</code></td>            <td>
                  <code><span title="tuple">tuple</span>[<span title="list">list</span>, <span title="list">list</span>, <span title="list">list</span>, <span title="list">list</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>list of unit IDs, list of unit names,
list of number of measurements in the unit,
list of metadata dictionaries</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/data/measurement_image.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span>
<span class="normal">759</span>
<span class="normal">760</span>
<span class="normal">761</span>
<span class="normal">762</span>
<span class="normal">763</span>
<span class="normal">764</span>
<span class="normal">765</span>
<span class="normal">766</span>
<span class="normal">767</span>
<span class="normal">768</span>
<span class="normal">769</span>
<span class="normal">770</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_summary_units</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">list</span><span class="p">,</span><span class="nb">list</span><span class="p">,</span><span class="nb">list</span><span class="p">,</span><span class="nb">list</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the summary of the ImageMeasurement_Units</span>

<span class="sd">    Returns:</span>
<span class="sd">        tuple: list of unit IDs, list of unit names,</span>
<span class="sd">            list of number of measurements in the unit,</span>
<span class="sd">            list of metadata dictionaries</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">list_units</span><span class="p">:</span><span class="nb">list</span><span class="p">[</span><span class="n">MeaImg_Unit</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dict_ImageUnits</span><span class="p">[</span><span class="s1">&#39;image_unit&#39;</span><span class="p">]</span>

    <span class="n">list_ids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dict_ImageUnits</span><span class="p">[</span><span class="s1">&#39;unit_id&#39;</span><span class="p">]</span>
    <span class="n">list_names</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_dict_unit_IDName</span><span class="p">[</span><span class="nb">id</span><span class="p">]</span> <span class="k">for</span> <span class="nb">id</span> <span class="ow">in</span> <span class="n">list_ids</span><span class="p">]</span>
    <span class="n">list_numMeasurements</span> <span class="o">=</span> <span class="p">[</span><span class="n">unit</span><span class="o">.</span><span class="n">get_numMeasurements</span><span class="p">()</span> <span class="k">for</span> <span class="n">unit</span> <span class="ow">in</span> <span class="n">list_units</span><span class="p">]</span>
    <span class="n">list_metadata</span> <span class="o">=</span> <span class="p">[</span><span class="n">unit</span><span class="o">.</span><span class="n">get_metadata</span><span class="p">(</span><span class="n">incl_nameid</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="k">for</span> <span class="n">unit</span> <span class="ow">in</span> <span class="n">list_units</span><span class="p">]</span>

    <span class="k">return</span> <span class="n">list_ids</span><span class="p">,</span> <span class="n">list_names</span><span class="p">,</span> <span class="n">list_numMeasurements</span><span class="p">,</span> <span class="n">list_metadata</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.data.measurement_image.MeaImg_Hub.notify_observers" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">notify_observers</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Notifies all observers of an event</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/data/measurement_image.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">866</span>
<span class="normal">867</span>
<span class="normal">868</span>
<span class="normal">869</span>
<span class="normal">870</span>
<span class="normal">871</span>
<span class="normal">872</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">notify_observers</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Notifies all observers of an event</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">observer</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_list_observer</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span> <span class="n">observer</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Observer notification error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.data.measurement_image.MeaImg_Hub.remove_ImageMeasurementUnit" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">remove_ImageMeasurementUnit</span><span class="p">(</span><span class="n">unit_id</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Removes an ImageMeasurement_Unit from the hub</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>unit_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the ImageMeasurement_Unit to be removed</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/data/measurement_image.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">803</span>
<span class="normal">804</span>
<span class="normal">805</span>
<span class="normal">806</span>
<span class="normal">807</span>
<span class="normal">808</span>
<span class="normal">809</span>
<span class="normal">810</span>
<span class="normal">811</span>
<span class="normal">812</span>
<span class="normal">813</span>
<span class="normal">814</span>
<span class="normal">815</span>
<span class="normal">816</span>
<span class="normal">817</span>
<span class="normal">818</span>
<span class="normal">819</span>
<span class="normal">820</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">remove_ImageMeasurementUnit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">unit_id</span><span class="p">:</span><span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Removes an ImageMeasurement_Unit from the hub</span>

<span class="sd">    Args:</span>
<span class="sd">        unit_id (str): ID of the ImageMeasurement_Unit to be removed</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">assert</span> <span class="n">unit_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dict_ImageUnits</span><span class="p">[</span><span class="s1">&#39;unit_id&#39;</span><span class="p">],</span> <span class="s1">&#39;Unit ID does not exist&#39;</span>

    <span class="n">idx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dict_ImageUnits</span><span class="p">[</span><span class="s1">&#39;unit_id&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">unit_id</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_dict_ImageUnits</span><span class="p">[</span><span class="s1">&#39;unit_id&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">idx</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_dict_ImageUnits</span><span class="p">[</span><span class="s1">&#39;image_unit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">idx</span><span class="p">)</span>

    <span class="n">unit_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dict_unit_IDName</span><span class="p">[</span><span class="n">unit_id</span><span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_dict_unit_NameID</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">unit_name</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_dict_unit_IDName</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">unit_id</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">notify_observers</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.data.measurement_image.MeaImg_Hub.remove_observer" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">remove_observer</span><span class="p">(</span><span class="n">observer</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Removes an observer from the hub</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>observer</code>
            </td>
            <td>
                  <code><span title="typing.Callable">Callable</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Observer function to be removed</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/data/measurement_image.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">855</span>
<span class="normal">856</span>
<span class="normal">857</span>
<span class="normal">858</span>
<span class="normal">859</span>
<span class="normal">860</span>
<span class="normal">861</span>
<span class="normal">862</span>
<span class="normal">863</span>
<span class="normal">864</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">remove_observer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">observer</span><span class="p">:</span><span class="n">Callable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Removes an observer from the hub</span>

<span class="sd">    Args:</span>
<span class="sd">        observer (Callable): Observer function to be removed</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">observer</span><span class="p">,</span> <span class="n">Callable</span><span class="p">):</span> <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Observer must be a callable function&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">observer</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_list_observer</span><span class="p">:</span> <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Observer does not exist in the list&#39;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_list_observer</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">observer</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.data.measurement_image.MeaImg_Hub.reset_ImageMeasurementUnits" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">reset_ImageMeasurementUnits</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Resets the ImageMeasurement_Units in the hub</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/data/measurement_image.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">792</span>
<span class="normal">793</span>
<span class="normal">794</span>
<span class="normal">795</span>
<span class="normal">796</span>
<span class="normal">797</span>
<span class="normal">798</span>
<span class="normal">799</span>
<span class="normal">800</span>
<span class="normal">801</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">reset_ImageMeasurementUnits</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Resets the ImageMeasurement_Units in the hub</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_dict_ImageUnits</span><span class="p">[</span><span class="s1">&#39;unit_id&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_dict_ImageUnits</span><span class="p">[</span><span class="s1">&#39;image_unit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_dict_unit_NameID</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_dict_unit_IDName</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">notify_observers</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.data.measurement_image.MeaImg_Hub.test_generate_dummy" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">test_generate_dummy</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Generates dummy ImageMeasurement_Units for testing purposes</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/data/measurement_image.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">874</span>
<span class="normal">875</span>
<span class="normal">876</span>
<span class="normal">877</span>
<span class="normal">878</span>
<span class="normal">879</span>
<span class="normal">880</span>
<span class="normal">881</span>
<span class="normal">882</span>
<span class="normal">883</span>
<span class="normal">884</span>
<span class="normal">885</span>
<span class="normal">886</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">test_generate_dummy</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generates dummy ImageMeasurement_Units for testing purposes</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">cal</span> <span class="o">=</span> <span class="n">ImgMea_Cal</span><span class="p">()</span>
    <span class="n">cal</span><span class="o">.</span><span class="n">generate_dummy_params</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
        <span class="n">unit</span> <span class="o">=</span> <span class="n">MeaImg_Unit</span><span class="p">(</span><span class="n">reconstruct</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">unit</span><span class="o">.</span><span class="n">test_generate_dummy</span><span class="p">()</span>
        <span class="n">unit</span><span class="o">.</span><span class="n">set_name</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;unit_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">unit</span><span class="o">.</span><span class="n">set_calibration_ImageMeasurement_Calibration</span><span class="p">(</span><span class="n">cal</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">append_ImageMeasurementUnit</span><span class="p">(</span><span class="n">unit</span><span class="p">)</span>
    <span class="k">return</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="iris.data.measurement_image.MeaImg_Unit" class="doc doc-heading">
            <code>MeaImg_Unit</code>


</h2>


    <div class="doc doc-contents ">





<details class="handles-the-storage-of-image-measurements-for-the-roi-definition" open>
  <summary>Handles the storage of image measurements for the ROI definition</summary>
  <ol>
<li>Timestamp</li>
<li>Stage coordinates (when the image was taken)</li>
<li>Image</li>
<li>Calibration parameters (mm/pixel, laser coordinate offset)</li>
</ol>
</details>







              <details class="mkdocstrings-source">
                <summary>Source code in <code>iris/data/measurement_image.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">MeaImg_Unit</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles the storage of image measurements for the ROI definition:</span>
<span class="sd">        1. Timestamp</span>
<span class="sd">        2. Stage coordinates (when the image was taken)</span>
<span class="sd">        3. Image</span>
<span class="sd">        4. Calibration parameters (mm/pixel, laser coordinate offset)</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">unit_name</span><span class="p">:</span><span class="nb">str</span><span class="o">|</span><span class="kc">None</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">calibration</span><span class="p">:</span><span class="n">ImgMea_Cal</span><span class="o">|</span><span class="kc">None</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">reconstruct</span><span class="p">:</span><span class="nb">bool</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialises the image measurement class</span>

<span class="sd">        Args:</span>
<span class="sd">            unit_name (str|None): Name of the image measurement unit. Default is None</span>
<span class="sd">            calibration (ImageMeasurement_Calibration): Calibration parameters</span>
<span class="sd">            reconstruct (bool): Flag to skip all the checks, used for reconstruction from</span>
<span class="sd">                the local disk. Default is False</span>

<span class="sd">        Note:</span>
<span class="sd">            If the unit_name or unit_id is None, the timestamp will be used as the unit name and unit ID</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">reconstruct</span><span class="p">:</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">calibration</span><span class="p">,</span> <span class="n">ImgMea_Cal</span><span class="p">),</span> <span class="s1">&#39;Calibration must be an ImageMeasurement_Calibration object&#39;</span>
            <span class="k">assert</span> <span class="n">calibration</span><span class="o">.</span><span class="n">check_calibration_set</span><span class="p">(),</span> <span class="s1">&#39;Calibration parameters are not set&#39;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_unitName</span><span class="p">:</span><span class="nb">str</span> <span class="o">=</span> <span class="n">unit_name</span> <span class="k">if</span> <span class="n">unit_name</span> <span class="o">!=</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">get_timestamp_us_str</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_unitID</span><span class="p">:</span><span class="nb">str</span> <span class="o">=</span> <span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">()</span><span class="o">.</span><span class="n">hex</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_calibration</span><span class="p">:</span><span class="n">ImgMea_Cal</span><span class="o">|</span><span class="kc">None</span> <span class="o">=</span> <span class="n">calibration</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_list_metadata_keys</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">,</span><span class="s1">&#39;name&#39;</span><span class="p">,</span><span class="s1">&#39;calibration_id&#39;</span><span class="p">,</span><span class="s1">&#39;calibration_dict&#39;</span><span class="p">]</span>

        <span class="c1"># Stitched image parameters</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_flg_mat_calculated</span><span class="p">:</span><span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>    <span class="c1"># Flag to check if the rotation correction matrix is calculated</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_mat_stitch2ori</span><span class="p">:</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">eye</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>    <span class="c1"># Rotation matrix to convert pixel coordinates from the stitched image to the original image</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_mat_ori2stitch</span><span class="p">:</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">eye</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>    <span class="c1"># Rotation matrix to convert pixel coordinates from the original image to the stitched image</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_lres_scale</span><span class="p">:</span><span class="nb">float</span> <span class="o">=</span> <span class="n">ImageProcessingParamsEnum</span><span class="o">.</span><span class="n">LOW_RESOLUTION_SCALE</span><span class="o">.</span><span class="n">value</span>    <span class="c1"># Low resolution scale for the images</span>

        <span class="c1"># Dictionary to store the measurements</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dict_measurements</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;timestamp&#39;</span><span class="p">:[],</span>
            <span class="s1">&#39;coor_x&#39;</span><span class="p">:[],</span>
            <span class="s1">&#39;coor_y&#39;</span><span class="p">:[],</span>
            <span class="s1">&#39;coor_z&#39;</span><span class="p">:[],</span>
            <span class="s1">&#39;image&#39;</span><span class="p">:[],</span>
        <span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_dict_measurements_types</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;timestamp&#39;</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span>
            <span class="s1">&#39;coor_x&#39;</span><span class="p">:</span><span class="nb">float</span><span class="p">,</span>
            <span class="s1">&#39;coor_y&#39;</span><span class="p">:</span><span class="nb">float</span><span class="p">,</span>
            <span class="s1">&#39;coor_z&#39;</span><span class="p">:</span><span class="nb">float</span><span class="p">,</span>
            <span class="s1">&#39;image&#39;</span><span class="p">:</span><span class="n">Image</span><span class="o">.</span><span class="n">Image</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_list_lowResImg</span> <span class="o">=</span> <span class="p">[]</span>   <span class="c1"># List to store the low resolution images</span>

        <span class="k">assert</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_dict_measurements</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="o">==</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_dict_measurements_types</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span> <span class="s1">&#39;Measurement keys must match the measurement types&#39;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_metadata_types</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;id&#39;</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span>
            <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span>
            <span class="s1">&#39;calibration_id&#39;</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span>
            <span class="s1">&#39;calibration_dict&#39;</span><span class="p">:</span><span class="nb">dict</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_idname_keys</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">,</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>   <span class="c1"># Keys for the ID and name to access the metadata</span>

        <span class="k">if</span> <span class="n">reconstruct</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_calibration</span><span class="p">,</span> <span class="n">ImgMea_Cal</span><span class="p">),</span> <span class="s1">&#39;Calibration must be an ImageMeasurement_Calibration object&#39;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s1">&#39;id&#39;</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">_unitID</span><span class="p">,</span>
                <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">_unitName</span><span class="p">,</span>
                <span class="s1">&#39;calibration_id&#39;</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">_calibration</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                <span class="s1">&#39;calibration_dict&#39;</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">_calibration</span><span class="o">.</span><span class="n">get_calibration_asdict</span><span class="p">()</span>
            <span class="p">}</span>
            <span class="k">assert</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="o">==</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_metadata_types</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span> <span class="s1">&#39;Metadata keys must match the metadata types&#39;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">unit_name</span><span class="p">:</span><span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the name of the ImageMeasurement_Unit</span>

<span class="sd">        Args:</span>
<span class="sd">            unit_name (str): Name of the ImageMeasurement_Unit</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">unit_name</span><span class="p">,</span><span class="nb">str</span><span class="p">),</span> <span class="s1">&#39;Name must be a string&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_unitName</span> <span class="o">=</span> <span class="n">unit_name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">unit_name</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_dict_measurement_types</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the measurements dictionary types</span>

<span class="sd">        Returns:</span>
<span class="sd">            dict: Measurements dictionary types</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dict_measurements_types</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_dict_measurement</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the measurements dictionary for saving to local disk</span>

<span class="sd">        Returns:</span>
<span class="sd">            dict: Measurements dictionary</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dict_measurements</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_IdName</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the unit ID and name</span>

<span class="sd">        Returns:</span>
<span class="sd">            tuple[str,str]: Unit ID, Unit name</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unitID</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unitName</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_numMeasurements</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the number of measurements taken</span>

<span class="sd">        Returns:</span>
<span class="sd">            int: Number of measurements taken</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_dict_measurements</span><span class="p">[</span><span class="s1">&#39;timestamp&#39;</span><span class="p">])</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_metadata_fromfile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">dict_meta</span><span class="p">:</span><span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the unit attributes based on the given metadata dictionary</span>

<span class="sd">        Args:</span>
<span class="sd">            dict_meta (dict): Metadata dictionary</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="nb">all</span><span class="p">([</span><span class="n">key</span> <span class="ow">in</span> <span class="n">dict_meta</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span><span class="o">.</span><span class="n">keys</span><span class="p">())]),</span> <span class="s1">&#39;Metadata keys must match the metadata types&#39;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_unitID</span> <span class="o">=</span> <span class="n">dict_meta</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_unitName</span> <span class="o">=</span> <span class="n">dict_meta</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>

        <span class="n">cal</span> <span class="o">=</span> <span class="n">ImgMea_Cal</span><span class="p">()</span>
        <span class="n">cal</span><span class="o">.</span><span class="n">set_calibration_fromdict</span><span class="p">(</span><span class="n">dict_meta</span><span class="p">[</span><span class="s1">&#39;calibration_id&#39;</span><span class="p">],</span><span class="n">dict_meta</span><span class="p">[</span><span class="s1">&#39;calibration_dict&#39;</span><span class="p">])</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_calibration</span> <span class="o">=</span> <span class="n">cal</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_flg_mat_calculated</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">refresh_metadata</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">refresh_metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Resets the metadata using the internally stored values</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_calibration</span><span class="p">,</span> <span class="n">ImgMea_Cal</span><span class="p">):</span> <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Calibration is not set&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;id&#39;</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">_unitID</span><span class="p">,</span>
            <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">_unitName</span><span class="p">,</span>
            <span class="s1">&#39;calibration_id&#39;</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">_calibration</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="s1">&#39;calibration_dict&#39;</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">_calibration</span><span class="o">.</span><span class="n">get_calibration_asdict</span><span class="p">()</span>
        <span class="p">}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_metadata_types</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the metadata types</span>

<span class="sd">        Returns:</span>
<span class="sd">            dict: Metadata types</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metadata_types</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">incl_nameid</span><span class="p">:</span><span class="nb">bool</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the metadata of the ImageMeasurement_Unit</span>

<span class="sd">        Args:</span>
<span class="sd">            incl_nameid (bool): Include the name and ID in the metadata. Default is True</span>

<span class="sd">        Returns:</span>
<span class="sd">            dict: Metadata of the ImageMeasurement_Unit (id, name, calibration_id, calibration_dict)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">incl_nameid</span><span class="p">:</span> <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span>
        <span class="k">else</span><span class="p">:</span> <span class="k">return</span> <span class="p">{</span><span class="n">key</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idname_keys</span><span class="p">}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_ImageMeasurement_Calibration</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ImgMea_Cal</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the ImageMeasurement_Calibration object for the calibration parameters</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_calibration</span><span class="p">,</span> <span class="n">ImgMea_Cal</span><span class="p">):</span> <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Calibration is not set&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_calibration</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_calculate_RotationCorrectionMatrix</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates the rotation correction matrix for the image stitching</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_calibration_exist</span><span class="p">(),</span> <span class="s1">&#39;Calibration parameters are not set&#39;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_calibration</span><span class="p">,</span> <span class="n">ImgMea_Cal</span><span class="p">):</span> <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Calibration is not set&#39;</span><span class="p">)</span>

        <span class="n">rot_rad</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_calibration</span><span class="o">.</span><span class="n">rotation_rad</span>

        <span class="c1"># Rotate the points counter to the detected rotation angle to align the</span>
        <span class="c1"># image frame of reference with the stage frame of reference</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_mat_ori2stitch</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="o">-</span><span class="n">rot_rad</span><span class="p">),</span><span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="o">-</span><span class="n">rot_rad</span><span class="p">)],</span>
                                         <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="o">-</span><span class="n">rot_rad</span><span class="p">),</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="o">-</span><span class="n">rot_rad</span><span class="p">)]])</span>


        <span class="c1"># Rotate the points clockwise to the detected rotation angle to align the</span>
        <span class="c1"># stage frame of reference with the image frame of reference (inverse the</span>
        <span class="c1"># rotation transformation above)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_mat_stitch2ori</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">rot_rad</span><span class="p">),</span><span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">rot_rad</span><span class="p">)],</span>
                                         <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">rot_rad</span><span class="p">),</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">rot_rad</span><span class="p">)]])</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_flg_mat_calculated</span> <span class="o">=</span> <span class="kc">True</span>


    <span class="k">def</span><span class="w"> </span><span class="nf">_correctRotationFlip</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">coor_pixel</span><span class="p">:</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span><span class="nb">int</span><span class="p">],</span><span class="n">stitch2ori</span><span class="p">:</span><span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span><span class="nb">int</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Corrects the rotation of the pixel coordinates due to the image stitching</span>

<span class="sd">        Args:</span>
<span class="sd">            coor_pixel (tuple[int,int]): Pixel coordinates (x,y)</span>
<span class="sd">            stitch2ori (bool): Flag to correct the rotation from the stitched image to the original image</span>

<span class="sd">        Returns:</span>
<span class="sd">            tuple[int,int]: Corrected pixel coordinates</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_flg_mat_calculated</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_calculate_RotationCorrectionMatrix</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">stitch2ori</span><span class="p">:</span>
            <span class="n">coor_pixel_arr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mat_stitch2ori</span> <span class="o">@</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">coor_pixel</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">coor_pixel_arr</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span> <span class="c1"># pyright: ignore[reportReturnType]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">coor_pixel_arr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mat_ori2stitch</span> <span class="o">@</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">coor_pixel</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">coor_pixel_arr</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span> <span class="c1"># pyright: ignore[reportReturnType]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_image_all_stitched</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">low_res</span><span class="p">:</span><span class="nb">bool</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">Image</span><span class="o">.</span><span class="n">Image</span><span class="p">,</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">],</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Stitches all the images taken</span>

<span class="sd">        Args:</span>
<span class="sd">            low_res (bool): Flag to use the low resolution images. Default is False</span>

<span class="sd">        Returns:</span>
<span class="sd">            tuple[Image.Image,tuple[float,float],tuple[float,float]]:</span>
<span class="sd">                Stitched image, image min limits in mm (xmin,ymin) [mm],</span>
<span class="sd">                image max limits in mm (xmax,ymax) [mm]</span>

<span class="sd">        NOTE:</span>
<span class="sd">            - Note that the shown image is rotated according to the calibration parameters.</span>
<span class="sd">                i.e., the image shown is now aligned with the stage frame of reference&#39;s axes</span>
<span class="sd">                such that another coordinate rotation correction needs to be done when converting</span>
<span class="sd">                the coordinats between the image and the stage frame of reference. For this reason,</span>
<span class="sd">                the rotation angle is stored internally.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_dict_measurements</span><span class="p">[</span><span class="s1">&#39;timestamp&#39;</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;No images taken&#39;</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_calibration_exist</span><span class="p">(),</span> <span class="s1">&#39;Calibration parameters are not set&#39;</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_calibration</span><span class="p">,</span> <span class="n">ImgMea_Cal</span><span class="p">),</span> <span class="s1">&#39;Calibration is not set&#39;</span>

        <span class="n">cal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_calibration</span>

    <span class="c1"># &gt; Get the measurements</span>
        <span class="k">if</span> <span class="n">low_res</span><span class="p">:</span> <span class="n">list_images</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_list_lowResImg</span>
        <span class="k">else</span><span class="p">:</span> <span class="n">list_images</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dict_measurements</span><span class="p">[</span><span class="s1">&#39;image&#39;</span><span class="p">]</span>

        <span class="n">list_coorx_mm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dict_measurements</span><span class="p">[</span><span class="s1">&#39;coor_x&#39;</span><span class="p">]</span>
        <span class="n">list_coory_mm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dict_measurements</span><span class="p">[</span><span class="s1">&#39;coor_y&#39;</span><span class="p">]</span>

        <span class="c1"># Calculate the rotation angle</span>
        <span class="c1"># print(f&#39;Stored rotation angle [rad]: {cal.rotation_rad}&#39;)</span>
        <span class="n">rot_deg</span> <span class="o">=</span> <span class="o">-</span><span class="n">cal</span><span class="o">.</span><span class="n">rotation_rad</span><span class="o">*</span><span class="mi">180</span><span class="o">/</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span>
        <span class="c1"># print(f&#39;Operation rotation angle [deg]: {rot_deg}&#39;)</span>

    <span class="c1"># &gt; Calculate the crop and the coordinate shift because of the cropping</span>
        <span class="n">sizex</span><span class="p">,</span><span class="n">sizey</span> <span class="o">=</span> <span class="n">list_images</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">size</span>
        <span class="n">cropx_pixel</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">sizey</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">cal</span><span class="o">.</span><span class="n">rotation_rad</span><span class="p">)))</span>
        <span class="n">cropy_pixel</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">sizex</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">cal</span><span class="o">.</span><span class="n">rotation_rad</span><span class="p">)))</span>
        <span class="c1"># print(f&#39;Crop size [pixel]: {cropx_pixel,cropy_pixel}&#39;)</span>

        <span class="c1"># Ensure that the angle is within -180 to 180 degrees</span>
        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">rot_deg</span> <span class="o">&gt;</span> <span class="mi">180</span><span class="p">:</span> <span class="n">rot_deg</span> <span class="o">-=</span> <span class="mi">360</span>
            <span class="k">elif</span> <span class="n">rot_deg</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mi">180</span><span class="p">:</span> <span class="n">rot_deg</span> <span class="o">+=</span> <span class="mi">360</span>
            <span class="k">else</span><span class="p">:</span> <span class="k">break</span>

        <span class="k">if</span> <span class="n">rot_deg</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">crop_coor</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">cropy_pixel</span><span class="p">,</span><span class="n">sizex</span><span class="o">-</span><span class="n">cropx_pixel</span><span class="p">,</span><span class="n">sizey</span><span class="p">)</span>
            <span class="n">coor_shift_pixel</span> <span class="o">=</span> <span class="p">(</span><span class="n">cropx_pixel</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">rot_deg</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">crop_coor</span> <span class="o">=</span> <span class="p">(</span><span class="n">cropx_pixel</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">sizex</span><span class="p">,</span><span class="n">sizey</span><span class="o">-</span><span class="n">cropy_pixel</span><span class="p">)</span>
            <span class="n">coor_shift_pixel</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">cropy_pixel</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">crop_coor</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">sizex</span><span class="p">,</span><span class="n">sizey</span><span class="p">)</span>
            <span class="n">coor_shift_pixel</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>

        <span class="n">coor_shift_stage</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">convert_imgpt2stg</span><span class="p">(</span><span class="n">frame_coor_mm</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span>\
            <span class="n">coor_pixel</span><span class="o">=</span><span class="n">coor_shift_pixel</span><span class="p">,</span><span class="n">correct_rot</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">low_res</span><span class="o">=</span><span class="n">low_res</span><span class="p">)</span>

        <span class="n">list_coorx_mm</span> <span class="o">=</span> <span class="p">[</span><span class="n">coor</span><span class="o">+</span><span class="n">coor_shift_stage</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">coor</span> <span class="ow">in</span> <span class="n">list_coorx_mm</span><span class="p">]</span>
        <span class="n">list_coory_mm</span> <span class="o">=</span> <span class="p">[</span><span class="n">coor</span><span class="o">+</span><span class="n">coor_shift_stage</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">coor</span> <span class="ow">in</span> <span class="n">list_coory_mm</span><span class="p">]</span>

    <span class="c1"># &gt; Rotate and crop the images</span>
        <span class="n">list_images_converted</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">img</span> <span class="ow">in</span> <span class="n">list_images</span><span class="p">:</span>
            <span class="n">img_rot_crop</span><span class="p">:</span><span class="n">Image</span><span class="o">.</span><span class="n">Image</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
            <span class="n">img_rot_crop</span> <span class="o">=</span> <span class="n">img_rot_crop</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="o">-</span><span class="n">rot_deg</span><span class="p">,</span><span class="n">expand</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">center</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">))</span> <span class="k">if</span> <span class="n">rot_deg</span> <span class="o">!=</span> <span class="mi">0</span> <span class="k">else</span> <span class="n">img_rot_crop</span>
            <span class="n">img_rot_crop</span> <span class="o">=</span> <span class="n">img_rot_crop</span><span class="o">.</span><span class="n">crop</span><span class="p">(</span><span class="n">crop_coor</span><span class="p">)</span>
            <span class="n">list_images_converted</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">img_rot_crop</span><span class="p">)</span>

        <span class="n">list_images</span> <span class="o">=</span> <span class="n">list_images_converted</span>

    <span class="c1"># &gt; Stitch the image</span>
        <span class="c1"># Calculate each image location in the stitched image (in pixel coordinates)</span>
        <span class="n">list_coor_mm</span> <span class="o">=</span> <span class="p">[(</span><span class="n">coorx_mm</span><span class="p">,</span><span class="n">coory_mm</span><span class="p">)</span> <span class="k">for</span> <span class="n">coorx_mm</span><span class="p">,</span><span class="n">coory_mm</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">list_coorx_mm</span><span class="p">,</span><span class="n">list_coory_mm</span><span class="p">)]</span>
        <span class="n">list_coor_min_mm</span> <span class="o">=</span> <span class="n">list_coor_mm</span>

        <span class="c1"># Flip the coordinates based on the calibration parameters</span>
        <span class="c1"># rot_rad = cal.rotation_rad</span>
        <span class="c1"># flip_rot_x = np.sign(np.cos(rot_rad))</span>
        <span class="c1"># flip_rot_x = 1 if flip_rot_x == 0 else flip_rot_x</span>
        <span class="c1"># flip_rot_y = np.sign(np.sin(rot_rad))</span>
        <span class="c1"># flip_rot_y = 1 if flip_rot_y == 0 else flip_rot_y</span>

        <span class="c1"># x_flip = np.sign(cal.scale_x_pixelPerMm*flip_rot_x*-1).astype(int)</span>
        <span class="c1"># y_flip = np.sign(cal.scale_y_pixelPerMm*cal.flip_y*flip_rot_y*-1).astype(int)</span>
        <span class="n">x_flip</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="n">y_flip</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="k">assert</span> <span class="n">x_flip</span> <span class="o">!=</span><span class="mi">0</span> <span class="ow">and</span> <span class="n">y_flip</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;CHECK ERROR: Flip parameters cannot be 0, there must be something unaccounted for&#39;</span>

        <span class="n">list_coor_min_pixel</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">convert_stg2imgpt</span><span class="p">(</span><span class="n">coor_stage_mm</span><span class="o">=</span><span class="n">coor</span><span class="p">,</span><span class="n">coor_point_mm</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="n">correct_rot</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">low_res</span><span class="o">=</span><span class="n">low_res</span><span class="p">)</span>\
            <span class="k">for</span> <span class="n">coor</span> <span class="ow">in</span> <span class="n">list_coor_mm</span><span class="p">]</span>
        <span class="n">list_coor_min_pixel</span> <span class="o">=</span> <span class="p">[(</span><span class="n">coor</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="n">x_flip</span><span class="p">,</span><span class="n">coor</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="n">y_flip</span><span class="p">)</span> <span class="k">for</span> <span class="n">coor</span> <span class="ow">in</span> <span class="n">list_coor_min_pixel</span><span class="p">]</span>

        <span class="n">img_limit_coor_min_pixel</span> <span class="o">=</span> <span class="p">(</span><span class="nb">min</span><span class="p">([</span><span class="n">coor</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">coor</span> <span class="ow">in</span> <span class="n">list_coor_min_pixel</span><span class="p">]),</span>\
            <span class="nb">min</span><span class="p">([</span><span class="n">coor</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">coor</span> <span class="ow">in</span> <span class="n">list_coor_min_pixel</span><span class="p">]))</span>

        <span class="c1"># Calculate the relative pixel coordinates</span>
        <span class="n">list_coor_pixel_rel</span> <span class="o">=</span> <span class="p">[(</span>
            <span class="n">coor</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-</span><span class="n">img_limit_coor_min_pixel</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>\
            <span class="n">coor</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="n">img_limit_coor_min_pixel</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="p">)</span> <span class="k">for</span> <span class="n">coor</span> <span class="ow">in</span> <span class="n">list_coor_min_pixel</span><span class="p">]</span>

        <span class="c1"># Generate an empty image </span>
        <span class="n">img_wid</span> <span class="o">=</span> <span class="nb">max</span><span class="p">([</span><span class="nb">abs</span><span class="p">(</span><span class="n">coor</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="k">for</span> <span class="n">coor</span> <span class="ow">in</span> <span class="n">list_coor_pixel_rel</span><span class="p">])</span> <span class="o">+</span> <span class="n">img_rot_crop</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">img_hei</span> <span class="o">=</span> <span class="nb">max</span><span class="p">([</span><span class="nb">abs</span><span class="p">(</span><span class="n">coor</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="k">for</span> <span class="n">coor</span> <span class="ow">in</span> <span class="n">list_coor_pixel_rel</span><span class="p">])</span> <span class="o">+</span> <span class="n">img_rot_crop</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">img_stitched</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s1">&#39;RGB&#39;</span><span class="p">,(</span><span class="n">img_wid</span><span class="p">,</span><span class="n">img_hei</span><span class="p">))</span>

        <span class="c1"># Paste the images onto the empty image</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">list_images</span><span class="p">)):</span>
            <span class="n">img</span> <span class="o">=</span> <span class="n">list_images</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="n">coor_pixel</span> <span class="o">=</span> <span class="n">list_coor_pixel_rel</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="n">img_stitched</span><span class="o">.</span><span class="n">paste</span><span class="p">(</span><span class="n">img</span><span class="p">,</span><span class="n">coor_pixel</span><span class="p">)</span>

    <span class="c1"># &gt; Calculate the image limits in mm</span>
        <span class="c1"># Note to myself:</span>
        <span class="c1"># The limit is not the minimum coordinates of the image but the coordinate of the 0,0 pixel</span>
        <span class="c1"># of the stitched image in the stage frame of reference</span>
        <span class="c1"># This can be calculated by converting the pixel coordinates of the one of the image </span>
        <span class="c1"># in the list_coor_pixel_rel</span>

        <span class="c1"># This minimum coordinate is also the reference coordinate to be returned (i.e., the stage coordinate</span>
        <span class="c1"># of the stitched image, corresponding to the 0,0 pixel of the stitched image)</span>

        <span class="c1"># Similarly, the maximum coordinates of the image is the maximum coordinates of the img_rot_crop</span>
        <span class="c1"># i.e., the image shape</span>

        <span class="n">mea_coor</span> <span class="o">=</span> <span class="n">list_coor_min_mm</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">mea_coor_pixel</span> <span class="o">=</span> <span class="n">list_coor_pixel_rel</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">neg</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="n">mea_coor_pixel</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="o">-</span><span class="n">mea_coor_pixel</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">img_limit_coor_min_mm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">convert_imgpt2stg</span><span class="p">(</span><span class="n">frame_coor_mm</span><span class="o">=</span><span class="n">mea_coor</span><span class="p">,</span><span class="n">coor_pixel</span><span class="o">=</span><span class="n">neg</span><span class="p">,</span><span class="n">correct_rot</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                                       <span class="n">low_res</span><span class="o">=</span><span class="n">low_res</span><span class="p">)</span>
        <span class="n">img_limit_coor_max_mm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">convert_imgpt2stg</span><span class="p">(</span><span class="n">frame_coor_mm</span><span class="o">=</span><span class="n">img_limit_coor_min_mm</span><span class="p">,</span><span class="n">coor_pixel</span><span class="o">=</span><span class="p">(</span><span class="n">img_wid</span><span class="p">,</span><span class="n">img_hei</span><span class="p">),</span>
                                                       <span class="n">correct_rot</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">low_res</span><span class="o">=</span><span class="n">low_res</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">img_stitched</span><span class="p">,</span> <span class="n">img_limit_coor_min_mm</span><span class="p">,</span> <span class="n">img_limit_coor_max_mm</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">reset_measurement</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Deletes all stored measurement in the _dict_measurements</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dict_measurements</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_dict_measurements</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">reprocess_lowres_images</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Reprocesses the low resolution images to be used for the stitching using the original images</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_list_lowResImg</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">img</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dict_measurements</span><span class="p">[</span><span class="s1">&#39;image&#39;</span><span class="p">]:</span>
            <span class="n">img_lres</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
            <span class="n">img_lres</span><span class="o">.</span><span class="n">thumbnail</span><span class="p">((</span><span class="nb">int</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_lres_scale</span><span class="p">),</span><span class="nb">int</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_lres_scale</span><span class="p">)))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_list_lowResImg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">img_lres</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_dict_measurement_fromfile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">dict_measurements</span><span class="p">:</span><span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the measurements from a dictionary</span>

<span class="sd">        Args:</span>
<span class="sd">            dict_measurements (dict): Measurements dictionary</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="nb">set</span><span class="p">(</span><span class="n">dict_measurements</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="o">==</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_dict_measurements</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span> <span class="s1">&#39;Measurement keys must match the measurement types&#39;</span>
        <span class="k">assert</span> <span class="nb">all</span><span class="p">([</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">dict_measurements</span><span class="p">[</span><span class="n">key</span><span class="p">],</span> <span class="nb">list</span><span class="p">)</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">dict_measurements</span><span class="o">.</span><span class="n">keys</span><span class="p">()]),</span> <span class="s1">&#39;Measurement values must be lists&#39;</span>
        <span class="k">assert</span> <span class="nb">all</span><span class="p">([</span><span class="nb">all</span><span class="p">([</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dict_measurements_types</span><span class="p">[</span><span class="n">key</span><span class="p">])</span> <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">dict_measurements</span><span class="p">[</span><span class="n">key</span><span class="p">]])</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">dict_measurements</span><span class="o">.</span><span class="n">keys</span><span class="p">()]),</span> <span class="s1">&#39;Measurement values must match the measurement types&#39;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_dict_measurements</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">dict_measurements</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_dict_measurements</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">dict_measurements</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">reprocess_lowres_images</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">add_measurement</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">x_coor</span><span class="p">:</span><span class="nb">float</span><span class="p">,</span> <span class="n">y_coor</span><span class="p">:</span><span class="nb">float</span><span class="p">,</span>
                        <span class="n">z_coor</span><span class="p">:</span><span class="nb">float</span><span class="p">,</span> <span class="n">image</span><span class="p">:</span><span class="n">Image</span><span class="o">.</span><span class="n">Image</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a measurement to the dictionary</span>

<span class="sd">        Args:</span>
<span class="sd">            timestamp (str): Timestamp of the measurement</span>
<span class="sd">            x_coor (float): X-coordinate of the measurement</span>
<span class="sd">            y_coor (float): Y-coordinate of the measurement</span>
<span class="sd">            z_coor (float): Z-coordinate of the measurement</span>
<span class="sd">            image (Image.Image): Image of the measurement</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">timestamp</span><span class="p">,</span> <span class="nb">str</span><span class="p">),</span> <span class="s1">&#39;Timestamp must be a string&#39;</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x_coor</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span> <span class="s1">&#39;X-coordinate must be a float&#39;</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">y_coor</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span> <span class="s1">&#39;Y-coordinate must be a float&#39;</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">z_coor</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span> <span class="s1">&#39;Z-coordinate must be a float&#39;</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">Image</span><span class="o">.</span><span class="n">Image</span><span class="p">),</span> <span class="s1">&#39;Image must be an Image.Image object&#39;</span>

        <span class="c1"># Add the parameters to the dictionary</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dict_measurements</span><span class="p">[</span><span class="s1">&#39;timestamp&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">timestamp</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dict_measurements</span><span class="p">[</span><span class="s1">&#39;coor_x&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x_coor</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dict_measurements</span><span class="p">[</span><span class="s1">&#39;coor_y&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">y_coor</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dict_measurements</span><span class="p">[</span><span class="s1">&#39;coor_z&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">z_coor</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dict_measurements</span><span class="p">[</span><span class="s1">&#39;image&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>

        <span class="c1"># Generate the low resolution image and store it</span>
        <span class="n">image_lres</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">image_lres</span><span class="o">.</span><span class="n">thumbnail</span><span class="p">((</span><span class="nb">int</span><span class="p">(</span><span class="n">image</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_lres_scale</span><span class="p">),</span><span class="nb">int</span><span class="p">(</span><span class="n">image</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_lres_scale</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_list_lowResImg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">image_lres</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">check_readyForProcessing</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Checks if the image measurement is ready for processing. Checks for:</span>
<span class="sd">            1. If the measurements exist</span>
<span class="sd">            2. If the calibration parameters exist</span>
<span class="sd">            3. If the low resolution images have been generated for all the images taken</span>

<span class="sd">        Returns:</span>
<span class="sd">            bool: True if the image measurement is ready for processing, False otherwise</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">flg</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_measurement_exist</span><span class="p">():</span> <span class="n">flg</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_calibration_exist</span><span class="p">():</span> <span class="n">flg</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_dict_measurements</span><span class="p">[</span><span class="s1">&#39;image&#39;</span><span class="p">])</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_list_lowResImg</span><span class="p">):</span> <span class="n">flg</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="n">flg</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">check_measurement_exist</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Checks if the measurements are stored</span>

<span class="sd">        Returns:</span>
<span class="sd">            bool: True if the measurements are stored, False otherwise</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_dict_measurements</span><span class="p">[</span><span class="s1">&#39;timestamp&#39;</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">0</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">check_calibration_exist</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Checks if the calibration parameters are set</span>

<span class="sd">        Returns:</span>
<span class="sd">            bool: True if the calibration parameters are set, False otherwise</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_calibration</span><span class="p">,</span> <span class="n">ImgMea_Cal</span><span class="p">):</span> <span class="k">return</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_calibration</span><span class="o">.</span><span class="n">check_calibration_set</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">convert_imgpt2stg</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">frame_coor_mm</span><span class="p">:</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">]</span><span class="o">|</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">],</span>
                          <span class="n">coor_pixel</span><span class="p">:</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span><span class="nb">int</span><span class="p">]</span><span class="o">|</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">],</span>
                          <span class="n">correct_rot</span><span class="p">:</span><span class="nb">bool</span><span class="p">,</span> <span class="n">low_res</span><span class="p">:</span><span class="nb">bool</span><span class="p">)</span>\
        <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Converts the coordinates from pixels to mm based on the stored calibration parameters</span>

<span class="sd">        Args:</span>
<span class="sd">            frame_coor_mm (tuple[float,float]): X, Y, Z coordinates or X, Y coordinates in mm of the image frame</span>
<span class="sd">            coor_pixel (tuple[int,int]): X, Y coordinates in pixels</span>
<span class="sd">            correct_rot (bool): Correct for the rotation angle if the shown stitched image is rotated corrected</span>
<span class="sd">            low_res (bool): Set to True if the image being processed is a low resolution (i.e., downsampled) image of the original image.</span>

<span class="sd">        Returns:</span>
<span class="sd">            tuple[float,float]: X and Y coordinates in mm</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_calibration</span><span class="p">,</span> <span class="n">ImgMea_Cal</span><span class="p">):</span> <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Calibration is not set&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">low_res</span><span class="p">:</span> <span class="n">coor_pixel</span> <span class="o">=</span> <span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">coor_pixel</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">_lres_scale</span><span class="p">),</span><span class="nb">int</span><span class="p">(</span><span class="n">coor_pixel</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">_lres_scale</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">correct_rot</span><span class="p">:</span>
            <span class="n">coor_pixel</span> <span class="o">=</span> <span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">coor_pixel</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span><span class="nb">int</span><span class="p">(</span><span class="n">coor_pixel</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
            <span class="n">coor_pixel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_correctRotationFlip</span><span class="p">(</span><span class="n">coor_pixel</span><span class="p">,</span><span class="n">stitch2ori</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="n">coor_stg_mm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_calibration</span><span class="o">.</span><span class="n">convert_imgpt2stg</span><span class="p">(</span>
            <span class="n">coor_img_pixel</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">coor_pixel</span><span class="p">[:</span><span class="mi">2</span><span class="p">]),</span>
            <span class="n">coor_stage_mm</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">frame_coor_mm</span><span class="p">[:</span><span class="mi">2</span><span class="p">])</span>
        <span class="p">)</span>

        <span class="n">x_mm</span><span class="p">,</span><span class="n">y_mm</span> <span class="o">=</span> <span class="n">coor_stg_mm</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">x_mm</span><span class="p">,</span> <span class="n">y_mm</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">convert_stg2imgpt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">coor_stage_mm</span><span class="p">:</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">]</span><span class="o">|</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">],</span>
            <span class="n">coor_point_mm</span><span class="p">:</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">]</span><span class="o">|</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">],</span><span class="n">correct_rot</span><span class="p">:</span><span class="nb">bool</span><span class="p">,</span><span class="n">low_res</span><span class="p">:</span><span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span><span class="nb">int</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Converts the coordinates from mm to pixels based on the stored calibration parameters</span>

<span class="sd">        Args:</span>
<span class="sd">            stage_coor_mm (tuple[float,float,float]): X, Y, Z coordinates or X, Y coordinates in mm of the image frame</span>
<span class="sd">            coor_mm (tuple[float,float,float]): X, Y, Z coordinates or X, Y coordinates in mm</span>
<span class="sd">            rot_rad (float): Rotation angle in radians to correct for. Default is 0.0</span>
<span class="sd">            correct_rot (bool): Correct for the rotation angle if the shown stitched image is rotated corrected</span>
<span class="sd">            low_res (bool): Set to True if the image being processed is a low resolution (i.e., downsampled) image of the original image.</span>

<span class="sd">        Returns:</span>
<span class="sd">            tuple[int,int]: X and Y coordinates in pixels</span>

<span class="sd">        NOTE:</span>
<span class="sd">            - The rotation angle is to correct for the rotation applied of the shown image</span>
<span class="sd">                from the &#39;get stitched image&#39; method</span>
<span class="sd">            - The rotation angle is in radians and is counter clockwise</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_calibration</span><span class="p">,</span> <span class="n">ImgMea_Cal</span><span class="p">):</span> <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Calibration is not set&#39;</span><span class="p">)</span>

        <span class="n">coor_pixel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_calibration</span><span class="o">.</span><span class="n">convert_stg2imgpt</span><span class="p">(</span>
            <span class="n">coor_point_mm</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">coor_point_mm</span><span class="p">[:</span><span class="mi">2</span><span class="p">]),</span>
            <span class="n">coor_stg_mm</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">coor_stage_mm</span><span class="p">[:</span><span class="mi">2</span><span class="p">])</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">correct_rot</span><span class="p">:</span>
            <span class="n">coor_pixel</span> <span class="o">=</span> <span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">coor_pixel</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span><span class="nb">int</span><span class="p">(</span><span class="n">coor_pixel</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
            <span class="n">coor_pixel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_correctRotationFlip</span><span class="p">(</span><span class="n">coor_pixel</span><span class="p">,</span><span class="n">stitch2ori</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="n">x_pixel</span><span class="p">,</span><span class="n">y_pixel</span> <span class="o">=</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">coor</span><span class="p">)</span> <span class="k">for</span> <span class="n">coor</span> <span class="ow">in</span> <span class="n">coor_pixel</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">low_res</span><span class="p">:</span>
            <span class="n">x_pixel</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">x_pixel</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_lres_scale</span><span class="p">)</span>
            <span class="n">y_pixel</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">y_pixel</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_lres_scale</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">x_pixel</span><span class="p">,</span> <span class="n">y_pixel</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">convert_stg2mea</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">coor_stage_mm</span><span class="p">:</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">]</span><span class="o">|</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">])</span>\
        <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">]</span><span class="o">|</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates the measurement coordinates from the stage coordinates based on the laser coordinates</span>
<span class="sd">        stored in the calibration parameters</span>

<span class="sd">        Args:</span>
<span class="sd">            stage_coor (tuple[float,float,float]|tuple[float,float]): Stage coordinates (X,Y,Z) in mm or (X,Y) in mm</span>

<span class="sd">        Returns:</span>
<span class="sd">            tuple[float,float,float]|tuple[float,float]: Measurement coordinates (X,Y,Z) in mm or (X,Y) in mm</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_calibration</span><span class="p">,</span> <span class="n">ImgMea_Cal</span><span class="p">):</span> <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Calibration is not set&#39;</span><span class="p">)</span>

        <span class="n">coor_stage_mm_arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">coor_stage_mm</span><span class="p">[:</span><span class="mi">2</span><span class="p">])</span>
        <span class="n">coor_mea_mm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_calibration</span><span class="o">.</span><span class="n">convert_stg2mea</span><span class="p">(</span><span class="n">coor_stage_mm_arr</span><span class="p">)</span>

        <span class="n">x_mm</span><span class="p">,</span><span class="n">y_mm</span> <span class="o">=</span> <span class="n">coor_mea_mm</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">coor_stage_mm</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span> <span class="k">return</span> <span class="n">x_mm</span><span class="p">,</span> <span class="n">y_mm</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">coor_stage_mm</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="p">:</span> <span class="k">return</span> <span class="n">x_mm</span><span class="p">,</span> <span class="n">y_mm</span><span class="p">,</span> <span class="n">coor_stage_mm</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">convert_mea2stg</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">coor_mea_mm</span><span class="p">:</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">]</span><span class="o">|</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">])</span>\
        <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">]</span><span class="o">|</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates the stage coordinates from the measurement coordinates based on the laser coordinates</span>
<span class="sd">        stored in the calibration parameters</span>

<span class="sd">        Args:</span>
<span class="sd">            coor_mea_mm (tuple[float,float,float]|tuple[float,float]): Measurement coordinates (X,Y,Z) in mm or (X,Y) in mm</span>

<span class="sd">        Returns:</span>
<span class="sd">            tuple[float,float,float]|tuple[float,float]: Stage coordinates (X,Y,Z) in mm or (X,Y) in mm</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_calibration</span><span class="p">,</span> <span class="n">ImgMea_Cal</span><span class="p">):</span> <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Calibration is not set&#39;</span><span class="p">)</span>

        <span class="n">coor_mea_mm_arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">coor_mea_mm</span><span class="p">[:</span><span class="mi">2</span><span class="p">])</span>
        <span class="n">coor_stage_mm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_calibration</span><span class="o">.</span><span class="n">convert_mea2stg</span><span class="p">(</span><span class="n">coor_mea_mm_arr</span><span class="p">)</span>

        <span class="n">x_mm</span><span class="p">,</span><span class="n">y_mm</span> <span class="o">=</span> <span class="n">coor_stage_mm</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">coor_mea_mm</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span><span class="k">return</span> <span class="n">x_mm</span><span class="p">,</span> <span class="n">y_mm</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">coor_mea_mm</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="p">:</span> <span class="k">return</span> <span class="n">x_mm</span><span class="p">,</span> <span class="n">y_mm</span><span class="p">,</span> <span class="n">coor_mea_mm</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_calibration_rel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scl_x_mmPerPixel</span><span class="p">:</span><span class="nb">float</span><span class="p">,</span> <span class="n">scl_y_mmPerPixel</span><span class="p">:</span><span class="nb">float</span><span class="p">,</span>
            <span class="n">laser_coor_x_mm</span><span class="p">:</span><span class="nb">float</span><span class="p">,</span> <span class="n">laser_coor_y_mm</span><span class="p">:</span><span class="nb">float</span><span class="p">,</span><span class="n">flipx</span><span class="p">:</span><span class="nb">bool</span><span class="p">,</span><span class="n">flipy</span><span class="p">:</span><span class="nb">bool</span><span class="p">):</span>
        <span class="c1"># REMFLAG: This method now overlaps with another method or with the ImageMeasurement_Calibration object&#39;s method. This will be removed.</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;This method will be removed entirely soon&#39;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_calibration</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scl_x_mmPerPixel</span><span class="p">:</span><span class="nb">float</span><span class="p">,</span> <span class="n">scl_y_mmPerPixel</span><span class="p">:</span><span class="nb">float</span><span class="p">,</span>
                        <span class="n">laser_coor_x_mm</span><span class="p">:</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">],</span> <span class="n">laser_coor_y_mm</span><span class="p">:</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">],</span>
                        <span class="n">inverse</span><span class="p">:</span><span class="nb">bool</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">flipx</span><span class="p">:</span><span class="nb">bool</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">flipy</span><span class="p">:</span><span class="nb">bool</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="c1"># REMFLAG: This method now overlaps with another method or with the ImageMeasurement_Calibration object&#39;s method. This will be removed.</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;This method will be removed entirely soon&#39;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_calibration</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">flipx</span><span class="p">:</span><span class="nb">bool</span><span class="p">,</span> <span class="n">flipy</span><span class="p">:</span><span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">]:</span>
        <span class="c1"># REMFLAG: This method now overlaps with another method or with the ImageMeasurement_Calibration object&#39;s method. This will be removed.</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;This method will be removed entirely soon&#39;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_calibration_asdict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span><span class="nb">dict</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the calibration parameters as a dictionary</span>

<span class="sd">        Returns:</span>
<span class="sd">            tuple[str,dict]: Calibration ID, calibration parameters</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_calibration</span><span class="p">,</span> <span class="n">ImgMea_Cal</span><span class="p">):</span> <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Calibration is not set&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_calibration</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_calibration</span><span class="o">.</span><span class="n">get_calibration_asdict</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_calibration_ImageMeasurement_Calibration</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">calibration</span><span class="p">:</span><span class="n">ImgMea_Cal</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the calibration parameters from an ImageMeasurement_Calibration object</span>

<span class="sd">        Args:</span>
<span class="sd">            calibration (ImageMeasurement_Calibration): Calibration parameters object</span>

<span class="sd">        Raises:</span>
<span class="sd">            AssertionError: Calibration parameters are not set</span>
<span class="sd">            AssertionError: Calibration parameters are not an ImageMeasurement_Calibration object</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">calibration</span><span class="p">,</span> <span class="n">ImgMea_Cal</span><span class="p">),</span> <span class="s1">&#39;Calibration must be an ImageMeasurement_Calibration object&#39;</span>
        <span class="k">assert</span> <span class="n">calibration</span><span class="o">.</span><span class="n">check_calibration_set</span><span class="p">(),</span> <span class="s1">&#39;Calibration parameters are not set&#39;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_calibration</span> <span class="o">=</span> <span class="n">calibration</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_flg_mat_calculated</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">refresh_metadata</span><span class="p">()</span>
        <span class="k">return</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">test_generate_dummy</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generates dummy measurements for testing purposes</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
            <span class="n">timestamp</span> <span class="o">=</span> <span class="n">get_timestamp_us_str</span><span class="p">()</span>
            <span class="n">x_coor</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
            <span class="n">y_coor</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
            <span class="n">z_coor</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="n">colour</span> <span class="o">=</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">256</span><span class="p">),</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">256</span><span class="p">),</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">256</span><span class="p">))</span>
            <span class="n">image</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s1">&#39;RGB&#39;</span><span class="p">,(</span><span class="mi">100</span><span class="p">,</span><span class="mi">100</span><span class="p">),</span><span class="n">color</span><span class="o">=</span><span class="n">colour</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">add_measurement</span><span class="p">(</span><span class="n">timestamp</span><span class="p">,</span> <span class="n">x_coor</span><span class="p">,</span> <span class="n">y_coor</span><span class="p">,</span> <span class="n">z_coor</span><span class="p">,</span> <span class="n">image</span><span class="p">)</span>
        <span class="k">return</span>
</code></pre></div></td></tr></table></div>
              </details>



<div class="doc doc-children">










<div class="doc doc-object doc-function">


<h3 id="iris.data.measurement_image.MeaImg_Unit.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">unit_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">calibration</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reconstruct</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Initialises the image measurement class</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>unit_name</code>
            </td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of the image measurement unit. Default is None</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>calibration</code>
            </td>
            <td>
                  <code><span title="ImageMeasurement_Calibration">ImageMeasurement_Calibration</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Calibration parameters</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>reconstruct</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag to skip all the checks, used for reconstruction from
the local disk. Default is False</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


<details class="note" open>
  <summary>Note</summary>
  <p>If the unit_name or unit_id is None, the timestamp will be used as the unit name and unit ID</p>
</details>

            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/data/measurement_image.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">unit_name</span><span class="p">:</span><span class="nb">str</span><span class="o">|</span><span class="kc">None</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">calibration</span><span class="p">:</span><span class="n">ImgMea_Cal</span><span class="o">|</span><span class="kc">None</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
             <span class="n">reconstruct</span><span class="p">:</span><span class="nb">bool</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialises the image measurement class</span>

<span class="sd">    Args:</span>
<span class="sd">        unit_name (str|None): Name of the image measurement unit. Default is None</span>
<span class="sd">        calibration (ImageMeasurement_Calibration): Calibration parameters</span>
<span class="sd">        reconstruct (bool): Flag to skip all the checks, used for reconstruction from</span>
<span class="sd">            the local disk. Default is False</span>

<span class="sd">    Note:</span>
<span class="sd">        If the unit_name or unit_id is None, the timestamp will be used as the unit name and unit ID</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">reconstruct</span><span class="p">:</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">calibration</span><span class="p">,</span> <span class="n">ImgMea_Cal</span><span class="p">),</span> <span class="s1">&#39;Calibration must be an ImageMeasurement_Calibration object&#39;</span>
        <span class="k">assert</span> <span class="n">calibration</span><span class="o">.</span><span class="n">check_calibration_set</span><span class="p">(),</span> <span class="s1">&#39;Calibration parameters are not set&#39;</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_unitName</span><span class="p">:</span><span class="nb">str</span> <span class="o">=</span> <span class="n">unit_name</span> <span class="k">if</span> <span class="n">unit_name</span> <span class="o">!=</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">get_timestamp_us_str</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_unitID</span><span class="p">:</span><span class="nb">str</span> <span class="o">=</span> <span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">()</span><span class="o">.</span><span class="n">hex</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_calibration</span><span class="p">:</span><span class="n">ImgMea_Cal</span><span class="o">|</span><span class="kc">None</span> <span class="o">=</span> <span class="n">calibration</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_list_metadata_keys</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">,</span><span class="s1">&#39;name&#39;</span><span class="p">,</span><span class="s1">&#39;calibration_id&#39;</span><span class="p">,</span><span class="s1">&#39;calibration_dict&#39;</span><span class="p">]</span>

    <span class="c1"># Stitched image parameters</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_flg_mat_calculated</span><span class="p">:</span><span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>    <span class="c1"># Flag to check if the rotation correction matrix is calculated</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_mat_stitch2ori</span><span class="p">:</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">eye</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>    <span class="c1"># Rotation matrix to convert pixel coordinates from the stitched image to the original image</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_mat_ori2stitch</span><span class="p">:</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">eye</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>    <span class="c1"># Rotation matrix to convert pixel coordinates from the original image to the stitched image</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_lres_scale</span><span class="p">:</span><span class="nb">float</span> <span class="o">=</span> <span class="n">ImageProcessingParamsEnum</span><span class="o">.</span><span class="n">LOW_RESOLUTION_SCALE</span><span class="o">.</span><span class="n">value</span>    <span class="c1"># Low resolution scale for the images</span>

    <span class="c1"># Dictionary to store the measurements</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_dict_measurements</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;timestamp&#39;</span><span class="p">:[],</span>
        <span class="s1">&#39;coor_x&#39;</span><span class="p">:[],</span>
        <span class="s1">&#39;coor_y&#39;</span><span class="p">:[],</span>
        <span class="s1">&#39;coor_z&#39;</span><span class="p">:[],</span>
        <span class="s1">&#39;image&#39;</span><span class="p">:[],</span>
    <span class="p">}</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_dict_measurements_types</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;timestamp&#39;</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span>
        <span class="s1">&#39;coor_x&#39;</span><span class="p">:</span><span class="nb">float</span><span class="p">,</span>
        <span class="s1">&#39;coor_y&#39;</span><span class="p">:</span><span class="nb">float</span><span class="p">,</span>
        <span class="s1">&#39;coor_z&#39;</span><span class="p">:</span><span class="nb">float</span><span class="p">,</span>
        <span class="s1">&#39;image&#39;</span><span class="p">:</span><span class="n">Image</span><span class="o">.</span><span class="n">Image</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_list_lowResImg</span> <span class="o">=</span> <span class="p">[]</span>   <span class="c1"># List to store the low resolution images</span>

    <span class="k">assert</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_dict_measurements</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="o">==</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_dict_measurements_types</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span> <span class="s1">&#39;Measurement keys must match the measurement types&#39;</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_metadata_types</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;id&#39;</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span>
        <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span>
        <span class="s1">&#39;calibration_id&#39;</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span>
        <span class="s1">&#39;calibration_dict&#39;</span><span class="p">:</span><span class="nb">dict</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_idname_keys</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">,</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>   <span class="c1"># Keys for the ID and name to access the metadata</span>

    <span class="k">if</span> <span class="n">reconstruct</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_calibration</span><span class="p">,</span> <span class="n">ImgMea_Cal</span><span class="p">),</span> <span class="s1">&#39;Calibration must be an ImageMeasurement_Calibration object&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;id&#39;</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">_unitID</span><span class="p">,</span>
            <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">_unitName</span><span class="p">,</span>
            <span class="s1">&#39;calibration_id&#39;</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">_calibration</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="s1">&#39;calibration_dict&#39;</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">_calibration</span><span class="o">.</span><span class="n">get_calibration_asdict</span><span class="p">()</span>
        <span class="p">}</span>
        <span class="k">assert</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="o">==</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_metadata_types</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span> <span class="s1">&#39;Metadata keys must match the metadata types&#39;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.data.measurement_image.MeaImg_Unit.add_measurement" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_measurement</span><span class="p">(</span><span class="n">timestamp</span><span class="p">,</span> <span class="n">x_coor</span><span class="p">,</span> <span class="n">y_coor</span><span class="p">,</span> <span class="n">z_coor</span><span class="p">,</span> <span class="n">image</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Adds a measurement to the dictionary</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>timestamp</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Timestamp of the measurement</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>x_coor</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>X-coordinate of the measurement</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>y_coor</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Y-coordinate of the measurement</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>z_coor</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Z-coordinate of the measurement</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>image</code>
            </td>
            <td>
                  <code><span title="PIL.Image.Image">Image</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Image of the measurement</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/data/measurement_image.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">add_measurement</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">x_coor</span><span class="p">:</span><span class="nb">float</span><span class="p">,</span> <span class="n">y_coor</span><span class="p">:</span><span class="nb">float</span><span class="p">,</span>
                    <span class="n">z_coor</span><span class="p">:</span><span class="nb">float</span><span class="p">,</span> <span class="n">image</span><span class="p">:</span><span class="n">Image</span><span class="o">.</span><span class="n">Image</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds a measurement to the dictionary</span>

<span class="sd">    Args:</span>
<span class="sd">        timestamp (str): Timestamp of the measurement</span>
<span class="sd">        x_coor (float): X-coordinate of the measurement</span>
<span class="sd">        y_coor (float): Y-coordinate of the measurement</span>
<span class="sd">        z_coor (float): Z-coordinate of the measurement</span>
<span class="sd">        image (Image.Image): Image of the measurement</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">timestamp</span><span class="p">,</span> <span class="nb">str</span><span class="p">),</span> <span class="s1">&#39;Timestamp must be a string&#39;</span>
    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x_coor</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span> <span class="s1">&#39;X-coordinate must be a float&#39;</span>
    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">y_coor</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span> <span class="s1">&#39;Y-coordinate must be a float&#39;</span>
    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">z_coor</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span> <span class="s1">&#39;Z-coordinate must be a float&#39;</span>
    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">Image</span><span class="o">.</span><span class="n">Image</span><span class="p">),</span> <span class="s1">&#39;Image must be an Image.Image object&#39;</span>

    <span class="c1"># Add the parameters to the dictionary</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_dict_measurements</span><span class="p">[</span><span class="s1">&#39;timestamp&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">timestamp</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_dict_measurements</span><span class="p">[</span><span class="s1">&#39;coor_x&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x_coor</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_dict_measurements</span><span class="p">[</span><span class="s1">&#39;coor_y&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">y_coor</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_dict_measurements</span><span class="p">[</span><span class="s1">&#39;coor_z&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">z_coor</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_dict_measurements</span><span class="p">[</span><span class="s1">&#39;image&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>

    <span class="c1"># Generate the low resolution image and store it</span>
    <span class="n">image_lres</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="n">image_lres</span><span class="o">.</span><span class="n">thumbnail</span><span class="p">((</span><span class="nb">int</span><span class="p">(</span><span class="n">image</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_lres_scale</span><span class="p">),</span><span class="nb">int</span><span class="p">(</span><span class="n">image</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_lres_scale</span><span class="p">)))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_list_lowResImg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">image_lres</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.data.measurement_image.MeaImg_Unit.check_calibration_exist" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">check_calibration_exist</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Checks if the calibration parameters are set</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>bool</code></td>            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if the calibration parameters are set, False otherwise</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/data/measurement_image.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">check_calibration_exist</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Checks if the calibration parameters are set</span>

<span class="sd">    Returns:</span>
<span class="sd">        bool: True if the calibration parameters are set, False otherwise</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_calibration</span><span class="p">,</span> <span class="n">ImgMea_Cal</span><span class="p">):</span> <span class="k">return</span> <span class="kc">False</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_calibration</span><span class="o">.</span><span class="n">check_calibration_set</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.data.measurement_image.MeaImg_Unit.check_measurement_exist" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">check_measurement_exist</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Checks if the measurements are stored</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>bool</code></td>            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if the measurements are stored, False otherwise</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/data/measurement_image.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">check_measurement_exist</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Checks if the measurements are stored</span>

<span class="sd">    Returns:</span>
<span class="sd">        bool: True if the measurements are stored, False otherwise</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_dict_measurements</span><span class="p">[</span><span class="s1">&#39;timestamp&#39;</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">0</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.data.measurement_image.MeaImg_Unit.check_readyForProcessing" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">check_readyForProcessing</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Checks if the image measurement is ready for processing. Checks for:
    1. If the measurements exist
    2. If the calibration parameters exist
    3. If the low resolution images have been generated for all the images taken</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>bool</code></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if the image measurement is ready for processing, False otherwise</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/data/measurement_image.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">check_readyForProcessing</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Checks if the image measurement is ready for processing. Checks for:</span>
<span class="sd">        1. If the measurements exist</span>
<span class="sd">        2. If the calibration parameters exist</span>
<span class="sd">        3. If the low resolution images have been generated for all the images taken</span>

<span class="sd">    Returns:</span>
<span class="sd">        bool: True if the image measurement is ready for processing, False otherwise</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">flg</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_measurement_exist</span><span class="p">():</span> <span class="n">flg</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_calibration_exist</span><span class="p">():</span> <span class="n">flg</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_dict_measurements</span><span class="p">[</span><span class="s1">&#39;image&#39;</span><span class="p">])</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_list_lowResImg</span><span class="p">):</span> <span class="n">flg</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="k">return</span> <span class="n">flg</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.data.measurement_image.MeaImg_Unit.convert_imgpt2stg" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">convert_imgpt2stg</span><span class="p">(</span><span class="n">frame_coor_mm</span><span class="p">,</span> <span class="n">coor_pixel</span><span class="p">,</span> <span class="n">correct_rot</span><span class="p">,</span> <span class="n">low_res</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Converts the coordinates from pixels to mm based on the stored calibration parameters</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>frame_coor_mm</code>
            </td>
            <td>
                  <code><span title="tuple">tuple</span>[<span title="float">float</span>, <span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>X, Y, Z coordinates or X, Y coordinates in mm of the image frame</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>coor_pixel</code>
            </td>
            <td>
                  <code><span title="tuple">tuple</span>[<span title="int">int</span>, <span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>X, Y coordinates in pixels</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>correct_rot</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Correct for the rotation angle if the shown stitched image is rotated corrected</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>low_res</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Set to True if the image being processed is a low resolution (i.e., downsampled) image of the original image.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="tuple">tuple</span>[<span title="float">float</span>, <span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>tuple[float,float]: X and Y coordinates in mm</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/data/measurement_image.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">convert_imgpt2stg</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">frame_coor_mm</span><span class="p">:</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">]</span><span class="o">|</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">],</span>
                      <span class="n">coor_pixel</span><span class="p">:</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span><span class="nb">int</span><span class="p">]</span><span class="o">|</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">],</span>
                      <span class="n">correct_rot</span><span class="p">:</span><span class="nb">bool</span><span class="p">,</span> <span class="n">low_res</span><span class="p">:</span><span class="nb">bool</span><span class="p">)</span>\
    <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Converts the coordinates from pixels to mm based on the stored calibration parameters</span>

<span class="sd">    Args:</span>
<span class="sd">        frame_coor_mm (tuple[float,float]): X, Y, Z coordinates or X, Y coordinates in mm of the image frame</span>
<span class="sd">        coor_pixel (tuple[int,int]): X, Y coordinates in pixels</span>
<span class="sd">        correct_rot (bool): Correct for the rotation angle if the shown stitched image is rotated corrected</span>
<span class="sd">        low_res (bool): Set to True if the image being processed is a low resolution (i.e., downsampled) image of the original image.</span>

<span class="sd">    Returns:</span>
<span class="sd">        tuple[float,float]: X and Y coordinates in mm</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_calibration</span><span class="p">,</span> <span class="n">ImgMea_Cal</span><span class="p">):</span> <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Calibration is not set&#39;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">low_res</span><span class="p">:</span> <span class="n">coor_pixel</span> <span class="o">=</span> <span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">coor_pixel</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">_lres_scale</span><span class="p">),</span><span class="nb">int</span><span class="p">(</span><span class="n">coor_pixel</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">_lres_scale</span><span class="p">))</span>

    <span class="k">if</span> <span class="n">correct_rot</span><span class="p">:</span>
        <span class="n">coor_pixel</span> <span class="o">=</span> <span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">coor_pixel</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span><span class="nb">int</span><span class="p">(</span><span class="n">coor_pixel</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
        <span class="n">coor_pixel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_correctRotationFlip</span><span class="p">(</span><span class="n">coor_pixel</span><span class="p">,</span><span class="n">stitch2ori</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="n">coor_stg_mm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_calibration</span><span class="o">.</span><span class="n">convert_imgpt2stg</span><span class="p">(</span>
        <span class="n">coor_img_pixel</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">coor_pixel</span><span class="p">[:</span><span class="mi">2</span><span class="p">]),</span>
        <span class="n">coor_stage_mm</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">frame_coor_mm</span><span class="p">[:</span><span class="mi">2</span><span class="p">])</span>
    <span class="p">)</span>

    <span class="n">x_mm</span><span class="p">,</span><span class="n">y_mm</span> <span class="o">=</span> <span class="n">coor_stg_mm</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">x_mm</span><span class="p">,</span> <span class="n">y_mm</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.data.measurement_image.MeaImg_Unit.convert_mea2stg" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">convert_mea2stg</span><span class="p">(</span><span class="n">coor_mea_mm</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Calculates the stage coordinates from the measurement coordinates based on the laser coordinates
stored in the calibration parameters</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>coor_mea_mm</code>
            </td>
            <td>
                  <code><span title="tuple">tuple</span>[<span title="float">float</span>, <span title="float">float</span>, <span title="float">float</span>] | <span title="tuple">tuple</span>[<span title="float">float</span>, <span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Measurement coordinates (X,Y,Z) in mm or (X,Y) in mm</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="tuple">tuple</span>[<span title="float">float</span>, <span title="float">float</span>, <span title="float">float</span>] | <span title="tuple">tuple</span>[<span title="float">float</span>, <span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>tuple[float,float,float]|tuple[float,float]: Stage coordinates (X,Y,Z) in mm or (X,Y) in mm</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/data/measurement_image.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">convert_mea2stg</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">coor_mea_mm</span><span class="p">:</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">]</span><span class="o">|</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">])</span>\
    <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">]</span><span class="o">|</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculates the stage coordinates from the measurement coordinates based on the laser coordinates</span>
<span class="sd">    stored in the calibration parameters</span>

<span class="sd">    Args:</span>
<span class="sd">        coor_mea_mm (tuple[float,float,float]|tuple[float,float]): Measurement coordinates (X,Y,Z) in mm or (X,Y) in mm</span>

<span class="sd">    Returns:</span>
<span class="sd">        tuple[float,float,float]|tuple[float,float]: Stage coordinates (X,Y,Z) in mm or (X,Y) in mm</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_calibration</span><span class="p">,</span> <span class="n">ImgMea_Cal</span><span class="p">):</span> <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Calibration is not set&#39;</span><span class="p">)</span>

    <span class="n">coor_mea_mm_arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">coor_mea_mm</span><span class="p">[:</span><span class="mi">2</span><span class="p">])</span>
    <span class="n">coor_stage_mm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_calibration</span><span class="o">.</span><span class="n">convert_mea2stg</span><span class="p">(</span><span class="n">coor_mea_mm_arr</span><span class="p">)</span>

    <span class="n">x_mm</span><span class="p">,</span><span class="n">y_mm</span> <span class="o">=</span> <span class="n">coor_stage_mm</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">coor_mea_mm</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span><span class="k">return</span> <span class="n">x_mm</span><span class="p">,</span> <span class="n">y_mm</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">coor_mea_mm</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="p">:</span> <span class="k">return</span> <span class="n">x_mm</span><span class="p">,</span> <span class="n">y_mm</span><span class="p">,</span> <span class="n">coor_mea_mm</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.data.measurement_image.MeaImg_Unit.convert_stg2imgpt" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">convert_stg2imgpt</span><span class="p">(</span><span class="n">coor_stage_mm</span><span class="p">,</span> <span class="n">coor_point_mm</span><span class="p">,</span> <span class="n">correct_rot</span><span class="p">,</span> <span class="n">low_res</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Converts the coordinates from mm to pixels based on the stored calibration parameters</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>stage_coor_mm</code>
            </td>
            <td>
                  <code><span title="tuple">tuple</span>[<span title="float">float</span>, <span title="float">float</span>, <span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>X, Y, Z coordinates or X, Y coordinates in mm of the image frame</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>coor_mm</code>
            </td>
            <td>
                  <code><span title="tuple">tuple</span>[<span title="float">float</span>, <span title="float">float</span>, <span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>X, Y, Z coordinates or X, Y coordinates in mm</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>rot_rad</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Rotation angle in radians to correct for. Default is 0.0</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>correct_rot</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Correct for the rotation angle if the shown stitched image is rotated corrected</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>low_res</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Set to True if the image being processed is a low resolution (i.e., downsampled) image of the original image.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="tuple">tuple</span>[<span title="int">int</span>, <span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>tuple[int,int]: X and Y coordinates in pixels</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="note" open>
  <summary>NOTE</summary>
  <ul>
<li>The rotation angle is to correct for the rotation applied of the shown image
    from the 'get stitched image' method</li>
<li>The rotation angle is in radians and is counter clockwise</li>
</ul>
</details>

            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/data/measurement_image.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">convert_stg2imgpt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">coor_stage_mm</span><span class="p">:</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">]</span><span class="o">|</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">],</span>
        <span class="n">coor_point_mm</span><span class="p">:</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">]</span><span class="o">|</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">],</span><span class="n">correct_rot</span><span class="p">:</span><span class="nb">bool</span><span class="p">,</span><span class="n">low_res</span><span class="p">:</span><span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span><span class="nb">int</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Converts the coordinates from mm to pixels based on the stored calibration parameters</span>

<span class="sd">    Args:</span>
<span class="sd">        stage_coor_mm (tuple[float,float,float]): X, Y, Z coordinates or X, Y coordinates in mm of the image frame</span>
<span class="sd">        coor_mm (tuple[float,float,float]): X, Y, Z coordinates or X, Y coordinates in mm</span>
<span class="sd">        rot_rad (float): Rotation angle in radians to correct for. Default is 0.0</span>
<span class="sd">        correct_rot (bool): Correct for the rotation angle if the shown stitched image is rotated corrected</span>
<span class="sd">        low_res (bool): Set to True if the image being processed is a low resolution (i.e., downsampled) image of the original image.</span>

<span class="sd">    Returns:</span>
<span class="sd">        tuple[int,int]: X and Y coordinates in pixels</span>

<span class="sd">    NOTE:</span>
<span class="sd">        - The rotation angle is to correct for the rotation applied of the shown image</span>
<span class="sd">            from the &#39;get stitched image&#39; method</span>
<span class="sd">        - The rotation angle is in radians and is counter clockwise</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_calibration</span><span class="p">,</span> <span class="n">ImgMea_Cal</span><span class="p">):</span> <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Calibration is not set&#39;</span><span class="p">)</span>

    <span class="n">coor_pixel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_calibration</span><span class="o">.</span><span class="n">convert_stg2imgpt</span><span class="p">(</span>
        <span class="n">coor_point_mm</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">coor_point_mm</span><span class="p">[:</span><span class="mi">2</span><span class="p">]),</span>
        <span class="n">coor_stg_mm</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">coor_stage_mm</span><span class="p">[:</span><span class="mi">2</span><span class="p">])</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">correct_rot</span><span class="p">:</span>
        <span class="n">coor_pixel</span> <span class="o">=</span> <span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">coor_pixel</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span><span class="nb">int</span><span class="p">(</span><span class="n">coor_pixel</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
        <span class="n">coor_pixel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_correctRotationFlip</span><span class="p">(</span><span class="n">coor_pixel</span><span class="p">,</span><span class="n">stitch2ori</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="n">x_pixel</span><span class="p">,</span><span class="n">y_pixel</span> <span class="o">=</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">coor</span><span class="p">)</span> <span class="k">for</span> <span class="n">coor</span> <span class="ow">in</span> <span class="n">coor_pixel</span><span class="p">]</span>

    <span class="k">if</span> <span class="n">low_res</span><span class="p">:</span>
        <span class="n">x_pixel</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">x_pixel</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_lres_scale</span><span class="p">)</span>
        <span class="n">y_pixel</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">y_pixel</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_lres_scale</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">x_pixel</span><span class="p">,</span> <span class="n">y_pixel</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.data.measurement_image.MeaImg_Unit.convert_stg2mea" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">convert_stg2mea</span><span class="p">(</span><span class="n">coor_stage_mm</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Calculates the measurement coordinates from the stage coordinates based on the laser coordinates
stored in the calibration parameters</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>stage_coor</code>
            </td>
            <td>
                  <code><span title="tuple">tuple</span>[<span title="float">float</span>, <span title="float">float</span>, <span title="float">float</span>] | <span title="tuple">tuple</span>[<span title="float">float</span>, <span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Stage coordinates (X,Y,Z) in mm or (X,Y) in mm</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="tuple">tuple</span>[<span title="float">float</span>, <span title="float">float</span>, <span title="float">float</span>] | <span title="tuple">tuple</span>[<span title="float">float</span>, <span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>tuple[float,float,float]|tuple[float,float]: Measurement coordinates (X,Y,Z) in mm or (X,Y) in mm</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/data/measurement_image.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">convert_stg2mea</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">coor_stage_mm</span><span class="p">:</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">]</span><span class="o">|</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">])</span>\
    <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">]</span><span class="o">|</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculates the measurement coordinates from the stage coordinates based on the laser coordinates</span>
<span class="sd">    stored in the calibration parameters</span>

<span class="sd">    Args:</span>
<span class="sd">        stage_coor (tuple[float,float,float]|tuple[float,float]): Stage coordinates (X,Y,Z) in mm or (X,Y) in mm</span>

<span class="sd">    Returns:</span>
<span class="sd">        tuple[float,float,float]|tuple[float,float]: Measurement coordinates (X,Y,Z) in mm or (X,Y) in mm</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_calibration</span><span class="p">,</span> <span class="n">ImgMea_Cal</span><span class="p">):</span> <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Calibration is not set&#39;</span><span class="p">)</span>

    <span class="n">coor_stage_mm_arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">coor_stage_mm</span><span class="p">[:</span><span class="mi">2</span><span class="p">])</span>
    <span class="n">coor_mea_mm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_calibration</span><span class="o">.</span><span class="n">convert_stg2mea</span><span class="p">(</span><span class="n">coor_stage_mm_arr</span><span class="p">)</span>

    <span class="n">x_mm</span><span class="p">,</span><span class="n">y_mm</span> <span class="o">=</span> <span class="n">coor_mea_mm</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">coor_stage_mm</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span> <span class="k">return</span> <span class="n">x_mm</span><span class="p">,</span> <span class="n">y_mm</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">coor_stage_mm</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="p">:</span> <span class="k">return</span> <span class="n">x_mm</span><span class="p">,</span> <span class="n">y_mm</span><span class="p">,</span> <span class="n">coor_stage_mm</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.data.measurement_image.MeaImg_Unit.get_IdName" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_IdName</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Returns the unit ID and name</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="tuple">tuple</span>[<span title="str">str</span>, <span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>tuple[str,str]: Unit ID, Unit name</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/data/measurement_image.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_IdName</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the unit ID and name</span>

<span class="sd">    Returns:</span>
<span class="sd">        tuple[str,str]: Unit ID, Unit name</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unitID</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unitName</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.data.measurement_image.MeaImg_Unit.get_ImageMeasurement_Calibration" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_ImageMeasurement_Calibration</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Returns the ImageMeasurement_Calibration object for the calibration parameters</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/data/measurement_image.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_ImageMeasurement_Calibration</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ImgMea_Cal</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the ImageMeasurement_Calibration object for the calibration parameters</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_calibration</span><span class="p">,</span> <span class="n">ImgMea_Cal</span><span class="p">):</span> <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Calibration is not set&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_calibration</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.data.measurement_image.MeaImg_Unit.get_calibration_asdict" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_calibration_asdict</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Returns the calibration parameters as a dictionary</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="tuple">tuple</span>[<span title="str">str</span>, <span title="dict">dict</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>tuple[str,dict]: Calibration ID, calibration parameters</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/data/measurement_image.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_calibration_asdict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span><span class="nb">dict</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the calibration parameters as a dictionary</span>

<span class="sd">    Returns:</span>
<span class="sd">        tuple[str,dict]: Calibration ID, calibration parameters</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_calibration</span><span class="p">,</span> <span class="n">ImgMea_Cal</span><span class="p">):</span> <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Calibration is not set&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_calibration</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_calibration</span><span class="o">.</span><span class="n">get_calibration_asdict</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.data.measurement_image.MeaImg_Unit.get_dict_measurement" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_dict_measurement</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Returns the measurements dictionary for saving to local disk</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>dict</code></td>            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Measurements dictionary</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/data/measurement_image.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_dict_measurement</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the measurements dictionary for saving to local disk</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: Measurements dictionary</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dict_measurements</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.data.measurement_image.MeaImg_Unit.get_dict_measurement_types" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_dict_measurement_types</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Returns the measurements dictionary types</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>dict</code></td>            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Measurements dictionary types</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/data/measurement_image.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_dict_measurement_types</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the measurements dictionary types</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: Measurements dictionary types</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dict_measurements_types</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.data.measurement_image.MeaImg_Unit.get_image_all_stitched" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_image_all_stitched</span><span class="p">(</span><span class="n">low_res</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Stitches all the images taken</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>low_res</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag to use the low resolution images. Default is False</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="tuple">tuple</span>[<span title="PIL.Image.Image">Image</span>, <span title="tuple">tuple</span>[<span title="float">float</span>, <span title="float">float</span>], <span title="tuple">tuple</span>[<span title="float">float</span>, <span title="float">float</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>tuple[Image.Image,tuple[float,float],tuple[float,float]]:
Stitched image, image min limits in mm (xmin,ymin) [mm],
image max limits in mm (xmax,ymax) [mm]</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="note" open>
  <summary>NOTE</summary>
  <ul>
<li>Note that the shown image is rotated according to the calibration parameters.
    i.e., the image shown is now aligned with the stage frame of reference's axes
    such that another coordinate rotation correction needs to be done when converting
    the coordinats between the image and the stage frame of reference. For this reason,
    the rotation angle is stored internally.</li>
</ul>
</details>

            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/data/measurement_image.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_image_all_stitched</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">low_res</span><span class="p">:</span><span class="nb">bool</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">Image</span><span class="o">.</span><span class="n">Image</span><span class="p">,</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">],</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Stitches all the images taken</span>

<span class="sd">    Args:</span>
<span class="sd">        low_res (bool): Flag to use the low resolution images. Default is False</span>

<span class="sd">    Returns:</span>
<span class="sd">        tuple[Image.Image,tuple[float,float],tuple[float,float]]:</span>
<span class="sd">            Stitched image, image min limits in mm (xmin,ymin) [mm],</span>
<span class="sd">            image max limits in mm (xmax,ymax) [mm]</span>

<span class="sd">    NOTE:</span>
<span class="sd">        - Note that the shown image is rotated according to the calibration parameters.</span>
<span class="sd">            i.e., the image shown is now aligned with the stage frame of reference&#39;s axes</span>
<span class="sd">            such that another coordinate rotation correction needs to be done when converting</span>
<span class="sd">            the coordinats between the image and the stage frame of reference. For this reason,</span>
<span class="sd">            the rotation angle is stored internally.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_dict_measurements</span><span class="p">[</span><span class="s1">&#39;timestamp&#39;</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;No images taken&#39;</span>
    <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_calibration_exist</span><span class="p">(),</span> <span class="s1">&#39;Calibration parameters are not set&#39;</span>
    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_calibration</span><span class="p">,</span> <span class="n">ImgMea_Cal</span><span class="p">),</span> <span class="s1">&#39;Calibration is not set&#39;</span>

    <span class="n">cal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_calibration</span>

<span class="c1"># &gt; Get the measurements</span>
    <span class="k">if</span> <span class="n">low_res</span><span class="p">:</span> <span class="n">list_images</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_list_lowResImg</span>
    <span class="k">else</span><span class="p">:</span> <span class="n">list_images</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dict_measurements</span><span class="p">[</span><span class="s1">&#39;image&#39;</span><span class="p">]</span>

    <span class="n">list_coorx_mm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dict_measurements</span><span class="p">[</span><span class="s1">&#39;coor_x&#39;</span><span class="p">]</span>
    <span class="n">list_coory_mm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dict_measurements</span><span class="p">[</span><span class="s1">&#39;coor_y&#39;</span><span class="p">]</span>

    <span class="c1"># Calculate the rotation angle</span>
    <span class="c1"># print(f&#39;Stored rotation angle [rad]: {cal.rotation_rad}&#39;)</span>
    <span class="n">rot_deg</span> <span class="o">=</span> <span class="o">-</span><span class="n">cal</span><span class="o">.</span><span class="n">rotation_rad</span><span class="o">*</span><span class="mi">180</span><span class="o">/</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span>
    <span class="c1"># print(f&#39;Operation rotation angle [deg]: {rot_deg}&#39;)</span>

<span class="c1"># &gt; Calculate the crop and the coordinate shift because of the cropping</span>
    <span class="n">sizex</span><span class="p">,</span><span class="n">sizey</span> <span class="o">=</span> <span class="n">list_images</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">size</span>
    <span class="n">cropx_pixel</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">sizey</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">cal</span><span class="o">.</span><span class="n">rotation_rad</span><span class="p">)))</span>
    <span class="n">cropy_pixel</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">sizex</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">cal</span><span class="o">.</span><span class="n">rotation_rad</span><span class="p">)))</span>
    <span class="c1"># print(f&#39;Crop size [pixel]: {cropx_pixel,cropy_pixel}&#39;)</span>

    <span class="c1"># Ensure that the angle is within -180 to 180 degrees</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">rot_deg</span> <span class="o">&gt;</span> <span class="mi">180</span><span class="p">:</span> <span class="n">rot_deg</span> <span class="o">-=</span> <span class="mi">360</span>
        <span class="k">elif</span> <span class="n">rot_deg</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mi">180</span><span class="p">:</span> <span class="n">rot_deg</span> <span class="o">+=</span> <span class="mi">360</span>
        <span class="k">else</span><span class="p">:</span> <span class="k">break</span>

    <span class="k">if</span> <span class="n">rot_deg</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">crop_coor</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">cropy_pixel</span><span class="p">,</span><span class="n">sizex</span><span class="o">-</span><span class="n">cropx_pixel</span><span class="p">,</span><span class="n">sizey</span><span class="p">)</span>
        <span class="n">coor_shift_pixel</span> <span class="o">=</span> <span class="p">(</span><span class="n">cropx_pixel</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">rot_deg</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">crop_coor</span> <span class="o">=</span> <span class="p">(</span><span class="n">cropx_pixel</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">sizex</span><span class="p">,</span><span class="n">sizey</span><span class="o">-</span><span class="n">cropy_pixel</span><span class="p">)</span>
        <span class="n">coor_shift_pixel</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">cropy_pixel</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">crop_coor</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">sizex</span><span class="p">,</span><span class="n">sizey</span><span class="p">)</span>
        <span class="n">coor_shift_pixel</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>

    <span class="n">coor_shift_stage</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">convert_imgpt2stg</span><span class="p">(</span><span class="n">frame_coor_mm</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span>\
        <span class="n">coor_pixel</span><span class="o">=</span><span class="n">coor_shift_pixel</span><span class="p">,</span><span class="n">correct_rot</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">low_res</span><span class="o">=</span><span class="n">low_res</span><span class="p">)</span>

    <span class="n">list_coorx_mm</span> <span class="o">=</span> <span class="p">[</span><span class="n">coor</span><span class="o">+</span><span class="n">coor_shift_stage</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">coor</span> <span class="ow">in</span> <span class="n">list_coorx_mm</span><span class="p">]</span>
    <span class="n">list_coory_mm</span> <span class="o">=</span> <span class="p">[</span><span class="n">coor</span><span class="o">+</span><span class="n">coor_shift_stage</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">coor</span> <span class="ow">in</span> <span class="n">list_coory_mm</span><span class="p">]</span>

<span class="c1"># &gt; Rotate and crop the images</span>
    <span class="n">list_images_converted</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">img</span> <span class="ow">in</span> <span class="n">list_images</span><span class="p">:</span>
        <span class="n">img_rot_crop</span><span class="p">:</span><span class="n">Image</span><span class="o">.</span><span class="n">Image</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">img_rot_crop</span> <span class="o">=</span> <span class="n">img_rot_crop</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="o">-</span><span class="n">rot_deg</span><span class="p">,</span><span class="n">expand</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">center</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">))</span> <span class="k">if</span> <span class="n">rot_deg</span> <span class="o">!=</span> <span class="mi">0</span> <span class="k">else</span> <span class="n">img_rot_crop</span>
        <span class="n">img_rot_crop</span> <span class="o">=</span> <span class="n">img_rot_crop</span><span class="o">.</span><span class="n">crop</span><span class="p">(</span><span class="n">crop_coor</span><span class="p">)</span>
        <span class="n">list_images_converted</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">img_rot_crop</span><span class="p">)</span>

    <span class="n">list_images</span> <span class="o">=</span> <span class="n">list_images_converted</span>

<span class="c1"># &gt; Stitch the image</span>
    <span class="c1"># Calculate each image location in the stitched image (in pixel coordinates)</span>
    <span class="n">list_coor_mm</span> <span class="o">=</span> <span class="p">[(</span><span class="n">coorx_mm</span><span class="p">,</span><span class="n">coory_mm</span><span class="p">)</span> <span class="k">for</span> <span class="n">coorx_mm</span><span class="p">,</span><span class="n">coory_mm</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">list_coorx_mm</span><span class="p">,</span><span class="n">list_coory_mm</span><span class="p">)]</span>
    <span class="n">list_coor_min_mm</span> <span class="o">=</span> <span class="n">list_coor_mm</span>

    <span class="c1"># Flip the coordinates based on the calibration parameters</span>
    <span class="c1"># rot_rad = cal.rotation_rad</span>
    <span class="c1"># flip_rot_x = np.sign(np.cos(rot_rad))</span>
    <span class="c1"># flip_rot_x = 1 if flip_rot_x == 0 else flip_rot_x</span>
    <span class="c1"># flip_rot_y = np.sign(np.sin(rot_rad))</span>
    <span class="c1"># flip_rot_y = 1 if flip_rot_y == 0 else flip_rot_y</span>

    <span class="c1"># x_flip = np.sign(cal.scale_x_pixelPerMm*flip_rot_x*-1).astype(int)</span>
    <span class="c1"># y_flip = np.sign(cal.scale_y_pixelPerMm*cal.flip_y*flip_rot_y*-1).astype(int)</span>
    <span class="n">x_flip</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
    <span class="n">y_flip</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
    <span class="k">assert</span> <span class="n">x_flip</span> <span class="o">!=</span><span class="mi">0</span> <span class="ow">and</span> <span class="n">y_flip</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;CHECK ERROR: Flip parameters cannot be 0, there must be something unaccounted for&#39;</span>

    <span class="n">list_coor_min_pixel</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">convert_stg2imgpt</span><span class="p">(</span><span class="n">coor_stage_mm</span><span class="o">=</span><span class="n">coor</span><span class="p">,</span><span class="n">coor_point_mm</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="n">correct_rot</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">low_res</span><span class="o">=</span><span class="n">low_res</span><span class="p">)</span>\
        <span class="k">for</span> <span class="n">coor</span> <span class="ow">in</span> <span class="n">list_coor_mm</span><span class="p">]</span>
    <span class="n">list_coor_min_pixel</span> <span class="o">=</span> <span class="p">[(</span><span class="n">coor</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="n">x_flip</span><span class="p">,</span><span class="n">coor</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="n">y_flip</span><span class="p">)</span> <span class="k">for</span> <span class="n">coor</span> <span class="ow">in</span> <span class="n">list_coor_min_pixel</span><span class="p">]</span>

    <span class="n">img_limit_coor_min_pixel</span> <span class="o">=</span> <span class="p">(</span><span class="nb">min</span><span class="p">([</span><span class="n">coor</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">coor</span> <span class="ow">in</span> <span class="n">list_coor_min_pixel</span><span class="p">]),</span>\
        <span class="nb">min</span><span class="p">([</span><span class="n">coor</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">coor</span> <span class="ow">in</span> <span class="n">list_coor_min_pixel</span><span class="p">]))</span>

    <span class="c1"># Calculate the relative pixel coordinates</span>
    <span class="n">list_coor_pixel_rel</span> <span class="o">=</span> <span class="p">[(</span>
        <span class="n">coor</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-</span><span class="n">img_limit_coor_min_pixel</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>\
        <span class="n">coor</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="n">img_limit_coor_min_pixel</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="p">)</span> <span class="k">for</span> <span class="n">coor</span> <span class="ow">in</span> <span class="n">list_coor_min_pixel</span><span class="p">]</span>

    <span class="c1"># Generate an empty image </span>
    <span class="n">img_wid</span> <span class="o">=</span> <span class="nb">max</span><span class="p">([</span><span class="nb">abs</span><span class="p">(</span><span class="n">coor</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="k">for</span> <span class="n">coor</span> <span class="ow">in</span> <span class="n">list_coor_pixel_rel</span><span class="p">])</span> <span class="o">+</span> <span class="n">img_rot_crop</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">img_hei</span> <span class="o">=</span> <span class="nb">max</span><span class="p">([</span><span class="nb">abs</span><span class="p">(</span><span class="n">coor</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="k">for</span> <span class="n">coor</span> <span class="ow">in</span> <span class="n">list_coor_pixel_rel</span><span class="p">])</span> <span class="o">+</span> <span class="n">img_rot_crop</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">img_stitched</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s1">&#39;RGB&#39;</span><span class="p">,(</span><span class="n">img_wid</span><span class="p">,</span><span class="n">img_hei</span><span class="p">))</span>

    <span class="c1"># Paste the images onto the empty image</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">list_images</span><span class="p">)):</span>
        <span class="n">img</span> <span class="o">=</span> <span class="n">list_images</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="n">coor_pixel</span> <span class="o">=</span> <span class="n">list_coor_pixel_rel</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="n">img_stitched</span><span class="o">.</span><span class="n">paste</span><span class="p">(</span><span class="n">img</span><span class="p">,</span><span class="n">coor_pixel</span><span class="p">)</span>

<span class="c1"># &gt; Calculate the image limits in mm</span>
    <span class="c1"># Note to myself:</span>
    <span class="c1"># The limit is not the minimum coordinates of the image but the coordinate of the 0,0 pixel</span>
    <span class="c1"># of the stitched image in the stage frame of reference</span>
    <span class="c1"># This can be calculated by converting the pixel coordinates of the one of the image </span>
    <span class="c1"># in the list_coor_pixel_rel</span>

    <span class="c1"># This minimum coordinate is also the reference coordinate to be returned (i.e., the stage coordinate</span>
    <span class="c1"># of the stitched image, corresponding to the 0,0 pixel of the stitched image)</span>

    <span class="c1"># Similarly, the maximum coordinates of the image is the maximum coordinates of the img_rot_crop</span>
    <span class="c1"># i.e., the image shape</span>

    <span class="n">mea_coor</span> <span class="o">=</span> <span class="n">list_coor_min_mm</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">mea_coor_pixel</span> <span class="o">=</span> <span class="n">list_coor_pixel_rel</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">neg</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="n">mea_coor_pixel</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="o">-</span><span class="n">mea_coor_pixel</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="n">img_limit_coor_min_mm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">convert_imgpt2stg</span><span class="p">(</span><span class="n">frame_coor_mm</span><span class="o">=</span><span class="n">mea_coor</span><span class="p">,</span><span class="n">coor_pixel</span><span class="o">=</span><span class="n">neg</span><span class="p">,</span><span class="n">correct_rot</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                                   <span class="n">low_res</span><span class="o">=</span><span class="n">low_res</span><span class="p">)</span>
    <span class="n">img_limit_coor_max_mm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">convert_imgpt2stg</span><span class="p">(</span><span class="n">frame_coor_mm</span><span class="o">=</span><span class="n">img_limit_coor_min_mm</span><span class="p">,</span><span class="n">coor_pixel</span><span class="o">=</span><span class="p">(</span><span class="n">img_wid</span><span class="p">,</span><span class="n">img_hei</span><span class="p">),</span>
                                                   <span class="n">correct_rot</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">low_res</span><span class="o">=</span><span class="n">low_res</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">img_stitched</span><span class="p">,</span> <span class="n">img_limit_coor_min_mm</span><span class="p">,</span> <span class="n">img_limit_coor_max_mm</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.data.measurement_image.MeaImg_Unit.get_metadata" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_metadata</span><span class="p">(</span><span class="n">incl_nameid</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Returns the metadata of the ImageMeasurement_Unit</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>incl_nameid</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Include the name and ID in the metadata. Default is True</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>dict</code></td>            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Metadata of the ImageMeasurement_Unit (id, name, calibration_id, calibration_dict)</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/data/measurement_image.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">incl_nameid</span><span class="p">:</span><span class="nb">bool</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the metadata of the ImageMeasurement_Unit</span>

<span class="sd">    Args:</span>
<span class="sd">        incl_nameid (bool): Include the name and ID in the metadata. Default is True</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: Metadata of the ImageMeasurement_Unit (id, name, calibration_id, calibration_dict)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">incl_nameid</span><span class="p">:</span> <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span>
    <span class="k">else</span><span class="p">:</span> <span class="k">return</span> <span class="p">{</span><span class="n">key</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idname_keys</span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.data.measurement_image.MeaImg_Unit.get_metadata_types" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_metadata_types</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Returns the metadata types</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>dict</code></td>            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Metadata types</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/data/measurement_image.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_metadata_types</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the metadata types</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: Metadata types</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metadata_types</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.data.measurement_image.MeaImg_Unit.get_numMeasurements" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_numMeasurements</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Returns the number of measurements taken</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>int</code></td>            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Number of measurements taken</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/data/measurement_image.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_numMeasurements</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the number of measurements taken</span>

<span class="sd">    Returns:</span>
<span class="sd">        int: Number of measurements taken</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_dict_measurements</span><span class="p">[</span><span class="s1">&#39;timestamp&#39;</span><span class="p">])</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.data.measurement_image.MeaImg_Unit.refresh_metadata" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">refresh_metadata</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Resets the metadata using the internally stored values</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/data/measurement_image.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">refresh_metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Resets the metadata using the internally stored values</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_calibration</span><span class="p">,</span> <span class="n">ImgMea_Cal</span><span class="p">):</span> <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Calibration is not set&#39;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;id&#39;</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">_unitID</span><span class="p">,</span>
        <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">_unitName</span><span class="p">,</span>
        <span class="s1">&#39;calibration_id&#39;</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">_calibration</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
        <span class="s1">&#39;calibration_dict&#39;</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">_calibration</span><span class="o">.</span><span class="n">get_calibration_asdict</span><span class="p">()</span>
    <span class="p">}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.data.measurement_image.MeaImg_Unit.reprocess_lowres_images" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">reprocess_lowres_images</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Reprocesses the low resolution images to be used for the stitching using the original images</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/data/measurement_image.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">reprocess_lowres_images</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Reprocesses the low resolution images to be used for the stitching using the original images</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_list_lowResImg</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">img</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dict_measurements</span><span class="p">[</span><span class="s1">&#39;image&#39;</span><span class="p">]:</span>
        <span class="n">img_lres</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">img_lres</span><span class="o">.</span><span class="n">thumbnail</span><span class="p">((</span><span class="nb">int</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_lres_scale</span><span class="p">),</span><span class="nb">int</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_lres_scale</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_list_lowResImg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">img_lres</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.data.measurement_image.MeaImg_Unit.reset_measurement" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">reset_measurement</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Deletes all stored measurement in the _dict_measurements</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/data/measurement_image.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">reset_measurement</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Deletes all stored measurement in the _dict_measurements</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dict_measurements</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dict_measurements</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.data.measurement_image.MeaImg_Unit.set_calibration_ImageMeasurement_Calibration" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_calibration_ImageMeasurement_Calibration</span><span class="p">(</span><span class="n">calibration</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Sets the calibration parameters from an ImageMeasurement_Calibration object</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>calibration</code>
            </td>
            <td>
                  <code><span title="ImageMeasurement_Calibration">ImageMeasurement_Calibration</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Calibration parameters object</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="AssertionError">AssertionError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Calibration parameters are not set</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="AssertionError">AssertionError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Calibration parameters are not an ImageMeasurement_Calibration object</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/data/measurement_image.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_calibration_ImageMeasurement_Calibration</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">calibration</span><span class="p">:</span><span class="n">ImgMea_Cal</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sets the calibration parameters from an ImageMeasurement_Calibration object</span>

<span class="sd">    Args:</span>
<span class="sd">        calibration (ImageMeasurement_Calibration): Calibration parameters object</span>

<span class="sd">    Raises:</span>
<span class="sd">        AssertionError: Calibration parameters are not set</span>
<span class="sd">        AssertionError: Calibration parameters are not an ImageMeasurement_Calibration object</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">calibration</span><span class="p">,</span> <span class="n">ImgMea_Cal</span><span class="p">),</span> <span class="s1">&#39;Calibration must be an ImageMeasurement_Calibration object&#39;</span>
    <span class="k">assert</span> <span class="n">calibration</span><span class="o">.</span><span class="n">check_calibration_set</span><span class="p">(),</span> <span class="s1">&#39;Calibration parameters are not set&#39;</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_calibration</span> <span class="o">=</span> <span class="n">calibration</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_flg_mat_calculated</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">refresh_metadata</span><span class="p">()</span>
    <span class="k">return</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.data.measurement_image.MeaImg_Unit.set_dict_measurement_fromfile" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_dict_measurement_fromfile</span><span class="p">(</span><span class="n">dict_measurements</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Sets the measurements from a dictionary</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>dict_measurements</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Measurements dictionary</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/data/measurement_image.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_dict_measurement_fromfile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">dict_measurements</span><span class="p">:</span><span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sets the measurements from a dictionary</span>

<span class="sd">    Args:</span>
<span class="sd">        dict_measurements (dict): Measurements dictionary</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">assert</span> <span class="nb">set</span><span class="p">(</span><span class="n">dict_measurements</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="o">==</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_dict_measurements</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span> <span class="s1">&#39;Measurement keys must match the measurement types&#39;</span>
    <span class="k">assert</span> <span class="nb">all</span><span class="p">([</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">dict_measurements</span><span class="p">[</span><span class="n">key</span><span class="p">],</span> <span class="nb">list</span><span class="p">)</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">dict_measurements</span><span class="o">.</span><span class="n">keys</span><span class="p">()]),</span> <span class="s1">&#39;Measurement values must be lists&#39;</span>
    <span class="k">assert</span> <span class="nb">all</span><span class="p">([</span><span class="nb">all</span><span class="p">([</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dict_measurements_types</span><span class="p">[</span><span class="n">key</span><span class="p">])</span> <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">dict_measurements</span><span class="p">[</span><span class="n">key</span><span class="p">]])</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">dict_measurements</span><span class="o">.</span><span class="n">keys</span><span class="p">()]),</span> <span class="s1">&#39;Measurement values must match the measurement types&#39;</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_dict_measurements</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">dict_measurements</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dict_measurements</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">dict_measurements</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">reprocess_lowres_images</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.data.measurement_image.MeaImg_Unit.set_metadata_fromfile" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_metadata_fromfile</span><span class="p">(</span><span class="n">dict_meta</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Sets the unit attributes based on the given metadata dictionary</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>dict_meta</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Metadata dictionary</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/data/measurement_image.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_metadata_fromfile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">dict_meta</span><span class="p">:</span><span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sets the unit attributes based on the given metadata dictionary</span>

<span class="sd">    Args:</span>
<span class="sd">        dict_meta (dict): Metadata dictionary</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">assert</span> <span class="nb">all</span><span class="p">([</span><span class="n">key</span> <span class="ow">in</span> <span class="n">dict_meta</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span><span class="o">.</span><span class="n">keys</span><span class="p">())]),</span> <span class="s1">&#39;Metadata keys must match the metadata types&#39;</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_unitID</span> <span class="o">=</span> <span class="n">dict_meta</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_unitName</span> <span class="o">=</span> <span class="n">dict_meta</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>

    <span class="n">cal</span> <span class="o">=</span> <span class="n">ImgMea_Cal</span><span class="p">()</span>
    <span class="n">cal</span><span class="o">.</span><span class="n">set_calibration_fromdict</span><span class="p">(</span><span class="n">dict_meta</span><span class="p">[</span><span class="s1">&#39;calibration_id&#39;</span><span class="p">],</span><span class="n">dict_meta</span><span class="p">[</span><span class="s1">&#39;calibration_dict&#39;</span><span class="p">])</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_calibration</span> <span class="o">=</span> <span class="n">cal</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_flg_mat_calculated</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">refresh_metadata</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.data.measurement_image.MeaImg_Unit.set_name" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_name</span><span class="p">(</span><span class="n">unit_name</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Sets the name of the ImageMeasurement_Unit</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>unit_name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of the ImageMeasurement_Unit</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/data/measurement_image.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">unit_name</span><span class="p">:</span><span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sets the name of the ImageMeasurement_Unit</span>

<span class="sd">    Args:</span>
<span class="sd">        unit_name (str): Name of the ImageMeasurement_Unit</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">unit_name</span><span class="p">,</span><span class="nb">str</span><span class="p">),</span> <span class="s1">&#39;Name must be a string&#39;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_unitName</span> <span class="o">=</span> <span class="n">unit_name</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">unit_name</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.data.measurement_image.MeaImg_Unit.test_generate_dummy" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">test_generate_dummy</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Generates dummy measurements for testing purposes</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/data/measurement_image.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">test_generate_dummy</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generates dummy measurements for testing purposes</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
        <span class="n">timestamp</span> <span class="o">=</span> <span class="n">get_timestamp_us_str</span><span class="p">()</span>
        <span class="n">x_coor</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
        <span class="n">y_coor</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
        <span class="n">z_coor</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">colour</span> <span class="o">=</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">256</span><span class="p">),</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">256</span><span class="p">),</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">256</span><span class="p">))</span>
        <span class="n">image</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s1">&#39;RGB&#39;</span><span class="p">,(</span><span class="mi">100</span><span class="p">,</span><span class="mi">100</span><span class="p">),</span><span class="n">color</span><span class="o">=</span><span class="n">colour</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_measurement</span><span class="p">(</span><span class="n">timestamp</span><span class="p">,</span> <span class="n">x_coor</span><span class="p">,</span> <span class="n">y_coor</span><span class="p">,</span> <span class="n">z_coor</span><span class="p">,</span> <span class="n">image</span><span class="p">)</span>
    <span class="k">return</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>


<div class="doc doc-object doc-function">


<h2 id="iris.data.measurement_image.check_and_create_config_file" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">check_and_create_config_file</span><span class="p">(</span><span class="n">config_file_path</span><span class="o">=</span><span class="s1">&#39;config.ini&#39;</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Generate a default config file if it does not exist</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>config_file</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Path to the config file. Defaults to 'config.ini'</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/utils/general.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">check_and_create_config_file</span><span class="p">(</span><span class="n">config_file_path</span><span class="p">:</span><span class="nb">str</span><span class="o">=</span><span class="s1">&#39;config.ini&#39;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generate a default config file if it does not exist</span>

<span class="sd">    Args:</span>
<span class="sd">        config_file (str): Path to the config file. Defaults to &#39;config.ini&#39;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Generate a default config file if it does not exist</span>
    <span class="n">updater</span> <span class="o">=</span> <span class="n">ConfigUpdater</span><span class="p">(</span><span class="n">allow_no_value</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">config_file_path</span><span class="p">):</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">config_file_path</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">configfile</span><span class="p">:</span> <span class="n">updater</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">configfile</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="iris.data.measurement_image.convert_ramanshift_to_wavelength" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">convert_ramanshift_to_wavelength</span><span class="p">(</span><span class="n">raman_shift</span><span class="p">,</span> <span class="n">excitation_wavelength</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Converts Raman shift to wavelength</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>raman_shift</code>
            </td>
            <td>
                  <code><span title="float">float</span> | <span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Raman shift in cm^-1</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>excitation_wavelength</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Excitation laser wavelength in nm</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="float">float</span> | <span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>float|np.ndarray: Wavelength in nm</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/utils/general.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">convert_ramanshift_to_wavelength</span><span class="p">(</span><span class="n">raman_shift</span><span class="p">:</span><span class="nb">float</span><span class="o">|</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span><span class="n">excitation_wavelength</span><span class="p">:</span><span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="o">|</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Converts Raman shift to wavelength</span>

<span class="sd">    Args:</span>
<span class="sd">        raman_shift (float|np.ndarray): Raman shift in cm^-1</span>
<span class="sd">        excitation_wavelength (float): Excitation laser wavelength in nm</span>

<span class="sd">    Returns:</span>
<span class="sd">        float|np.ndarray: Wavelength in nm</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">wavelength</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="n">excitation_wavelength</span> <span class="o">-</span> <span class="n">raman_shift</span><span class="o">/</span><span class="mf">1e7</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">wavelength</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="iris.data.measurement_image.convert_timestamp_us_int_to_str" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">convert_timestamp_us_int_to_str</span><span class="p">(</span><span class="n">timestamp</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Converts timestamp integer to string</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>timestamp</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Timestamp in us</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Timestamp as string in the format %y%m%d_%H%M%S_%f</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/utils/general.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">convert_timestamp_us_int_to_str</span><span class="p">(</span><span class="n">timestamp</span><span class="p">:</span><span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Converts timestamp integer to string</span>

<span class="sd">    Args:</span>
<span class="sd">        timestamp (int): Timestamp in us</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: Timestamp as string in the format %y%m%d_%H%M%S_%f</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">timestamp_str</span> <span class="o">=</span> <span class="n">dt</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">(</span><span class="n">timestamp</span><span class="o">*</span><span class="mf">1e-6</span><span class="p">)</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%y%m</span><span class="si">%d</span><span class="s2">_%H%M%S_</span><span class="si">%f</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">timestamp_str</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="iris.data.measurement_image.convert_timestamp_us_str_to_int" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">convert_timestamp_us_str_to_int</span><span class="p">(</span><span class="n">timestamp</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Converts timestamp string to integer</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>timestamp</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Timestamp, has to be in the format %y%m%d_%H%M%S_%f</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>int</code></td>            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Timestamp as integer in us</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/utils/general.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">convert_timestamp_us_str_to_int</span><span class="p">(</span><span class="n">timestamp</span><span class="p">:</span><span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Converts timestamp string to integer</span>

<span class="sd">    Args:</span>
<span class="sd">        timestamp (str): Timestamp, has to be in the format %y%m%d_%H%M%S_%f</span>

<span class="sd">    Returns:</span>
<span class="sd">        int: Timestamp as integer in us</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">timestamp_int</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">timestamp</span><span class="p">,</span> <span class="s2">&quot;%y%m</span><span class="si">%d</span><span class="s2">_%H%M%S_</span><span class="si">%f</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">timestamp</span><span class="p">()</span><span class="o">*</span><span class="mf">1e6</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">timestamp_int</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="iris.data.measurement_image.convert_wavelength_to_ramanshift" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">convert_wavelength_to_ramanshift</span><span class="p">(</span><span class="n">wavelength</span><span class="p">,</span> <span class="n">excitation_wavelength</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Converts wavelength to Raman shift</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>wavelength</code>
            </td>
            <td>
                  <code><span title="float">float</span> | <span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Wavelength in nm</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>excitation_wavelength</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Excitation laser wavelength in nm</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="float">float</span> | <span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>float|np.ndarray: Raman shift in cm^-1</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/utils/general.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">convert_wavelength_to_ramanshift</span><span class="p">(</span><span class="n">wavelength</span><span class="p">:</span><span class="nb">float</span><span class="o">|</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span><span class="n">excitation_wavelength</span><span class="p">:</span><span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="o">|</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Converts wavelength to Raman shift</span>

<span class="sd">    Args:</span>
<span class="sd">        wavelength (float|np.ndarray): Wavelength in nm</span>
<span class="sd">        excitation_wavelength (float): Excitation laser wavelength in nm</span>

<span class="sd">    Returns:</span>
<span class="sd">        float|np.ndarray: Raman shift in cm^-1</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">wavelength</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span> <span class="ow">and</span> <span class="n">wavelength</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span> <span class="n">wavelength</span> <span class="o">=</span> <span class="mf">0.0001</span>
    <span class="k">else</span><span class="p">:</span> <span class="n">wavelength</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">wavelength</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.0001</span><span class="p">,</span> <span class="n">wavelength</span><span class="p">)</span>
    <span class="n">raman_shift</span> <span class="o">=</span> <span class="mf">1e7</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="n">excitation_wavelength</span> <span class="o">-</span> <span class="mi">1</span><span class="o">/</span><span class="n">wavelength</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">raman_shift</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="iris.data.measurement_image.generate_test_app" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">generate_test_app</span><span class="p">(</span><span class="n">lyt</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Generates a test QApplication and QVBoxLayout for testing purposes</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="tuple">tuple</span>[<span title="PySide6.QtWidgets.QApplication">QApplication</span>, <span title="PySide6.QtWidgets.QWidget">QWidget</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>tuple[qw.QApplication, qw.QWidget]: The QApplication and QWidget instances</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/utils/general.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">generate_test_app</span><span class="p">(</span><span class="n">lyt</span><span class="p">:</span><span class="n">qw</span><span class="o">.</span><span class="n">QVBoxLayout</span><span class="o">|</span><span class="n">qw</span><span class="o">.</span><span class="n">QHBoxLayout</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">qw</span><span class="o">.</span><span class="n">QApplication</span><span class="p">,</span><span class="n">qw</span><span class="o">.</span><span class="n">QWidget</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generates a test QApplication and QVBoxLayout for testing purposes</span>

<span class="sd">    Returns:</span>
<span class="sd">        tuple[qw.QApplication, qw.QWidget]: The QApplication and QWidget instances</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">app</span> <span class="o">=</span> <span class="n">qw</span><span class="o">.</span><span class="n">QApplication</span><span class="p">([])</span>
    <span class="n">main_window</span> <span class="o">=</span> <span class="n">qw</span><span class="o">.</span><span class="n">QMainWindow</span><span class="p">()</span>
    <span class="n">main_window</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
    <span class="n">wdg</span> <span class="o">=</span> <span class="n">qw</span><span class="o">.</span><span class="n">QWidget</span><span class="p">()</span>
    <span class="n">main_window</span><span class="o">.</span><span class="n">setCentralWidget</span><span class="p">(</span><span class="n">wdg</span><span class="p">)</span>
    <span class="n">wdg</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">lyt</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">app</span><span class="p">,</span> <span class="n">wdg</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="iris.data.measurement_image.get_all_widgets" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_all_widgets</span><span class="p">(</span><span class="n">parent_widget</span><span class="p">,</span> <span class="n">get_all</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>A function that returns all widgets in a frame and optionally, its subframes (all levels)</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>parent_widget</code>
            </td>
            <td>
                  <code><span title="PySide6.QtWidgets.QWidget">QWidget</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Widget which children need to be listed</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>get_all</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True it will get the widgets in the sub-widgets as well</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<span title="PySide6.QtWidgets.QWidget">QWidget</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>list[qw.QWidget]: List of all widgets in the widget</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/utils/general.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_all_widgets</span><span class="p">(</span><span class="n">parent_widget</span><span class="p">:</span><span class="n">qw</span><span class="o">.</span><span class="n">QWidget</span><span class="p">,</span><span class="n">get_all</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">qw</span><span class="o">.</span><span class="n">QWidget</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A function that returns all widgets in a frame and optionally, its subframes (all levels)</span>

<span class="sd">    Args:</span>
<span class="sd">        parent_widget (qw.QWidget): Widget which children need to be listed</span>
<span class="sd">        get_all (bool, optional): If True it will get the widgets in the sub-widgets as well</span>

<span class="sd">    Returns:</span>
<span class="sd">        list[qw.QWidget]: List of all widgets in the widget</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">get_all</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">parent_widget</span><span class="o">.</span><span class="n">findChildren</span><span class="p">(</span><span class="n">qw</span><span class="o">.</span><span class="n">QWidget</span><span class="p">)</span>   <span class="c1"># The default findChildren() is already recursive</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># findChildren() with a search option that limits depth</span>
        <span class="c1"># For a single level, findChildren(type, options) is useful</span>
        <span class="c1"># We find widgets that are immediate children of the parent.</span>
        <span class="k">return</span> <span class="n">parent_widget</span><span class="o">.</span><span class="n">findChildren</span><span class="p">(</span><span class="n">qw</span><span class="o">.</span><span class="n">QWidget</span><span class="p">,</span> <span class="n">qc</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">FindChildOption</span><span class="o">.</span><span class="n">FindDirectChildrenOnly</span><span class="p">)</span> <span class="c1"># type: ignore</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="iris.data.measurement_image.get_all_widgets_from_layout" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_all_widgets_from_layout</span><span class="p">(</span><span class="n">parent_layout</span><span class="p">,</span> <span class="n">get_all</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>A function that returns all widgets in a layout and optionally, its sub-layouts (all levels)</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>parent_layout</code>
            </td>
            <td>
                  <code><span title="PySide6.QtWidgets.QLayout">QLayout</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Layout which children need to be listed</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>get_all</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True it will get the widgets in the sub-layouts as well</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<span title="PySide6.QtWidgets.QWidget">QWidget</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>list[qw.QWidget]: List of all widgets in the layout</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/utils/general.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_all_widgets_from_layout</span><span class="p">(</span><span class="n">parent_layout</span><span class="p">:</span><span class="n">qw</span><span class="o">.</span><span class="n">QLayout</span><span class="p">,</span><span class="n">get_all</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">qw</span><span class="o">.</span><span class="n">QWidget</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A function that returns all widgets in a layout and optionally, its sub-layouts (all levels)</span>

<span class="sd">    Args:</span>
<span class="sd">        parent_layout (qw.QLayout): Layout which children need to be listed</span>
<span class="sd">        get_all (bool, optional): If True it will get the widgets in the sub-layouts as well</span>

<span class="sd">    Returns:</span>
<span class="sd">        list[qw.QWidget]: List of all widgets in the layout</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">list_widget</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">parent_layout</span><span class="o">.</span><span class="n">count</span><span class="p">()):</span>
        <span class="n">item</span> <span class="o">=</span> <span class="n">parent_layout</span><span class="o">.</span><span class="n">itemAt</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">widget</span><span class="p">():</span>
            <span class="n">list_widget</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">widget</span><span class="p">())</span>
            <span class="k">if</span> <span class="n">get_all</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">widget</span><span class="p">(),</span> <span class="n">qw</span><span class="o">.</span><span class="n">QWidget</span><span class="p">):</span>
                <span class="n">child_widgets</span> <span class="o">=</span> <span class="n">get_all_widgets</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">widget</span><span class="p">(),</span> <span class="n">get_all</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                <span class="n">list_widget</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">child_widgets</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">item</span><span class="o">.</span><span class="n">layout</span><span class="p">()</span> <span class="ow">and</span> <span class="n">get_all</span><span class="p">:</span>
            <span class="n">child_widgets</span> <span class="o">=</span> <span class="n">get_all_widgets_from_layout</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">layout</span><span class="p">(),</span> <span class="n">get_all</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">list_widget</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">child_widgets</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">list_widget</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="iris.data.measurement_image.get_timestamp_day" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_timestamp_day</span><span class="p">()</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Gets the current timestamp in days</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Timestamp without time: yymmdd</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/utils/general.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_timestamp_day</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Gets the current timestamp in days</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: Timestamp without time: yymmdd</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">dt</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%y%m</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="iris.data.measurement_image.get_timestamp_sec" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_timestamp_sec</span><span class="p">()</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Gets the current timestamp in seconds</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Timestamp with time: yymmdd_hhmmss</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/utils/general.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_timestamp_sec</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Gets the current timestamp in seconds</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: Timestamp with time: yymmdd_hhmmss</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">dt</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%y%m</span><span class="si">%d</span><span class="s2">_%H%M%S&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="iris.data.measurement_image.get_timestamp_us_int" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_timestamp_us_int</span><span class="p">()</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Gets the current timestamp in us as integer</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>int</code></td>            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Timestamp in us</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/utils/general.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_timestamp_us_int</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Gets the current timestamp in us as integer</span>

<span class="sd">    Returns:</span>
<span class="sd">        int: Timestamp in us</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">timestamp</span><span class="p">()</span><span class="o">*</span><span class="mf">1e6</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="iris.data.measurement_image.get_timestamp_us_str" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_timestamp_us_str</span><span class="p">()</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Gets the current timestamp in us as string</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Timestamp with time and milliseconds: yymmdd_hhmmss_us(6 digits)</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/utils/general.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_timestamp_us_str</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Gets the current timestamp in us as string</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: Timestamp with time and milliseconds: yymmdd_hhmmss_us(6 digits)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">dt</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%y%m</span><span class="si">%d</span><span class="s2">_%H%M%S_</span><span class="si">%f</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="iris.data.measurement_image.messagebox_request_input" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">messagebox_request_input</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">message</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">validator</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">invalid_msg</span><span class="o">=</span><span class="s1">&#39;The entered value is invalid. Please try again.&#39;</span><span class="p">,</span> <span class="n">loop_until_valid</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>A function that creates a QInputDialog to request input with optional validation.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>parent</code>
            </td>
            <td>
                  <code><span title="PySide6.QtWidgets.QWidget">QWidget</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The parent widget for the dialog (recommended).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>title</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Title of the dialog box.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>message</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Message/label to be displayed for the input field.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>default</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Default value of the input.</p>
              </div>
            </td>
            <td>
                  <code>&#39;&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>validator</code>
            </td>
            <td>
                  <code><span title="typing.Callable">Callable</span>[[<span title="str">str</span>], <span title="bool">bool</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A function that takes the 
input string and returns True if valid, False otherwise.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>invalid_msg</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Message to show if validation fails.</p>
              </div>
            </td>
            <td>
                  <code>&#39;The entered value is invalid. Please try again.&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>loop_until_valid</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, keeps asking until the input is valid 
or the user presses Cancel.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>str | None: User input string if OK was pressed and validation passed, 
        otherwise None (if Cancel was pressed).</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/utils/general.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">messagebox_request_input</span><span class="p">(</span>
        <span class="n">parent</span><span class="p">:</span> <span class="n">qw</span><span class="o">.</span><span class="n">QWidget</span><span class="p">,</span> 
        <span class="n">title</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> 
        <span class="n">message</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> 
        <span class="n">default</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
        <span class="n">validator</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="nb">str</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]</span><span class="o">|</span><span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">invalid_msg</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;The entered value is invalid. Please try again.&quot;</span><span class="p">,</span>
        <span class="n">loop_until_valid</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A function that creates a QInputDialog to request input with optional validation.</span>

<span class="sd">    Args:</span>
<span class="sd">        parent (qw.QWidget): The parent widget for the dialog (recommended).</span>
<span class="sd">        title (str): Title of the dialog box.</span>
<span class="sd">        message (str): Message/label to be displayed for the input field.</span>
<span class="sd">        default (str, optional): Default value of the input.</span>
<span class="sd">        validator (Callable[[str], bool]|None, optional): A function that takes the </span>
<span class="sd">            input string and returns True if valid, False otherwise.</span>
<span class="sd">        invalid_msg (str): Message to show if validation fails.</span>
<span class="sd">        loop_until_valid (bool): If True, keeps asking until the input is valid </span>
<span class="sd">            or the user presses Cancel.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str | None: User input string if OK was pressed and validation passed, </span>
<span class="sd">                    otherwise None (if Cancel was pressed).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">current_default</span> <span class="o">=</span> <span class="n">default</span>

    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="c1"># 1. Show the input dialog</span>
        <span class="n">user_input</span><span class="p">,</span> <span class="n">ok</span> <span class="o">=</span> <span class="n">qw</span><span class="o">.</span><span class="n">QInputDialog</span><span class="o">.</span><span class="n">getText</span><span class="p">(</span>
            <span class="n">parent</span><span class="p">,</span>
            <span class="n">title</span><span class="p">,</span>
            <span class="n">message</span><span class="p">,</span>
            <span class="n">qw</span><span class="o">.</span><span class="n">QLineEdit</span><span class="o">.</span><span class="n">Normal</span><span class="p">,</span> <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
            <span class="n">current_default</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">ok</span><span class="p">:</span> <span class="k">return</span> <span class="kc">None</span>  <span class="c1"># User pressed Cancel</span>

        <span class="n">is_valid</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="n">validator</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span> <span class="n">is_valid</span> <span class="o">=</span> <span class="n">validator</span><span class="p">(</span><span class="n">user_input</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">is_valid</span><span class="p">:</span> <span class="k">return</span> <span class="n">user_input</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">loop_until_valid</span><span class="p">:</span> <span class="k">return</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">qw</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="s2">&quot;Invalid Input&quot;</span><span class="p">,</span> <span class="n">invalid_msg</span><span class="p">)</span>
            <span class="n">current_default</span> <span class="o">=</span> <span class="n">user_input</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="iris.data.measurement_image.read_update_config_file_section" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">read_update_config_file_section</span><span class="p">(</span><span class="n">dict_controllers_default</span><span class="p">,</span> <span class="n">dict_controllers_comments</span><span class="p">,</span> <span class="n">section</span><span class="p">,</span> <span class="n">config_file</span><span class="o">=</span><span class="s1">&#39;config.ini&#39;</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Read the config file and automatically add an entry if it does not exist
based on the given default values (dict form) and returns the read values
after the update. Additionally, it will also automatically append comments
given by the comments dictionary at the end of each respective key's value
in the config file. If the values are already present, it will just read the values.
If the config file is not present, it will automatically try to create one.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>dict_controllers_default</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dictionary of the default values</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>dict_controllers_comments</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dictionary of the comments for each key in the default values</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>section</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Section name in the config file</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>config_file</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Path to the config file. Defaults to 'config.ini'.</p>
              </div>
            </td>
            <td>
                  <code>&#39;config.ini&#39;</code>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="NotImplementedError">NotImplementedError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the conversion of the default value type is not implemented</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>dict</code></td>            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dictionary of the read values (after the update) in the correct format
given by the default values dictionary</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/utils/general.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">read_update_config_file_section</span><span class="p">(</span><span class="n">dict_controllers_default</span><span class="p">:</span><span class="nb">dict</span><span class="p">,</span> <span class="n">dict_controllers_comments</span><span class="p">:</span><span class="nb">dict</span><span class="p">,</span>
    <span class="n">section</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">config_file</span><span class="p">:</span><span class="nb">str</span><span class="o">=</span><span class="s1">&#39;config.ini&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Read the config file and automatically add an entry if it does not exist</span>
<span class="sd">    based on the given default values (dict form) and returns the read values</span>
<span class="sd">    after the update. Additionally, it will also automatically append comments</span>
<span class="sd">    given by the comments dictionary at the end of each respective key&#39;s value</span>
<span class="sd">    in the config file. If the values are already present, it will just read the values.</span>
<span class="sd">    If the config file is not present, it will automatically try to create one.</span>

<span class="sd">    Args:</span>
<span class="sd">        dict_controllers_default (dict): Dictionary of the default values</span>
<span class="sd">        dict_controllers_comments (dict): Dictionary of the comments for each key in the default values</span>
<span class="sd">        section (str): Section name in the config file</span>
<span class="sd">        config_file (str, optional): Path to the config file. Defaults to &#39;config.ini&#39;.</span>

<span class="sd">    Raises:</span>
<span class="sd">        NotImplementedError: If the conversion of the default value type is not implemented</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: Dictionary of the read values (after the update) in the correct format</span>
<span class="sd">            given by the default values dictionary</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">check_and_create_config_file</span><span class="p">(</span><span class="n">config_file</span><span class="p">)</span>

    <span class="c1"># Read the config file and automatically add an entry if it does not exist </span>
    <span class="c1"># (along with its comments)</span>
    <span class="n">updater</span> <span class="o">=</span> <span class="n">ConfigUpdater</span><span class="p">(</span><span class="n">allow_no_value</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">updater</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">config_file</span><span class="p">)</span>

    <span class="n">splitter</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\t</span><span class="s1">&#39;</span>
    <span class="n">commenter</span> <span class="o">=</span> <span class="s1">&#39;; &#39;</span>
    <span class="n">list_splitters</span> <span class="o">=</span> <span class="p">[</span><span class="n">splitter</span><span class="p">,</span> <span class="n">commenter</span><span class="p">]</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">updater</span><span class="o">.</span><span class="n">has_section</span><span class="p">(</span><span class="n">section</span><span class="p">):</span>
        <span class="n">updater</span><span class="o">.</span><span class="n">add_section</span><span class="p">(</span><span class="n">section</span><span class="p">)</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">config_file</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">updater</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">dict_controllers_default</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">updater</span><span class="o">.</span><span class="n">has_option</span><span class="p">(</span><span class="n">section</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">dict_controllers_default</span><span class="p">[</span><span class="n">key</span><span class="p">])</span> <span class="o">!=</span> <span class="nb">str</span><span class="p">:</span>
                <span class="n">updater</span><span class="o">.</span><span class="n">set</span><span class="p">(</span>
                    <span class="n">section</span><span class="o">=</span><span class="n">section</span><span class="p">,</span>
                    <span class="n">option</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
                    <span class="n">value</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">dict_controllers_default</span><span class="p">[</span><span class="n">key</span><span class="p">])</span> <span class="o">+</span> <span class="n">splitter</span> <span class="o">+</span> <span class="n">commenter</span> <span class="o">+</span> <span class="n">dict_controllers_comments</span><span class="p">[</span><span class="n">key</span><span class="p">],</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>   <span class="c1"># Add quotes to the string values</span>
                <span class="n">updater</span><span class="o">.</span><span class="n">set</span><span class="p">(</span>
                    <span class="n">section</span><span class="o">=</span><span class="n">section</span><span class="p">,</span>
                    <span class="n">option</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
                    <span class="n">value</span><span class="o">=</span><span class="s1">&#39;&quot;&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">dict_controllers_default</span><span class="p">[</span><span class="n">key</span><span class="p">])</span> <span class="o">+</span> <span class="s1">&#39;&quot;&#39;</span> <span class="o">+</span> <span class="n">splitter</span> <span class="o">+</span> <span class="n">commenter</span> <span class="o">+</span> <span class="n">dict_controllers_comments</span><span class="p">[</span><span class="n">key</span><span class="p">],</span>
                <span class="p">)</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">config_file</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span> <span class="n">updater</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

    <span class="n">dict_controllers_read</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">updater</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">config_file</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span><span class="n">value</span> <span class="ow">in</span> <span class="n">updater</span><span class="o">.</span><span class="n">items</span><span class="p">(</span><span class="n">section</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">dict_controllers_default</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span> <span class="k">continue</span>
        <span class="n">def_val_type</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">dict_controllers_default</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>

        <span class="c1"># Process different types of values separately</span>
        <span class="c1"># note that the splits are to remove the comments</span>
        <span class="k">if</span> <span class="n">def_val_type</span> <span class="o">==</span> <span class="nb">bool</span><span class="p">:</span>
            <span class="n">read_line</span><span class="p">:</span><span class="nb">str</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">value</span>
            <span class="k">for</span> <span class="n">splitter</span> <span class="ow">in</span> <span class="n">list_splitters</span><span class="p">:</span>
                <span class="n">read_line</span> <span class="o">=</span> <span class="n">read_line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">splitter</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">val</span> <span class="o">=</span> <span class="n">read_line</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">val</span> <span class="o">!=</span> <span class="s1">&#39;true&#39;</span> <span class="ow">and</span> <span class="n">val</span> <span class="o">!=</span> <span class="s1">&#39;false&#39;</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error: </span><span class="si">{</span><span class="n">val</span><span class="si">}</span><span class="s2"> is not a boolean value.&quot;</span><span class="p">)</span>
            <span class="n">dict_controllers_read</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">read_line</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;true&#39;</span>
        <span class="k">elif</span> <span class="n">def_val_type</span> <span class="ow">in</span> <span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
            <span class="n">read_line</span><span class="p">:</span><span class="nb">str</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">value</span>
            <span class="k">for</span> <span class="n">splitter</span> <span class="ow">in</span> <span class="n">list_splitters</span><span class="p">:</span>
                <span class="n">read_line</span> <span class="o">=</span> <span class="n">read_line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">splitter</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">conv_val</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">dict_controllers_default</span><span class="p">[</span><span class="n">key</span><span class="p">])(</span><span class="n">read_line</span><span class="p">)</span>
            <span class="n">dict_controllers_read</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">conv_val</span>
        <span class="k">elif</span> <span class="n">def_val_type</span> <span class="o">==</span> <span class="nb">str</span><span class="p">:</span>
            <span class="k">if</span> <span class="s1">&#39;&quot;&#39;</span> <span class="ow">in</span> <span class="n">value</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
                <span class="n">conv_val</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">conv_val</span><span class="p">:</span><span class="nb">str</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">value</span>
                <span class="k">for</span> <span class="n">splitter</span> <span class="ow">in</span> <span class="n">list_splitters</span><span class="p">:</span>
                    <span class="n">conv_val</span> <span class="o">=</span> <span class="n">conv_val</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">splitter</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">dict_controllers_read</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">conv_val</span>
        <span class="k">else</span><span class="p">:</span> <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error: </span><span class="si">{</span><span class="n">def_val_type</span><span class="si">}</span><span class="s2"> conversion is not implemented.&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">dict_controllers_read</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="iris.data.measurement_image.run_with_timeout" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">run_with_timeout</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(),</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{},</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Runs a function with a timeout.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>func</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The function to execute.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>args</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Tuple of positional arguments for the function.</p>
              </div>
            </td>
            <td>
                  <code>()</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>kwargs</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dictionary of keyword arguments for the function.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>timeout</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The timeout in seconds.</p>
              </div>
            </td>
            <td>
                  <code>5</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The result of the function if it completes within the timeout.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="iris.utils.general.TimeoutError">TimeoutError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the function does not complete within the timeout.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/utils/general.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">run_with_timeout</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(),</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{},</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">5</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Runs a function with a timeout.</span>

<span class="sd">    Args:</span>
<span class="sd">        func: The function to execute.</span>
<span class="sd">        args: Tuple of positional arguments for the function.</span>
<span class="sd">        kwargs: Dictionary of keyword arguments for the function.</span>
<span class="sd">        timeout: The timeout in seconds.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The result of the function if it completes within the timeout.</span>

<span class="sd">    Raises:</span>
<span class="sd">        TimeoutError: If the function does not complete within the timeout.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">result</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">exception</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">finished</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Event</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">target</span><span class="p">():</span>
        <span class="k">nonlocal</span> <span class="n">result</span><span class="p">,</span> <span class="n">exception</span>
        <span class="k">try</span><span class="p">:</span> <span class="n">result</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span> <span class="n">exception</span> <span class="o">=</span> <span class="n">e</span>
        <span class="k">finally</span><span class="p">:</span> <span class="n">finished</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>

    <span class="n">timer</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Timer</span><span class="p">(</span><span class="n">timeout</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">finished</span><span class="o">.</span><span class="n">set</span><span class="p">())</span>
    <span class="n">thread</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">target</span><span class="p">)</span>

    <span class="n">timer</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
    <span class="n">thread</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

    <span class="n">finished</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>
    <span class="n">timer</span><span class="o">.</span><span class="n">cancel</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">thread</span><span class="o">.</span><span class="n">is_alive</span><span class="p">():</span>
        <span class="k">raise</span> <span class="ne">TimeoutError</span><span class="p">(</span><span class="s2">&quot;Function execution timed out&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">exception</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">exception</span>

    <span class="k">return</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="iris.data.measurement_image.validator_float_greaterThanZero" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">validator_float_greaterThanZero</span><span class="p">(</span><span class="n">input_str</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>A validator function that checks if the input string can be converted to a non-negative float</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>input_str</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Input string to validate</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>bool</code></td>            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if valid, False otherwise</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/utils/general.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">validator_float_greaterThanZero</span><span class="p">(</span><span class="n">input_str</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A validator function that checks if the input string can be converted to a non-negative float</span>

<span class="sd">    Args:</span>
<span class="sd">        input_str (str): Input string to validate</span>

<span class="sd">    Returns:</span>
<span class="sd">        bool: True if valid, False otherwise</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">val</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">input_str</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">val</span> <span class="o">&gt;=</span> <span class="mf">0.0</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../../..", "features": [], "search": "../../../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>