
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../Canvas_ROIdefinition/">
      
      
        <link rel="next" href="../plotter_heatmap_overlay/">
      
      
        
      
      
      <link rel="icon" href="../../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>objective_calibration - ORM-IRIS Library Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../../../../assets/stylesheets/main.484c7ddc.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#iris.gui.image_calibration.objective_calibration" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../../.." title="ORM-IRIS Library Documentation" class="md-header__button md-logo" aria-label="ORM-IRIS Library Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ORM-IRIS Library Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              objective_calibration
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../../.." title="ORM-IRIS Library Documentation" class="md-nav__button md-logo" aria-label="ORM-IRIS Library Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    ORM-IRIS Library Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    API Reference
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    API Reference
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1" checked>
        
          
          <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    iris
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    iris
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_1" >
        
          
          <label class="md-nav__link" for="__nav_2_1_1" id="__nav_2_1_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    calibration
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_1_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    calibration
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../calibration/calibration_generator/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    calibration_generator
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../calibration/test_calibrator_wavelength/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    test_calibrator_wavelength
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_2" >
        
          
          <label class="md-nav__link" for="__nav_2_1_2" id="__nav_2_1_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    controllers
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_1_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    controllers
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../controllers/camera_controller_dummy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    camera_controller_dummy
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../controllers/camera_controller_thorlabs_color/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    camera_controller_thorlabs_color
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../controllers/camera_controller_thorlabs_mono/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    camera_controller_thorlabs_mono
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../controllers/camera_controller_webcam/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    camera_controller_webcam
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../controllers/class_camera_controller/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    class_camera_controller
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../controllers/class_spectrometer_controller/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    class_spectrometer_controller
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../controllers/class_xy_stage_controller/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    class_xy_stage_controller
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../controllers/class_z_stage_controller/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    class_z_stage_controller
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../controllers/mcm301_wrapper/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    mcm301_wrapper
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../controllers/oceandirect_wrapper/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    oceandirect_wrapper
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../controllers/raman_spectrometer_controller_Andor_dll/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    raman_spectrometer_controller_Andor_dll
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../controllers/raman_spectrometer_controller_Andor_pylablib/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    raman_spectrometer_controller_Andor_pylablib
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../controllers/raman_spectrometer_controller_PI_dll/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    raman_spectrometer_controller_PI_dll
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../controllers/raman_spectrometer_controller_PI_pylablib/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    raman_spectrometer_controller_PI_pylablib
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../controllers/raman_spectrometer_controller_PI_trial/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    raman_spectrometer_controller_PI_trial
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../controllers/raman_spectrometer_controller_QEPro/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    raman_spectrometer_controller_QEPro
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../controllers/raman_spectrometer_controller_WasatchEnlighten/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    raman_spectrometer_controller_WasatchEnlighten
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../controllers/raman_spectrometer_controller_dummy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    raman_spectrometer_controller_dummy
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../controllers/xy_stage_controller_PI/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    xy_stage_controller_PI
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../controllers/xy_stage_controller_PI_dll/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    xy_stage_controller_PI_dll
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../controllers/xy_stage_controller_dummy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    xy_stage_controller_dummy
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../controllers/xy_stage_controller_m30xy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    xy_stage_controller_m30xy
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../controllers/xy_stage_controller_zaber/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    xy_stage_controller_zaber
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../controllers/z_stage_controller_dummy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    z_stage_controller_dummy
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../controllers/z_stage_controller_mcm301/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    z_stage_controller_mcm301
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../controllers/z_stage_controller_pfm450/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    z_stage_controller_pfm450
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../controllers/z_stage_controller_z825b/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    z_stage_controller_z825b
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_3" >
        
          
          <label class="md-nav__link" for="__nav_2_1_3" id="__nav_2_1_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    data
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_1_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    data
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../data/calibration_objective/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    calibration_objective
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../data/measurement_Raman/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    measurement_Raman
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../data/measurement_RamanMap/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    measurement_RamanMap
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../data/measurement_coordinates/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    measurement_coordinates
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../data/measurement_image/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    measurement_image
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_4" checked>
        
          
          <label class="md-nav__link" for="__nav_2_1_4" id="__nav_2_1_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    gui
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_1_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_1_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    gui
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dataHub_MeaImg/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    dataHub_MeaImg
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dataHub_MeaRMap/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    dataHub_MeaRMap
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../hilvl_Brightfield/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    hilvl_Brightfield
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../hilvl_Raman/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    hilvl_Raman
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../hilvl_coorGen/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    hilvl_coorGen
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_4_6" checked>
        
          
          <label class="md-nav__link" for="__nav_2_1_4_6" id="__nav_2_1_4_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    image_calibration
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_1_4_6_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_1_4_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    image_calibration
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Canvas_ROIdefinition/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Canvas_ROIdefinition
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    objective_calibration
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    objective_calibration
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#iris.gui.image_calibration.objective_calibration" class="md-nav__link">
    <span class="md-ellipsis">
      
        objective_calibration
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.image_calibration.objective_calibration.Calibration_Worker" class="md-nav__link">
    <span class="md-ellipsis">
      
        Calibration_Worker
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Calibration_Worker">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#iris.gui.image_calibration.objective_calibration.Calibration_Worker.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __init__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.gui.image_calibration.objective_calibration.Calibration_Worker.perform_calibration" class="md-nav__link">
    <span class="md-ellipsis">
      
        perform_calibration
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.gui.image_calibration.objective_calibration.Calibration_Worker.perform_calibration_finetune" class="md-nav__link">
    <span class="md-ellipsis">
      
        perform_calibration_finetune
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.image_calibration.objective_calibration.ImageProcessor_Worker" class="md-nav__link">
    <span class="md-ellipsis">
      
        ImageProcessor_Worker
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ImageProcessor_Worker">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#iris.gui.image_calibration.objective_calibration.ImageProcessor_Worker.get_stitched_image" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_stitched_image
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.image_calibration.objective_calibration.Wdg_Calibration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Wdg_Calibration
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Wdg_Calibration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#iris.gui.image_calibration.objective_calibration.Wdg_Calibration.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __init__
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.image_calibration.objective_calibration.Wdg_Calibration_Finetuning" class="md-nav__link">
    <span class="md-ellipsis">
      
        Wdg_Calibration_Finetuning
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Wdg_Calibration_Finetuning">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#iris.gui.image_calibration.objective_calibration.Wdg_Calibration_Finetuning.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __init__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.gui.image_calibration.objective_calibration.Wdg_Calibration_Finetuning.apply_temp_fineadjustment" class="md-nav__link">
    <span class="md-ellipsis">
      
        apply_temp_fineadjustment
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.gui.image_calibration.objective_calibration.Wdg_Calibration_Finetuning.config_calibrate_button" class="md-nav__link">
    <span class="md-ellipsis">
      
        config_calibrate_button
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.gui.image_calibration.objective_calibration.Wdg_Calibration_Finetuning.config_finetune_calibration_button" class="md-nav__link">
    <span class="md-ellipsis">
      
        config_finetune_calibration_button
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.gui.image_calibration.objective_calibration.Wdg_Calibration_Finetuning.enable_finetuneCalibration_widgets" class="md-nav__link">
    <span class="md-ellipsis">
      
        enable_finetuneCalibration_widgets
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.gui.image_calibration.objective_calibration.Wdg_Calibration_Finetuning.finalise_fineadjustment" class="md-nav__link">
    <span class="md-ellipsis">
      
        finalise_fineadjustment
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.gui.image_calibration.objective_calibration.Wdg_Calibration_Finetuning.get_calibration_params_percent" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_calibration_params_percent
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.gui.image_calibration.objective_calibration.Wdg_Calibration_Finetuning.get_last_calibration" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_last_calibration
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.gui.image_calibration.objective_calibration.Wdg_Calibration_Finetuning.initialise_fineadjuster" class="md-nav__link">
    <span class="md-ellipsis">
      
        initialise_fineadjuster
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.gui.image_calibration.objective_calibration.Wdg_Calibration_Finetuning.reset_calibrationSpinbox_values" class="md-nav__link">
    <span class="md-ellipsis">
      
        reset_calibrationSpinbox_values
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.image_calibration.objective_calibration.check_and_create_config_file" class="md-nav__link">
    <span class="md-ellipsis">
      
        check_and_create_config_file
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.image_calibration.objective_calibration.convert_ramanshift_to_wavelength" class="md-nav__link">
    <span class="md-ellipsis">
      
        convert_ramanshift_to_wavelength
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.image_calibration.objective_calibration.convert_timestamp_us_int_to_str" class="md-nav__link">
    <span class="md-ellipsis">
      
        convert_timestamp_us_int_to_str
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.image_calibration.objective_calibration.convert_timestamp_us_str_to_int" class="md-nav__link">
    <span class="md-ellipsis">
      
        convert_timestamp_us_str_to_int
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.image_calibration.objective_calibration.convert_wavelength_to_ramanshift" class="md-nav__link">
    <span class="md-ellipsis">
      
        convert_wavelength_to_ramanshift
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.image_calibration.objective_calibration.generate_test_app" class="md-nav__link">
    <span class="md-ellipsis">
      
        generate_test_app
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.image_calibration.objective_calibration.get_all_widgets" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_all_widgets
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.image_calibration.objective_calibration.get_all_widgets_from_layout" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_all_widgets_from_layout
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.image_calibration.objective_calibration.get_timestamp_day" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_timestamp_day
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.image_calibration.objective_calibration.get_timestamp_sec" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_timestamp_sec
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.image_calibration.objective_calibration.get_timestamp_us_int" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_timestamp_us_int
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.image_calibration.objective_calibration.get_timestamp_us_str" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_timestamp_us_str
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.image_calibration.objective_calibration.messagebox_request_input" class="md-nav__link">
    <span class="md-ellipsis">
      
        messagebox_request_input
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.image_calibration.objective_calibration.read_update_config_file_section" class="md-nav__link">
    <span class="md-ellipsis">
      
        read_update_config_file_section
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.image_calibration.objective_calibration.run_with_timeout" class="md-nav__link">
    <span class="md-ellipsis">
      
        run_with_timeout
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.image_calibration.objective_calibration.validator_float_greaterThanZero" class="md-nav__link">
    <span class="md-ellipsis">
      
        validator_float_greaterThanZero
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../plotter_heatmap_overlay/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    plotter_heatmap_overlay
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../motion_video/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    motion_video
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../raman/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    raman
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../shortcut_handler/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    shortcut_handler
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_4_10" >
        
          
          <label class="md-nav__link" for="__nav_2_1_4_10" id="__nav_2_1_4_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    submodules
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_1_4_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1_4_10">
            <span class="md-nav__icon md-icon"></span>
            
  
    submodules
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../submodules/heatmap_plotter_MeaRMap/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    heatmap_plotter_MeaRMap
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../submodules/image_tiling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    image_tiling
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_4_10_3" >
        
          
          <label class="md-nav__link" for="__nav_2_1_4_10_3" id="__nav_2_1_4_10_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    meaCoor_generator
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_2_1_4_10_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1_4_10_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    meaCoor_generator
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../submodules/meaCoor_generator/line_zScan/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    line_zScan
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../submodules/meaCoor_generator/points_image/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    points_image
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../submodules/meaCoor_generator/rectangle_aroundCentre/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    rectangle_aroundCentre
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../submodules/meaCoor_generator/rectangle_endToEnd/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    rectangle_endToEnd
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../submodules/meaCoor_generator/rectangle_image/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    rectangle_image
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../submodules/meaCoor_generator/rectangle_video/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    rectangle_video
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../submodules/meaCoor_generator/singlePoint_zScan/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    singlePoint_zScan
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../submodules/meaCoor_generator/ssfrm_tilemthd1_rect_around/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ssfrm_tilemthd1_rect_around
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_4_10_4" >
        
          
          <label class="md-nav__link" for="__nav_2_1_4_10_4" id="__nav_2_1_4_10_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    meaCoor_modifier
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_2_1_4_10_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1_4_10_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    meaCoor_modifier
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../submodules/meaCoor_modifier/every_z/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    every_z
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../submodules/meaCoor_modifier/gridify/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    gridify
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../submodules/meaCoor_modifier/topology_visualiser/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    topology_visualiser
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../submodules/meaCoor_modifier/translateXYZ/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    translateXYZ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../submodules/meaCoor_modifier/zInterpolate/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    zInterpolate
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../submodules/peakfinder_plotter_MeaRaman/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    peakfinder_plotter_MeaRaman
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../timestamp_coorshift/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    timestamp_coorshift
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../main_analyser/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    main_analyser
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_6" >
        
          
          <label class="md-nav__link" for="__nav_2_1_6" id="__nav_2_1_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    multiprocessing
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_1_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    multiprocessing
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../multiprocessing/basemanager/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    basemanager
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../multiprocessing/dataStreamer_Raman/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    dataStreamer_Raman
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../multiprocessing/dataStreamer_StageCam/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    dataStreamer_StageCam
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_7" >
        
          
          <label class="md-nav__link" for="__nav_2_1_7" id="__nav_2_1_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    resources
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_1_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    resources
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_7_1" >
        
          
          <label class="md-nav__link" for="__nav_2_1_7_1" id="__nav_2_1_7_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    coordinate_generators
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_1_7_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1_7_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    coordinate_generators
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../resources/coordinate_generators/convert_2Dto3D_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    convert_2Dto3D_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../resources/coordinate_generators/point_image_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    point_image_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../resources/coordinate_generators/point_zScanLinear_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    point_zScanLinear_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../resources/coordinate_generators/rect_aroundcentre_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    rect_aroundcentre_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../resources/coordinate_generators/rect_image_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    rect_image_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../resources/coordinate_generators/rect_startend_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    rect_startend_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../resources/coordinate_generators/rect_video_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    rect_video_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_7_2" >
        
          
          <label class="md-nav__link" for="__nav_2_1_7_2" id="__nav_2_1_7_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    coordinate_modifiers
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_1_7_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1_7_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    coordinate_modifiers
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../resources/coordinate_modifiers/every_z_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    every_z_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../resources/coordinate_modifiers/gridify_setup_finetuning_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    gridify_setup_finetuning_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../resources/coordinate_modifiers/gridify_setup_naming_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    gridify_setup_naming_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../resources/coordinate_modifiers/gridify_setup_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    gridify_setup_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../resources/coordinate_modifiers/topology_visuliser_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    topology_visuliser_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../resources/coordinate_modifiers/translator_xyz_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    translator_xyz_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../resources/coordinate_modifiers/zInterpolate_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    zInterpolate_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../resources/dataHubPlus_Raman_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    dataHubPlus_Raman_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../resources/dataHub_Raman_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    dataHub_Raman_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../resources/dataHub_coor_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    dataHub_coor_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../resources/dataHub_image_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    dataHub_image_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../resources/heatmap_plotter_overlay_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    heatmap_plotter_overlay_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../resources/heatmap_plotter_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    heatmap_plotter_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../resources/hilvl_Raman_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    hilvl_Raman_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../resources/hilvl_brightfield_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    hilvl_brightfield_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../resources/hilvl_coorGen_coorMod_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    hilvl_coorGen_coorMod_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../resources/hilvl_coorGen_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    hilvl_coorGen_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../resources/main_analyser_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    main_analyser_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../resources/main_controller_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    main_controller_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_7_15" >
        
          
          <label class="md-nav__link" for="__nav_2_1_7_15" id="__nav_2_1_7_15_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    motion_video
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_1_7_15_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1_7_15">
            <span class="md-nav__icon md-icon"></span>
            
  
    motion_video
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../resources/motion_video/brightfieldcontrol_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    brightfieldcontrol_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../resources/motion_video/stagecontrol_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    stagecontrol_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../resources/objective_calibration_controls_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    objective_calibration_controls_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../resources/objective_calibration_main_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    objective_calibration_main_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../resources/objectives_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    objectives_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../resources/raman_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    raman_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../resources/spectra_peak_finder_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    spectra_peak_finder_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../resources/spectrometer_calibration_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    spectrometer_calibration_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../resources/tiling_method_control_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    tiling_method_control_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../resources/tiling_method_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    tiling_method_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_8" >
        
          
          <label class="md-nav__link" for="__nav_2_1_8" id="__nav_2_1_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    utils
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_1_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    utils
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../utils/general/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    general
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../utils/gridify/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    gridify
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#iris.gui.image_calibration.objective_calibration" class="md-nav__link">
    <span class="md-ellipsis">
      
        objective_calibration
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.image_calibration.objective_calibration.Calibration_Worker" class="md-nav__link">
    <span class="md-ellipsis">
      
        Calibration_Worker
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Calibration_Worker">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#iris.gui.image_calibration.objective_calibration.Calibration_Worker.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __init__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.gui.image_calibration.objective_calibration.Calibration_Worker.perform_calibration" class="md-nav__link">
    <span class="md-ellipsis">
      
        perform_calibration
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.gui.image_calibration.objective_calibration.Calibration_Worker.perform_calibration_finetune" class="md-nav__link">
    <span class="md-ellipsis">
      
        perform_calibration_finetune
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.image_calibration.objective_calibration.ImageProcessor_Worker" class="md-nav__link">
    <span class="md-ellipsis">
      
        ImageProcessor_Worker
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ImageProcessor_Worker">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#iris.gui.image_calibration.objective_calibration.ImageProcessor_Worker.get_stitched_image" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_stitched_image
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.image_calibration.objective_calibration.Wdg_Calibration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Wdg_Calibration
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Wdg_Calibration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#iris.gui.image_calibration.objective_calibration.Wdg_Calibration.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __init__
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.image_calibration.objective_calibration.Wdg_Calibration_Finetuning" class="md-nav__link">
    <span class="md-ellipsis">
      
        Wdg_Calibration_Finetuning
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Wdg_Calibration_Finetuning">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#iris.gui.image_calibration.objective_calibration.Wdg_Calibration_Finetuning.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __init__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.gui.image_calibration.objective_calibration.Wdg_Calibration_Finetuning.apply_temp_fineadjustment" class="md-nav__link">
    <span class="md-ellipsis">
      
        apply_temp_fineadjustment
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.gui.image_calibration.objective_calibration.Wdg_Calibration_Finetuning.config_calibrate_button" class="md-nav__link">
    <span class="md-ellipsis">
      
        config_calibrate_button
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.gui.image_calibration.objective_calibration.Wdg_Calibration_Finetuning.config_finetune_calibration_button" class="md-nav__link">
    <span class="md-ellipsis">
      
        config_finetune_calibration_button
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.gui.image_calibration.objective_calibration.Wdg_Calibration_Finetuning.enable_finetuneCalibration_widgets" class="md-nav__link">
    <span class="md-ellipsis">
      
        enable_finetuneCalibration_widgets
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.gui.image_calibration.objective_calibration.Wdg_Calibration_Finetuning.finalise_fineadjustment" class="md-nav__link">
    <span class="md-ellipsis">
      
        finalise_fineadjustment
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.gui.image_calibration.objective_calibration.Wdg_Calibration_Finetuning.get_calibration_params_percent" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_calibration_params_percent
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.gui.image_calibration.objective_calibration.Wdg_Calibration_Finetuning.get_last_calibration" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_last_calibration
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.gui.image_calibration.objective_calibration.Wdg_Calibration_Finetuning.initialise_fineadjuster" class="md-nav__link">
    <span class="md-ellipsis">
      
        initialise_fineadjuster
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.gui.image_calibration.objective_calibration.Wdg_Calibration_Finetuning.reset_calibrationSpinbox_values" class="md-nav__link">
    <span class="md-ellipsis">
      
        reset_calibrationSpinbox_values
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.image_calibration.objective_calibration.check_and_create_config_file" class="md-nav__link">
    <span class="md-ellipsis">
      
        check_and_create_config_file
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.image_calibration.objective_calibration.convert_ramanshift_to_wavelength" class="md-nav__link">
    <span class="md-ellipsis">
      
        convert_ramanshift_to_wavelength
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.image_calibration.objective_calibration.convert_timestamp_us_int_to_str" class="md-nav__link">
    <span class="md-ellipsis">
      
        convert_timestamp_us_int_to_str
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.image_calibration.objective_calibration.convert_timestamp_us_str_to_int" class="md-nav__link">
    <span class="md-ellipsis">
      
        convert_timestamp_us_str_to_int
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.image_calibration.objective_calibration.convert_wavelength_to_ramanshift" class="md-nav__link">
    <span class="md-ellipsis">
      
        convert_wavelength_to_ramanshift
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.image_calibration.objective_calibration.generate_test_app" class="md-nav__link">
    <span class="md-ellipsis">
      
        generate_test_app
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.image_calibration.objective_calibration.get_all_widgets" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_all_widgets
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.image_calibration.objective_calibration.get_all_widgets_from_layout" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_all_widgets_from_layout
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.image_calibration.objective_calibration.get_timestamp_day" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_timestamp_day
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.image_calibration.objective_calibration.get_timestamp_sec" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_timestamp_sec
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.image_calibration.objective_calibration.get_timestamp_us_int" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_timestamp_us_int
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.image_calibration.objective_calibration.get_timestamp_us_str" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_timestamp_us_str
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.image_calibration.objective_calibration.messagebox_request_input" class="md-nav__link">
    <span class="md-ellipsis">
      
        messagebox_request_input
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.image_calibration.objective_calibration.read_update_config_file_section" class="md-nav__link">
    <span class="md-ellipsis">
      
        read_update_config_file_section
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.image_calibration.objective_calibration.run_with_timeout" class="md-nav__link">
    <span class="md-ellipsis">
      
        run_with_timeout
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.image_calibration.objective_calibration.validator_float_greaterThanZero" class="md-nav__link">
    <span class="md-ellipsis">
      
        validator_float_greaterThanZero
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



  <h1>objective_calibration</h1>

<div class="doc doc-object doc-module">



<a id="iris.gui.image_calibration.objective_calibration"></a>
    <div class="doc doc-contents first">










<div class="doc doc-children">









<div class="doc doc-object doc-class">



<h2 id="iris.gui.image_calibration.objective_calibration.Calibration_Worker" class="doc doc-heading">
            <code>Calibration_Worker</code>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="PySide6.QtCore.QObject">QObject</span></code></p>










              <details class="mkdocstrings-source">
                <summary>Source code in <code>iris/gui/image_calibration/objective_calibration.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Calibration_Worker</span><span class="p">(</span><span class="n">QObject</span><span class="p">):</span>
    <span class="c1"># Calibration signals</span>
    <span class="n">event_operationDone</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Event</span><span class="p">()</span>
    <span class="n">sig_set_image</span> <span class="o">=</span> <span class="n">Signal</span><span class="p">(</span><span class="n">Image</span><span class="o">.</span><span class="n">Image</span><span class="p">)</span> <span class="c1"># Signal to set the image on the canvas</span>
    <span class="n">sig_start_record_clicks</span> <span class="o">=</span> <span class="n">Signal</span><span class="p">(</span><span class="nb">bool</span><span class="p">)</span>  <span class="c1"># Signal to start recording clicks on the canvas</span>
    <span class="n">sig_stop_record_clicks</span> <span class="o">=</span> <span class="n">Signal</span><span class="p">(</span><span class="nb">bool</span><span class="p">)</span>   <span class="c1"># Signal to stop recording clicks on the canvas</span>
    <span class="n">sig_set_record_clicks_mm</span> <span class="o">=</span> <span class="n">Signal</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>  <span class="c1"># Signal to set the recorded clicks in mm coordinates</span>

    <span class="n">sig_pause_vid_norm</span> <span class="o">=</span> <span class="n">Signal</span><span class="p">()</span>   <span class="c1"># Signal to pause the video feed (normal, unannotated)</span>
    <span class="n">sig_resume_vid_norm</span> <span class="o">=</span> <span class="n">Signal</span><span class="p">()</span>  <span class="c1"># Signal to resume the video feed (normal, unannotated)</span>

    <span class="n">sig_pause_vid_anno</span> <span class="o">=</span> <span class="n">Signal</span><span class="p">()</span>   <span class="c1"># Signal to pause the annotated video feed</span>
    <span class="n">sig_resume_vid_anno</span> <span class="o">=</span> <span class="n">Signal</span><span class="p">()</span>  <span class="c1"># Signal to resume the annotated video feed</span>

    <span class="n">sig_set_btnCal</span> <span class="o">=</span> <span class="n">Signal</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="nb">str</span><span class="p">)</span>    <span class="c1"># Signal to set up the calibration button</span>
    <span class="n">sig_finished</span> <span class="o">=</span> <span class="n">Signal</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>          <span class="c1"># Signal to indicate the calibration process is finished</span>
    <span class="n">sig_save_cal</span> <span class="o">=</span> <span class="n">Signal</span><span class="p">(</span><span class="n">MeaImg_Unit</span><span class="p">)</span>  <span class="c1"># Signal to save the calibration file (stored in the MeaImg_Unit</span>
    <span class="n">sig_set_imgUnit</span> <span class="o">=</span> <span class="n">Signal</span><span class="p">(</span><span class="n">MeaImg_Unit</span><span class="p">)</span>   <span class="c1"># Signal to set the image unit being stored in the main widget</span>

    <span class="n">msg_cal_success</span> <span class="o">=</span> <span class="s1">&#39;Calibration completed successfully&#39;</span>
    <span class="n">msg_cal_error</span> <span class="o">=</span> <span class="s1">&#39;Error during calibration: &#39;</span>

    <span class="n">button_texts</span> <span class="o">=</span> <span class="p">(</span>
        <span class="s1">&#39;1. Capture the first state&#39;</span><span class="p">,</span>
        <span class="s1">&#39;2. Complete laser selection&#39;</span><span class="p">,</span>
        <span class="s1">&#39;3. Complete the first selections&#39;</span><span class="p">,</span>
        <span class="s1">&#39;4. Capture the second state&#39;</span><span class="p">,</span>
        <span class="s1">&#39;5. Complete the second selection&#39;</span><span class="p">,</span>
        <span class="s1">&#39;6. Capture the third state&#39;</span><span class="p">,</span>
        <span class="s1">&#39;7. Complete the third selection&#39;</span><span class="p">,</span>
        <span class="s1">&#39;8. Complete calibration&#39;</span>
    <span class="p">)</span>
    <span class="n">lines</span> <span class="o">=</span> <span class="p">(</span>
        <span class="sa">f</span><span class="s1">&#39;1. Wait for the stage to stage coordinates to stabilise and click &quot;</span><span class="si">{</span><span class="n">button_texts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">,</span>
        <span class="sa">f</span><span class="s1">&#39;2. Click the center of the laser spot and click &quot;</span><span class="si">{</span><span class="n">button_texts</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">,</span>
        <span class="sa">f</span><span class="s1">&#39;3. Click on some features to be tracked and click &quot;</span><span class="si">{</span><span class="n">button_texts</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">,</span>
        <span class="sa">f</span><span class="s1">&#39;4. Move the stage HORIZONTALLY, ensuring that the features are still visible, and click &quot;</span><span class="si">{</span><span class="n">button_texts</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">,</span>
        <span class="sa">f</span><span class="s1">&#39;5. Click on the features in the same order and click &quot;</span><span class="si">{</span><span class="n">button_texts</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">,</span>
        <span class="sa">f</span><span class="s1">&#39;6. Move the stage VERTICALLY, ensuring that the features are still visible, and click &quot;</span><span class="si">{</span><span class="n">button_texts</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">,</span>
        <span class="sa">f</span><span class="s1">&#39;7. Click on the features in the same order and click &quot;</span><span class="si">{</span><span class="n">button_texts</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">,</span>
        <span class="sa">f</span><span class="s1">&#39;8. Move the stage around, confirm that the features are tracked correctly, and click &quot;</span><span class="si">{</span><span class="n">button_texts</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span><span class="si">}</span><span class="s1">&quot;&#39;</span>
    <span class="p">)</span>

    <span class="c1"># Finetune calibration signals</span>
    <span class="n">event_operationDone_finetune</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Event</span><span class="p">()</span>
    <span class="n">sig_done_picking_points_finetune</span> <span class="o">=</span> <span class="n">Signal</span><span class="p">()</span>
    <span class="n">sig_finished_finetune</span> <span class="o">=</span> <span class="n">Signal</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">getter_coor</span><span class="p">:</span><span class="n">Callable</span><span class="p">[[],</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="o">|</span><span class="kc">None</span><span class="p">,</span><span class="nb">float</span><span class="o">|</span><span class="kc">None</span><span class="p">,</span><span class="nb">float</span><span class="o">|</span><span class="kc">None</span><span class="p">]],</span>
        <span class="n">getter_cameraImage</span><span class="p">:</span><span class="n">Callable</span><span class="p">[[],</span><span class="n">Image</span><span class="o">.</span><span class="n">Image</span><span class="o">|</span><span class="kc">None</span><span class="p">],</span>
        <span class="n">canvas</span><span class="p">:</span><span class="n">Canvas_Image_Annotations</span><span class="p">,</span>
        <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Worker to perform the objective calibration</span>

<span class="sd">        Args:</span>
<span class="sd">            getter_coor (Callable[[],tuple[float,float,float]]): Getter function to get the stage coordinate</span>
<span class="sd">            getter_cameraImage (Callable[[],Image.Image]): Getter function to get the camera image</span>
<span class="sd">            canvas (Canvas_Image_Annotations): Canvas to display the image and record clicks</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_getter_coor</span> <span class="o">=</span> <span class="n">getter_coor</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_getter_img</span> <span class="o">=</span> <span class="n">getter_cameraImage</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_canvas</span> <span class="o">=</span> <span class="n">canvas</span>

    <span class="nd">@Slot</span><span class="p">()</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">perform_calibration</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Main function to perform the calibration setup, to be used in a separate thread, communicating with the main thread using events for GUI interaction.</span>

<span class="sd">        Args:</span>
<span class="sd">            list_tracking_coors (list): List to store the tracking coordinates to be used throughout the entire calibration process</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">def</span><span class="w"> </span><span class="nf">capture_state</span><span class="p">(</span><span class="n">message</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span><span class="n">button_text</span><span class="p">:</span><span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="o">|</span><span class="kc">None</span><span class="p">,</span><span class="nb">float</span><span class="o">|</span><span class="kc">None</span><span class="p">,</span><span class="nb">float</span><span class="o">|</span><span class="kc">None</span><span class="p">]:</span>
                <span class="c1"># print(&#39;Capture state: waiting for the user to click the button&#39;)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">event_operationDone</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">sig_set_btnCal</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">message</span><span class="p">,</span><span class="n">button_text</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">sig_resume_vid_anno</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_canvas</span><span class="o">.</span><span class="n">clear_all_annotations</span><span class="p">()</span>

                <span class="c1"># Wait for the user to finish the </span>
                <span class="bp">self</span><span class="o">.</span><span class="n">event_operationDone</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">sig_pause_vid_anno</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span>
                <span class="n">img_ori</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getter_img</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">sig_set_image</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">img_ori</span><span class="p">)</span>

                <span class="n">stage_coor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getter_coor</span><span class="p">()</span>

                <span class="c1"># print(&#39;Captured state at stage coordinates:&#39;,stage_coor)</span>

                <span class="k">return</span> <span class="n">stage_coor</span>

            <span class="k">def</span><span class="w"> </span><span class="nf">feature_selection</span><span class="p">(</span><span class="n">message</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span><span class="n">button_text</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span><span class="n">limit1</span><span class="p">:</span><span class="nb">bool</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">]]:</span>
                <span class="c1"># print(&#39;Feature selection: waiting for the user to click the button&#39;)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">event_operationDone</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">sig_set_btnCal</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">message</span><span class="p">,</span><span class="n">button_text</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">sig_start_record_clicks</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">sig_pause_vid_anno</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">event_operationDone</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>
                <span class="n">list_ret</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_canvas</span><span class="o">.</span><span class="n">get_clickCoordinates</span><span class="p">()</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">sig_stop_record_clicks</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">list_ret</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;At least one feature must be selected&#39;</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">limit1</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">list_ret</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Only laser spot must be selected&#39;</span><span class="p">)</span>

                <span class="c1"># print(&#39;Selected features at image pixel coordinates:&#39;,list_ret)</span>
                <span class="k">return</span> <span class="n">list_ret</span>

            <span class="n">lines</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lines</span>
            <span class="n">button_texts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">button_texts</span>

        <span class="c1"># &gt; 1. Capture initial state &lt;</span>
            <span class="c1"># print(&#39;\nCalibration step 1: Capture initial state&#39;)</span>
            <span class="n">v1s</span> <span class="o">=</span> <span class="n">capture_state</span><span class="p">(</span><span class="n">lines</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">button_texts</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="n">v1s</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">v1s</span><span class="p">[:</span><span class="mi">2</span><span class="p">])</span>
            <span class="n">v1s_track</span> <span class="o">=</span> <span class="n">v1s</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

        <span class="c1"># &gt; 2. Select the laser spot &lt;</span>
            <span class="c1"># print(&#39;\nCalibration step 2: Select laser spot&#39;)</span>
            <span class="n">vlc</span> <span class="o">=</span> <span class="n">feature_selection</span><span class="p">(</span><span class="n">lines</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="n">button_texts</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="kc">True</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">vlc</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">vlc</span><span class="p">)</span>

        <span class="c1"># &gt; 3. Select the first tracking features &lt;</span>
            <span class="c1"># print(&#39;\nCalibration step 3: Select first tracking features&#39;)</span>
            <span class="n">list_coor_pixel</span> <span class="o">=</span> <span class="n">feature_selection</span><span class="p">(</span><span class="n">lines</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span><span class="n">button_texts</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
            <span class="n">list_coor_pixel_v1</span> <span class="o">=</span> <span class="n">list_coor_pixel</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
            <span class="n">v1c</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">list_coor_pixel</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

        <span class="c1"># &gt; 4. Capture second state &lt;</span>
            <span class="c1"># print(&#39;\nCalibration step 4: Capture second state&#39;)</span>
            <span class="n">v2s</span> <span class="o">=</span> <span class="n">capture_state</span><span class="p">(</span><span class="n">lines</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span><span class="n">button_texts</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
            <span class="n">v2s</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">v2s</span><span class="p">[:</span><span class="mi">2</span><span class="p">])</span>
            <span class="n">y_diff</span> <span class="o">=</span> <span class="n">v2s</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">v1s</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">y_diff</span> <span class="o">&lt;</span> <span class="mf">10e-3</span><span class="p">:</span> <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;The stage must be moved horizontally&#39;</span><span class="p">)</span> <span class="c1"># 10e-3 [mm] is the threshold</span>

        <span class="c1"># &gt; 5. Select the tracking features &lt;</span>
            <span class="c1"># print(&#39;\nCalibration step 5: Select second tracking features&#39;)</span>
            <span class="n">num_features</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">list_coor_pixel</span><span class="p">)</span>
            <span class="n">list_coor_pixel</span> <span class="o">=</span> <span class="n">feature_selection</span><span class="p">(</span><span class="n">lines</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span><span class="n">button_texts</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span>
            <span class="n">v2c</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">list_coor_pixel</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">list_coor_pixel</span><span class="p">)</span> <span class="o">!=</span> <span class="n">num_features</span><span class="p">:</span> <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;The number of selected features must be the same&#39;</span><span class="p">)</span>

        <span class="c1"># &gt; 6. Capture third state &lt;</span>
            <span class="c1"># print(&#39;\nCalibration step 6: Capture third state&#39;)</span>
            <span class="n">v3s</span> <span class="o">=</span> <span class="n">capture_state</span><span class="p">(</span><span class="n">lines</span><span class="p">[</span><span class="mi">5</span><span class="p">],</span><span class="n">button_texts</span><span class="p">[</span><span class="mi">5</span><span class="p">])</span>
            <span class="n">v3s</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">v3s</span><span class="p">[:</span><span class="mi">2</span><span class="p">])</span>
            <span class="n">x_diff</span> <span class="o">=</span> <span class="n">v3s</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">v2s</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">x_diff</span> <span class="o">&lt;</span> <span class="mf">10e-3</span><span class="p">:</span> <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;The stage must be moved vertically&#39;</span><span class="p">)</span> <span class="c1"># 10e-3 [mm] is the threshold</span>

        <span class="c1"># &gt; 7. Select the tracking features &lt;</span>
            <span class="c1"># print(&#39;\nCalibration step 7: Select third tracking features&#39;)</span>
            <span class="n">list_coor_pixel</span> <span class="o">=</span> <span class="n">feature_selection</span><span class="p">(</span><span class="n">lines</span><span class="p">[</span><span class="mi">6</span><span class="p">],</span><span class="n">button_texts</span><span class="p">[</span><span class="mi">6</span><span class="p">])</span>
            <span class="n">v3c</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">list_coor_pixel</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
            <span class="n">v3c</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">v3c</span><span class="p">[:</span><span class="mi">2</span><span class="p">])</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">list_coor_pixel</span><span class="p">)</span> <span class="o">!=</span> <span class="n">num_features</span><span class="p">:</span> <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;The number of selected features must be the same&#39;</span><span class="p">)</span>

            <span class="c1"># Set the calibration object</span>
            <span class="n">cal</span> <span class="o">=</span> <span class="n">ImgMea_Cal</span><span class="p">(</span><span class="s1">&#39;calibration&#39;</span><span class="p">)</span>
            <span class="n">cal</span><span class="o">.</span><span class="n">set_calibration_vector</span><span class="p">(</span><span class="n">v1s</span><span class="p">,</span><span class="n">v2s</span><span class="p">,</span><span class="n">v3s</span><span class="p">,</span><span class="n">v1c</span><span class="p">,</span><span class="n">v2c</span><span class="p">,</span><span class="n">v3c</span><span class="p">,</span><span class="n">vlc</span><span class="p">)</span>

            <span class="c1"># Save the calibration parameters (corrects for the image coordinate to the stage coordinate inversion)</span>
            <span class="n">img_unit</span> <span class="o">=</span> <span class="n">MeaImg_Unit</span><span class="p">(</span><span class="n">unit_name</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;Calibration </span><span class="si">{</span><span class="n">get_timestamp_us_str</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span><span class="n">calibration</span><span class="o">=</span><span class="n">cal</span><span class="p">)</span>

        <span class="c1"># &gt; 8. Show the live feature tracking and complete the calibration</span>
            <span class="c1"># print(&#39;\nCalibration step 8: Show live feature tracking and complete the calibration&#39;)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">event_operationDone</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sig_set_btnCal</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">lines</span><span class="p">[</span><span class="mi">7</span><span class="p">],</span><span class="n">button_texts</span><span class="p">[</span><span class="mi">7</span><span class="p">])</span>

            <span class="c1"># Add the initial tracked features to the list, adjusted for the real coordinates by </span>
            <span class="c1"># adding the initial stage coordinates</span>
            <span class="n">list_tracking_coors_mm</span> <span class="o">=</span> <span class="p">[</span><span class="n">cal</span><span class="o">.</span><span class="n">convert_imgpt2stg</span><span class="p">(</span><span class="n">coor_img_pixel</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">coor_img</span><span class="p">),</span>\
                <span class="n">coor_stage_mm</span><span class="o">=</span><span class="n">v1s_track</span><span class="p">)</span> <span class="k">for</span> <span class="n">coor_img</span> <span class="ow">in</span> <span class="n">list_coor_pixel_v1</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sig_set_imgUnit</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">img_unit</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sig_set_record_clicks_mm</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">list_tracking_coors_mm</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sig_resume_vid_anno</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span>

            <span class="c1"># Wait for the user to finish the calibration</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">event_operationDone</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>

        <span class="c1"># &gt; 7. Ask the user to save the calibration file</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sig_save_cal</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">img_unit</span><span class="p">)</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">sig_finished</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">msg_cal_error</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sig_stop_record_clicks</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sig_pause_vid_anno</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sig_resume_vid_norm</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sig_finished</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">msg_cal_success</span><span class="p">)</span>

    <span class="nd">@Slot</span><span class="p">(</span><span class="n">MeaImg_Unit</span><span class="p">)</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">perform_calibration_finetune</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Performs a finetune calibration based on the current clicked coordinates on the canvas</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">event_operationDone_finetune</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">event_operationDone_finetune</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sig_done_picking_points_finetune</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">event_operationDone_finetune</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">event_operationDone_finetune</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sig_finished_finetune</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
              </details>



<div class="doc doc-children">










<div class="doc doc-object doc-function">


<h3 id="iris.gui.image_calibration.objective_calibration.Calibration_Worker.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">getter_coor</span><span class="p">,</span> <span class="n">getter_cameraImage</span><span class="p">,</span> <span class="n">canvas</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Worker to perform the objective calibration</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>getter_coor</code>
            </td>
            <td>
                  <code><span title="iris.utils.general.Callable">Callable</span>[[], <span title="tuple">tuple</span>[<span title="float">float</span>, <span title="float">float</span>, <span title="float">float</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Getter function to get the stage coordinate</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>getter_cameraImage</code>
            </td>
            <td>
                  <code><span title="iris.utils.general.Callable">Callable</span>[[], <span title="PIL.Image.Image">Image</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Getter function to get the camera image</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>canvas</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Canvas_Image_Annotations (iris.gui.image_calibration.Canvas_ROIdefinition.Canvas_Image_Annotations)" href="../Canvas_ROIdefinition/#iris.gui.image_calibration.Canvas_ROIdefinition.Canvas_Image_Annotations">Canvas_Image_Annotations</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Canvas to display the image and record clicks</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/gui/image_calibration/objective_calibration.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">getter_coor</span><span class="p">:</span><span class="n">Callable</span><span class="p">[[],</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="o">|</span><span class="kc">None</span><span class="p">,</span><span class="nb">float</span><span class="o">|</span><span class="kc">None</span><span class="p">,</span><span class="nb">float</span><span class="o">|</span><span class="kc">None</span><span class="p">]],</span>
    <span class="n">getter_cameraImage</span><span class="p">:</span><span class="n">Callable</span><span class="p">[[],</span><span class="n">Image</span><span class="o">.</span><span class="n">Image</span><span class="o">|</span><span class="kc">None</span><span class="p">],</span>
    <span class="n">canvas</span><span class="p">:</span><span class="n">Canvas_Image_Annotations</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Worker to perform the objective calibration</span>

<span class="sd">    Args:</span>
<span class="sd">        getter_coor (Callable[[],tuple[float,float,float]]): Getter function to get the stage coordinate</span>
<span class="sd">        getter_cameraImage (Callable[[],Image.Image]): Getter function to get the camera image</span>
<span class="sd">        canvas (Canvas_Image_Annotations): Canvas to display the image and record clicks</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_getter_coor</span> <span class="o">=</span> <span class="n">getter_coor</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_getter_img</span> <span class="o">=</span> <span class="n">getter_cameraImage</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_canvas</span> <span class="o">=</span> <span class="n">canvas</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.gui.image_calibration.objective_calibration.Calibration_Worker.perform_calibration" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">perform_calibration</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Main function to perform the calibration setup, to be used in a separate thread, communicating with the main thread using events for GUI interaction.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>list_tracking_coors</code>
            </td>
            <td>
                  <code><span title="list">list</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List to store the tracking coordinates to be used throughout the entire calibration process</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/gui/image_calibration/objective_calibration.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@Slot</span><span class="p">()</span>
<span class="k">def</span><span class="w"> </span><span class="nf">perform_calibration</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Main function to perform the calibration setup, to be used in a separate thread, communicating with the main thread using events for GUI interaction.</span>

<span class="sd">    Args:</span>
<span class="sd">        list_tracking_coors (list): List to store the tracking coordinates to be used throughout the entire calibration process</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">def</span><span class="w"> </span><span class="nf">capture_state</span><span class="p">(</span><span class="n">message</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span><span class="n">button_text</span><span class="p">:</span><span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="o">|</span><span class="kc">None</span><span class="p">,</span><span class="nb">float</span><span class="o">|</span><span class="kc">None</span><span class="p">,</span><span class="nb">float</span><span class="o">|</span><span class="kc">None</span><span class="p">]:</span>
            <span class="c1"># print(&#39;Capture state: waiting for the user to click the button&#39;)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">event_operationDone</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sig_set_btnCal</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">message</span><span class="p">,</span><span class="n">button_text</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sig_resume_vid_anno</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_canvas</span><span class="o">.</span><span class="n">clear_all_annotations</span><span class="p">()</span>

            <span class="c1"># Wait for the user to finish the </span>
            <span class="bp">self</span><span class="o">.</span><span class="n">event_operationDone</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sig_pause_vid_anno</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span>
            <span class="n">img_ori</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getter_img</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sig_set_image</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">img_ori</span><span class="p">)</span>

            <span class="n">stage_coor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getter_coor</span><span class="p">()</span>

            <span class="c1"># print(&#39;Captured state at stage coordinates:&#39;,stage_coor)</span>

            <span class="k">return</span> <span class="n">stage_coor</span>

        <span class="k">def</span><span class="w"> </span><span class="nf">feature_selection</span><span class="p">(</span><span class="n">message</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span><span class="n">button_text</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span><span class="n">limit1</span><span class="p">:</span><span class="nb">bool</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">]]:</span>
            <span class="c1"># print(&#39;Feature selection: waiting for the user to click the button&#39;)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">event_operationDone</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sig_set_btnCal</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">message</span><span class="p">,</span><span class="n">button_text</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sig_start_record_clicks</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sig_pause_vid_anno</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">event_operationDone</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>
            <span class="n">list_ret</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_canvas</span><span class="o">.</span><span class="n">get_clickCoordinates</span><span class="p">()</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sig_stop_record_clicks</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">list_ret</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;At least one feature must be selected&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">limit1</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">list_ret</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Only laser spot must be selected&#39;</span><span class="p">)</span>

            <span class="c1"># print(&#39;Selected features at image pixel coordinates:&#39;,list_ret)</span>
            <span class="k">return</span> <span class="n">list_ret</span>

        <span class="n">lines</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lines</span>
        <span class="n">button_texts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">button_texts</span>

    <span class="c1"># &gt; 1. Capture initial state &lt;</span>
        <span class="c1"># print(&#39;\nCalibration step 1: Capture initial state&#39;)</span>
        <span class="n">v1s</span> <span class="o">=</span> <span class="n">capture_state</span><span class="p">(</span><span class="n">lines</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">button_texts</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">v1s</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">v1s</span><span class="p">[:</span><span class="mi">2</span><span class="p">])</span>
        <span class="n">v1s_track</span> <span class="o">=</span> <span class="n">v1s</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

    <span class="c1"># &gt; 2. Select the laser spot &lt;</span>
        <span class="c1"># print(&#39;\nCalibration step 2: Select laser spot&#39;)</span>
        <span class="n">vlc</span> <span class="o">=</span> <span class="n">feature_selection</span><span class="p">(</span><span class="n">lines</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="n">button_texts</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="kc">True</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">vlc</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">vlc</span><span class="p">)</span>

    <span class="c1"># &gt; 3. Select the first tracking features &lt;</span>
        <span class="c1"># print(&#39;\nCalibration step 3: Select first tracking features&#39;)</span>
        <span class="n">list_coor_pixel</span> <span class="o">=</span> <span class="n">feature_selection</span><span class="p">(</span><span class="n">lines</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span><span class="n">button_texts</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
        <span class="n">list_coor_pixel_v1</span> <span class="o">=</span> <span class="n">list_coor_pixel</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">v1c</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">list_coor_pixel</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

    <span class="c1"># &gt; 4. Capture second state &lt;</span>
        <span class="c1"># print(&#39;\nCalibration step 4: Capture second state&#39;)</span>
        <span class="n">v2s</span> <span class="o">=</span> <span class="n">capture_state</span><span class="p">(</span><span class="n">lines</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span><span class="n">button_texts</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
        <span class="n">v2s</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">v2s</span><span class="p">[:</span><span class="mi">2</span><span class="p">])</span>
        <span class="n">y_diff</span> <span class="o">=</span> <span class="n">v2s</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">v1s</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">y_diff</span> <span class="o">&lt;</span> <span class="mf">10e-3</span><span class="p">:</span> <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;The stage must be moved horizontally&#39;</span><span class="p">)</span> <span class="c1"># 10e-3 [mm] is the threshold</span>

    <span class="c1"># &gt; 5. Select the tracking features &lt;</span>
        <span class="c1"># print(&#39;\nCalibration step 5: Select second tracking features&#39;)</span>
        <span class="n">num_features</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">list_coor_pixel</span><span class="p">)</span>
        <span class="n">list_coor_pixel</span> <span class="o">=</span> <span class="n">feature_selection</span><span class="p">(</span><span class="n">lines</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span><span class="n">button_texts</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span>
        <span class="n">v2c</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">list_coor_pixel</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">list_coor_pixel</span><span class="p">)</span> <span class="o">!=</span> <span class="n">num_features</span><span class="p">:</span> <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;The number of selected features must be the same&#39;</span><span class="p">)</span>

    <span class="c1"># &gt; 6. Capture third state &lt;</span>
        <span class="c1"># print(&#39;\nCalibration step 6: Capture third state&#39;)</span>
        <span class="n">v3s</span> <span class="o">=</span> <span class="n">capture_state</span><span class="p">(</span><span class="n">lines</span><span class="p">[</span><span class="mi">5</span><span class="p">],</span><span class="n">button_texts</span><span class="p">[</span><span class="mi">5</span><span class="p">])</span>
        <span class="n">v3s</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">v3s</span><span class="p">[:</span><span class="mi">2</span><span class="p">])</span>
        <span class="n">x_diff</span> <span class="o">=</span> <span class="n">v3s</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">v2s</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">x_diff</span> <span class="o">&lt;</span> <span class="mf">10e-3</span><span class="p">:</span> <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;The stage must be moved vertically&#39;</span><span class="p">)</span> <span class="c1"># 10e-3 [mm] is the threshold</span>

    <span class="c1"># &gt; 7. Select the tracking features &lt;</span>
        <span class="c1"># print(&#39;\nCalibration step 7: Select third tracking features&#39;)</span>
        <span class="n">list_coor_pixel</span> <span class="o">=</span> <span class="n">feature_selection</span><span class="p">(</span><span class="n">lines</span><span class="p">[</span><span class="mi">6</span><span class="p">],</span><span class="n">button_texts</span><span class="p">[</span><span class="mi">6</span><span class="p">])</span>
        <span class="n">v3c</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">list_coor_pixel</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">v3c</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">v3c</span><span class="p">[:</span><span class="mi">2</span><span class="p">])</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">list_coor_pixel</span><span class="p">)</span> <span class="o">!=</span> <span class="n">num_features</span><span class="p">:</span> <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;The number of selected features must be the same&#39;</span><span class="p">)</span>

        <span class="c1"># Set the calibration object</span>
        <span class="n">cal</span> <span class="o">=</span> <span class="n">ImgMea_Cal</span><span class="p">(</span><span class="s1">&#39;calibration&#39;</span><span class="p">)</span>
        <span class="n">cal</span><span class="o">.</span><span class="n">set_calibration_vector</span><span class="p">(</span><span class="n">v1s</span><span class="p">,</span><span class="n">v2s</span><span class="p">,</span><span class="n">v3s</span><span class="p">,</span><span class="n">v1c</span><span class="p">,</span><span class="n">v2c</span><span class="p">,</span><span class="n">v3c</span><span class="p">,</span><span class="n">vlc</span><span class="p">)</span>

        <span class="c1"># Save the calibration parameters (corrects for the image coordinate to the stage coordinate inversion)</span>
        <span class="n">img_unit</span> <span class="o">=</span> <span class="n">MeaImg_Unit</span><span class="p">(</span><span class="n">unit_name</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;Calibration </span><span class="si">{</span><span class="n">get_timestamp_us_str</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span><span class="n">calibration</span><span class="o">=</span><span class="n">cal</span><span class="p">)</span>

    <span class="c1"># &gt; 8. Show the live feature tracking and complete the calibration</span>
        <span class="c1"># print(&#39;\nCalibration step 8: Show live feature tracking and complete the calibration&#39;)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">event_operationDone</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sig_set_btnCal</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">lines</span><span class="p">[</span><span class="mi">7</span><span class="p">],</span><span class="n">button_texts</span><span class="p">[</span><span class="mi">7</span><span class="p">])</span>

        <span class="c1"># Add the initial tracked features to the list, adjusted for the real coordinates by </span>
        <span class="c1"># adding the initial stage coordinates</span>
        <span class="n">list_tracking_coors_mm</span> <span class="o">=</span> <span class="p">[</span><span class="n">cal</span><span class="o">.</span><span class="n">convert_imgpt2stg</span><span class="p">(</span><span class="n">coor_img_pixel</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">coor_img</span><span class="p">),</span>\
            <span class="n">coor_stage_mm</span><span class="o">=</span><span class="n">v1s_track</span><span class="p">)</span> <span class="k">for</span> <span class="n">coor_img</span> <span class="ow">in</span> <span class="n">list_coor_pixel_v1</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sig_set_imgUnit</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">img_unit</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sig_set_record_clicks_mm</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">list_tracking_coors_mm</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sig_resume_vid_anno</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span>

        <span class="c1"># Wait for the user to finish the calibration</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">event_operationDone</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>

    <span class="c1"># &gt; 7. Ask the user to save the calibration file</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sig_save_cal</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">img_unit</span><span class="p">)</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">sig_finished</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">msg_cal_error</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sig_stop_record_clicks</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sig_pause_vid_anno</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sig_resume_vid_norm</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sig_finished</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">msg_cal_success</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.gui.image_calibration.objective_calibration.Calibration_Worker.perform_calibration_finetune" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">perform_calibration_finetune</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Performs a finetune calibration based on the current clicked coordinates on the canvas</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/gui/image_calibration/objective_calibration.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@Slot</span><span class="p">(</span><span class="n">MeaImg_Unit</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">perform_calibration_finetune</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Performs a finetune calibration based on the current clicked coordinates on the canvas</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">event_operationDone_finetune</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">event_operationDone_finetune</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">sig_done_picking_points_finetune</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">event_operationDone_finetune</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">event_operationDone_finetune</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">sig_finished_finetune</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="iris.gui.image_calibration.objective_calibration.ImageProcessor_Worker" class="doc doc-heading">
            <code>ImageProcessor_Worker</code>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="PySide6.QtCore.QObject">QObject</span></code></p>










              <details class="mkdocstrings-source">
                <summary>Source code in <code>iris/gui/image_calibration/objective_calibration.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ImageProcessor_Worker</span><span class="p">(</span><span class="n">QObject</span><span class="p">):</span>

    <span class="n">sig_img</span> <span class="o">=</span> <span class="n">Signal</span><span class="p">(</span><span class="n">Image</span><span class="o">.</span><span class="n">Image</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

    <span class="nd">@Slot</span><span class="p">(</span><span class="n">MeaImg_Unit</span><span class="p">,</span><span class="nb">bool</span><span class="p">)</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_stitched_image</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">meaImg</span><span class="p">:</span><span class="n">MeaImg_Unit</span><span class="p">,</span><span class="n">low_res</span><span class="p">:</span><span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the stitched image from the measurement image</span>

<span class="sd">        Args:</span>
<span class="sd">            meaImg (MeaImg_Unit): Measurement image unit</span>
<span class="sd">            low_res (bool): Whether to get the low resolution image. Default is False</span>

<span class="sd">        Returns:</span>
<span class="sd">            tuple: Stitched image and list of coordinates</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">stitched_img</span> <span class="o">=</span> <span class="n">meaImg</span><span class="o">.</span><span class="n">get_image_all_stitched</span><span class="p">(</span><span class="n">low_res</span><span class="o">=</span><span class="n">low_res</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sig_img</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">stitched_img</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



<div class="doc doc-children">










<div class="doc doc-object doc-function">


<h3 id="iris.gui.image_calibration.objective_calibration.ImageProcessor_Worker.get_stitched_image" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_stitched_image</span><span class="p">(</span><span class="n">meaImg</span><span class="p">,</span> <span class="n">low_res</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Gets the stitched image from the measurement image</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>meaImg</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="MeaImg_Unit (iris.data.measurement_image.MeaImg_Unit)" href="../../../data/measurement_image/#iris.data.measurement_image.MeaImg_Unit">MeaImg_Unit</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Measurement image unit</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>low_res</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to get the low resolution image. Default is False</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>tuple</code></td>            <td>
                  <code>None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Stitched image and list of coordinates</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/gui/image_calibration/objective_calibration.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@Slot</span><span class="p">(</span><span class="n">MeaImg_Unit</span><span class="p">,</span><span class="nb">bool</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_stitched_image</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">meaImg</span><span class="p">:</span><span class="n">MeaImg_Unit</span><span class="p">,</span><span class="n">low_res</span><span class="p">:</span><span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Gets the stitched image from the measurement image</span>

<span class="sd">    Args:</span>
<span class="sd">        meaImg (MeaImg_Unit): Measurement image unit</span>
<span class="sd">        low_res (bool): Whether to get the low resolution image. Default is False</span>

<span class="sd">    Returns:</span>
<span class="sd">        tuple: Stitched image and list of coordinates</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">stitched_img</span> <span class="o">=</span> <span class="n">meaImg</span><span class="o">.</span><span class="n">get_image_all_stitched</span><span class="p">(</span><span class="n">low_res</span><span class="o">=</span><span class="n">low_res</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">sig_img</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">stitched_img</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="iris.gui.image_calibration.objective_calibration.Wdg_Calibration" class="doc doc-heading">
            <code>Wdg_Calibration</code>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="iris.utils.general.qw.QWidget">QWidget</span></code></p>



        <p>Sub-frame to form the calibration file of an ImageMeasurement object.
I.e., to perform an objective calibration.</p>


<details class="note" open>
  <summary>Note</summary>
  <p>initialise_auto_updaters must be called after the object is created</p>
</details>







              <details class="mkdocstrings-source">
                <summary>Source code in <code>iris/gui/image_calibration/objective_calibration.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span>
<span class="normal">724</span>
<span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span>
<span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span>
<span class="normal">736</span>
<span class="normal">737</span>
<span class="normal">738</span>
<span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span>
<span class="normal">742</span>
<span class="normal">743</span>
<span class="normal">744</span>
<span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span>
<span class="normal">749</span>
<span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span>
<span class="normal">759</span>
<span class="normal">760</span>
<span class="normal">761</span>
<span class="normal">762</span>
<span class="normal">763</span>
<span class="normal">764</span>
<span class="normal">765</span>
<span class="normal">766</span>
<span class="normal">767</span>
<span class="normal">768</span>
<span class="normal">769</span>
<span class="normal">770</span>
<span class="normal">771</span>
<span class="normal">772</span>
<span class="normal">773</span>
<span class="normal">774</span>
<span class="normal">775</span>
<span class="normal">776</span>
<span class="normal">777</span>
<span class="normal">778</span>
<span class="normal">779</span>
<span class="normal">780</span>
<span class="normal">781</span>
<span class="normal">782</span>
<span class="normal">783</span>
<span class="normal">784</span>
<span class="normal">785</span>
<span class="normal">786</span>
<span class="normal">787</span>
<span class="normal">788</span>
<span class="normal">789</span>
<span class="normal">790</span>
<span class="normal">791</span>
<span class="normal">792</span>
<span class="normal">793</span>
<span class="normal">794</span>
<span class="normal">795</span>
<span class="normal">796</span>
<span class="normal">797</span>
<span class="normal">798</span>
<span class="normal">799</span>
<span class="normal">800</span>
<span class="normal">801</span>
<span class="normal">802</span>
<span class="normal">803</span>
<span class="normal">804</span>
<span class="normal">805</span>
<span class="normal">806</span>
<span class="normal">807</span>
<span class="normal">808</span>
<span class="normal">809</span>
<span class="normal">810</span>
<span class="normal">811</span>
<span class="normal">812</span>
<span class="normal">813</span>
<span class="normal">814</span>
<span class="normal">815</span>
<span class="normal">816</span>
<span class="normal">817</span>
<span class="normal">818</span>
<span class="normal">819</span>
<span class="normal">820</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Wdg_Calibration</span><span class="p">(</span><span class="n">qw</span><span class="o">.</span><span class="n">QWidget</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sub-frame to form the calibration file of an ImageMeasurement object.</span>
<span class="sd">    I.e., to perform an objective calibration.</span>

<span class="sd">    Note:</span>
<span class="sd">        initialise_auto_updaters must be called after the object is created</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">sig_get_stitched_img</span> <span class="o">=</span> <span class="n">Signal</span><span class="p">(</span><span class="n">MeaImg_Unit</span><span class="p">,</span><span class="nb">bool</span><span class="p">)</span>
    <span class="n">sig_perform_calibration</span> <span class="o">=</span> <span class="n">Signal</span><span class="p">()</span>
    <span class="n">sig_perform_finetune_calibration</span> <span class="o">=</span> <span class="n">Signal</span><span class="p">()</span>
    <span class="n">sig_saved_calibration</span> <span class="o">=</span> <span class="n">Signal</span><span class="p">()</span>    <span class="c1"># Signal emitted when a calibration is saved in the calibration folder</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                 <span class="n">parent</span><span class="p">:</span><span class="n">qw</span><span class="o">.</span><span class="n">QWidget</span><span class="p">,</span>
                 <span class="n">processor</span><span class="p">:</span><span class="n">mpp</span><span class="o">.</span><span class="n">Pool</span><span class="p">,</span>
                 <span class="n">dataHub_img</span><span class="p">:</span><span class="n">Wdg_DataHub_Image</span><span class="p">,</span>
                 <span class="n">dataHub_imgcal</span><span class="p">:</span><span class="n">Wdg_DataHub_ImgCal</span><span class="p">,</span>
                 <span class="n">getter_coor</span><span class="p">:</span><span class="n">Callable</span><span class="p">[[],</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="o">|</span><span class="kc">None</span><span class="p">,</span><span class="nb">float</span><span class="o">|</span><span class="kc">None</span><span class="p">,</span><span class="nb">float</span><span class="o">|</span><span class="kc">None</span><span class="p">]],</span>
                 <span class="n">getter_cameraImage</span><span class="p">:</span><span class="n">Callable</span><span class="p">[[],</span><span class="n">Image</span><span class="o">.</span><span class="n">Image</span><span class="o">|</span><span class="kc">None</span><span class="p">],):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            parent (qw.QWidget): Main frame to put the sub-frame in</span>
<span class="sd">            processor (mpp.Pool): Multiprocessing pool for parallel processing</span>
<span class="sd">            dataHub_img (Wdg_DataHub_Image): DataHub for the measurement images</span>
<span class="sd">            dataHub_imgcal (Wdg_DataHub_ImgCal): DataHub for the image calibrations</span>
<span class="sd">            getter_coor (Callable): Callable to get the stage coordinate</span>
<span class="sd">            getter_cameraImage (Callable): Callable to get the camera image</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_processor</span> <span class="o">=</span> <span class="n">processor</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_getter_cameraImage</span> <span class="o">=</span> <span class="n">getter_cameraImage</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_getter_coordinate</span> <span class="o">=</span> <span class="n">getter_coor</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_dataHub_img</span> <span class="o">=</span> <span class="n">dataHub_img</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dataHub_imgcal</span> <span class="o">=</span> <span class="n">dataHub_imgcal</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_showHints</span> <span class="o">=</span> <span class="n">AppPlotEnum</span><span class="o">.</span><span class="n">IMGCAL_SHOWHINTS</span><span class="o">.</span><span class="n">value</span>

    <span class="c1"># &gt;&gt;&gt; Main parameters &lt;&lt;&lt;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_getter_calibration</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dataHub_imgcal</span><span class="o">.</span><span class="n">get_selected_calibration</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_meaImgUnit</span> <span class="o">=</span> <span class="n">MeaImg_Unit</span><span class="p">(</span>
            <span class="n">unit_name</span><span class="o">=</span><span class="s1">&#39;Calibration&#39;</span><span class="p">,</span>
            <span class="n">calibration</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_getter_calibration</span><span class="p">(),</span>
            <span class="n">reconstruct</span><span class="o">=</span><span class="kc">True</span>
        <span class="p">)</span>

    <span class="c1"># &gt;&gt;&gt; Main widget setup &lt;&lt;&lt;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_widget</span> <span class="o">=</span> <span class="n">Calibration_Main_Design</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">lyt</span> <span class="o">=</span> <span class="n">qw</span><span class="o">.</span><span class="n">QVBoxLayout</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">lyt</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_widget</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">lyt</span><span class="p">)</span>
        <span class="n">wdg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_widget</span>

        <span class="c1"># Statusbar setup</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_statbar</span> <span class="o">=</span> <span class="n">qw</span><span class="o">.</span><span class="n">QStatusBar</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">lyt</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_statbar</span><span class="p">)</span>

        <span class="n">lbl_statbar</span> <span class="o">=</span> <span class="n">qw</span><span class="o">.</span><span class="n">QLabel</span><span class="p">(</span><span class="s1">&#39;Ready&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_statbar</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">lbl_statbar</span><span class="p">)</span>

    <span class="c1"># &gt;&gt;&gt; Display widget &lt;&lt;&lt;</span>
        <span class="c1"># Canvas to display the image and button to show current image</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_canvas_img</span> <span class="o">=</span> <span class="n">Canvas_Image_Annotations</span><span class="p">(</span><span class="n">wdg</span><span class="o">.</span><span class="n">wdg_holder_canvas</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_chk_lowres</span> <span class="o">=</span> <span class="n">wdg</span><span class="o">.</span><span class="n">chk_lres</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_btn_showImage</span> <span class="o">=</span> <span class="n">wdg</span><span class="o">.</span><span class="n">btn_showimage</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_btn_showLiveFeed</span> <span class="o">=</span> <span class="n">wdg</span><span class="o">.</span><span class="n">btn_refresh</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_btn_showLiveFeed</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_btn_showImage</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">_show_stitched_images</span><span class="p">())</span>
        <span class="c1"># self._btn_showLiveFeed.clicked.connect(lambda:self.initialise_auto_updaters())</span>

    <span class="c1"># &gt;&gt;&gt; Capture widgets &lt;&lt;&lt;</span>
        <span class="c1"># Buttons for image capture</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_btn_capture</span> <span class="o">=</span> <span class="n">wdg</span><span class="o">.</span><span class="n">btn_capture</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_btn_resetCapture</span> <span class="o">=</span> <span class="n">wdg</span><span class="o">.</span><span class="n">btn_resetcapture</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_btn_save</span> <span class="o">=</span> <span class="n">wdg</span><span class="o">.</span><span class="n">btn_savecaptured</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_btn_capture</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">_capture_image</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_btn_resetCapture</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">_reset_capture</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_btn_save</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">_save_image</span><span class="p">())</span>

    <span class="c1"># &gt;&gt;&gt; Calibration adjustment &lt;&lt;&lt;</span>
        <span class="c1"># Sub-frame for calibration adjustment</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_wdg_cal_adj</span><span class="o">=</span><span class="n">Wdg_Calibration_Finetuning</span><span class="p">(</span>
            <span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
            <span class="n">processor</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_processor</span><span class="p">,</span>
            <span class="n">imgUnit_getter</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">_meaImgUnit</span>
            <span class="p">)</span>
        <span class="n">wdg</span><span class="o">.</span><span class="n">lyt_holder_calibration_controls</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_wdg_cal_adj</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_wdg_cal_adj</span><span class="o">.</span><span class="n">config_finetune_calibration_button</span><span class="p">(</span><span class="n">callback</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_initialise_finetune_calibration</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_wdg_cal_adj</span><span class="o">.</span><span class="n">config_calibrate_button</span><span class="p">(</span><span class="n">callback</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_start_calibration</span><span class="p">)</span>

    <span class="c1"># &gt;&gt;&gt; Display parameters &lt;&lt;&lt;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_videoRefreshRate</span> <span class="o">=</span> <span class="mi">25</span>    <span class="c1"># Refresh rate of the video feed in Hz</span>

    <span class="c1"># Thread for a live video feed</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_flg_video_pause</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Event</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_timer_videofeed</span> <span class="o">=</span> <span class="n">QTimer</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_timer_videofeed</span><span class="o">.</span><span class="n">setInterval</span><span class="p">(</span><span class="mi">1000</span><span class="o">//</span><span class="bp">self</span><span class="o">.</span><span class="n">_videoRefreshRate</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_timer_videofeed</span><span class="o">.</span><span class="n">timeout</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_show_camera_feed</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">destroyed</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_timer_videofeed</span><span class="o">.</span><span class="n">stop</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_timer_videofeed</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

    <span class="c1"># Thread for an annotated video feed during calibration</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_flg_video_anno_pause</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Event</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_anno_vid_custom_coors</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_anno_vid_list_coors_mm</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_anno_vid_annotate</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_timer_videofeed_anno</span> <span class="o">=</span> <span class="n">QTimer</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_timer_videofeed_anno</span><span class="o">.</span><span class="n">setInterval</span><span class="p">(</span><span class="mi">1000</span><span class="o">//</span><span class="bp">self</span><span class="o">.</span><span class="n">_videoRefreshRate</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_timer_videofeed_anno</span><span class="o">.</span><span class="n">timeout</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_show_annotated_video_feed</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">destroyed</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_timer_videofeed_anno</span><span class="o">.</span><span class="n">stop</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_timer_videofeed_anno</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_init_worker</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_init_worker</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialises the worker for image processing</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Image processing worker</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_thread_worker_img</span> <span class="o">=</span> <span class="n">QThread</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_worker_img</span> <span class="o">=</span> <span class="n">ImageProcessor_Worker</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_worker_img</span><span class="o">.</span><span class="n">moveToThread</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_thread_worker_img</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_thread_worker_img</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">sig_get_stitched_img</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_worker_img</span><span class="o">.</span><span class="n">get_stitched_image</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_worker_img</span><span class="o">.</span><span class="n">sig_img</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span> <span class="n">img</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">_canvas_img</span><span class="o">.</span><span class="n">set_image</span><span class="p">(</span><span class="n">img</span><span class="p">))</span>

        <span class="c1"># Calibration worker</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_thread_worker_cal</span> <span class="o">=</span> <span class="n">QThread</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_worker_cal</span> <span class="o">=</span> <span class="n">Calibration_Worker</span><span class="p">(</span>
            <span class="n">getter_coor</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_getter_coordinate</span><span class="p">,</span>
            <span class="n">getter_cameraImage</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_getter_cameraImage</span><span class="p">,</span>
            <span class="n">canvas</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_canvas_img</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_worker_cal</span><span class="o">.</span><span class="n">moveToThread</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_thread_worker_cal</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_thread_worker_cal</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">sig_perform_calibration</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_worker_cal</span><span class="o">.</span><span class="n">perform_calibration</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_worker_cal</span><span class="o">.</span><span class="n">sig_set_image</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_canvas_img</span><span class="o">.</span><span class="n">set_image</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_worker_cal</span><span class="o">.</span><span class="n">sig_start_record_clicks</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_canvas_img</span><span class="o">.</span><span class="n">start_recordClicks</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_worker_cal</span><span class="o">.</span><span class="n">sig_stop_record_clicks</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_canvas_img</span><span class="o">.</span><span class="n">stop_recordClicks</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_worker_cal</span><span class="o">.</span><span class="n">sig_set_record_clicks_mm</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_setup_annotated_video_feed</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_worker_cal</span><span class="o">.</span><span class="n">sig_pause_vid_norm</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_pause_video_feed</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_worker_cal</span><span class="o">.</span><span class="n">sig_resume_vid_norm</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_resume_video_feed</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_worker_cal</span><span class="o">.</span><span class="n">sig_pause_vid_anno</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_flg_video_anno_pause</span><span class="o">.</span><span class="n">set</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_worker_cal</span><span class="o">.</span><span class="n">sig_resume_vid_anno</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_flg_video_anno_pause</span><span class="o">.</span><span class="n">clear</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_worker_cal</span><span class="o">.</span><span class="n">sig_set_btnCal</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_calibration_button_setup_duringCalibration</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_worker_cal</span><span class="o">.</span><span class="n">sig_finished</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_handle_calibration_finished</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_worker_cal</span><span class="o">.</span><span class="n">sig_save_cal</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_save_calibration_file</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_worker_cal</span><span class="o">.</span><span class="n">sig_set_imgUnit</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_set_internal_meaImgUnit</span><span class="p">)</span>

        <span class="c1"># Finetune calibration connections</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_worker_cal</span><span class="o">.</span><span class="n">sig_finished_finetune</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_finalise_finetune_calibration</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sig_perform_finetune_calibration</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_worker_cal</span><span class="o">.</span><span class="n">perform_calibration_finetune</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_save_image</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Saves the local image to the Image DataHub</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dataHub_img</span><span class="o">.</span><span class="n">append_ImageMeasurementUnit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meaImgUnit</span><span class="p">,</span> <span class="n">flg_nameprompt</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_meaImgUnit</span> <span class="o">=</span> <span class="n">MeaImg_Unit</span><span class="p">(</span>
            <span class="n">unit_name</span><span class="o">=</span><span class="s1">&#39;Calibration&#39;</span><span class="p">,</span>
            <span class="n">calibration</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_getter_calibration</span><span class="p">(),</span>
            <span class="n">reconstruct</span><span class="o">=</span><span class="kc">True</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_show_camera_feed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Updates the video feed on the canvas</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_flg_video_pause</span><span class="o">.</span><span class="n">is_set</span><span class="p">():</span> <span class="k">return</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">img_ori</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getter_cameraImage</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_canvas_img</span><span class="o">.</span><span class="n">set_image</span><span class="p">(</span><span class="n">img_ori</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;_update_video_feed error:&#39;</span><span class="p">,</span><span class="n">e</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_reset_capture</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Resets the capture process</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">qw</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">question</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;Reset capture&#39;</span><span class="p">,</span> <span class="s1">&#39;This will delete all stored image. Are you sure you want to proceed?&#39;</span><span class="p">,</span>
            <span class="n">qw</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Yes</span> <span class="o">|</span> <span class="n">qw</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">No</span><span class="p">,</span> <span class="n">qw</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">No</span> <span class="c1"># pyright: ignore[reportAttributeAccessIssue] ; QMessageBox.Yes, No exist</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">result</span> <span class="o">!=</span> <span class="n">qw</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Yes</span><span class="p">:</span> <span class="c1"># pyright: ignore[reportAttributeAccessIssue] ; QMessageBox.Yes exists</span>
            <span class="k">return</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_meaImgUnit</span><span class="o">.</span><span class="n">reset_measurement</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_capture_image</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Captures the image from the camera and saves it to the image measurement</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Set a style to show a yellow background</span>
            <span class="n">style</span> <span class="o">=</span> <span class="s2">&quot;QStatusBar{background-color: </span><span class="si">%s</span><span class="s2">;}&quot;</span> <span class="o">%</span> <span class="s1">&#39;yellow&#39;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_statbar</span><span class="o">.</span><span class="n">setStyleSheet</span><span class="p">(</span><span class="n">style</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_statbar</span><span class="o">.</span><span class="n">showMessage</span><span class="p">(</span><span class="s1">&#39;Capturing image...&#39;</span><span class="p">)</span>
            <span class="n">img</span><span class="p">:</span><span class="n">Image</span><span class="o">.</span><span class="n">Image</span><span class="o">|</span><span class="kc">None</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getter_cameraImage</span><span class="p">()</span>
            <span class="n">coor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getter_coordinate</span><span class="p">()</span>

            <span class="c1"># Validate the inputs</span>
            <span class="k">if</span> <span class="n">img</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span> <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;No image captured from the camera&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">([</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">c</span><span class="p">,</span><span class="nb">float</span><span class="p">)</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">coor</span><span class="p">]):</span> <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Stage coordinates are not valid&#39;</span><span class="p">)</span>

            <span class="c1"># Save the image to the measurement image</span>
            <span class="n">meaImg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meaImgUnit</span>
            <span class="n">cal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getter_calibration</span><span class="p">()</span>
            <span class="n">meaImg</span><span class="o">.</span><span class="n">set_calibration_ImageMeasurement_Calibration</span><span class="p">(</span><span class="n">cal</span><span class="p">)</span>

            <span class="n">timestamp</span> <span class="o">=</span> <span class="n">get_timestamp_us_str</span><span class="p">()</span>

            <span class="n">meaImg</span><span class="o">.</span><span class="n">add_measurement</span><span class="p">(</span>
                <span class="n">timestamp</span><span class="o">=</span><span class="n">timestamp</span><span class="p">,</span>
                <span class="n">x_coor</span><span class="o">=</span><span class="n">coor</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="c1"># pyright: ignore[reportArgumentType] ; the check is done above to ensure coor is float</span>
                <span class="n">y_coor</span><span class="o">=</span><span class="n">coor</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="c1"># pyright: ignore[reportArgumentType] ; the check is done above to ensure coor is float</span>
                <span class="n">z_coor</span><span class="o">=</span><span class="n">coor</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="c1"># pyright: ignore[reportArgumentType] ; the check is done above to ensure coor is float</span>
                <span class="n">image</span><span class="o">=</span><span class="n">img</span>
            <span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_show_stitched_images</span><span class="p">()</span>

            <span class="n">style</span> <span class="o">=</span> <span class="s2">&quot;QStatusBar{background-color: </span><span class="si">%s</span><span class="s2">;}&quot;</span> <span class="o">%</span> <span class="s1">&#39;green&#39;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_statbar</span><span class="o">.</span><span class="n">setStyleSheet</span><span class="p">(</span><span class="n">style</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_statbar</span><span class="o">.</span><span class="n">showMessage</span><span class="p">(</span><span class="s1">&#39;Image captured successfully&#39;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_statbar</span><span class="o">.</span><span class="n">setStyleSheet</span><span class="p">(</span><span class="s2">&quot;QStatusBar{background-color: </span><span class="si">%s</span><span class="s2">;}&quot;</span> <span class="o">%</span> <span class="s1">&#39;red&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_statbar</span><span class="o">.</span><span class="n">showMessage</span><span class="p">(</span><span class="s1">&#39;Error capturing image: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;_capture_image error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="n">timer</span> <span class="o">=</span> <span class="n">QTimer</span><span class="p">()</span>
            <span class="n">timer</span><span class="o">.</span><span class="n">setSingleShot</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">timer</span><span class="o">.</span><span class="n">setInterval</span><span class="p">(</span><span class="mi">5000</span><span class="p">)</span>
            <span class="n">timer</span><span class="o">.</span><span class="n">timeout</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_statbar</span><span class="o">.</span><span class="n">clearMessage</span><span class="p">)</span>
            <span class="n">timer</span><span class="o">.</span><span class="n">timeout</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_statbar</span><span class="o">.</span><span class="n">setStyleSheet</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">))</span>
            <span class="n">timer</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_show_stitched_images</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Shows the stitched images on the canvas</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ori_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_btn_showImage</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_pause_video_feed</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_btn_showImage</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_btn_showImage</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_reset_btn_showImage</span><span class="p">(</span><span class="n">ori_text</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_btn_showImage</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s1">&#39;Show live feed&#39;</span><span class="p">)</span>

        <span class="n">meaImg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meaImgUnit</span>
        <span class="n">flg_lowResImg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_chk_lowres</span><span class="o">.</span><span class="n">isChecked</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sig_get_stitched_img</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">meaImg</span><span class="p">,</span><span class="n">flg_lowResImg</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_reset_btn_showImage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">:</span><span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Resets the show image button to its original state</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_btn_showImage</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_btn_showImage</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_btn_showImage</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_btn_showImage</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_show_stitched_images</span><span class="p">())</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_resume_video_feed</span><span class="p">()</span>

    <span class="nd">@Slot</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_setup_annotated_video_feed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">list_coors_mm</span><span class="p">:</span><span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">]]</span><span class="o">|</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets up the annotated video feed for calibration. If list_coors_mm is None,</span>
<span class="sd">        the annotated video feed will use the clicked coordinates on the canvas.</span>
<span class="sd">        (Refer to _show_annotated_video_feed for more details)</span>

<span class="sd">        Args:</span>
<span class="sd">            list_coors_mm (list): List of coordinates to be annotated on the canvas</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">list_coors_mm</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_anno_vid_custom_coors</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_anno_vid_list_coors_mm</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_anno_vid_annotate</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_anno_vid_custom_coors</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_anno_vid_list_coors_mm</span> <span class="o">=</span> <span class="n">list_coors_mm</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_anno_vid_annotate</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_show_annotated_video_feed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Displays the video feed on the canvas with annotations. For specific coordinates to be annotated,</span>
<span class="sd">        use _setup_annotated_video_feed to specify them up, which will be stored in the _anno_vid_list_coors_mm.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_flg_video_anno_pause</span><span class="o">.</span><span class="n">is_set</span><span class="p">():</span> <span class="k">return</span>

        <span class="n">img_ori</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getter_cameraImage</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_canvas_img</span><span class="o">.</span><span class="n">set_image</span><span class="p">(</span><span class="n">img_ori</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_anno_vid_custom_coors</span><span class="p">:</span> <span class="n">coor_list_mm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_anno_vid_list_coors_mm</span>
        <span class="k">else</span><span class="p">:</span> <span class="n">coor_list_mm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_canvas_img</span><span class="o">.</span><span class="n">get_clickCoordinates</span><span class="p">()</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">coor_list_mm</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span> <span class="k">return</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_anno_vid_annotate</span><span class="p">:</span> <span class="k">return</span>
            <span class="n">stage_coor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getter_coordinate</span><span class="p">()</span>
            <span class="n">low_res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_chk_lowres</span><span class="o">.</span><span class="n">isChecked</span><span class="p">()</span>

            <span class="k">assert</span> <span class="nb">all</span><span class="p">([</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">c</span><span class="p">,</span><span class="nb">float</span><span class="p">)</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">stage_coor</span><span class="p">]),</span> <span class="s1">&#39;Stage coordinates are not valid&#39;</span>

            <span class="n">list_coor_pixel</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_meaImgUnit</span><span class="o">.</span><span class="n">convert_stg2imgpt</span><span class="p">(</span><span class="n">coor_stage_mm</span><span class="o">=</span><span class="n">stage_coor</span><span class="p">,</span><span class="n">coor_point_mm</span><span class="o">=</span><span class="n">coor</span><span class="p">,</span> <span class="c1"># pyright: ignore[reportArgumentType]</span>
                <span class="n">correct_rot</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">low_res</span><span class="o">=</span><span class="n">low_res</span><span class="p">)</span> <span class="k">for</span> <span class="n">coor</span> <span class="ow">in</span> <span class="n">coor_list_mm</span><span class="p">]</span>
            <span class="n">list_coor_pixel</span> <span class="o">=</span> <span class="p">[(</span><span class="nb">float</span><span class="p">(</span><span class="n">coor</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span><span class="nb">float</span><span class="p">(</span><span class="n">coor</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span> <span class="k">for</span> <span class="n">coor</span> <span class="ow">in</span> <span class="n">list_coor_pixel</span><span class="p">]</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_canvas_img</span><span class="o">.</span><span class="n">annotate_canvas_multi</span><span class="p">(</span><span class="n">list_coor_pixel</span><span class="p">,</span><span class="n">scale</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">flg_removePreviousAnnotations</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Error annotating the image:&#39;</span><span class="p">,</span><span class="n">e</span><span class="p">)</span>

    <span class="nd">@Slot</span><span class="p">()</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_pause_video_feed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Pauses the video feed</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_flg_video_pause</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>

    <span class="nd">@Slot</span><span class="p">()</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_resume_video_feed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Resumes the video feed</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_flg_video_pause</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_initialise_finetune_calibration</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Finetunes the calibration manually using the spinbox widgets</span>
<span class="sd">        &quot;&quot;&quot;</span> 
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_pause_video_feed</span><span class="p">()</span>
            <span class="n">meaImg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meaImgUnit</span>
            <span class="n">current_cal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getter_calibration</span><span class="p">()</span>
            <span class="n">meaImg</span><span class="o">.</span><span class="n">set_calibration_ImageMeasurement_Calibration</span><span class="p">(</span><span class="n">current_cal</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">meaImg</span><span class="o">.</span><span class="n">check_calibration_exist</span><span class="p">():</span> <span class="n">qw</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="s1">&#39;Finetune calibration&#39;</span><span class="p">,</span><span class="s1">&#39;Calibration does not exist. Please perform calibration first.&#39;</span><span class="p">);</span> <span class="k">return</span>

        <span class="c1"># &gt; Parameters initialisation &lt;</span>
            <span class="c1"># Reset the values, enable the spinboxes, and set the button to save the calibration</span>
            <span class="k">try</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wdg_cal_adj</span><span class="o">.</span><span class="n">initialise_fineadjuster</span><span class="p">()</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span> <span class="n">qw</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="s1">&#39;Finetune calibration&#39;</span><span class="p">,</span><span class="s1">&#39;Error initialising fineadjuster: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">e</span><span class="p">));</span> <span class="k">return</span>

        <span class="c1"># &gt; Tracking initialisation &lt;</span>
            <span class="c1"># Ask the user to pick some points to track</span>
            <span class="n">stage_coor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getter_coordinate</span><span class="p">()</span>
            <span class="n">img</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getter_cameraImage</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_canvas_img</span><span class="o">.</span><span class="n">set_image</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_statbar</span><span class="o">.</span><span class="n">setStyleSheet</span><span class="p">(</span><span class="s2">&quot;QStatusBar{background-color: </span><span class="si">%s</span><span class="s2">;}&quot;</span> <span class="o">%</span> <span class="s1">&#39;yellow&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_statbar</span><span class="o">.</span><span class="n">showMessage</span><span class="p">(</span><span class="s1">&#39;Click on the features to be tracked and click &quot;Finish feature selection&quot;. Right-click to clear the current selections.&#39;</span><span class="p">)</span>
            <span class="n">list_coors_pixel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_canvas_img</span><span class="o">.</span><span class="n">start_recordClicks</span><span class="p">()</span>

            <span class="k">try</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_worker_cal</span><span class="o">.</span><span class="n">sig_done_picking_points_finetune</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
            <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span> <span class="k">pass</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_worker_cal</span><span class="o">.</span><span class="n">sig_done_picking_points_finetune</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
                <span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_perform_finetune_calibration</span><span class="p">(</span>
                    <span class="n">meaImg</span><span class="p">,</span> <span class="n">stage_coor</span><span class="p">,</span> <span class="n">list_coors_pixel</span> <span class="c1"># pyright: ignore[reportArgumentType] ; the error will be catched elsewhere, and is not critical here</span>
                <span class="p">)</span>
            <span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_wdg_cal_adj</span><span class="o">.</span><span class="n">config_finetune_calibration_button</span><span class="p">(</span>
                <span class="n">callback</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_worker_cal</span><span class="o">.</span><span class="n">event_operationDone_finetune</span><span class="o">.</span><span class="n">set</span><span class="p">,</span>
                <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Finish feature selection&#39;</span><span class="p">,</span><span class="n">enabled</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">sig_perform_finetune_calibration</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">qw</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="s1">&#39;Finetune calibration&#39;</span><span class="p">,</span><span class="s1">&#39;Error initialising finetune calibration: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_resume_video_feed</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_reset_status_bar</span><span class="p">(</span><span class="n">after_sec</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_wdg_cal_adj</span><span class="o">.</span><span class="n">config_finetune_calibration_button</span><span class="p">(</span><span class="n">callback</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_initialise_finetune_calibration</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_perform_finetune_calibration</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">meaImg</span><span class="p">:</span> <span class="n">MeaImg_Unit</span><span class="p">,</span> <span class="n">stage_coor</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">],</span>
            <span class="n">list_coors_pixel</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Performs the finetuning of the calibration using the selected features</span>

<span class="sd">        Args:</span>
<span class="sd">            meaImg (MeaImg_Unit): Measurement image unit of which the calibration will be used for the finetuning process</span>
<span class="sd">            stage_coor (tuple[float, float, float]): Stage coordinate</span>
<span class="sd">            list_coors_pixel (list[tuple[float, float]]): List of pixel coordinates of the selected features</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">list_coors_mm</span> <span class="o">=</span> <span class="p">[</span><span class="n">meaImg</span><span class="o">.</span><span class="n">convert_imgpt2stg</span><span class="p">(</span><span class="n">stage_coor</span><span class="p">,</span><span class="n">coor</span><span class="p">,</span><span class="kc">False</span><span class="p">,</span><span class="n">low_res</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_chk_lowres</span><span class="o">.</span><span class="n">isChecked</span><span class="p">())</span> <span class="k">for</span> <span class="n">coor</span> <span class="ow">in</span> <span class="n">list_coors_pixel</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_canvas_img</span><span class="o">.</span><span class="n">stop_recordClicks</span><span class="p">()</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_statbar</span><span class="o">.</span><span class="n">setStyleSheet</span><span class="p">(</span><span class="s2">&quot;QStatusBar{background-color: </span><span class="si">%s</span><span class="s2">;}&quot;</span> <span class="o">%</span> <span class="s1">&#39;yellow&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_statbar</span><span class="o">.</span><span class="n">showMessage</span><span class="p">(</span><span class="s1">&#39;Finetune the calibration using the spinboxes and move the stage around to monitor the effect&#39;</span><span class="p">)</span>

            <span class="c1"># &gt; Calibration finetuning by video feed &lt;</span>
                <span class="c1"># Enable the spinboxes and start the video feed</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_wdg_cal_adj</span><span class="o">.</span><span class="n">enable_finetuneCalibration_widgets</span><span class="p">(</span>
                <span class="n">callback</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_wdg_cal_adj</span><span class="o">.</span><span class="n">apply_temp_fineadjustment</span><span class="p">,</span>
                <span class="n">readonly</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

            <span class="c1"># &gt; Set up the annotated video feed and the widgets to finalise the finetuning &lt;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_flg_video_pause</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_flg_video_anno_pause</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_setup_annotated_video_feed</span><span class="p">(</span><span class="n">list_coors_mm</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_wdg_cal_adj</span><span class="o">.</span><span class="n">config_finetune_calibration_button</span><span class="p">(</span>
                <span class="n">callback</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_worker_cal</span><span class="o">.</span><span class="n">event_operationDone_finetune</span><span class="o">.</span><span class="n">set</span><span class="p">,</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;End finetune calibration&#39;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">qw</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="s1">&#39;Error in finetune calibration&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_statbar</span><span class="o">.</span><span class="n">setStyleSheet</span><span class="p">(</span><span class="s2">&quot;QStatusBar{background-color: </span><span class="si">%s</span><span class="s2">;}&quot;</span> <span class="o">%</span> <span class="s1">&#39;red&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_statbar</span><span class="o">.</span><span class="n">showMessage</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Error in finetuning: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_reset_status_bar</span><span class="p">(</span><span class="n">after_sec</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_wdg_cal_adj</span><span class="o">.</span><span class="n">config_finetune_calibration_button</span><span class="p">(</span><span class="n">callback</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_initialise_finetune_calibration</span><span class="p">)</span>

    <span class="nd">@Slot</span><span class="p">()</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_finalise_finetune_calibration</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Finalise the calibration finetuning</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_flg_video_anno_pause</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_resume_video_feed</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_wdg_cal_adj</span><span class="o">.</span><span class="n">finalise_fineadjustment</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_statbar</span><span class="o">.</span><span class="n">setStyleSheet</span><span class="p">(</span><span class="s2">&quot;QStatusBar{background-color: </span><span class="si">%s</span><span class="s2">;}&quot;</span> <span class="o">%</span> <span class="s1">&#39;green&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_statbar</span><span class="o">.</span><span class="n">showMessage</span><span class="p">(</span><span class="s1">&#39;Calibration finetuning finished: Please save the calibration file manually if required&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_reset_status_bar</span><span class="p">(</span><span class="n">after_sec</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">qw</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="s1">&#39;Error in finetune calibration&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_statbar</span><span class="o">.</span><span class="n">setStyleSheet</span><span class="p">(</span><span class="s2">&quot;QStatusBar{background-color: </span><span class="si">%s</span><span class="s2">;}&quot;</span> <span class="o">%</span> <span class="s1">&#39;red&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_statbar</span><span class="o">.</span><span class="n">showMessage</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Error in finetuning: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_wdg_cal_adj</span><span class="o">.</span><span class="n">config_finetune_calibration_button</span><span class="p">(</span><span class="n">callback</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_initialise_finetune_calibration</span><span class="p">)</span>

    <span class="nd">@Slot</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_calibration_button_setup_duringCalibration</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">btn_text</span><span class="p">:</span><span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets up the calibration button to perform the state capture operation (image and coordinate,</span>
<span class="sd">        handled by the worker))</span>

<span class="sd">        Args:</span>
<span class="sd">            msg (str): Message to display on the status bar</span>
<span class="sd">            btn_text (str): Text to display on the button</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">callback</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_worker_cal</span><span class="o">.</span><span class="n">event_operationDone</span><span class="o">.</span><span class="n">set</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_wdg_cal_adj</span><span class="o">.</span><span class="n">config_calibrate_button</span><span class="p">(</span><span class="n">callback</span><span class="o">=</span><span class="n">callback</span><span class="p">,</span><span class="n">text</span><span class="o">=</span><span class="n">btn_text</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_statbar</span><span class="o">.</span><span class="n">setStyleSheet</span><span class="p">(</span><span class="s2">&quot;QStatusBar{background-color: </span><span class="si">%s</span><span class="s2">;}&quot;</span> <span class="o">%</span> <span class="s1">&#39;yellow&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_statbar</span><span class="o">.</span><span class="n">showMessage</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

    <span class="nd">@Slot</span><span class="p">(</span><span class="n">MeaImg_Unit</span><span class="p">)</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_save_calibration_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">meaImg</span><span class="p">:</span><span class="n">MeaImg_Unit</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Saves the calibration file from the measurement image unit</span>

<span class="sd">        Args:</span>
<span class="sd">            meaImg (MeaImg_Unit): Measurement image unit containing the calibration to be saved</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_meaImgUnit</span> <span class="o">=</span> <span class="n">meaImg</span>
        <span class="n">ans</span> <span class="o">=</span> <span class="n">qw</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">question</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;Save calibration file&#39;</span><span class="p">,</span> <span class="s1">&#39;Do you want to save the calibration file now?&#39;</span><span class="p">,</span>
            <span class="n">qw</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Yes</span> <span class="o">|</span> <span class="n">qw</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">No</span><span class="p">,</span> <span class="n">qw</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Yes</span> <span class="c1"># pyright: ignore[reportAttributeAccessIssue] ; QMessageBox.Yes, No exist</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">ans</span> <span class="o">!=</span> <span class="n">qw</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Yes</span><span class="p">:</span> <span class="c1"># pyright: ignore[reportAttributeAccessIssue] ; QMessageBox.Yes exists</span>
            <span class="n">button_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_btn_save</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
            <span class="n">qw</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">information</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="s1">&#39;Warning&#39;</span><span class="p">,</span><span class="sa">f</span><span class="s1">&#39;The calibration file was not saved, it can still be saved manually using the &quot;</span><span class="si">{</span><span class="n">button_text</span><span class="si">}</span><span class="s1">&quot; button.&quot;&#39;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="n">savepath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">LibraryConfigEnum</span><span class="o">.</span><span class="n">OBJECTIVE_CALIBRATION_DIR</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
        <span class="n">savepath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">savepath</span><span class="p">,</span> <span class="n">meaImg</span><span class="o">.</span><span class="n">get_ImageMeasurement_Calibration</span><span class="p">()</span><span class="o">.</span><span class="n">id</span> <span class="o">+</span> <span class="s1">&#39;.json&#39;</span><span class="p">)</span>

        <span class="n">MeaImg_Handler</span><span class="p">()</span><span class="o">.</span><span class="n">save_calibration_json_from_ImgMea</span><span class="p">(</span><span class="n">meaImg</span><span class="p">,</span><span class="n">savepath</span><span class="p">)</span>
        <span class="n">qw</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">information</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="s1">&#39;Calibration saved&#39;</span><span class="p">,</span><span class="s1">&#39;Calibration file saved successfully&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sig_saved_calibration</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span>

    <span class="nd">@Slot</span><span class="p">()</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_set_internal_meaImgUnit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">imgunit</span><span class="p">:</span><span class="n">MeaImg_Unit</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the MeaIng_Unit being stored internally (e.g., for the pixel -&gt; mm coordinate conversion)</span>

<span class="sd">        Args:</span>
<span class="sd">            imgunit (MeaImg_Unit): The image unit to be stored</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_meaImgUnit</span> <span class="o">=</span> <span class="n">imgunit</span>

    <span class="nd">@Slot</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_handle_calibration_finished</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span><span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Handles the calibration finished signal</span>

<span class="sd">        Args:</span>
<span class="sd">            message (str): Message to display on the status bar</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">colour</span> <span class="o">=</span> <span class="s1">&#39;green&#39;</span> <span class="k">if</span> <span class="n">message</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_worker_cal</span><span class="o">.</span><span class="n">msg_cal_success</span><span class="p">)</span> <span class="k">else</span> <span class="s1">&#39;red&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_statbar</span><span class="o">.</span><span class="n">setStyleSheet</span><span class="p">(</span><span class="s2">&quot;QStatusBar{background-color: </span><span class="si">%s</span><span class="s2">;}&quot;</span> <span class="o">%</span> <span class="n">colour</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_statbar</span><span class="o">.</span><span class="n">showMessage</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_reset_status_bar</span><span class="p">(</span><span class="n">after_sec</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

        <span class="c1"># Reset the button state</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_wdg_cal_adj</span><span class="o">.</span><span class="n">config_calibrate_button</span><span class="p">(</span><span class="n">callback</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_start_calibration</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_start_calibration</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Perform the calibration to:</span>
<span class="sd">            - Calculate the mm/pixel ratio</span>
<span class="sd">            - Measure the laser coordinate offset of the image coordinate from the stage coordinate</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pause_video_feed</span><span class="p">()</span>

        <span class="n">timer_vid_anno</span> <span class="o">=</span> <span class="n">QTimer</span><span class="p">()</span>
        <span class="n">timer_vid_anno</span><span class="o">.</span><span class="n">setInterval</span><span class="p">(</span><span class="mi">1000</span><span class="o">//</span><span class="bp">self</span><span class="o">.</span><span class="n">_videoRefreshRate</span><span class="p">)</span>
        <span class="n">timer_vid_anno</span><span class="o">.</span><span class="n">timeout</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_show_annotated_video_feed</span><span class="p">())</span>
        <span class="n">timer_vid_anno</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_showHints</span><span class="p">:</span>
            <span class="n">message</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_worker_cal</span><span class="o">.</span><span class="n">lines</span><span class="p">)</span>
            <span class="n">qw</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">information</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="s1">&#39;Calibration procedure&#39;</span><span class="p">,</span><span class="n">message</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_setup_annotated_video_feed</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sig_perform_calibration</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_reset_status_bar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">after_sec</span><span class="p">:</span><span class="nb">float</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Resets the status bar after a delay</span>

<span class="sd">        Args:</span>
<span class="sd">            after_sec (float): Delay in seconds before resetting the status bar</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">after_sec</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_statbar</span><span class="o">.</span><span class="n">clearMessage</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_statbar</span><span class="o">.</span><span class="n">setStyleSheet</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">timer</span> <span class="o">=</span> <span class="n">QTimer</span><span class="p">()</span>
            <span class="n">timer</span><span class="o">.</span><span class="n">setSingleShot</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">timer</span><span class="o">.</span><span class="n">setInterval</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">after_sec</span><span class="o">*</span><span class="mi">1000</span><span class="p">))</span>
            <span class="n">timer</span><span class="o">.</span><span class="n">timeout</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_statbar</span><span class="o">.</span><span class="n">clearMessage</span><span class="p">)</span>
            <span class="n">timer</span><span class="o">.</span><span class="n">timeout</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_statbar</span><span class="o">.</span><span class="n">setStyleSheet</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">))</span>
            <span class="n">timer</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
              </details>



<div class="doc doc-children">










<div class="doc doc-object doc-function">


<h3 id="iris.gui.image_calibration.objective_calibration.Wdg_Calibration.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">processor</span><span class="p">,</span> <span class="n">dataHub_img</span><span class="p">,</span> <span class="n">dataHub_imgcal</span><span class="p">,</span> <span class="n">getter_coor</span><span class="p">,</span> <span class="n">getter_cameraImage</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">



<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>parent</code>
            </td>
            <td>
                  <code><span title="iris.utils.general.qw.QWidget">QWidget</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Main frame to put the sub-frame in</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>processor</code>
            </td>
            <td>
                  <code><span title="multiprocessing.pool.Pool">Pool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Multiprocessing pool for parallel processing</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>dataHub_img</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Wdg_DataHub_Image (iris.gui.dataHub_MeaImg.Wdg_DataHub_Image)" href="../../dataHub_MeaImg/#iris.gui.dataHub_MeaImg.Wdg_DataHub_Image">Wdg_DataHub_Image</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>DataHub for the measurement images</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>dataHub_imgcal</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Wdg_DataHub_ImgCal (iris.gui.dataHub_MeaImg.Wdg_DataHub_ImgCal)" href="../../dataHub_MeaImg/#iris.gui.dataHub_MeaImg.Wdg_DataHub_ImgCal">Wdg_DataHub_ImgCal</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>DataHub for the image calibrations</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>getter_coor</code>
            </td>
            <td>
                  <code><span title="iris.utils.general.Callable">Callable</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Callable to get the stage coordinate</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>getter_cameraImage</code>
            </td>
            <td>
                  <code><span title="iris.utils.general.Callable">Callable</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Callable to get the camera image</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/gui/image_calibration/objective_calibration.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
             <span class="n">parent</span><span class="p">:</span><span class="n">qw</span><span class="o">.</span><span class="n">QWidget</span><span class="p">,</span>
             <span class="n">processor</span><span class="p">:</span><span class="n">mpp</span><span class="o">.</span><span class="n">Pool</span><span class="p">,</span>
             <span class="n">dataHub_img</span><span class="p">:</span><span class="n">Wdg_DataHub_Image</span><span class="p">,</span>
             <span class="n">dataHub_imgcal</span><span class="p">:</span><span class="n">Wdg_DataHub_ImgCal</span><span class="p">,</span>
             <span class="n">getter_coor</span><span class="p">:</span><span class="n">Callable</span><span class="p">[[],</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="o">|</span><span class="kc">None</span><span class="p">,</span><span class="nb">float</span><span class="o">|</span><span class="kc">None</span><span class="p">,</span><span class="nb">float</span><span class="o">|</span><span class="kc">None</span><span class="p">]],</span>
             <span class="n">getter_cameraImage</span><span class="p">:</span><span class="n">Callable</span><span class="p">[[],</span><span class="n">Image</span><span class="o">.</span><span class="n">Image</span><span class="o">|</span><span class="kc">None</span><span class="p">],):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Args:</span>
<span class="sd">        parent (qw.QWidget): Main frame to put the sub-frame in</span>
<span class="sd">        processor (mpp.Pool): Multiprocessing pool for parallel processing</span>
<span class="sd">        dataHub_img (Wdg_DataHub_Image): DataHub for the measurement images</span>
<span class="sd">        dataHub_imgcal (Wdg_DataHub_ImgCal): DataHub for the image calibrations</span>
<span class="sd">        getter_coor (Callable): Callable to get the stage coordinate</span>
<span class="sd">        getter_cameraImage (Callable): Callable to get the camera image</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_processor</span> <span class="o">=</span> <span class="n">processor</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_getter_cameraImage</span> <span class="o">=</span> <span class="n">getter_cameraImage</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_getter_coordinate</span> <span class="o">=</span> <span class="n">getter_coor</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_dataHub_img</span> <span class="o">=</span> <span class="n">dataHub_img</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_dataHub_imgcal</span> <span class="o">=</span> <span class="n">dataHub_imgcal</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_showHints</span> <span class="o">=</span> <span class="n">AppPlotEnum</span><span class="o">.</span><span class="n">IMGCAL_SHOWHINTS</span><span class="o">.</span><span class="n">value</span>

<span class="c1"># &gt;&gt;&gt; Main parameters &lt;&lt;&lt;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_getter_calibration</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dataHub_imgcal</span><span class="o">.</span><span class="n">get_selected_calibration</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_meaImgUnit</span> <span class="o">=</span> <span class="n">MeaImg_Unit</span><span class="p">(</span>
        <span class="n">unit_name</span><span class="o">=</span><span class="s1">&#39;Calibration&#39;</span><span class="p">,</span>
        <span class="n">calibration</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_getter_calibration</span><span class="p">(),</span>
        <span class="n">reconstruct</span><span class="o">=</span><span class="kc">True</span>
    <span class="p">)</span>

<span class="c1"># &gt;&gt;&gt; Main widget setup &lt;&lt;&lt;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_widget</span> <span class="o">=</span> <span class="n">Calibration_Main_Design</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
    <span class="n">lyt</span> <span class="o">=</span> <span class="n">qw</span><span class="o">.</span><span class="n">QVBoxLayout</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
    <span class="n">lyt</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_widget</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">lyt</span><span class="p">)</span>
    <span class="n">wdg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_widget</span>

    <span class="c1"># Statusbar setup</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_statbar</span> <span class="o">=</span> <span class="n">qw</span><span class="o">.</span><span class="n">QStatusBar</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
    <span class="n">lyt</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_statbar</span><span class="p">)</span>

    <span class="n">lbl_statbar</span> <span class="o">=</span> <span class="n">qw</span><span class="o">.</span><span class="n">QLabel</span><span class="p">(</span><span class="s1">&#39;Ready&#39;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_statbar</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">lbl_statbar</span><span class="p">)</span>

<span class="c1"># &gt;&gt;&gt; Display widget &lt;&lt;&lt;</span>
    <span class="c1"># Canvas to display the image and button to show current image</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_canvas_img</span> <span class="o">=</span> <span class="n">Canvas_Image_Annotations</span><span class="p">(</span><span class="n">wdg</span><span class="o">.</span><span class="n">wdg_holder_canvas</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_chk_lowres</span> <span class="o">=</span> <span class="n">wdg</span><span class="o">.</span><span class="n">chk_lres</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_btn_showImage</span> <span class="o">=</span> <span class="n">wdg</span><span class="o">.</span><span class="n">btn_showimage</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_btn_showLiveFeed</span> <span class="o">=</span> <span class="n">wdg</span><span class="o">.</span><span class="n">btn_refresh</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_btn_showLiveFeed</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_btn_showImage</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">_show_stitched_images</span><span class="p">())</span>
    <span class="c1"># self._btn_showLiveFeed.clicked.connect(lambda:self.initialise_auto_updaters())</span>

<span class="c1"># &gt;&gt;&gt; Capture widgets &lt;&lt;&lt;</span>
    <span class="c1"># Buttons for image capture</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_btn_capture</span> <span class="o">=</span> <span class="n">wdg</span><span class="o">.</span><span class="n">btn_capture</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_btn_resetCapture</span> <span class="o">=</span> <span class="n">wdg</span><span class="o">.</span><span class="n">btn_resetcapture</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_btn_save</span> <span class="o">=</span> <span class="n">wdg</span><span class="o">.</span><span class="n">btn_savecaptured</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_btn_capture</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">_capture_image</span><span class="p">())</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_btn_resetCapture</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">_reset_capture</span><span class="p">())</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_btn_save</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">_save_image</span><span class="p">())</span>

<span class="c1"># &gt;&gt;&gt; Calibration adjustment &lt;&lt;&lt;</span>
    <span class="c1"># Sub-frame for calibration adjustment</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_wdg_cal_adj</span><span class="o">=</span><span class="n">Wdg_Calibration_Finetuning</span><span class="p">(</span>
        <span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
        <span class="n">processor</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_processor</span><span class="p">,</span>
        <span class="n">imgUnit_getter</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">_meaImgUnit</span>
        <span class="p">)</span>
    <span class="n">wdg</span><span class="o">.</span><span class="n">lyt_holder_calibration_controls</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_wdg_cal_adj</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_wdg_cal_adj</span><span class="o">.</span><span class="n">config_finetune_calibration_button</span><span class="p">(</span><span class="n">callback</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_initialise_finetune_calibration</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_wdg_cal_adj</span><span class="o">.</span><span class="n">config_calibrate_button</span><span class="p">(</span><span class="n">callback</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_start_calibration</span><span class="p">)</span>

<span class="c1"># &gt;&gt;&gt; Display parameters &lt;&lt;&lt;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_videoRefreshRate</span> <span class="o">=</span> <span class="mi">25</span>    <span class="c1"># Refresh rate of the video feed in Hz</span>

<span class="c1"># Thread for a live video feed</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_flg_video_pause</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Event</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_timer_videofeed</span> <span class="o">=</span> <span class="n">QTimer</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_timer_videofeed</span><span class="o">.</span><span class="n">setInterval</span><span class="p">(</span><span class="mi">1000</span><span class="o">//</span><span class="bp">self</span><span class="o">.</span><span class="n">_videoRefreshRate</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_timer_videofeed</span><span class="o">.</span><span class="n">timeout</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_show_camera_feed</span><span class="p">())</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">destroyed</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_timer_videofeed</span><span class="o">.</span><span class="n">stop</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_timer_videofeed</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

<span class="c1"># Thread for an annotated video feed during calibration</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_flg_video_anno_pause</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Event</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_anno_vid_custom_coors</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_anno_vid_list_coors_mm</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_anno_vid_annotate</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_timer_videofeed_anno</span> <span class="o">=</span> <span class="n">QTimer</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_timer_videofeed_anno</span><span class="o">.</span><span class="n">setInterval</span><span class="p">(</span><span class="mi">1000</span><span class="o">//</span><span class="bp">self</span><span class="o">.</span><span class="n">_videoRefreshRate</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_timer_videofeed_anno</span><span class="o">.</span><span class="n">timeout</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_show_annotated_video_feed</span><span class="p">())</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">destroyed</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_timer_videofeed_anno</span><span class="o">.</span><span class="n">stop</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_timer_videofeed_anno</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_init_worker</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="iris.gui.image_calibration.objective_calibration.Wdg_Calibration_Finetuning" class="doc doc-heading">
            <code>Wdg_Calibration_Finetuning</code>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="iris.utils.general.qw.QWidget">QWidget</span></code></p>



        <p>Sub-frame for calibration adjustment to be used in the ROI_definition_controller</p>








              <details class="mkdocstrings-source">
                <summary>Source code in <code>iris/gui/image_calibration/objective_calibration.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 823</span>
<span class="normal"> 824</span>
<span class="normal"> 825</span>
<span class="normal"> 826</span>
<span class="normal"> 827</span>
<span class="normal"> 828</span>
<span class="normal"> 829</span>
<span class="normal"> 830</span>
<span class="normal"> 831</span>
<span class="normal"> 832</span>
<span class="normal"> 833</span>
<span class="normal"> 834</span>
<span class="normal"> 835</span>
<span class="normal"> 836</span>
<span class="normal"> 837</span>
<span class="normal"> 838</span>
<span class="normal"> 839</span>
<span class="normal"> 840</span>
<span class="normal"> 841</span>
<span class="normal"> 842</span>
<span class="normal"> 843</span>
<span class="normal"> 844</span>
<span class="normal"> 845</span>
<span class="normal"> 846</span>
<span class="normal"> 847</span>
<span class="normal"> 848</span>
<span class="normal"> 849</span>
<span class="normal"> 850</span>
<span class="normal"> 851</span>
<span class="normal"> 852</span>
<span class="normal"> 853</span>
<span class="normal"> 854</span>
<span class="normal"> 855</span>
<span class="normal"> 856</span>
<span class="normal"> 857</span>
<span class="normal"> 858</span>
<span class="normal"> 859</span>
<span class="normal"> 860</span>
<span class="normal"> 861</span>
<span class="normal"> 862</span>
<span class="normal"> 863</span>
<span class="normal"> 864</span>
<span class="normal"> 865</span>
<span class="normal"> 866</span>
<span class="normal"> 867</span>
<span class="normal"> 868</span>
<span class="normal"> 869</span>
<span class="normal"> 870</span>
<span class="normal"> 871</span>
<span class="normal"> 872</span>
<span class="normal"> 873</span>
<span class="normal"> 874</span>
<span class="normal"> 875</span>
<span class="normal"> 876</span>
<span class="normal"> 877</span>
<span class="normal"> 878</span>
<span class="normal"> 879</span>
<span class="normal"> 880</span>
<span class="normal"> 881</span>
<span class="normal"> 882</span>
<span class="normal"> 883</span>
<span class="normal"> 884</span>
<span class="normal"> 885</span>
<span class="normal"> 886</span>
<span class="normal"> 887</span>
<span class="normal"> 888</span>
<span class="normal"> 889</span>
<span class="normal"> 890</span>
<span class="normal"> 891</span>
<span class="normal"> 892</span>
<span class="normal"> 893</span>
<span class="normal"> 894</span>
<span class="normal"> 895</span>
<span class="normal"> 896</span>
<span class="normal"> 897</span>
<span class="normal"> 898</span>
<span class="normal"> 899</span>
<span class="normal"> 900</span>
<span class="normal"> 901</span>
<span class="normal"> 902</span>
<span class="normal"> 903</span>
<span class="normal"> 904</span>
<span class="normal"> 905</span>
<span class="normal"> 906</span>
<span class="normal"> 907</span>
<span class="normal"> 908</span>
<span class="normal"> 909</span>
<span class="normal"> 910</span>
<span class="normal"> 911</span>
<span class="normal"> 912</span>
<span class="normal"> 913</span>
<span class="normal"> 914</span>
<span class="normal"> 915</span>
<span class="normal"> 916</span>
<span class="normal"> 917</span>
<span class="normal"> 918</span>
<span class="normal"> 919</span>
<span class="normal"> 920</span>
<span class="normal"> 921</span>
<span class="normal"> 922</span>
<span class="normal"> 923</span>
<span class="normal"> 924</span>
<span class="normal"> 925</span>
<span class="normal"> 926</span>
<span class="normal"> 927</span>
<span class="normal"> 928</span>
<span class="normal"> 929</span>
<span class="normal"> 930</span>
<span class="normal"> 931</span>
<span class="normal"> 932</span>
<span class="normal"> 933</span>
<span class="normal"> 934</span>
<span class="normal"> 935</span>
<span class="normal"> 936</span>
<span class="normal"> 937</span>
<span class="normal"> 938</span>
<span class="normal"> 939</span>
<span class="normal"> 940</span>
<span class="normal"> 941</span>
<span class="normal"> 942</span>
<span class="normal"> 943</span>
<span class="normal"> 944</span>
<span class="normal"> 945</span>
<span class="normal"> 946</span>
<span class="normal"> 947</span>
<span class="normal"> 948</span>
<span class="normal"> 949</span>
<span class="normal"> 950</span>
<span class="normal"> 951</span>
<span class="normal"> 952</span>
<span class="normal"> 953</span>
<span class="normal"> 954</span>
<span class="normal"> 955</span>
<span class="normal"> 956</span>
<span class="normal"> 957</span>
<span class="normal"> 958</span>
<span class="normal"> 959</span>
<span class="normal"> 960</span>
<span class="normal"> 961</span>
<span class="normal"> 962</span>
<span class="normal"> 963</span>
<span class="normal"> 964</span>
<span class="normal"> 965</span>
<span class="normal"> 966</span>
<span class="normal"> 967</span>
<span class="normal"> 968</span>
<span class="normal"> 969</span>
<span class="normal"> 970</span>
<span class="normal"> 971</span>
<span class="normal"> 972</span>
<span class="normal"> 973</span>
<span class="normal"> 974</span>
<span class="normal"> 975</span>
<span class="normal"> 976</span>
<span class="normal"> 977</span>
<span class="normal"> 978</span>
<span class="normal"> 979</span>
<span class="normal"> 980</span>
<span class="normal"> 981</span>
<span class="normal"> 982</span>
<span class="normal"> 983</span>
<span class="normal"> 984</span>
<span class="normal"> 985</span>
<span class="normal"> 986</span>
<span class="normal"> 987</span>
<span class="normal"> 988</span>
<span class="normal"> 989</span>
<span class="normal"> 990</span>
<span class="normal"> 991</span>
<span class="normal"> 992</span>
<span class="normal"> 993</span>
<span class="normal"> 994</span>
<span class="normal"> 995</span>
<span class="normal"> 996</span>
<span class="normal"> 997</span>
<span class="normal"> 998</span>
<span class="normal"> 999</span>
<span class="normal">1000</span>
<span class="normal">1001</span>
<span class="normal">1002</span>
<span class="normal">1003</span>
<span class="normal">1004</span>
<span class="normal">1005</span>
<span class="normal">1006</span>
<span class="normal">1007</span>
<span class="normal">1008</span>
<span class="normal">1009</span>
<span class="normal">1010</span>
<span class="normal">1011</span>
<span class="normal">1012</span>
<span class="normal">1013</span>
<span class="normal">1014</span>
<span class="normal">1015</span>
<span class="normal">1016</span>
<span class="normal">1017</span>
<span class="normal">1018</span>
<span class="normal">1019</span>
<span class="normal">1020</span>
<span class="normal">1021</span>
<span class="normal">1022</span>
<span class="normal">1023</span>
<span class="normal">1024</span>
<span class="normal">1025</span>
<span class="normal">1026</span>
<span class="normal">1027</span>
<span class="normal">1028</span>
<span class="normal">1029</span>
<span class="normal">1030</span>
<span class="normal">1031</span>
<span class="normal">1032</span>
<span class="normal">1033</span>
<span class="normal">1034</span>
<span class="normal">1035</span>
<span class="normal">1036</span>
<span class="normal">1037</span>
<span class="normal">1038</span>
<span class="normal">1039</span>
<span class="normal">1040</span>
<span class="normal">1041</span>
<span class="normal">1042</span>
<span class="normal">1043</span>
<span class="normal">1044</span>
<span class="normal">1045</span>
<span class="normal">1046</span>
<span class="normal">1047</span>
<span class="normal">1048</span>
<span class="normal">1049</span>
<span class="normal">1050</span>
<span class="normal">1051</span>
<span class="normal">1052</span>
<span class="normal">1053</span>
<span class="normal">1054</span>
<span class="normal">1055</span>
<span class="normal">1056</span>
<span class="normal">1057</span>
<span class="normal">1058</span>
<span class="normal">1059</span>
<span class="normal">1060</span>
<span class="normal">1061</span>
<span class="normal">1062</span>
<span class="normal">1063</span>
<span class="normal">1064</span>
<span class="normal">1065</span>
<span class="normal">1066</span>
<span class="normal">1067</span>
<span class="normal">1068</span>
<span class="normal">1069</span>
<span class="normal">1070</span>
<span class="normal">1071</span>
<span class="normal">1072</span>
<span class="normal">1073</span>
<span class="normal">1074</span>
<span class="normal">1075</span>
<span class="normal">1076</span>
<span class="normal">1077</span>
<span class="normal">1078</span>
<span class="normal">1079</span>
<span class="normal">1080</span>
<span class="normal">1081</span>
<span class="normal">1082</span>
<span class="normal">1083</span>
<span class="normal">1084</span>
<span class="normal">1085</span>
<span class="normal">1086</span>
<span class="normal">1087</span>
<span class="normal">1088</span>
<span class="normal">1089</span>
<span class="normal">1090</span>
<span class="normal">1091</span>
<span class="normal">1092</span>
<span class="normal">1093</span>
<span class="normal">1094</span>
<span class="normal">1095</span>
<span class="normal">1096</span>
<span class="normal">1097</span>
<span class="normal">1098</span>
<span class="normal">1099</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Wdg_Calibration_Finetuning</span><span class="p">(</span><span class="n">qw</span><span class="o">.</span><span class="n">QWidget</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sub-frame for calibration adjustment to be used in the ROI_definition_controller</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">processor</span><span class="p">:</span><span class="n">mpp</span><span class="o">.</span><span class="n">Pool</span><span class="p">,</span> <span class="n">imgUnit_getter</span><span class="p">:</span><span class="n">Callable</span><span class="p">[[],</span><span class="n">MeaImg_Unit</span><span class="o">|</span><span class="kc">None</span><span class="p">],</span>
        <span class="n">getter_flipx</span><span class="p">:</span><span class="n">Callable</span><span class="p">[[],</span><span class="nb">bool</span><span class="p">]</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span><span class="kc">False</span><span class="p">,</span> <span class="n">getter_flipy</span><span class="p">:</span><span class="n">Callable</span><span class="p">[[],</span><span class="nb">bool</span><span class="p">]</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            main (tk.Frame): Main frame to put the sub-frame in</span>
<span class="sd">            imgUnit_getter (Callable): Callable to get the measurement image</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_processor</span> <span class="o">=</span> <span class="n">processor</span>

    <span class="c1"># &gt;&gt;&gt; Image file handler &lt;&lt;&lt;</span>
        <span class="k">assert</span> <span class="nb">callable</span><span class="p">(</span><span class="n">imgUnit_getter</span><span class="p">),</span> <span class="s1">&#39;Measurement image getter must be a callable&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_getter_measurement_image</span> <span class="o">=</span> <span class="n">imgUnit_getter</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_getter_flipx</span> <span class="o">=</span> <span class="n">getter_flipx</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_getter_flipy</span> <span class="o">=</span> <span class="n">getter_flipy</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_handler_img</span> <span class="o">=</span> <span class="n">MeaImg_Handler</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_lastDirPath</span> <span class="o">=</span> <span class="n">SaveParamsEnum</span><span class="o">.</span><span class="n">DEFAULT_SAVE_PATH</span><span class="o">.</span><span class="n">value</span>

    <span class="c1"># &gt;&gt; Main widget setup &lt;&lt;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_widget</span> <span class="o">=</span> <span class="n">Calibration_Finetune_Design</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">lyt</span> <span class="o">=</span> <span class="n">qw</span><span class="o">.</span><span class="n">QVBoxLayout</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">lyt</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_widget</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">lyt</span><span class="p">)</span>
        <span class="n">wdg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_widget</span>

    <span class="c1"># &gt;&gt; Calibration &lt;&lt;</span>
    <span class="c1"># Auto calibration process related</span>
        <span class="c1"># Calibration objects</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_cal_ori</span><span class="p">:</span><span class="n">ImgMea_Cal</span><span class="o">|</span><span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_cal_temp</span><span class="p">:</span><span class="n">ImgMea_Cal</span><span class="o">|</span><span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_cal_last</span><span class="p">:</span><span class="n">ImgMea_Cal</span><span class="o">|</span><span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="c1"># Calibration parameters</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_cal_sclx</span> <span class="o">=</span> <span class="n">wdg</span><span class="o">.</span><span class="n">spin_scalex</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_cal_scly</span> <span class="o">=</span> <span class="n">wdg</span><span class="o">.</span><span class="n">spin_scaley</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_cal_offsetx</span> <span class="o">=</span> <span class="n">wdg</span><span class="o">.</span><span class="n">spin_offsetx</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_cal_offsety</span> <span class="o">=</span> <span class="n">wdg</span><span class="o">.</span><span class="n">spin_offsety</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_cal_rot_deg</span> <span class="o">=</span> <span class="n">wdg</span><span class="o">.</span><span class="n">spin_rotdeg</span>

        <span class="c1"># Buttons for auto calibration</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_btn_calibrate</span> <span class="o">=</span> <span class="n">wdg</span><span class="o">.</span><span class="n">btn_calibrate</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_btn_calibrate</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="kc">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_btn_loadCalibrationFile</span> <span class="o">=</span> <span class="n">wdg</span><span class="o">.</span><span class="n">btn_loadcal</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_btn_saveCalibrationFile</span> <span class="o">=</span> <span class="n">wdg</span><span class="o">.</span><span class="n">btn_savecal</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_btn_loadCalibrationFile</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_load_calibration_file</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_btn_saveCalibrationFile</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_save_calibration_file</span><span class="p">())</span>

        <span class="c1"># Label to display the calibration filename</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_lbl_calibration</span> <span class="o">=</span> <span class="n">wdg</span><span class="o">.</span><span class="n">lbl_calfile</span>

    <span class="c1"># Manual calibration process related</span>
        <span class="c1"># Widgets for manual calibration</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_btn_cal_finetune</span> <span class="o">=</span> <span class="n">wdg</span><span class="o">.</span><span class="n">btn_perform_finetune</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_btn_cal_finetune</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="kc">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_spin_sclx</span> <span class="o">=</span> <span class="n">wdg</span><span class="o">.</span><span class="n">spin_scalex</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_spin_scly</span> <span class="o">=</span> <span class="n">wdg</span><span class="o">.</span><span class="n">spin_scaley</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_spin_offsetx</span> <span class="o">=</span> <span class="n">wdg</span><span class="o">.</span><span class="n">spin_offsetx</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_spin_offsety</span> <span class="o">=</span> <span class="n">wdg</span><span class="o">.</span><span class="n">spin_offsety</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_spin_rotdeg</span> <span class="o">=</span> <span class="n">wdg</span><span class="o">.</span><span class="n">spin_rotdeg</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">initialise_fineadjuster</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialises the calibration parameters in the measurement image using</span>
<span class="sd">        the calibration parameters stored in the image</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">img_unit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getter_measurement_image</span><span class="p">()</span>
        <span class="k">assert</span> <span class="n">img_unit</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Measurement image not initialised&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_cal_ori</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">img_unit</span><span class="o">.</span><span class="n">get_ImageMeasurement_Calibration</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_cal_temp</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cal_ori</span><span class="p">)</span>

        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cal_ori</span><span class="p">,</span> <span class="n">ImgMea_Cal</span><span class="p">),</span> <span class="s1">&#39;Calibration object not initialised&#39;</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cal_ori</span><span class="o">.</span><span class="n">check_calibration_set</span><span class="p">()</span> <span class="o">==</span> <span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;Calibration parameters not set&#39;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_last_calibration</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ImgMea_Cal</span><span class="o">|</span><span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the last created calibration object</span>

<span class="sd">        Returns:</span>
<span class="sd">            ImageMeasurement_Calibration|None: Last calibration object or None if not initialised</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cal_last</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">finalise_fineadjustment</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">apply</span><span class="p">:</span><span class="nb">bool</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Finalises the calibration parameters in the measurement image using</span>
<span class="sd">        the calibration parameters stored in the temporary calibration object</span>

<span class="sd">        Args:</span>
<span class="sd">            apply (bool): Apply the calibration parameters to the measurement image. Default is False</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cal_temp</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Temporary calibration not initialised&#39;</span>

        <span class="k">if</span> <span class="n">apply</span><span class="p">:</span>
            <span class="n">meaImg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getter_measurement_image</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">meaImg</span><span class="p">,</span> <span class="n">MeaImg_Unit</span><span class="p">):</span> <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Measurement image not initialised&#39;</span><span class="p">)</span>
            <span class="n">meaImg</span><span class="o">.</span><span class="n">set_calibration_ImageMeasurement_Calibration</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cal_temp</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_cal_last</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cal_temp</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_cal_temp</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_cal_ori</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">reset_calibrationSpinbox_values</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_disable_finetuneCalibration_widgets</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">apply_temp_fineadjustment</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Updates the calibration parameters in the measurement image using</span>
<span class="sd">        the calibration parameters in the spinbox widgets</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cal_temp</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cal_ori</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Calibration parameters not initialised&#39;</span>

        <span class="n">img_cal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cal_ori</span>
        <span class="n">sclx</span> <span class="o">=</span> <span class="n">img_cal</span><span class="o">.</span><span class="n">scale_x_pixelPerMm</span>
        <span class="n">scly</span> <span class="o">=</span> <span class="n">img_cal</span><span class="o">.</span><span class="n">scale_y_pixelPerMm</span>
        <span class="n">offsetx</span> <span class="o">=</span> <span class="n">img_cal</span><span class="o">.</span><span class="n">laser_coor_x_mm</span>
        <span class="n">offsety</span> <span class="o">=</span> <span class="n">img_cal</span><span class="o">.</span><span class="n">laser_coor_y_mm</span>
        <span class="n">rot_rad</span> <span class="o">=</span> <span class="n">img_cal</span><span class="o">.</span><span class="n">rotation_rad</span>

        <span class="c1"># Get the calibration parameters in percentage and degrees</span>
        <span class="n">sclx_rel</span><span class="p">,</span><span class="n">scly_rel</span><span class="p">,</span><span class="n">offsetx_rel</span><span class="p">,</span><span class="n">offsety_rel</span><span class="p">,</span><span class="n">rotdeg_rel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_calibration_params_percent</span><span class="p">()</span>

        <span class="c1"># Update the calibration parameters</span>
        <span class="n">sclx</span> <span class="o">+=</span> <span class="n">sclx_rel</span><span class="o">/</span><span class="mi">100</span> <span class="o">*</span> <span class="n">sclx</span>
        <span class="n">scly</span> <span class="o">+=</span> <span class="n">scly_rel</span><span class="o">/</span><span class="mi">100</span> <span class="o">*</span> <span class="n">scly</span>
        <span class="n">offsetx</span> <span class="o">+=</span> <span class="n">offsetx_rel</span><span class="o">/</span><span class="mi">100</span> <span class="o">*</span> <span class="n">offsetx</span>
        <span class="n">offsety</span> <span class="o">+=</span> <span class="n">offsety_rel</span><span class="o">/</span><span class="mi">100</span> <span class="o">*</span> <span class="n">offsety</span>
        <span class="n">rot_rad</span> <span class="o">+=</span> <span class="n">np</span><span class="o">.</span><span class="n">deg2rad</span><span class="p">(</span><span class="n">rotdeg_rel</span><span class="p">)</span>

        <span class="c1"># Setup a new calibration object</span>
        <span class="nb">id</span> <span class="o">=</span> <span class="n">img_cal</span><span class="o">.</span><span class="n">id</span> <span class="o">+</span> <span class="sa">f</span><span class="s1">&#39;_finetuned_</span><span class="si">{</span><span class="n">get_timestamp_sec</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_cal_temp</span> <span class="o">=</span> <span class="n">ImgMea_Cal</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_cal_temp</span><span class="o">.</span><span class="n">set_calibration_params</span><span class="p">(</span>
            <span class="n">scale_x_pixelPerMm</span><span class="o">=</span><span class="n">sclx</span><span class="p">,</span>
            <span class="n">scale_y_pixelPerMm</span><span class="o">=</span><span class="n">scly</span><span class="p">,</span>
            <span class="n">laser_coor_x_mm</span><span class="o">=</span><span class="n">offsetx</span><span class="p">,</span>
            <span class="n">laser_coor_y_mm</span><span class="o">=</span><span class="n">offsety</span><span class="p">,</span>
            <span class="n">rotation_rad</span><span class="o">=</span><span class="n">rot_rad</span><span class="p">,</span>
            <span class="n">flip_y</span><span class="o">=</span><span class="n">img_cal</span><span class="o">.</span><span class="n">flip_y</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># Update the calibration parameters in the measurement image</span>
        <span class="n">img_unit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getter_measurement_image</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">img_unit</span><span class="p">,</span> <span class="n">MeaImg_Unit</span><span class="p">):</span> <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Measurement image not initialised&#39;</span><span class="p">)</span>
        <span class="n">img_unit</span><span class="o">.</span><span class="n">set_calibration_ImageMeasurement_Calibration</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cal_temp</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_disable_finetuneCalibration_widgets</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Disables the calibration widgets</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">widgets</span> <span class="o">=</span> <span class="n">get_all_widgets_from_layout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_widget</span><span class="o">.</span><span class="n">lyt_finetune_spins</span><span class="p">)</span>
        <span class="p">[</span><span class="n">widget</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span> <span class="k">for</span> <span class="n">widget</span> <span class="ow">in</span> <span class="n">widgets</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="n">qw</span><span class="o">.</span><span class="n">QDoubleSpinBox</span><span class="p">)]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">enable_finetuneCalibration_widgets</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">callback</span><span class="p">:</span><span class="n">Callable</span><span class="o">|</span><span class="kc">None</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">readonly</span><span class="p">:</span><span class="nb">bool</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Configures the calibration widgets</span>

<span class="sd">        Args:</span>
<span class="sd">            callback (Callable): Callback function for the finetune calibration button. Default is None</span>
<span class="sd">            readonly (bool): Set the calibration widgets to read-only. Default is True</span>

<span class="sd">        Note:</span>
<span class="sd">            - If callback is None, the callback will default to changing the calibration parameters</span>
<span class="sd">                in the measurement image from the getter provided in the constructor</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">callback</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span> <span class="n">callback</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_temp_fineadjustment</span>

        <span class="n">widgets</span> <span class="o">=</span> <span class="n">get_all_widgets_from_layout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_widget</span><span class="o">.</span><span class="n">lyt_finetune_spins</span><span class="p">)</span>
        <span class="n">widgets</span> <span class="o">=</span> <span class="p">[</span><span class="n">widget</span> <span class="k">for</span> <span class="n">widget</span> <span class="ow">in</span> <span class="n">widgets</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="n">qw</span><span class="o">.</span><span class="n">QDoubleSpinBox</span><span class="p">)]</span>
        <span class="k">for</span> <span class="n">widget</span> <span class="ow">in</span> <span class="n">widgets</span><span class="p">:</span>
            <span class="n">widget</span><span class="o">.</span><span class="n">setReadOnly</span><span class="p">(</span><span class="ow">not</span> <span class="n">readonly</span><span class="p">)</span>
            <span class="n">widget</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">widget</span><span class="o">.</span><span class="n">valueChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">callback</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">config_finetune_calibration_button</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">callback</span><span class="p">:</span><span class="n">Callable</span><span class="p">,</span><span class="n">text</span><span class="p">:</span><span class="nb">str</span><span class="o">=</span><span class="s1">&#39;Finetune calibration&#39;</span><span class="p">,</span><span class="n">enabled</span><span class="p">:</span><span class="nb">bool</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the text of the finetune calibration button</span>

<span class="sd">        Args:</span>
<span class="sd">            callback (Callable): Callback function for the finetune calibration button</span>
<span class="sd">            text (str): Text to be displayed on the finetune calibration button. Default is &#39;Finetune calibration&#39;</span>
<span class="sd">            enabled (bool): Enable the finetune calibration button. Default is True</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="nb">str</span><span class="p">),</span> <span class="s1">&#39;Text must be a string&#39;</span>

        <span class="k">try</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_btn_cal_finetune</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">RuntimeWarning</span><span class="p">:</span> <span class="k">pass</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_btn_cal_finetune</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="n">enabled</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_btn_cal_finetune</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_btn_cal_finetune</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">callback</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">config_calibrate_button</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">callback</span><span class="p">:</span><span class="n">Callable</span><span class="p">,</span><span class="n">text</span><span class="p">:</span><span class="nb">str</span><span class="o">=</span><span class="s1">&#39;Calibrate&#39;</span><span class="p">,</span><span class="n">enabled</span><span class="p">:</span><span class="nb">bool</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the text of the calibrate button</span>

<span class="sd">        Args:</span>
<span class="sd">            callback (Callable): Callback function for the calibrate button</span>
<span class="sd">            text (str): Text to be displayed on the calibrate button. Default is &#39;Calibrate&#39;</span>
<span class="sd">            enabled (bool): Enable the calibrate button. Default is True</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span> <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Text must be a string&#39;</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_btn_calibrate</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">RuntimeWarning</span><span class="p">:</span> <span class="k">pass</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_btn_calibrate</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="n">enabled</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_btn_calibrate</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_btn_calibrate</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">callback</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_calibration_params_percent</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the calibration parameters in percentage and in degrees</span>

<span class="sd">        Returns:</span>
<span class="sd">            tuple[float,float,float,float,float]: Calibration parameters in the order (scl_x,scl_y,offset_x,offset_y,rot_deg)</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cal_sclx</span><span class="o">.</span><span class="n">value</span><span class="p">(),</span><span class="bp">self</span><span class="o">.</span><span class="n">_cal_scly</span><span class="o">.</span><span class="n">value</span><span class="p">(),</span><span class="bp">self</span><span class="o">.</span><span class="n">_cal_offsetx</span><span class="o">.</span><span class="n">value</span><span class="p">(),</span><span class="bp">self</span><span class="o">.</span><span class="n">_cal_offsety</span><span class="o">.</span><span class="n">value</span><span class="p">(),</span><span class="bp">self</span><span class="o">.</span><span class="n">_cal_rot_deg</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">reset_calibrationSpinbox_values</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Resets the calibration parameters&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_cal_sclx</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_cal_scly</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_cal_offsetx</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_cal_offsety</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_cal_rot_deg</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_load_calibration_file</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Loads the calibration file</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ori_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_btn_loadCalibrationFile</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_btn_loadCalibrationFile</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_btn_loadCalibrationFile</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s1">&#39;Loading...&#39;</span><span class="p">)</span>

            <span class="n">mea_img</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getter_measurement_image</span><span class="p">()</span>
            <span class="n">img_cal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handler_img</span><span class="o">.</span><span class="n">load_calibration_json</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">img_cal</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span> <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;No calibration file loaded&#39;</span><span class="p">)</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mea_img</span><span class="p">,</span> <span class="n">MeaImg_Unit</span><span class="p">):</span> <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Measurement image not initialised&#39;</span><span class="p">)</span>
            <span class="n">mea_img</span><span class="o">.</span><span class="n">set_calibration_ImageMeasurement_Calibration</span><span class="p">(</span><span class="n">img_cal</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_cal_filename</span> <span class="o">=</span> <span class="n">img_cal</span><span class="o">.</span><span class="n">id</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_lbl_calibration</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s1">&#39;Objective: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cal_filename</span><span class="p">))</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">qw</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="s1">&#39;Error loading objective file&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;_load_calibration_file &gt;&gt; Error loading objective file:&#39;</span><span class="p">,</span><span class="n">e</span><span class="p">)</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_btn_loadCalibrationFile</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_btn_loadCalibrationFile</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">ori_text</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_save_calibration_file</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Saves the calibration file</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ori_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_btn_saveCalibrationFile</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_btn_saveCalibrationFile</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_btn_saveCalibrationFile</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s1">&#39;Saving...&#39;</span><span class="p">)</span>

            <span class="n">mea_img</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getter_measurement_image</span><span class="p">()</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mea_img</span><span class="p">,</span> <span class="n">MeaImg_Unit</span><span class="p">),</span> <span class="s1">&#39;Measurement image not initialised&#39;</span>

            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handler_img</span><span class="o">.</span><span class="n">save_calibration_json_from_ImgMea</span><span class="p">(</span><span class="n">mea_img</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_lastDirPath</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_cal_filename</span> <span class="o">=</span> <span class="n">result</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_lbl_calibration</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s1">&#39;Objective: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cal_filename</span><span class="p">))</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;_save_calibration_file &gt;&gt; Error saving objective file:&#39;</span><span class="p">,</span><span class="n">e</span><span class="p">)</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_btn_saveCalibrationFile</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_btn_saveCalibrationFile</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">ori_text</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



<div class="doc doc-children">










<div class="doc doc-object doc-function">


<h3 id="iris.gui.image_calibration.objective_calibration.Wdg_Calibration_Finetuning.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">processor</span><span class="p">,</span> <span class="n">imgUnit_getter</span><span class="p">,</span> <span class="n">getter_flipx</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="n">getter_flipy</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="kc">False</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">



<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>main</code>
            </td>
            <td>
                  <code><span title="iris.utils.general.tk.Frame">Frame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Main frame to put the sub-frame in</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>imgUnit_getter</code>
            </td>
            <td>
                  <code><span title="iris.utils.general.Callable">Callable</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Callable to get the measurement image</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/gui/image_calibration/objective_calibration.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">827</span>
<span class="normal">828</span>
<span class="normal">829</span>
<span class="normal">830</span>
<span class="normal">831</span>
<span class="normal">832</span>
<span class="normal">833</span>
<span class="normal">834</span>
<span class="normal">835</span>
<span class="normal">836</span>
<span class="normal">837</span>
<span class="normal">838</span>
<span class="normal">839</span>
<span class="normal">840</span>
<span class="normal">841</span>
<span class="normal">842</span>
<span class="normal">843</span>
<span class="normal">844</span>
<span class="normal">845</span>
<span class="normal">846</span>
<span class="normal">847</span>
<span class="normal">848</span>
<span class="normal">849</span>
<span class="normal">850</span>
<span class="normal">851</span>
<span class="normal">852</span>
<span class="normal">853</span>
<span class="normal">854</span>
<span class="normal">855</span>
<span class="normal">856</span>
<span class="normal">857</span>
<span class="normal">858</span>
<span class="normal">859</span>
<span class="normal">860</span>
<span class="normal">861</span>
<span class="normal">862</span>
<span class="normal">863</span>
<span class="normal">864</span>
<span class="normal">865</span>
<span class="normal">866</span>
<span class="normal">867</span>
<span class="normal">868</span>
<span class="normal">869</span>
<span class="normal">870</span>
<span class="normal">871</span>
<span class="normal">872</span>
<span class="normal">873</span>
<span class="normal">874</span>
<span class="normal">875</span>
<span class="normal">876</span>
<span class="normal">877</span>
<span class="normal">878</span>
<span class="normal">879</span>
<span class="normal">880</span>
<span class="normal">881</span>
<span class="normal">882</span>
<span class="normal">883</span>
<span class="normal">884</span>
<span class="normal">885</span>
<span class="normal">886</span>
<span class="normal">887</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">processor</span><span class="p">:</span><span class="n">mpp</span><span class="o">.</span><span class="n">Pool</span><span class="p">,</span> <span class="n">imgUnit_getter</span><span class="p">:</span><span class="n">Callable</span><span class="p">[[],</span><span class="n">MeaImg_Unit</span><span class="o">|</span><span class="kc">None</span><span class="p">],</span>
    <span class="n">getter_flipx</span><span class="p">:</span><span class="n">Callable</span><span class="p">[[],</span><span class="nb">bool</span><span class="p">]</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span><span class="kc">False</span><span class="p">,</span> <span class="n">getter_flipy</span><span class="p">:</span><span class="n">Callable</span><span class="p">[[],</span><span class="nb">bool</span><span class="p">]</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span><span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Args:</span>
<span class="sd">        main (tk.Frame): Main frame to put the sub-frame in</span>
<span class="sd">        imgUnit_getter (Callable): Callable to get the measurement image</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_processor</span> <span class="o">=</span> <span class="n">processor</span>

<span class="c1"># &gt;&gt;&gt; Image file handler &lt;&lt;&lt;</span>
    <span class="k">assert</span> <span class="nb">callable</span><span class="p">(</span><span class="n">imgUnit_getter</span><span class="p">),</span> <span class="s1">&#39;Measurement image getter must be a callable&#39;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_getter_measurement_image</span> <span class="o">=</span> <span class="n">imgUnit_getter</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_getter_flipx</span> <span class="o">=</span> <span class="n">getter_flipx</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_getter_flipy</span> <span class="o">=</span> <span class="n">getter_flipy</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_handler_img</span> <span class="o">=</span> <span class="n">MeaImg_Handler</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_lastDirPath</span> <span class="o">=</span> <span class="n">SaveParamsEnum</span><span class="o">.</span><span class="n">DEFAULT_SAVE_PATH</span><span class="o">.</span><span class="n">value</span>

<span class="c1"># &gt;&gt; Main widget setup &lt;&lt;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_widget</span> <span class="o">=</span> <span class="n">Calibration_Finetune_Design</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
    <span class="n">lyt</span> <span class="o">=</span> <span class="n">qw</span><span class="o">.</span><span class="n">QVBoxLayout</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
    <span class="n">lyt</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_widget</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">lyt</span><span class="p">)</span>
    <span class="n">wdg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_widget</span>

<span class="c1"># &gt;&gt; Calibration &lt;&lt;</span>
<span class="c1"># Auto calibration process related</span>
    <span class="c1"># Calibration objects</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_cal_ori</span><span class="p">:</span><span class="n">ImgMea_Cal</span><span class="o">|</span><span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_cal_temp</span><span class="p">:</span><span class="n">ImgMea_Cal</span><span class="o">|</span><span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_cal_last</span><span class="p">:</span><span class="n">ImgMea_Cal</span><span class="o">|</span><span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="c1"># Calibration parameters</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_cal_sclx</span> <span class="o">=</span> <span class="n">wdg</span><span class="o">.</span><span class="n">spin_scalex</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_cal_scly</span> <span class="o">=</span> <span class="n">wdg</span><span class="o">.</span><span class="n">spin_scaley</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_cal_offsetx</span> <span class="o">=</span> <span class="n">wdg</span><span class="o">.</span><span class="n">spin_offsetx</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_cal_offsety</span> <span class="o">=</span> <span class="n">wdg</span><span class="o">.</span><span class="n">spin_offsety</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_cal_rot_deg</span> <span class="o">=</span> <span class="n">wdg</span><span class="o">.</span><span class="n">spin_rotdeg</span>

    <span class="c1"># Buttons for auto calibration</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_btn_calibrate</span> <span class="o">=</span> <span class="n">wdg</span><span class="o">.</span><span class="n">btn_calibrate</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_btn_calibrate</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="kc">None</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_btn_loadCalibrationFile</span> <span class="o">=</span> <span class="n">wdg</span><span class="o">.</span><span class="n">btn_loadcal</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_btn_saveCalibrationFile</span> <span class="o">=</span> <span class="n">wdg</span><span class="o">.</span><span class="n">btn_savecal</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_btn_loadCalibrationFile</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_load_calibration_file</span><span class="p">())</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_btn_saveCalibrationFile</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_save_calibration_file</span><span class="p">())</span>

    <span class="c1"># Label to display the calibration filename</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_lbl_calibration</span> <span class="o">=</span> <span class="n">wdg</span><span class="o">.</span><span class="n">lbl_calfile</span>

<span class="c1"># Manual calibration process related</span>
    <span class="c1"># Widgets for manual calibration</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_btn_cal_finetune</span> <span class="o">=</span> <span class="n">wdg</span><span class="o">.</span><span class="n">btn_perform_finetune</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_btn_cal_finetune</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="kc">None</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_spin_sclx</span> <span class="o">=</span> <span class="n">wdg</span><span class="o">.</span><span class="n">spin_scalex</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_spin_scly</span> <span class="o">=</span> <span class="n">wdg</span><span class="o">.</span><span class="n">spin_scaley</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_spin_offsetx</span> <span class="o">=</span> <span class="n">wdg</span><span class="o">.</span><span class="n">spin_offsetx</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_spin_offsety</span> <span class="o">=</span> <span class="n">wdg</span><span class="o">.</span><span class="n">spin_offsety</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_spin_rotdeg</span> <span class="o">=</span> <span class="n">wdg</span><span class="o">.</span><span class="n">spin_rotdeg</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.gui.image_calibration.objective_calibration.Wdg_Calibration_Finetuning.apply_temp_fineadjustment" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">apply_temp_fineadjustment</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Updates the calibration parameters in the measurement image using
the calibration parameters in the spinbox widgets</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/gui/image_calibration/objective_calibration.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">933</span>
<span class="normal">934</span>
<span class="normal">935</span>
<span class="normal">936</span>
<span class="normal">937</span>
<span class="normal">938</span>
<span class="normal">939</span>
<span class="normal">940</span>
<span class="normal">941</span>
<span class="normal">942</span>
<span class="normal">943</span>
<span class="normal">944</span>
<span class="normal">945</span>
<span class="normal">946</span>
<span class="normal">947</span>
<span class="normal">948</span>
<span class="normal">949</span>
<span class="normal">950</span>
<span class="normal">951</span>
<span class="normal">952</span>
<span class="normal">953</span>
<span class="normal">954</span>
<span class="normal">955</span>
<span class="normal">956</span>
<span class="normal">957</span>
<span class="normal">958</span>
<span class="normal">959</span>
<span class="normal">960</span>
<span class="normal">961</span>
<span class="normal">962</span>
<span class="normal">963</span>
<span class="normal">964</span>
<span class="normal">965</span>
<span class="normal">966</span>
<span class="normal">967</span>
<span class="normal">968</span>
<span class="normal">969</span>
<span class="normal">970</span>
<span class="normal">971</span>
<span class="normal">972</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">apply_temp_fineadjustment</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Updates the calibration parameters in the measurement image using</span>
<span class="sd">    the calibration parameters in the spinbox widgets</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cal_temp</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cal_ori</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Calibration parameters not initialised&#39;</span>

    <span class="n">img_cal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cal_ori</span>
    <span class="n">sclx</span> <span class="o">=</span> <span class="n">img_cal</span><span class="o">.</span><span class="n">scale_x_pixelPerMm</span>
    <span class="n">scly</span> <span class="o">=</span> <span class="n">img_cal</span><span class="o">.</span><span class="n">scale_y_pixelPerMm</span>
    <span class="n">offsetx</span> <span class="o">=</span> <span class="n">img_cal</span><span class="o">.</span><span class="n">laser_coor_x_mm</span>
    <span class="n">offsety</span> <span class="o">=</span> <span class="n">img_cal</span><span class="o">.</span><span class="n">laser_coor_y_mm</span>
    <span class="n">rot_rad</span> <span class="o">=</span> <span class="n">img_cal</span><span class="o">.</span><span class="n">rotation_rad</span>

    <span class="c1"># Get the calibration parameters in percentage and degrees</span>
    <span class="n">sclx_rel</span><span class="p">,</span><span class="n">scly_rel</span><span class="p">,</span><span class="n">offsetx_rel</span><span class="p">,</span><span class="n">offsety_rel</span><span class="p">,</span><span class="n">rotdeg_rel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_calibration_params_percent</span><span class="p">()</span>

    <span class="c1"># Update the calibration parameters</span>
    <span class="n">sclx</span> <span class="o">+=</span> <span class="n">sclx_rel</span><span class="o">/</span><span class="mi">100</span> <span class="o">*</span> <span class="n">sclx</span>
    <span class="n">scly</span> <span class="o">+=</span> <span class="n">scly_rel</span><span class="o">/</span><span class="mi">100</span> <span class="o">*</span> <span class="n">scly</span>
    <span class="n">offsetx</span> <span class="o">+=</span> <span class="n">offsetx_rel</span><span class="o">/</span><span class="mi">100</span> <span class="o">*</span> <span class="n">offsetx</span>
    <span class="n">offsety</span> <span class="o">+=</span> <span class="n">offsety_rel</span><span class="o">/</span><span class="mi">100</span> <span class="o">*</span> <span class="n">offsety</span>
    <span class="n">rot_rad</span> <span class="o">+=</span> <span class="n">np</span><span class="o">.</span><span class="n">deg2rad</span><span class="p">(</span><span class="n">rotdeg_rel</span><span class="p">)</span>

    <span class="c1"># Setup a new calibration object</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">img_cal</span><span class="o">.</span><span class="n">id</span> <span class="o">+</span> <span class="sa">f</span><span class="s1">&#39;_finetuned_</span><span class="si">{</span><span class="n">get_timestamp_sec</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_cal_temp</span> <span class="o">=</span> <span class="n">ImgMea_Cal</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_cal_temp</span><span class="o">.</span><span class="n">set_calibration_params</span><span class="p">(</span>
        <span class="n">scale_x_pixelPerMm</span><span class="o">=</span><span class="n">sclx</span><span class="p">,</span>
        <span class="n">scale_y_pixelPerMm</span><span class="o">=</span><span class="n">scly</span><span class="p">,</span>
        <span class="n">laser_coor_x_mm</span><span class="o">=</span><span class="n">offsetx</span><span class="p">,</span>
        <span class="n">laser_coor_y_mm</span><span class="o">=</span><span class="n">offsety</span><span class="p">,</span>
        <span class="n">rotation_rad</span><span class="o">=</span><span class="n">rot_rad</span><span class="p">,</span>
        <span class="n">flip_y</span><span class="o">=</span><span class="n">img_cal</span><span class="o">.</span><span class="n">flip_y</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># Update the calibration parameters in the measurement image</span>
    <span class="n">img_unit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getter_measurement_image</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">img_unit</span><span class="p">,</span> <span class="n">MeaImg_Unit</span><span class="p">):</span> <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Measurement image not initialised&#39;</span><span class="p">)</span>
    <span class="n">img_unit</span><span class="o">.</span><span class="n">set_calibration_ImageMeasurement_Calibration</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cal_temp</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.gui.image_calibration.objective_calibration.Wdg_Calibration_Finetuning.config_calibrate_button" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">config_calibrate_button</span><span class="p">(</span><span class="n">callback</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Calibrate&#39;</span><span class="p">,</span> <span class="n">enabled</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Sets the text of the calibrate button</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>callback</code>
            </td>
            <td>
                  <code><span title="iris.utils.general.Callable">Callable</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Callback function for the calibrate button</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>text</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Text to be displayed on the calibrate button. Default is 'Calibrate'</p>
              </div>
            </td>
            <td>
                  <code>&#39;Calibrate&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>enabled</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Enable the calibrate button. Default is True</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/gui/image_calibration/objective_calibration.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1019</span>
<span class="normal">1020</span>
<span class="normal">1021</span>
<span class="normal">1022</span>
<span class="normal">1023</span>
<span class="normal">1024</span>
<span class="normal">1025</span>
<span class="normal">1026</span>
<span class="normal">1027</span>
<span class="normal">1028</span>
<span class="normal">1029</span>
<span class="normal">1030</span>
<span class="normal">1031</span>
<span class="normal">1032</span>
<span class="normal">1033</span>
<span class="normal">1034</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">config_calibrate_button</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">callback</span><span class="p">:</span><span class="n">Callable</span><span class="p">,</span><span class="n">text</span><span class="p">:</span><span class="nb">str</span><span class="o">=</span><span class="s1">&#39;Calibrate&#39;</span><span class="p">,</span><span class="n">enabled</span><span class="p">:</span><span class="nb">bool</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sets the text of the calibrate button</span>

<span class="sd">    Args:</span>
<span class="sd">        callback (Callable): Callback function for the calibrate button</span>
<span class="sd">        text (str): Text to be displayed on the calibrate button. Default is &#39;Calibrate&#39;</span>
<span class="sd">        enabled (bool): Enable the calibrate button. Default is True</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span> <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Text must be a string&#39;</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_btn_calibrate</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
    <span class="k">except</span> <span class="ne">RuntimeWarning</span><span class="p">:</span> <span class="k">pass</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_btn_calibrate</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="n">enabled</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_btn_calibrate</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_btn_calibrate</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">callback</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.gui.image_calibration.objective_calibration.Wdg_Calibration_Finetuning.config_finetune_calibration_button" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">config_finetune_calibration_button</span><span class="p">(</span><span class="n">callback</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Finetune calibration&#39;</span><span class="p">,</span> <span class="n">enabled</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Sets the text of the finetune calibration button</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>callback</code>
            </td>
            <td>
                  <code><span title="iris.utils.general.Callable">Callable</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Callback function for the finetune calibration button</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>text</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Text to be displayed on the finetune calibration button. Default is 'Finetune calibration'</p>
              </div>
            </td>
            <td>
                  <code>&#39;Finetune calibration&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>enabled</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Enable the finetune calibration button. Default is True</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/gui/image_calibration/objective_calibration.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1002</span>
<span class="normal">1003</span>
<span class="normal">1004</span>
<span class="normal">1005</span>
<span class="normal">1006</span>
<span class="normal">1007</span>
<span class="normal">1008</span>
<span class="normal">1009</span>
<span class="normal">1010</span>
<span class="normal">1011</span>
<span class="normal">1012</span>
<span class="normal">1013</span>
<span class="normal">1014</span>
<span class="normal">1015</span>
<span class="normal">1016</span>
<span class="normal">1017</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">config_finetune_calibration_button</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">callback</span><span class="p">:</span><span class="n">Callable</span><span class="p">,</span><span class="n">text</span><span class="p">:</span><span class="nb">str</span><span class="o">=</span><span class="s1">&#39;Finetune calibration&#39;</span><span class="p">,</span><span class="n">enabled</span><span class="p">:</span><span class="nb">bool</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sets the text of the finetune calibration button</span>

<span class="sd">    Args:</span>
<span class="sd">        callback (Callable): Callback function for the finetune calibration button</span>
<span class="sd">        text (str): Text to be displayed on the finetune calibration button. Default is &#39;Finetune calibration&#39;</span>
<span class="sd">        enabled (bool): Enable the finetune calibration button. Default is True</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="nb">str</span><span class="p">),</span> <span class="s1">&#39;Text must be a string&#39;</span>

    <span class="k">try</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_btn_cal_finetune</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
    <span class="k">except</span> <span class="ne">RuntimeWarning</span><span class="p">:</span> <span class="k">pass</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_btn_cal_finetune</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="n">enabled</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_btn_cal_finetune</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_btn_cal_finetune</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">callback</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.gui.image_calibration.objective_calibration.Wdg_Calibration_Finetuning.enable_finetuneCalibration_widgets" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">enable_finetuneCalibration_widgets</span><span class="p">(</span><span class="n">callback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">readonly</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Configures the calibration widgets</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>callback</code>
            </td>
            <td>
                  <code><span title="iris.utils.general.Callable">Callable</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Callback function for the finetune calibration button. Default is None</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>readonly</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Set the calibration widgets to read-only. Default is True</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>


<details class="note" open>
  <summary>Note</summary>
  <ul>
<li>If callback is None, the callback will default to changing the calibration parameters
    in the measurement image from the getter provided in the constructor</li>
</ul>
</details>

            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/gui/image_calibration/objective_calibration.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 981</span>
<span class="normal"> 982</span>
<span class="normal"> 983</span>
<span class="normal"> 984</span>
<span class="normal"> 985</span>
<span class="normal"> 986</span>
<span class="normal"> 987</span>
<span class="normal"> 988</span>
<span class="normal"> 989</span>
<span class="normal"> 990</span>
<span class="normal"> 991</span>
<span class="normal"> 992</span>
<span class="normal"> 993</span>
<span class="normal"> 994</span>
<span class="normal"> 995</span>
<span class="normal"> 996</span>
<span class="normal"> 997</span>
<span class="normal"> 998</span>
<span class="normal"> 999</span>
<span class="normal">1000</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">enable_finetuneCalibration_widgets</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">callback</span><span class="p">:</span><span class="n">Callable</span><span class="o">|</span><span class="kc">None</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">readonly</span><span class="p">:</span><span class="nb">bool</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Configures the calibration widgets</span>

<span class="sd">    Args:</span>
<span class="sd">        callback (Callable): Callback function for the finetune calibration button. Default is None</span>
<span class="sd">        readonly (bool): Set the calibration widgets to read-only. Default is True</span>

<span class="sd">    Note:</span>
<span class="sd">        - If callback is None, the callback will default to changing the calibration parameters</span>
<span class="sd">            in the measurement image from the getter provided in the constructor</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">callback</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span> <span class="n">callback</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_temp_fineadjustment</span>

    <span class="n">widgets</span> <span class="o">=</span> <span class="n">get_all_widgets_from_layout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_widget</span><span class="o">.</span><span class="n">lyt_finetune_spins</span><span class="p">)</span>
    <span class="n">widgets</span> <span class="o">=</span> <span class="p">[</span><span class="n">widget</span> <span class="k">for</span> <span class="n">widget</span> <span class="ow">in</span> <span class="n">widgets</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="n">qw</span><span class="o">.</span><span class="n">QDoubleSpinBox</span><span class="p">)]</span>
    <span class="k">for</span> <span class="n">widget</span> <span class="ow">in</span> <span class="n">widgets</span><span class="p">:</span>
        <span class="n">widget</span><span class="o">.</span><span class="n">setReadOnly</span><span class="p">(</span><span class="ow">not</span> <span class="n">readonly</span><span class="p">)</span>
        <span class="n">widget</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">widget</span><span class="o">.</span><span class="n">valueChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">callback</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.gui.image_calibration.objective_calibration.Wdg_Calibration_Finetuning.finalise_fineadjustment" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">finalise_fineadjustment</span><span class="p">(</span><span class="n">apply</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Finalises the calibration parameters in the measurement image using
the calibration parameters stored in the temporary calibration object</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>apply</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Apply the calibration parameters to the measurement image. Default is False</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/gui/image_calibration/objective_calibration.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">911</span>
<span class="normal">912</span>
<span class="normal">913</span>
<span class="normal">914</span>
<span class="normal">915</span>
<span class="normal">916</span>
<span class="normal">917</span>
<span class="normal">918</span>
<span class="normal">919</span>
<span class="normal">920</span>
<span class="normal">921</span>
<span class="normal">922</span>
<span class="normal">923</span>
<span class="normal">924</span>
<span class="normal">925</span>
<span class="normal">926</span>
<span class="normal">927</span>
<span class="normal">928</span>
<span class="normal">929</span>
<span class="normal">930</span>
<span class="normal">931</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">finalise_fineadjustment</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">apply</span><span class="p">:</span><span class="nb">bool</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Finalises the calibration parameters in the measurement image using</span>
<span class="sd">    the calibration parameters stored in the temporary calibration object</span>

<span class="sd">    Args:</span>
<span class="sd">        apply (bool): Apply the calibration parameters to the measurement image. Default is False</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cal_temp</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Temporary calibration not initialised&#39;</span>

    <span class="k">if</span> <span class="n">apply</span><span class="p">:</span>
        <span class="n">meaImg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getter_measurement_image</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">meaImg</span><span class="p">,</span> <span class="n">MeaImg_Unit</span><span class="p">):</span> <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Measurement image not initialised&#39;</span><span class="p">)</span>
        <span class="n">meaImg</span><span class="o">.</span><span class="n">set_calibration_ImageMeasurement_Calibration</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cal_temp</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_cal_last</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cal_temp</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_cal_temp</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_cal_ori</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">reset_calibrationSpinbox_values</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_disable_finetuneCalibration_widgets</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.gui.image_calibration.objective_calibration.Wdg_Calibration_Finetuning.get_calibration_params_percent" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_calibration_params_percent</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Returns the calibration parameters in percentage and in degrees</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="tuple">tuple</span>[<span title="float">float</span>, <span title="float">float</span>, <span title="float">float</span>, <span title="float">float</span>, <span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>tuple[float,float,float,float,float]: Calibration parameters in the order (scl_x,scl_y,offset_x,offset_y,rot_deg)</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/gui/image_calibration/objective_calibration.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1036</span>
<span class="normal">1037</span>
<span class="normal">1038</span>
<span class="normal">1039</span>
<span class="normal">1040</span>
<span class="normal">1041</span>
<span class="normal">1042</span>
<span class="normal">1043</span>
<span class="normal">1044</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_calibration_params_percent</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the calibration parameters in percentage and in degrees</span>

<span class="sd">    Returns:</span>
<span class="sd">        tuple[float,float,float,float,float]: Calibration parameters in the order (scl_x,scl_y,offset_x,offset_y,rot_deg)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cal_sclx</span><span class="o">.</span><span class="n">value</span><span class="p">(),</span><span class="bp">self</span><span class="o">.</span><span class="n">_cal_scly</span><span class="o">.</span><span class="n">value</span><span class="p">(),</span><span class="bp">self</span><span class="o">.</span><span class="n">_cal_offsetx</span><span class="o">.</span><span class="n">value</span><span class="p">(),</span><span class="bp">self</span><span class="o">.</span><span class="n">_cal_offsety</span><span class="o">.</span><span class="n">value</span><span class="p">(),</span><span class="bp">self</span><span class="o">.</span><span class="n">_cal_rot_deg</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.gui.image_calibration.objective_calibration.Wdg_Calibration_Finetuning.get_last_calibration" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_last_calibration</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Returns the last created calibration object</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="ImgMea_Cal


  
      dataclass
   (iris.data.calibration_objective.ImgMea_Cal)" href="../../../data/calibration_objective/#iris.data.calibration_objective.ImgMea_Cal">ImgMea_Cal</a> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ImageMeasurement_Calibration|None: Last calibration object or None if not initialised</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/gui/image_calibration/objective_calibration.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">902</span>
<span class="normal">903</span>
<span class="normal">904</span>
<span class="normal">905</span>
<span class="normal">906</span>
<span class="normal">907</span>
<span class="normal">908</span>
<span class="normal">909</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_last_calibration</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ImgMea_Cal</span><span class="o">|</span><span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the last created calibration object</span>

<span class="sd">    Returns:</span>
<span class="sd">        ImageMeasurement_Calibration|None: Last calibration object or None if not initialised</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cal_last</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.gui.image_calibration.objective_calibration.Wdg_Calibration_Finetuning.initialise_fineadjuster" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">initialise_fineadjuster</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Initialises the calibration parameters in the measurement image using
the calibration parameters stored in the image</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/gui/image_calibration/objective_calibration.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">889</span>
<span class="normal">890</span>
<span class="normal">891</span>
<span class="normal">892</span>
<span class="normal">893</span>
<span class="normal">894</span>
<span class="normal">895</span>
<span class="normal">896</span>
<span class="normal">897</span>
<span class="normal">898</span>
<span class="normal">899</span>
<span class="normal">900</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">initialise_fineadjuster</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialises the calibration parameters in the measurement image using</span>
<span class="sd">    the calibration parameters stored in the image</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">img_unit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getter_measurement_image</span><span class="p">()</span>
    <span class="k">assert</span> <span class="n">img_unit</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Measurement image not initialised&#39;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_cal_ori</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">img_unit</span><span class="o">.</span><span class="n">get_ImageMeasurement_Calibration</span><span class="p">())</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_cal_temp</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cal_ori</span><span class="p">)</span>

    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cal_ori</span><span class="p">,</span> <span class="n">ImgMea_Cal</span><span class="p">),</span> <span class="s1">&#39;Calibration object not initialised&#39;</span>
    <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cal_ori</span><span class="o">.</span><span class="n">check_calibration_set</span><span class="p">()</span> <span class="o">==</span> <span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;Calibration parameters not set&#39;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.gui.image_calibration.objective_calibration.Wdg_Calibration_Finetuning.reset_calibrationSpinbox_values" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">reset_calibrationSpinbox_values</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Resets the calibration parameters</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/gui/image_calibration/objective_calibration.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1046</span>
<span class="normal">1047</span>
<span class="normal">1048</span>
<span class="normal">1049</span>
<span class="normal">1050</span>
<span class="normal">1051</span>
<span class="normal">1052</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">reset_calibrationSpinbox_values</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Resets the calibration parameters&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_cal_sclx</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_cal_scly</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_cal_offsetx</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_cal_offsety</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_cal_rot_deg</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>


<div class="doc doc-object doc-function">


<h2 id="iris.gui.image_calibration.objective_calibration.check_and_create_config_file" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">check_and_create_config_file</span><span class="p">(</span><span class="n">config_file_path</span><span class="o">=</span><span class="s1">&#39;config.ini&#39;</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Generate a default config file if it does not exist</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>config_file</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Path to the config file. Defaults to 'config.ini'</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/utils/general.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">check_and_create_config_file</span><span class="p">(</span><span class="n">config_file_path</span><span class="p">:</span><span class="nb">str</span><span class="o">=</span><span class="s1">&#39;config.ini&#39;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generate a default config file if it does not exist</span>

<span class="sd">    Args:</span>
<span class="sd">        config_file (str): Path to the config file. Defaults to &#39;config.ini&#39;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Generate a default config file if it does not exist</span>
    <span class="n">updater</span> <span class="o">=</span> <span class="n">ConfigUpdater</span><span class="p">(</span><span class="n">allow_no_value</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">config_file_path</span><span class="p">):</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">config_file_path</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">configfile</span><span class="p">:</span> <span class="n">updater</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">configfile</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="iris.gui.image_calibration.objective_calibration.convert_ramanshift_to_wavelength" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">convert_ramanshift_to_wavelength</span><span class="p">(</span><span class="n">raman_shift</span><span class="p">,</span> <span class="n">excitation_wavelength</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Converts Raman shift to wavelength</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>raman_shift</code>
            </td>
            <td>
                  <code><span title="float">float</span> | <span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Raman shift in cm^-1</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>excitation_wavelength</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Excitation laser wavelength in nm</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="float">float</span> | <span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>float|np.ndarray: Wavelength in nm</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/utils/general.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">convert_ramanshift_to_wavelength</span><span class="p">(</span><span class="n">raman_shift</span><span class="p">:</span><span class="nb">float</span><span class="o">|</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span><span class="n">excitation_wavelength</span><span class="p">:</span><span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="o">|</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Converts Raman shift to wavelength</span>

<span class="sd">    Args:</span>
<span class="sd">        raman_shift (float|np.ndarray): Raman shift in cm^-1</span>
<span class="sd">        excitation_wavelength (float): Excitation laser wavelength in nm</span>

<span class="sd">    Returns:</span>
<span class="sd">        float|np.ndarray: Wavelength in nm</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">wavelength</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="n">excitation_wavelength</span> <span class="o">-</span> <span class="n">raman_shift</span><span class="o">/</span><span class="mf">1e7</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">wavelength</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="iris.gui.image_calibration.objective_calibration.convert_timestamp_us_int_to_str" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">convert_timestamp_us_int_to_str</span><span class="p">(</span><span class="n">timestamp</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Converts timestamp integer to string</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>timestamp</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Timestamp in us</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Timestamp as string in the format %y%m%d_%H%M%S_%f</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/utils/general.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">convert_timestamp_us_int_to_str</span><span class="p">(</span><span class="n">timestamp</span><span class="p">:</span><span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Converts timestamp integer to string</span>

<span class="sd">    Args:</span>
<span class="sd">        timestamp (int): Timestamp in us</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: Timestamp as string in the format %y%m%d_%H%M%S_%f</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">timestamp_str</span> <span class="o">=</span> <span class="n">dt</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">(</span><span class="n">timestamp</span><span class="o">*</span><span class="mf">1e-6</span><span class="p">)</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%y%m</span><span class="si">%d</span><span class="s2">_%H%M%S_</span><span class="si">%f</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">timestamp_str</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="iris.gui.image_calibration.objective_calibration.convert_timestamp_us_str_to_int" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">convert_timestamp_us_str_to_int</span><span class="p">(</span><span class="n">timestamp</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Converts timestamp string to integer</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>timestamp</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Timestamp, has to be in the format %y%m%d_%H%M%S_%f</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>int</code></td>            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Timestamp as integer in us</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/utils/general.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">convert_timestamp_us_str_to_int</span><span class="p">(</span><span class="n">timestamp</span><span class="p">:</span><span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Converts timestamp string to integer</span>

<span class="sd">    Args:</span>
<span class="sd">        timestamp (str): Timestamp, has to be in the format %y%m%d_%H%M%S_%f</span>

<span class="sd">    Returns:</span>
<span class="sd">        int: Timestamp as integer in us</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">timestamp_int</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">timestamp</span><span class="p">,</span> <span class="s2">&quot;%y%m</span><span class="si">%d</span><span class="s2">_%H%M%S_</span><span class="si">%f</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">timestamp</span><span class="p">()</span><span class="o">*</span><span class="mf">1e6</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">timestamp_int</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="iris.gui.image_calibration.objective_calibration.convert_wavelength_to_ramanshift" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">convert_wavelength_to_ramanshift</span><span class="p">(</span><span class="n">wavelength</span><span class="p">,</span> <span class="n">excitation_wavelength</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Converts wavelength to Raman shift</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>wavelength</code>
            </td>
            <td>
                  <code><span title="float">float</span> | <span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Wavelength in nm</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>excitation_wavelength</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Excitation laser wavelength in nm</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="float">float</span> | <span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>float|np.ndarray: Raman shift in cm^-1</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/utils/general.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">convert_wavelength_to_ramanshift</span><span class="p">(</span><span class="n">wavelength</span><span class="p">:</span><span class="nb">float</span><span class="o">|</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span><span class="n">excitation_wavelength</span><span class="p">:</span><span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="o">|</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Converts wavelength to Raman shift</span>

<span class="sd">    Args:</span>
<span class="sd">        wavelength (float|np.ndarray): Wavelength in nm</span>
<span class="sd">        excitation_wavelength (float): Excitation laser wavelength in nm</span>

<span class="sd">    Returns:</span>
<span class="sd">        float|np.ndarray: Raman shift in cm^-1</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">wavelength</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span> <span class="ow">and</span> <span class="n">wavelength</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span> <span class="n">wavelength</span> <span class="o">=</span> <span class="mf">0.0001</span>
    <span class="k">else</span><span class="p">:</span> <span class="n">wavelength</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">wavelength</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.0001</span><span class="p">,</span> <span class="n">wavelength</span><span class="p">)</span>
    <span class="n">raman_shift</span> <span class="o">=</span> <span class="mf">1e7</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="n">excitation_wavelength</span> <span class="o">-</span> <span class="mi">1</span><span class="o">/</span><span class="n">wavelength</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">raman_shift</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="iris.gui.image_calibration.objective_calibration.generate_test_app" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">generate_test_app</span><span class="p">(</span><span class="n">lyt</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Generates a test QApplication and QVBoxLayout for testing purposes</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="tuple">tuple</span>[<span title="PySide6.QtWidgets.QApplication">QApplication</span>, <span title="PySide6.QtWidgets.QWidget">QWidget</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>tuple[qw.QApplication, qw.QWidget]: The QApplication and QWidget instances</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/utils/general.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">generate_test_app</span><span class="p">(</span><span class="n">lyt</span><span class="p">:</span><span class="n">qw</span><span class="o">.</span><span class="n">QVBoxLayout</span><span class="o">|</span><span class="n">qw</span><span class="o">.</span><span class="n">QHBoxLayout</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">qw</span><span class="o">.</span><span class="n">QApplication</span><span class="p">,</span><span class="n">qw</span><span class="o">.</span><span class="n">QWidget</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generates a test QApplication and QVBoxLayout for testing purposes</span>

<span class="sd">    Returns:</span>
<span class="sd">        tuple[qw.QApplication, qw.QWidget]: The QApplication and QWidget instances</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">app</span> <span class="o">=</span> <span class="n">qw</span><span class="o">.</span><span class="n">QApplication</span><span class="p">([])</span>
    <span class="n">main_window</span> <span class="o">=</span> <span class="n">qw</span><span class="o">.</span><span class="n">QMainWindow</span><span class="p">()</span>
    <span class="n">main_window</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
    <span class="n">wdg</span> <span class="o">=</span> <span class="n">qw</span><span class="o">.</span><span class="n">QWidget</span><span class="p">()</span>
    <span class="n">main_window</span><span class="o">.</span><span class="n">setCentralWidget</span><span class="p">(</span><span class="n">wdg</span><span class="p">)</span>
    <span class="n">wdg</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">lyt</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">app</span><span class="p">,</span> <span class="n">wdg</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="iris.gui.image_calibration.objective_calibration.get_all_widgets" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_all_widgets</span><span class="p">(</span><span class="n">parent_widget</span><span class="p">,</span> <span class="n">get_all</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>A function that returns all widgets in a frame and optionally, its subframes (all levels)</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>parent_widget</code>
            </td>
            <td>
                  <code><span title="PySide6.QtWidgets.QWidget">QWidget</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Widget which children need to be listed</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>get_all</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True it will get the widgets in the sub-widgets as well</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<span title="PySide6.QtWidgets.QWidget">QWidget</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>list[qw.QWidget]: List of all widgets in the widget</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/utils/general.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_all_widgets</span><span class="p">(</span><span class="n">parent_widget</span><span class="p">:</span><span class="n">qw</span><span class="o">.</span><span class="n">QWidget</span><span class="p">,</span><span class="n">get_all</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">qw</span><span class="o">.</span><span class="n">QWidget</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A function that returns all widgets in a frame and optionally, its subframes (all levels)</span>

<span class="sd">    Args:</span>
<span class="sd">        parent_widget (qw.QWidget): Widget which children need to be listed</span>
<span class="sd">        get_all (bool, optional): If True it will get the widgets in the sub-widgets as well</span>

<span class="sd">    Returns:</span>
<span class="sd">        list[qw.QWidget]: List of all widgets in the widget</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">get_all</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">parent_widget</span><span class="o">.</span><span class="n">findChildren</span><span class="p">(</span><span class="n">qw</span><span class="o">.</span><span class="n">QWidget</span><span class="p">)</span>   <span class="c1"># The default findChildren() is already recursive</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># findChildren() with a search option that limits depth</span>
        <span class="c1"># For a single level, findChildren(type, options) is useful</span>
        <span class="c1"># We find widgets that are immediate children of the parent.</span>
        <span class="k">return</span> <span class="n">parent_widget</span><span class="o">.</span><span class="n">findChildren</span><span class="p">(</span><span class="n">qw</span><span class="o">.</span><span class="n">QWidget</span><span class="p">,</span> <span class="n">qc</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">FindChildOption</span><span class="o">.</span><span class="n">FindDirectChildrenOnly</span><span class="p">)</span> <span class="c1"># type: ignore</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="iris.gui.image_calibration.objective_calibration.get_all_widgets_from_layout" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_all_widgets_from_layout</span><span class="p">(</span><span class="n">parent_layout</span><span class="p">,</span> <span class="n">get_all</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>A function that returns all widgets in a layout and optionally, its sub-layouts (all levels)</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>parent_layout</code>
            </td>
            <td>
                  <code><span title="PySide6.QtWidgets.QLayout">QLayout</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Layout which children need to be listed</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>get_all</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True it will get the widgets in the sub-layouts as well</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<span title="PySide6.QtWidgets.QWidget">QWidget</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>list[qw.QWidget]: List of all widgets in the layout</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/utils/general.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_all_widgets_from_layout</span><span class="p">(</span><span class="n">parent_layout</span><span class="p">:</span><span class="n">qw</span><span class="o">.</span><span class="n">QLayout</span><span class="p">,</span><span class="n">get_all</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">qw</span><span class="o">.</span><span class="n">QWidget</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A function that returns all widgets in a layout and optionally, its sub-layouts (all levels)</span>

<span class="sd">    Args:</span>
<span class="sd">        parent_layout (qw.QLayout): Layout which children need to be listed</span>
<span class="sd">        get_all (bool, optional): If True it will get the widgets in the sub-layouts as well</span>

<span class="sd">    Returns:</span>
<span class="sd">        list[qw.QWidget]: List of all widgets in the layout</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">list_widget</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">parent_layout</span><span class="o">.</span><span class="n">count</span><span class="p">()):</span>
        <span class="n">item</span> <span class="o">=</span> <span class="n">parent_layout</span><span class="o">.</span><span class="n">itemAt</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">widget</span><span class="p">():</span>
            <span class="n">list_widget</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">widget</span><span class="p">())</span>
            <span class="k">if</span> <span class="n">get_all</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">widget</span><span class="p">(),</span> <span class="n">qw</span><span class="o">.</span><span class="n">QWidget</span><span class="p">):</span>
                <span class="n">child_widgets</span> <span class="o">=</span> <span class="n">get_all_widgets</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">widget</span><span class="p">(),</span> <span class="n">get_all</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                <span class="n">list_widget</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">child_widgets</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">item</span><span class="o">.</span><span class="n">layout</span><span class="p">()</span> <span class="ow">and</span> <span class="n">get_all</span><span class="p">:</span>
            <span class="n">child_widgets</span> <span class="o">=</span> <span class="n">get_all_widgets_from_layout</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">layout</span><span class="p">(),</span> <span class="n">get_all</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">list_widget</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">child_widgets</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">list_widget</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="iris.gui.image_calibration.objective_calibration.get_timestamp_day" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_timestamp_day</span><span class="p">()</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Gets the current timestamp in days</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Timestamp without time: yymmdd</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/utils/general.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_timestamp_day</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Gets the current timestamp in days</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: Timestamp without time: yymmdd</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">dt</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%y%m</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="iris.gui.image_calibration.objective_calibration.get_timestamp_sec" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_timestamp_sec</span><span class="p">()</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Gets the current timestamp in seconds</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Timestamp with time: yymmdd_hhmmss</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/utils/general.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_timestamp_sec</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Gets the current timestamp in seconds</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: Timestamp with time: yymmdd_hhmmss</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">dt</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%y%m</span><span class="si">%d</span><span class="s2">_%H%M%S&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="iris.gui.image_calibration.objective_calibration.get_timestamp_us_int" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_timestamp_us_int</span><span class="p">()</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Gets the current timestamp in us as integer</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>int</code></td>            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Timestamp in us</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/utils/general.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_timestamp_us_int</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Gets the current timestamp in us as integer</span>

<span class="sd">    Returns:</span>
<span class="sd">        int: Timestamp in us</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">timestamp</span><span class="p">()</span><span class="o">*</span><span class="mf">1e6</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="iris.gui.image_calibration.objective_calibration.get_timestamp_us_str" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_timestamp_us_str</span><span class="p">()</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Gets the current timestamp in us as string</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Timestamp with time and milliseconds: yymmdd_hhmmss_us(6 digits)</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/utils/general.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_timestamp_us_str</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Gets the current timestamp in us as string</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: Timestamp with time and milliseconds: yymmdd_hhmmss_us(6 digits)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">dt</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%y%m</span><span class="si">%d</span><span class="s2">_%H%M%S_</span><span class="si">%f</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="iris.gui.image_calibration.objective_calibration.messagebox_request_input" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">messagebox_request_input</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">message</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">validator</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">invalid_msg</span><span class="o">=</span><span class="s1">&#39;The entered value is invalid. Please try again.&#39;</span><span class="p">,</span> <span class="n">loop_until_valid</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>A function that creates a QInputDialog to request input with optional validation.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>parent</code>
            </td>
            <td>
                  <code><span title="PySide6.QtWidgets.QWidget">QWidget</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The parent widget for the dialog (recommended).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>title</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Title of the dialog box.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>message</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Message/label to be displayed for the input field.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>default</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Default value of the input.</p>
              </div>
            </td>
            <td>
                  <code>&#39;&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>validator</code>
            </td>
            <td>
                  <code><span title="typing.Callable">Callable</span>[[<span title="str">str</span>], <span title="bool">bool</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A function that takes the 
input string and returns True if valid, False otherwise.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>invalid_msg</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Message to show if validation fails.</p>
              </div>
            </td>
            <td>
                  <code>&#39;The entered value is invalid. Please try again.&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>loop_until_valid</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, keeps asking until the input is valid 
or the user presses Cancel.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>str | None: User input string if OK was pressed and validation passed, 
        otherwise None (if Cancel was pressed).</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/utils/general.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">messagebox_request_input</span><span class="p">(</span>
        <span class="n">parent</span><span class="p">:</span> <span class="n">qw</span><span class="o">.</span><span class="n">QWidget</span><span class="p">,</span> 
        <span class="n">title</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> 
        <span class="n">message</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> 
        <span class="n">default</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
        <span class="n">validator</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="nb">str</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]</span><span class="o">|</span><span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">invalid_msg</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;The entered value is invalid. Please try again.&quot;</span><span class="p">,</span>
        <span class="n">loop_until_valid</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A function that creates a QInputDialog to request input with optional validation.</span>

<span class="sd">    Args:</span>
<span class="sd">        parent (qw.QWidget): The parent widget for the dialog (recommended).</span>
<span class="sd">        title (str): Title of the dialog box.</span>
<span class="sd">        message (str): Message/label to be displayed for the input field.</span>
<span class="sd">        default (str, optional): Default value of the input.</span>
<span class="sd">        validator (Callable[[str], bool]|None, optional): A function that takes the </span>
<span class="sd">            input string and returns True if valid, False otherwise.</span>
<span class="sd">        invalid_msg (str): Message to show if validation fails.</span>
<span class="sd">        loop_until_valid (bool): If True, keeps asking until the input is valid </span>
<span class="sd">            or the user presses Cancel.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str | None: User input string if OK was pressed and validation passed, </span>
<span class="sd">                    otherwise None (if Cancel was pressed).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">current_default</span> <span class="o">=</span> <span class="n">default</span>

    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="c1"># 1. Show the input dialog</span>
        <span class="n">user_input</span><span class="p">,</span> <span class="n">ok</span> <span class="o">=</span> <span class="n">qw</span><span class="o">.</span><span class="n">QInputDialog</span><span class="o">.</span><span class="n">getText</span><span class="p">(</span>
            <span class="n">parent</span><span class="p">,</span>
            <span class="n">title</span><span class="p">,</span>
            <span class="n">message</span><span class="p">,</span>
            <span class="n">qw</span><span class="o">.</span><span class="n">QLineEdit</span><span class="o">.</span><span class="n">Normal</span><span class="p">,</span> <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
            <span class="n">current_default</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">ok</span><span class="p">:</span> <span class="k">return</span> <span class="kc">None</span>  <span class="c1"># User pressed Cancel</span>

        <span class="n">is_valid</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="n">validator</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span> <span class="n">is_valid</span> <span class="o">=</span> <span class="n">validator</span><span class="p">(</span><span class="n">user_input</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">is_valid</span><span class="p">:</span> <span class="k">return</span> <span class="n">user_input</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">loop_until_valid</span><span class="p">:</span> <span class="k">return</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">qw</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="s2">&quot;Invalid Input&quot;</span><span class="p">,</span> <span class="n">invalid_msg</span><span class="p">)</span>
            <span class="n">current_default</span> <span class="o">=</span> <span class="n">user_input</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="iris.gui.image_calibration.objective_calibration.read_update_config_file_section" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">read_update_config_file_section</span><span class="p">(</span><span class="n">dict_controllers_default</span><span class="p">,</span> <span class="n">dict_controllers_comments</span><span class="p">,</span> <span class="n">section</span><span class="p">,</span> <span class="n">config_file</span><span class="o">=</span><span class="s1">&#39;config.ini&#39;</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Read the config file and automatically add an entry if it does not exist
based on the given default values (dict form) and returns the read values
after the update. Additionally, it will also automatically append comments
given by the comments dictionary at the end of each respective key's value
in the config file. If the values are already present, it will just read the values.
If the config file is not present, it will automatically try to create one.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>dict_controllers_default</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dictionary of the default values</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>dict_controllers_comments</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dictionary of the comments for each key in the default values</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>section</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Section name in the config file</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>config_file</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Path to the config file. Defaults to 'config.ini'.</p>
              </div>
            </td>
            <td>
                  <code>&#39;config.ini&#39;</code>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="NotImplementedError">NotImplementedError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the conversion of the default value type is not implemented</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>dict</code></td>            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dictionary of the read values (after the update) in the correct format
given by the default values dictionary</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/utils/general.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">read_update_config_file_section</span><span class="p">(</span><span class="n">dict_controllers_default</span><span class="p">:</span><span class="nb">dict</span><span class="p">,</span> <span class="n">dict_controllers_comments</span><span class="p">:</span><span class="nb">dict</span><span class="p">,</span>
    <span class="n">section</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">config_file</span><span class="p">:</span><span class="nb">str</span><span class="o">=</span><span class="s1">&#39;config.ini&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Read the config file and automatically add an entry if it does not exist</span>
<span class="sd">    based on the given default values (dict form) and returns the read values</span>
<span class="sd">    after the update. Additionally, it will also automatically append comments</span>
<span class="sd">    given by the comments dictionary at the end of each respective key&#39;s value</span>
<span class="sd">    in the config file. If the values are already present, it will just read the values.</span>
<span class="sd">    If the config file is not present, it will automatically try to create one.</span>

<span class="sd">    Args:</span>
<span class="sd">        dict_controllers_default (dict): Dictionary of the default values</span>
<span class="sd">        dict_controllers_comments (dict): Dictionary of the comments for each key in the default values</span>
<span class="sd">        section (str): Section name in the config file</span>
<span class="sd">        config_file (str, optional): Path to the config file. Defaults to &#39;config.ini&#39;.</span>

<span class="sd">    Raises:</span>
<span class="sd">        NotImplementedError: If the conversion of the default value type is not implemented</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: Dictionary of the read values (after the update) in the correct format</span>
<span class="sd">            given by the default values dictionary</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">check_and_create_config_file</span><span class="p">(</span><span class="n">config_file</span><span class="p">)</span>

    <span class="c1"># Read the config file and automatically add an entry if it does not exist </span>
    <span class="c1"># (along with its comments)</span>
    <span class="n">updater</span> <span class="o">=</span> <span class="n">ConfigUpdater</span><span class="p">(</span><span class="n">allow_no_value</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">updater</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">config_file</span><span class="p">)</span>

    <span class="n">splitter</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\t</span><span class="s1">&#39;</span>
    <span class="n">commenter</span> <span class="o">=</span> <span class="s1">&#39;; &#39;</span>
    <span class="n">list_splitters</span> <span class="o">=</span> <span class="p">[</span><span class="n">splitter</span><span class="p">,</span> <span class="n">commenter</span><span class="p">]</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">updater</span><span class="o">.</span><span class="n">has_section</span><span class="p">(</span><span class="n">section</span><span class="p">):</span>
        <span class="n">updater</span><span class="o">.</span><span class="n">add_section</span><span class="p">(</span><span class="n">section</span><span class="p">)</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">config_file</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">updater</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">dict_controllers_default</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">updater</span><span class="o">.</span><span class="n">has_option</span><span class="p">(</span><span class="n">section</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">dict_controllers_default</span><span class="p">[</span><span class="n">key</span><span class="p">])</span> <span class="o">!=</span> <span class="nb">str</span><span class="p">:</span>
                <span class="n">updater</span><span class="o">.</span><span class="n">set</span><span class="p">(</span>
                    <span class="n">section</span><span class="o">=</span><span class="n">section</span><span class="p">,</span>
                    <span class="n">option</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
                    <span class="n">value</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">dict_controllers_default</span><span class="p">[</span><span class="n">key</span><span class="p">])</span> <span class="o">+</span> <span class="n">splitter</span> <span class="o">+</span> <span class="n">commenter</span> <span class="o">+</span> <span class="n">dict_controllers_comments</span><span class="p">[</span><span class="n">key</span><span class="p">],</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>   <span class="c1"># Add quotes to the string values</span>
                <span class="n">updater</span><span class="o">.</span><span class="n">set</span><span class="p">(</span>
                    <span class="n">section</span><span class="o">=</span><span class="n">section</span><span class="p">,</span>
                    <span class="n">option</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
                    <span class="n">value</span><span class="o">=</span><span class="s1">&#39;&quot;&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">dict_controllers_default</span><span class="p">[</span><span class="n">key</span><span class="p">])</span> <span class="o">+</span> <span class="s1">&#39;&quot;&#39;</span> <span class="o">+</span> <span class="n">splitter</span> <span class="o">+</span> <span class="n">commenter</span> <span class="o">+</span> <span class="n">dict_controllers_comments</span><span class="p">[</span><span class="n">key</span><span class="p">],</span>
                <span class="p">)</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">config_file</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span> <span class="n">updater</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

    <span class="n">dict_controllers_read</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">updater</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">config_file</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span><span class="n">value</span> <span class="ow">in</span> <span class="n">updater</span><span class="o">.</span><span class="n">items</span><span class="p">(</span><span class="n">section</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">dict_controllers_default</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span> <span class="k">continue</span>
        <span class="n">def_val_type</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">dict_controllers_default</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>

        <span class="c1"># Process different types of values separately</span>
        <span class="c1"># note that the splits are to remove the comments</span>
        <span class="k">if</span> <span class="n">def_val_type</span> <span class="o">==</span> <span class="nb">bool</span><span class="p">:</span>
            <span class="n">read_line</span><span class="p">:</span><span class="nb">str</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">value</span>
            <span class="k">for</span> <span class="n">splitter</span> <span class="ow">in</span> <span class="n">list_splitters</span><span class="p">:</span>
                <span class="n">read_line</span> <span class="o">=</span> <span class="n">read_line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">splitter</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">val</span> <span class="o">=</span> <span class="n">read_line</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">val</span> <span class="o">!=</span> <span class="s1">&#39;true&#39;</span> <span class="ow">and</span> <span class="n">val</span> <span class="o">!=</span> <span class="s1">&#39;false&#39;</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error: </span><span class="si">{</span><span class="n">val</span><span class="si">}</span><span class="s2"> is not a boolean value.&quot;</span><span class="p">)</span>
            <span class="n">dict_controllers_read</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">read_line</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;true&#39;</span>
        <span class="k">elif</span> <span class="n">def_val_type</span> <span class="ow">in</span> <span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
            <span class="n">read_line</span><span class="p">:</span><span class="nb">str</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">value</span>
            <span class="k">for</span> <span class="n">splitter</span> <span class="ow">in</span> <span class="n">list_splitters</span><span class="p">:</span>
                <span class="n">read_line</span> <span class="o">=</span> <span class="n">read_line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">splitter</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">conv_val</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">dict_controllers_default</span><span class="p">[</span><span class="n">key</span><span class="p">])(</span><span class="n">read_line</span><span class="p">)</span>
            <span class="n">dict_controllers_read</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">conv_val</span>
        <span class="k">elif</span> <span class="n">def_val_type</span> <span class="o">==</span> <span class="nb">str</span><span class="p">:</span>
            <span class="k">if</span> <span class="s1">&#39;&quot;&#39;</span> <span class="ow">in</span> <span class="n">value</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
                <span class="n">conv_val</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">conv_val</span><span class="p">:</span><span class="nb">str</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">value</span>
                <span class="k">for</span> <span class="n">splitter</span> <span class="ow">in</span> <span class="n">list_splitters</span><span class="p">:</span>
                    <span class="n">conv_val</span> <span class="o">=</span> <span class="n">conv_val</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">splitter</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">dict_controllers_read</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">conv_val</span>
        <span class="k">else</span><span class="p">:</span> <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error: </span><span class="si">{</span><span class="n">def_val_type</span><span class="si">}</span><span class="s2"> conversion is not implemented.&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">dict_controllers_read</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="iris.gui.image_calibration.objective_calibration.run_with_timeout" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">run_with_timeout</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(),</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{},</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Runs a function with a timeout.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>func</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The function to execute.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>args</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Tuple of positional arguments for the function.</p>
              </div>
            </td>
            <td>
                  <code>()</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>kwargs</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dictionary of keyword arguments for the function.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>timeout</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The timeout in seconds.</p>
              </div>
            </td>
            <td>
                  <code>5</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The result of the function if it completes within the timeout.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="iris.utils.general.TimeoutError">TimeoutError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the function does not complete within the timeout.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/utils/general.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">run_with_timeout</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(),</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{},</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">5</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Runs a function with a timeout.</span>

<span class="sd">    Args:</span>
<span class="sd">        func: The function to execute.</span>
<span class="sd">        args: Tuple of positional arguments for the function.</span>
<span class="sd">        kwargs: Dictionary of keyword arguments for the function.</span>
<span class="sd">        timeout: The timeout in seconds.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The result of the function if it completes within the timeout.</span>

<span class="sd">    Raises:</span>
<span class="sd">        TimeoutError: If the function does not complete within the timeout.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">result</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">exception</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">finished</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Event</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">target</span><span class="p">():</span>
        <span class="k">nonlocal</span> <span class="n">result</span><span class="p">,</span> <span class="n">exception</span>
        <span class="k">try</span><span class="p">:</span> <span class="n">result</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span> <span class="n">exception</span> <span class="o">=</span> <span class="n">e</span>
        <span class="k">finally</span><span class="p">:</span> <span class="n">finished</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>

    <span class="n">timer</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Timer</span><span class="p">(</span><span class="n">timeout</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">finished</span><span class="o">.</span><span class="n">set</span><span class="p">())</span>
    <span class="n">thread</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">target</span><span class="p">)</span>

    <span class="n">timer</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
    <span class="n">thread</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

    <span class="n">finished</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>
    <span class="n">timer</span><span class="o">.</span><span class="n">cancel</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">thread</span><span class="o">.</span><span class="n">is_alive</span><span class="p">():</span>
        <span class="k">raise</span> <span class="ne">TimeoutError</span><span class="p">(</span><span class="s2">&quot;Function execution timed out&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">exception</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">exception</span>

    <span class="k">return</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="iris.gui.image_calibration.objective_calibration.validator_float_greaterThanZero" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">validator_float_greaterThanZero</span><span class="p">(</span><span class="n">input_str</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>A validator function that checks if the input string can be converted to a non-negative float</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>input_str</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Input string to validate</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>bool</code></td>            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if valid, False otherwise</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/utils/general.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">validator_float_greaterThanZero</span><span class="p">(</span><span class="n">input_str</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A validator function that checks if the input string can be converted to a non-negative float</span>

<span class="sd">    Args:</span>
<span class="sd">        input_str (str): Input string to validate</span>

<span class="sd">    Returns:</span>
<span class="sd">        bool: True if valid, False otherwise</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">val</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">input_str</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">val</span> <span class="o">&gt;=</span> <span class="mf">0.0</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../../../..", "features": [], "search": "../../../../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>