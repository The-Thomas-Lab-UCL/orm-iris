
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../image_calibration/plotter_heatmap_overlay/">
      
      
        <link rel="next" href="../raman/">
      
      
        
      
      
      <link rel="icon" href="../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>motion_video - ORM-IRIS Library Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.484c7ddc.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#iris.gui.motion_video" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../.." title="ORM-IRIS Library Documentation" class="md-header__button md-logo" aria-label="ORM-IRIS Library Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ORM-IRIS Library Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              motion_video
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../.." title="ORM-IRIS Library Documentation" class="md-nav__button md-logo" aria-label="ORM-IRIS Library Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    ORM-IRIS Library Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    API Reference
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    API Reference
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1" checked>
        
          
          <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    iris
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    iris
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_1" >
        
          
          <label class="md-nav__link" for="__nav_2_1_1" id="__nav_2_1_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    calibration
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_1_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    calibration
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../calibration/calibration_generator/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    calibration_generator
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../calibration/test_calibrator_wavelength/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    test_calibrator_wavelength
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_2" >
        
          
          <label class="md-nav__link" for="__nav_2_1_2" id="__nav_2_1_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    controllers
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_1_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    controllers
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../controllers/camera_controller_dummy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    camera_controller_dummy
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../controllers/camera_controller_thorlabs_color/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    camera_controller_thorlabs_color
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../controllers/camera_controller_thorlabs_mono/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    camera_controller_thorlabs_mono
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../controllers/camera_controller_webcam/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    camera_controller_webcam
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../controllers/class_camera_controller/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    class_camera_controller
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../controllers/class_spectrometer_controller/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    class_spectrometer_controller
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../controllers/class_xy_stage_controller/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    class_xy_stage_controller
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../controllers/class_z_stage_controller/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    class_z_stage_controller
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../controllers/mcm301_wrapper/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    mcm301_wrapper
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../controllers/oceandirect_wrapper/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    oceandirect_wrapper
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../controllers/raman_spectrometer_controller_Andor_dll/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    raman_spectrometer_controller_Andor_dll
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../controllers/raman_spectrometer_controller_Andor_pylablib/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    raman_spectrometer_controller_Andor_pylablib
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../controllers/raman_spectrometer_controller_PI_dll/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    raman_spectrometer_controller_PI_dll
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../controllers/raman_spectrometer_controller_PI_pylablib/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    raman_spectrometer_controller_PI_pylablib
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../controllers/raman_spectrometer_controller_PI_trial/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    raman_spectrometer_controller_PI_trial
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../controllers/raman_spectrometer_controller_QEPro/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    raman_spectrometer_controller_QEPro
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../controllers/raman_spectrometer_controller_WasatchEnlighten/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    raman_spectrometer_controller_WasatchEnlighten
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../controllers/raman_spectrometer_controller_dummy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    raman_spectrometer_controller_dummy
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../controllers/xy_stage_controller_PI/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    xy_stage_controller_PI
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../controllers/xy_stage_controller_PI_dll/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    xy_stage_controller_PI_dll
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../controllers/xy_stage_controller_dummy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    xy_stage_controller_dummy
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../controllers/xy_stage_controller_m30xy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    xy_stage_controller_m30xy
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../controllers/xy_stage_controller_zaber/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    xy_stage_controller_zaber
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../controllers/z_stage_controller_dummy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    z_stage_controller_dummy
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../controllers/z_stage_controller_mcm301/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    z_stage_controller_mcm301
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../controllers/z_stage_controller_pfm450/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    z_stage_controller_pfm450
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../controllers/z_stage_controller_z825b/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    z_stage_controller_z825b
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_3" >
        
          
          <label class="md-nav__link" for="__nav_2_1_3" id="__nav_2_1_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    data
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_1_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    data
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data/calibration_objective/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    calibration_objective
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data/measurement_Raman/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    measurement_Raman
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data/measurement_RamanMap/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    measurement_RamanMap
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data/measurement_coordinates/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    measurement_coordinates
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data/measurement_image/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    measurement_image
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_4" checked>
        
          
          <label class="md-nav__link" for="__nav_2_1_4" id="__nav_2_1_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    gui
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_1_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_1_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    gui
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dataHub_MeaImg/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    dataHub_MeaImg
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dataHub_MeaRMap/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    dataHub_MeaRMap
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../hilvl_Brightfield/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    hilvl_Brightfield
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../hilvl_Raman/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    hilvl_Raman
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../hilvl_coorGen/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    hilvl_coorGen
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_4_6" >
        
          
          <label class="md-nav__link" for="__nav_2_1_4_6" id="__nav_2_1_4_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    image_calibration
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_1_4_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1_4_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    image_calibration
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../image_calibration/Canvas_ROIdefinition/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Canvas_ROIdefinition
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../image_calibration/objective_calibration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    objective_calibration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../image_calibration/plotter_heatmap_overlay/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    plotter_heatmap_overlay
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    motion_video
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    motion_video
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#iris.gui.motion_video" class="md-nav__link">
    <span class="md-ellipsis">
      
        motion_video
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.motion_video.CustomButton" class="md-nav__link">
    <span class="md-ellipsis">
      
        CustomButton
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CustomButton">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#iris.gui.motion_video.CustomButton.set_left_click_function" class="md-nav__link">
    <span class="md-ellipsis">
      
        set_left_click_function
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.gui.motion_video.CustomButton.set_left_release_function" class="md-nav__link">
    <span class="md-ellipsis">
      
        set_left_release_function
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.gui.motion_video.CustomButton.set_right_click_function" class="md-nav__link">
    <span class="md-ellipsis">
      
        set_right_click_function
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.motion_video.Motion_GetCoordinatesClosest_mm_Worker" class="md-nav__link">
    <span class="md-ellipsis">
      
        Motion_GetCoordinatesClosest_mm_Worker
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.motion_video.Motion_GoToCoor_Worker" class="md-nav__link">
    <span class="md-ellipsis">
      
        Motion_GoToCoor_Worker
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Motion_GoToCoor_Worker">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#iris.gui.motion_video.Motion_GoToCoor_Worker.work" class="md-nav__link">
    <span class="md-ellipsis">
      
        work
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.motion_video.Motion_MoveBreathingZ_Worker" class="md-nav__link">
    <span class="md-ellipsis">
      
        Motion_MoveBreathingZ_Worker
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.motion_video.Wdg_MotionController" class="md-nav__link">
    <span class="md-ellipsis">
      
        Wdg_MotionController
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Wdg_MotionController">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#iris.gui.motion_video.Wdg_MotionController.calculate_vel_relative" class="md-nav__link">
    <span class="md-ellipsis">
      
        calculate_vel_relative
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.gui.motion_video.Wdg_MotionController.check_coordinates" class="md-nav__link">
    <span class="md-ellipsis">
      
        check_coordinates
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.gui.motion_video.Wdg_MotionController.disable_overlays" class="md-nav__link">
    <span class="md-ellipsis">
      
        disable_overlays
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.gui.motion_video.Wdg_MotionController.disable_widgets" class="md-nav__link">
    <span class="md-ellipsis">
      
        disable_widgets
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.gui.motion_video.Wdg_MotionController.enable_widgets" class="md-nav__link">
    <span class="md-ellipsis">
      
        enable_widgets
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.gui.motion_video.Wdg_MotionController.get_VelocityParameters" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_VelocityParameters
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.gui.motion_video.Wdg_MotionController.get_controller_identifiers" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_controller_identifiers
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.gui.motion_video.Wdg_MotionController.get_coordinates_closest_mm" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_coordinates_closest_mm
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.gui.motion_video.Wdg_MotionController.get_current_image" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_current_image
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.gui.motion_video.Wdg_MotionController.get_goto_worker" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_goto_worker
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.gui.motion_video.Wdg_MotionController.get_image_shape" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_image_shape
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.gui.motion_video.Wdg_MotionController.go_to_coordinates" class="md-nav__link">
    <span class="md-ellipsis">
      
        go_to_coordinates
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.gui.motion_video.Wdg_MotionController.incrase_decrease_speed" class="md-nav__link">
    <span class="md-ellipsis">
      
        incrase_decrease_speed
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.gui.motion_video.Wdg_MotionController.motion_button_manager" class="md-nav__link">
    <span class="md-ellipsis">
      
        motion_button_manager
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.gui.motion_video.Wdg_MotionController.move_jog" class="md-nav__link">
    <span class="md-ellipsis">
      
        move_jog
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.gui.motion_video.Wdg_MotionController.set_camera_exposure" class="md-nav__link">
    <span class="md-ellipsis">
      
        set_camera_exposure
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.gui.motion_video.Wdg_MotionController.set_vel_relative" class="md-nav__link">
    <span class="md-ellipsis">
      
        set_vel_relative
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.gui.motion_video.Wdg_MotionController.status_update" class="md-nav__link">
    <span class="md-ellipsis">
      
        status_update
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.gui.motion_video.Wdg_MotionController.terminate" class="md-nav__link">
    <span class="md-ellipsis">
      
        terminate
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.gui.motion_video.Wdg_MotionController.video_initialise" class="md-nav__link">
    <span class="md-ellipsis">
      
        video_initialise
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.gui.motion_video.Wdg_MotionController.video_update" class="md-nav__link">
    <span class="md-ellipsis">
      
        video_update
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.motion_video.check_and_create_config_file" class="md-nav__link">
    <span class="md-ellipsis">
      
        check_and_create_config_file
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.motion_video.convert_ramanshift_to_wavelength" class="md-nav__link">
    <span class="md-ellipsis">
      
        convert_ramanshift_to_wavelength
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.motion_video.convert_timestamp_us_int_to_str" class="md-nav__link">
    <span class="md-ellipsis">
      
        convert_timestamp_us_int_to_str
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.motion_video.convert_timestamp_us_str_to_int" class="md-nav__link">
    <span class="md-ellipsis">
      
        convert_timestamp_us_str_to_int
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.motion_video.convert_wavelength_to_ramanshift" class="md-nav__link">
    <span class="md-ellipsis">
      
        convert_wavelength_to_ramanshift
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.motion_video.generate_dummy_motion_controller" class="md-nav__link">
    <span class="md-ellipsis">
      
        generate_dummy_motion_controller
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.motion_video.generate_test_app" class="md-nav__link">
    <span class="md-ellipsis">
      
        generate_test_app
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.motion_video.get_all_widgets" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_all_widgets
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.motion_video.get_all_widgets_from_layout" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_all_widgets_from_layout
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.motion_video.get_timestamp_day" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_timestamp_day
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.motion_video.get_timestamp_sec" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_timestamp_sec
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.motion_video.get_timestamp_us_int" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_timestamp_us_int
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.motion_video.get_timestamp_us_str" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_timestamp_us_str
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.motion_video.messagebox_request_input" class="md-nav__link">
    <span class="md-ellipsis">
      
        messagebox_request_input
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.motion_video.read_update_config_file_section" class="md-nav__link">
    <span class="md-ellipsis">
      
        read_update_config_file_section
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.motion_video.run_with_timeout" class="md-nav__link">
    <span class="md-ellipsis">
      
        run_with_timeout
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.motion_video.validator_float_greaterThanZero" class="md-nav__link">
    <span class="md-ellipsis">
      
        validator_float_greaterThanZero
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../raman/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    raman
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../shortcut_handler/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    shortcut_handler
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_4_10" >
        
          
          <label class="md-nav__link" for="__nav_2_1_4_10" id="__nav_2_1_4_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    submodules
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_1_4_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1_4_10">
            <span class="md-nav__icon md-icon"></span>
            
  
    submodules
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../submodules/heatmap_plotter_MeaRMap/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    heatmap_plotter_MeaRMap
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../submodules/image_tiling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    image_tiling
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_4_10_3" >
        
          
          <label class="md-nav__link" for="__nav_2_1_4_10_3" id="__nav_2_1_4_10_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    meaCoor_generator
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_2_1_4_10_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1_4_10_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    meaCoor_generator
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../submodules/meaCoor_generator/line_zScan/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    line_zScan
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../submodules/meaCoor_generator/points_image/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    points_image
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../submodules/meaCoor_generator/rectangle_aroundCentre/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    rectangle_aroundCentre
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../submodules/meaCoor_generator/rectangle_endToEnd/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    rectangle_endToEnd
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../submodules/meaCoor_generator/rectangle_image/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    rectangle_image
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../submodules/meaCoor_generator/rectangle_video/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    rectangle_video
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../submodules/meaCoor_generator/singlePoint_zScan/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    singlePoint_zScan
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../submodules/meaCoor_generator/ssfrm_tilemthd1_rect_around/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ssfrm_tilemthd1_rect_around
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_4_10_4" >
        
          
          <label class="md-nav__link" for="__nav_2_1_4_10_4" id="__nav_2_1_4_10_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    meaCoor_modifier
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_2_1_4_10_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1_4_10_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    meaCoor_modifier
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../submodules/meaCoor_modifier/every_z/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    every_z
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../submodules/meaCoor_modifier/gridify/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    gridify
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../submodules/meaCoor_modifier/topology_visualiser/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    topology_visualiser
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../submodules/meaCoor_modifier/translateXYZ/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    translateXYZ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../submodules/meaCoor_modifier/zInterpolate/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    zInterpolate
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../submodules/peakfinder_plotter_MeaRaman/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    peakfinder_plotter_MeaRaman
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../timestamp_coorshift/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    timestamp_coorshift
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../main_analyser/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    main_analyser
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_6" >
        
          
          <label class="md-nav__link" for="__nav_2_1_6" id="__nav_2_1_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    multiprocessing
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_1_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    multiprocessing
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../multiprocessing/basemanager/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    basemanager
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../multiprocessing/dataStreamer_Raman/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    dataStreamer_Raman
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../multiprocessing/dataStreamer_StageCam/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    dataStreamer_StageCam
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_7" >
        
          
          <label class="md-nav__link" for="__nav_2_1_7" id="__nav_2_1_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    resources
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_1_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    resources
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_7_1" >
        
          
          <label class="md-nav__link" for="__nav_2_1_7_1" id="__nav_2_1_7_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    coordinate_generators
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_1_7_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1_7_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    coordinate_generators
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/coordinate_generators/convert_2Dto3D_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    convert_2Dto3D_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/coordinate_generators/point_image_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    point_image_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/coordinate_generators/point_zScanLinear_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    point_zScanLinear_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/coordinate_generators/rect_aroundcentre_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    rect_aroundcentre_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/coordinate_generators/rect_image_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    rect_image_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/coordinate_generators/rect_startend_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    rect_startend_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/coordinate_generators/rect_video_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    rect_video_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_7_2" >
        
          
          <label class="md-nav__link" for="__nav_2_1_7_2" id="__nav_2_1_7_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    coordinate_modifiers
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_1_7_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1_7_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    coordinate_modifiers
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/coordinate_modifiers/every_z_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    every_z_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/coordinate_modifiers/gridify_setup_finetuning_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    gridify_setup_finetuning_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/coordinate_modifiers/gridify_setup_naming_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    gridify_setup_naming_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/coordinate_modifiers/gridify_setup_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    gridify_setup_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/coordinate_modifiers/topology_visuliser_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    topology_visuliser_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/coordinate_modifiers/translator_xyz_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    translator_xyz_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/coordinate_modifiers/zInterpolate_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    zInterpolate_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/dataHubPlus_Raman_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    dataHubPlus_Raman_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/dataHub_Raman_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    dataHub_Raman_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/dataHub_coor_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    dataHub_coor_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/dataHub_image_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    dataHub_image_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/heatmap_plotter_overlay_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    heatmap_plotter_overlay_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/heatmap_plotter_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    heatmap_plotter_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/hilvl_Raman_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    hilvl_Raman_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/hilvl_brightfield_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    hilvl_brightfield_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/hilvl_coorGen_coorMod_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    hilvl_coorGen_coorMod_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/hilvl_coorGen_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    hilvl_coorGen_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/main_analyser_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    main_analyser_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/main_controller_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    main_controller_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_7_15" >
        
          
          <label class="md-nav__link" for="__nav_2_1_7_15" id="__nav_2_1_7_15_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    motion_video
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_1_7_15_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1_7_15">
            <span class="md-nav__icon md-icon"></span>
            
  
    motion_video
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/motion_video/brightfieldcontrol_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    brightfieldcontrol_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/motion_video/stagecontrol_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    stagecontrol_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/objective_calibration_controls_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    objective_calibration_controls_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/objective_calibration_main_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    objective_calibration_main_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/objectives_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    objectives_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/raman_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    raman_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/spectra_peak_finder_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    spectra_peak_finder_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/spectrometer_calibration_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    spectrometer_calibration_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/tiling_method_control_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    tiling_method_control_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/tiling_method_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    tiling_method_ui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_8" >
        
          
          <label class="md-nav__link" for="__nav_2_1_8" id="__nav_2_1_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    utils
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_1_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    utils
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/general/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    general
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/gridify/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    gridify
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#iris.gui.motion_video" class="md-nav__link">
    <span class="md-ellipsis">
      
        motion_video
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.motion_video.CustomButton" class="md-nav__link">
    <span class="md-ellipsis">
      
        CustomButton
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CustomButton">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#iris.gui.motion_video.CustomButton.set_left_click_function" class="md-nav__link">
    <span class="md-ellipsis">
      
        set_left_click_function
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.gui.motion_video.CustomButton.set_left_release_function" class="md-nav__link">
    <span class="md-ellipsis">
      
        set_left_release_function
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.gui.motion_video.CustomButton.set_right_click_function" class="md-nav__link">
    <span class="md-ellipsis">
      
        set_right_click_function
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.motion_video.Motion_GetCoordinatesClosest_mm_Worker" class="md-nav__link">
    <span class="md-ellipsis">
      
        Motion_GetCoordinatesClosest_mm_Worker
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.motion_video.Motion_GoToCoor_Worker" class="md-nav__link">
    <span class="md-ellipsis">
      
        Motion_GoToCoor_Worker
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Motion_GoToCoor_Worker">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#iris.gui.motion_video.Motion_GoToCoor_Worker.work" class="md-nav__link">
    <span class="md-ellipsis">
      
        work
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.motion_video.Motion_MoveBreathingZ_Worker" class="md-nav__link">
    <span class="md-ellipsis">
      
        Motion_MoveBreathingZ_Worker
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.motion_video.Wdg_MotionController" class="md-nav__link">
    <span class="md-ellipsis">
      
        Wdg_MotionController
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Wdg_MotionController">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#iris.gui.motion_video.Wdg_MotionController.calculate_vel_relative" class="md-nav__link">
    <span class="md-ellipsis">
      
        calculate_vel_relative
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.gui.motion_video.Wdg_MotionController.check_coordinates" class="md-nav__link">
    <span class="md-ellipsis">
      
        check_coordinates
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.gui.motion_video.Wdg_MotionController.disable_overlays" class="md-nav__link">
    <span class="md-ellipsis">
      
        disable_overlays
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.gui.motion_video.Wdg_MotionController.disable_widgets" class="md-nav__link">
    <span class="md-ellipsis">
      
        disable_widgets
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.gui.motion_video.Wdg_MotionController.enable_widgets" class="md-nav__link">
    <span class="md-ellipsis">
      
        enable_widgets
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.gui.motion_video.Wdg_MotionController.get_VelocityParameters" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_VelocityParameters
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.gui.motion_video.Wdg_MotionController.get_controller_identifiers" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_controller_identifiers
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.gui.motion_video.Wdg_MotionController.get_coordinates_closest_mm" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_coordinates_closest_mm
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.gui.motion_video.Wdg_MotionController.get_current_image" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_current_image
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.gui.motion_video.Wdg_MotionController.get_goto_worker" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_goto_worker
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.gui.motion_video.Wdg_MotionController.get_image_shape" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_image_shape
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.gui.motion_video.Wdg_MotionController.go_to_coordinates" class="md-nav__link">
    <span class="md-ellipsis">
      
        go_to_coordinates
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.gui.motion_video.Wdg_MotionController.incrase_decrease_speed" class="md-nav__link">
    <span class="md-ellipsis">
      
        incrase_decrease_speed
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.gui.motion_video.Wdg_MotionController.motion_button_manager" class="md-nav__link">
    <span class="md-ellipsis">
      
        motion_button_manager
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.gui.motion_video.Wdg_MotionController.move_jog" class="md-nav__link">
    <span class="md-ellipsis">
      
        move_jog
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.gui.motion_video.Wdg_MotionController.set_camera_exposure" class="md-nav__link">
    <span class="md-ellipsis">
      
        set_camera_exposure
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.gui.motion_video.Wdg_MotionController.set_vel_relative" class="md-nav__link">
    <span class="md-ellipsis">
      
        set_vel_relative
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.gui.motion_video.Wdg_MotionController.status_update" class="md-nav__link">
    <span class="md-ellipsis">
      
        status_update
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.gui.motion_video.Wdg_MotionController.terminate" class="md-nav__link">
    <span class="md-ellipsis">
      
        terminate
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.gui.motion_video.Wdg_MotionController.video_initialise" class="md-nav__link">
    <span class="md-ellipsis">
      
        video_initialise
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iris.gui.motion_video.Wdg_MotionController.video_update" class="md-nav__link">
    <span class="md-ellipsis">
      
        video_update
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.motion_video.check_and_create_config_file" class="md-nav__link">
    <span class="md-ellipsis">
      
        check_and_create_config_file
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.motion_video.convert_ramanshift_to_wavelength" class="md-nav__link">
    <span class="md-ellipsis">
      
        convert_ramanshift_to_wavelength
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.motion_video.convert_timestamp_us_int_to_str" class="md-nav__link">
    <span class="md-ellipsis">
      
        convert_timestamp_us_int_to_str
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.motion_video.convert_timestamp_us_str_to_int" class="md-nav__link">
    <span class="md-ellipsis">
      
        convert_timestamp_us_str_to_int
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.motion_video.convert_wavelength_to_ramanshift" class="md-nav__link">
    <span class="md-ellipsis">
      
        convert_wavelength_to_ramanshift
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.motion_video.generate_dummy_motion_controller" class="md-nav__link">
    <span class="md-ellipsis">
      
        generate_dummy_motion_controller
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.motion_video.generate_test_app" class="md-nav__link">
    <span class="md-ellipsis">
      
        generate_test_app
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.motion_video.get_all_widgets" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_all_widgets
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.motion_video.get_all_widgets_from_layout" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_all_widgets_from_layout
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.motion_video.get_timestamp_day" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_timestamp_day
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.motion_video.get_timestamp_sec" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_timestamp_sec
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.motion_video.get_timestamp_us_int" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_timestamp_us_int
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.motion_video.get_timestamp_us_str" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_timestamp_us_str
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.motion_video.messagebox_request_input" class="md-nav__link">
    <span class="md-ellipsis">
      
        messagebox_request_input
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.motion_video.read_update_config_file_section" class="md-nav__link">
    <span class="md-ellipsis">
      
        read_update_config_file_section
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.motion_video.run_with_timeout" class="md-nav__link">
    <span class="md-ellipsis">
      
        run_with_timeout
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iris.gui.motion_video.validator_float_greaterThanZero" class="md-nav__link">
    <span class="md-ellipsis">
      
        validator_float_greaterThanZero
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



  <h1>motion_video</h1>

<div class="doc doc-object doc-module">



<a id="iris.gui.motion_video"></a>
    <div class="doc doc-contents first">

        <p>A class that manages the motion controller aspect for the Thorlabs stages</p>
<p>Made on: 04 March 2024
By: Kevin Uning
For: The Thomas Group, Biochemical Engineering Dept., UCL</p>










<div class="doc doc-children">









<div class="doc doc-object doc-class">



<h2 id="iris.gui.motion_video.CustomButton" class="doc doc-heading">
            <code>CustomButton</code>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="iris.utils.general.qw.QPushButton">QPushButton</span></code></p>










              <details class="mkdocstrings-source">
                <summary>Source code in <code>iris/gui/motion_video.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">CustomButton</span><span class="p">(</span><span class="n">qw</span><span class="o">.</span><span class="n">QPushButton</span><span class="p">):</span>
    <span class="c1"># Define custom signals for left and right clicks</span>
    <span class="n">rightClicked</span> <span class="o">=</span> <span class="n">Signal</span><span class="p">()</span>
    <span class="n">leftClicked</span> <span class="o">=</span> <span class="n">Signal</span><span class="p">()</span>
    <span class="n">leftReleased</span> <span class="o">=</span> <span class="n">Signal</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="c1"># Connect the custom signals to the provided functions</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_left_click_function</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[],</span> <span class="n">Any</span><span class="p">]):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the function to be called on left click</span>

<span class="sd">        Args:</span>
<span class="sd">            func (Callable[[], Any]): The function to be called on left click</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">leftClicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_left_release_function</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[],</span> <span class="n">Any</span><span class="p">]):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the function to be called on left button release</span>

<span class="sd">        Args:</span>
<span class="sd">            func (Callable[[], Any]): The function to be called on left button release</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">leftReleased</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_right_click_function</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[],</span> <span class="n">Any</span><span class="p">]):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the function to be called on right click</span>

<span class="sd">        Args:</span>
<span class="sd">            func (Callable[[], Any]): The function to be called on right click</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rightClicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">mousePressEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">button</span><span class="p">()</span> <span class="o">==</span> <span class="n">qt</span><span class="o">.</span><span class="n">MouseButton</span><span class="o">.</span><span class="n">LeftButton</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">leftClicked</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">button</span><span class="p">()</span> <span class="o">==</span> <span class="n">qt</span><span class="o">.</span><span class="n">MouseButton</span><span class="o">.</span><span class="n">RightButton</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rightClicked</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">mousePressEvent</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">mouseReleaseEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">button</span><span class="p">()</span> <span class="o">==</span> <span class="n">qt</span><span class="o">.</span><span class="n">MouseButton</span><span class="o">.</span><span class="n">LeftButton</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">leftReleased</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">mouseReleaseEvent</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



<div class="doc doc-children">










<div class="doc doc-object doc-function">


<h3 id="iris.gui.motion_video.CustomButton.set_left_click_function" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_left_click_function</span><span class="p">(</span><span class="n">func</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Sets the function to be called on left click</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>func</code>
            </td>
            <td>
                  <code><span title="iris.utils.general.Callable">Callable</span>[[], <span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The function to be called on left click</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/gui/motion_video.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span>
<span class="normal">97</span>
<span class="normal">98</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_left_click_function</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[],</span> <span class="n">Any</span><span class="p">]):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sets the function to be called on left click</span>

<span class="sd">    Args:</span>
<span class="sd">        func (Callable[[], Any]): The function to be called on left click</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">leftClicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.gui.motion_video.CustomButton.set_left_release_function" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_left_release_function</span><span class="p">(</span><span class="n">func</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Sets the function to be called on left button release</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>func</code>
            </td>
            <td>
                  <code><span title="iris.utils.general.Callable">Callable</span>[[], <span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The function to be called on left button release</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/gui/motion_video.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_left_release_function</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[],</span> <span class="n">Any</span><span class="p">]):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sets the function to be called on left button release</span>

<span class="sd">    Args:</span>
<span class="sd">        func (Callable[[], Any]): The function to be called on left button release</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">leftReleased</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.gui.motion_video.CustomButton.set_right_click_function" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_right_click_function</span><span class="p">(</span><span class="n">func</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Sets the function to be called on right click</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>func</code>
            </td>
            <td>
                  <code><span title="iris.utils.general.Callable">Callable</span>[[], <span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The function to be called on right click</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/gui/motion_video.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_right_click_function</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[],</span> <span class="n">Any</span><span class="p">]):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sets the function to be called on right click</span>

<span class="sd">    Args:</span>
<span class="sd">        func (Callable[[], Any]): The function to be called on right click</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">rightClicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="iris.gui.motion_video.Motion_GetCoordinatesClosest_mm_Worker" class="doc doc-heading">
            <code>Motion_GetCoordinatesClosest_mm_Worker</code>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="PySide6.QtCore.QObject">QObject</span></code></p>



        <p>A worker to get the closest coordinates in mm from the stage controller</p>








              <details class="mkdocstrings-source">
                <summary>Source code in <code>iris/gui/motion_video.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Motion_GetCoordinatesClosest_mm_Worker</span><span class="p">(</span><span class="n">QObject</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A worker to get the closest coordinates in mm from the stage controller</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">sig_coor</span> <span class="o">=</span> <span class="n">Signal</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stageHub</span><span class="p">:</span><span class="n">DataStreamer_StageCam</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_stageHub</span> <span class="o">=</span> <span class="n">stageHub</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_get_coor</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">timestamp_req</span> <span class="o">=</span> <span class="n">get_timestamp_us_int</span><span class="p">()</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_stageHub</span><span class="o">.</span><span class="n">get_coordinates_closest</span><span class="p">(</span><span class="n">timestamp_req</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">result</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span><span class="kc">None</span><span class="p">,</span><span class="kc">None</span><span class="p">)</span>

        <span class="n">coor_x</span><span class="p">,</span><span class="n">coor_y</span><span class="p">,</span><span class="n">coor_z</span> <span class="o">=</span> <span class="n">result</span>
        <span class="n">coor</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">coor_x</span><span class="p">,</span><span class="n">coor_y</span><span class="p">,</span><span class="n">coor_z</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">coor</span>

    <span class="nd">@Slot</span><span class="p">()</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">work_async</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">coor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_coor</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sig_coor</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">coor</span><span class="p">)</span>

    <span class="nd">@Slot</span><span class="p">(</span><span class="n">queue</span><span class="o">.</span><span class="n">Queue</span><span class="p">)</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">work_sync</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">q_ret</span><span class="p">:</span><span class="n">queue</span><span class="o">.</span><span class="n">Queue</span><span class="p">):</span>
        <span class="n">coor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_coor</span><span class="p">()</span>
        <span class="n">q_ret</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">coor</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



<div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="iris.gui.motion_video.Motion_GoToCoor_Worker" class="doc doc-heading">
            <code>Motion_GoToCoor_Worker</code>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="PySide6.QtCore.QObject">QObject</span></code></p>



        <p>A worker to move the stage to the target coordinates</p>








              <details class="mkdocstrings-source">
                <summary>Source code in <code>iris/gui/motion_video.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Motion_GoToCoor_Worker</span><span class="p">(</span><span class="n">QObject</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A worker to move the stage to the target coordinates</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">sig_mvmt_started</span> <span class="o">=</span> <span class="n">Signal</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
    <span class="n">sig_mvmt_finished</span> <span class="o">=</span> <span class="n">Signal</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>

    <span class="n">msg_target_reached</span> <span class="o">=</span> <span class="s1">&#39;Target reached&#39;</span>
    <span class="n">msg_target_timeout</span> <span class="o">=</span> <span class="s1">&#39;Timeout waiting for target&#39;</span>
    <span class="n">msg_target_failed</span> <span class="o">=</span> <span class="s1">&#39;Failed to set or reach target&#39;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stageHub</span><span class="p">:</span><span class="n">DataStreamer_StageCam</span><span class="p">,</span> <span class="n">ctrl_xy</span><span class="p">:</span> <span class="s1">&#39;Controller_XY&#39;</span><span class="p">,</span>
                 <span class="n">ctrl_z</span><span class="p">:</span> <span class="s1">&#39;Controller_Z&#39;</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_stageHub</span> <span class="o">=</span> <span class="n">stageHub</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ctrl_xy</span> <span class="o">=</span> <span class="n">ctrl_xy</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ctrl_z</span> <span class="o">=</span> <span class="n">ctrl_z</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_get_coor</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="o">|</span><span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the current coordinates from the stage hub</span>

<span class="sd">        Returns:</span>
<span class="sd">            np.ndarray: The current coordinates in mm (x,y,z)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">timestamp_req</span> <span class="o">=</span> <span class="n">get_timestamp_us_int</span><span class="p">()</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_stageHub</span><span class="o">.</span><span class="n">get_coordinates_closest</span><span class="p">(</span><span class="n">timestamp_req</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">result</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span> <span class="k">return</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span> <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_notify_finish</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">thread_xy</span><span class="p">:</span><span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">,</span> <span class="n">thread_z</span><span class="p">:</span><span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">,</span>
                       <span class="n">event_finished</span><span class="p">:</span><span class="n">threading</span><span class="o">.</span><span class="n">Event</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Waits for the target to be reached, the coordinate doesn&#39;t update within the timeout, raises a TimeoutError</span>

<span class="sd">        Args:</span>
<span class="sd">            thread_xy (threading.Thread): The thread moving the XY stage</span>
<span class="sd">            thread_z (threading.Thread): The thread moving the Z stage</span>
<span class="sd">            timeout (float): Timeout in seconds</span>

<span class="sd">        Raises:</span>
<span class="sd">            TimeoutError: If the target is not reached within the timeout</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">timeout</span> <span class="o">=</span> <span class="n">WAIT_MOVEMENT_TIMEOUT</span>

        <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="n">coor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_coor</span><span class="p">()</span>
        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">thread_xy</span><span class="o">.</span><span class="n">is_alive</span><span class="p">()</span> <span class="ow">or</span> <span class="n">thread_z</span><span class="o">.</span><span class="n">is_alive</span><span class="p">():</span>
                <span class="n">thread_xy</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span>
                <span class="n">thread_z</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">event_finished</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">sig_mvmt_finished</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">msg_target_reached</span><span class="p">)</span>
                <span class="k">break</span>

            <span class="k">if</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span> <span class="o">&gt;</span> <span class="n">timeout</span><span class="p">:</span>
                <span class="n">event_finished</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">sig_mvmt_finished</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">msg_target_timeout</span><span class="p">)</span>

            <span class="n">coor_new</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_coor</span><span class="p">()</span>
            <span class="c1"># Resets the timer if the coordinates are not the same (i.e., the stage is still moving)</span>
            <span class="k">if</span> <span class="n">coor_new</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span> <span class="k">continue</span>
            <span class="k">if</span> <span class="n">coor</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span> <span class="n">coor</span> <span class="o">=</span> <span class="n">coor_new</span>
            <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">allclose</span><span class="p">(</span><span class="n">coor</span><span class="p">,</span><span class="n">coor_new</span><span class="p">,</span><span class="n">atol</span><span class="o">=</span><span class="mf">0.001</span><span class="p">):</span> <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
            <span class="n">coor</span> <span class="o">=</span> <span class="n">coor_new</span>

    <span class="nd">@Slot</span><span class="p">(</span><span class="nb">tuple</span><span class="p">,</span> <span class="n">threading</span><span class="o">.</span><span class="n">Event</span><span class="p">)</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">work</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">coors_mm</span><span class="p">:</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">],</span>
        <span class="n">event_finished</span><span class="p">:</span><span class="n">threading</span><span class="o">.</span><span class="n">Event</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Moves the stage to specific coordinates, except if None is provided</span>

<span class="sd">        Args:</span>
<span class="sd">            coors_mm (tuple[float,float,float]): Target coordinates in mm (x,y,z). Use None to skip moving that axis.</span>
<span class="sd">            event_finished (threading.Event): An event to signal when the movement is finished.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># print(&#39;Motion_GoToCoor_Worker.work() called with coordinates (mm):&#39;,coors_mm)</span>
        <span class="c1"># print(&#39;Thread ID:&#39;, threading.current_thread().ident)</span>
        <span class="c1"># If None is provided, assign the current coordinates (i.e., do not move)</span>
        <span class="n">coor_x_mm</span><span class="p">,</span> <span class="n">coor_y_mm</span><span class="p">,</span> <span class="n">coor_z_mm</span> <span class="o">=</span> <span class="n">coors_mm</span>
        <span class="k">if</span> <span class="nb">any</span><span class="p">([</span><span class="n">coor_x_mm</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">,</span><span class="n">coor_y_mm</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">,</span><span class="n">coor_z_mm</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">]):</span>
            <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_coor</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">res</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">sig_mvmt_finished</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">msg_target_failed</span><span class="p">)</span>
                <span class="k">return</span>
            <span class="n">coor_x_current</span><span class="p">,</span><span class="n">coor_y_current</span><span class="p">,</span><span class="n">coor_z_current</span> <span class="o">=</span> <span class="n">res</span>
            <span class="k">if</span> <span class="n">coor_x_mm</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span> <span class="n">coor_x_mm</span> <span class="o">=</span> <span class="n">coor_x_current</span>
            <span class="k">if</span> <span class="n">coor_y_mm</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span> <span class="n">coor_y_mm</span> <span class="o">=</span> <span class="n">coor_y_current</span>
            <span class="k">if</span> <span class="n">coor_z_mm</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span> <span class="n">coor_z_mm</span> <span class="o">=</span> <span class="n">coor_z_current</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">sig_mvmt_started</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="s1">&#39;Moving to X: </span><span class="si">{:.3f}</span><span class="s1"> Y: </span><span class="si">{:.3f}</span><span class="s1"> Z: </span><span class="si">{:.3f}</span><span class="s1"> mm&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">coor_x_mm</span><span class="p">,</span><span class="n">coor_y_mm</span><span class="p">,</span><span class="n">coor_z_mm</span><span class="p">))</span>

        <span class="c1"># Operate both stages at once</span>
        <span class="n">thread_xy_move</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">ctrl_xy</span><span class="o">.</span><span class="n">move_direct</span><span class="p">,</span><span class="n">args</span><span class="o">=</span><span class="p">((</span><span class="n">coor_x_mm</span><span class="p">,</span><span class="n">coor_y_mm</span><span class="p">),))</span>
        <span class="n">thread_z_move</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">ctrl_z</span><span class="o">.</span><span class="n">move_direct</span><span class="p">,</span><span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">coor_z_mm</span><span class="p">,))</span>

        <span class="n">thread_xy_move</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
        <span class="n">thread_z_move</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_notify_finish</span><span class="p">(</span><span class="n">thread_xy_move</span><span class="p">,</span><span class="n">thread_z_move</span><span class="p">,</span><span class="n">event_finished</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



<div class="doc doc-children">










<div class="doc doc-object doc-function">


<h3 id="iris.gui.motion_video.Motion_GoToCoor_Worker.work" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">work</span><span class="p">(</span><span class="n">coors_mm</span><span class="p">,</span> <span class="n">event_finished</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Moves the stage to specific coordinates, except if None is provided</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>coors_mm</code>
            </td>
            <td>
                  <code><span title="tuple">tuple</span>[<span title="float">float</span>, <span title="float">float</span>, <span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Target coordinates in mm (x,y,z). Use None to skip moving that axis.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>event_finished</code>
            </td>
            <td>
                  <code><span title="iris.utils.general.threading.Event">Event</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An event to signal when the movement is finished.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/gui/motion_video.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@Slot</span><span class="p">(</span><span class="nb">tuple</span><span class="p">,</span> <span class="n">threading</span><span class="o">.</span><span class="n">Event</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">work</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">coors_mm</span><span class="p">:</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">],</span>
    <span class="n">event_finished</span><span class="p">:</span><span class="n">threading</span><span class="o">.</span><span class="n">Event</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Moves the stage to specific coordinates, except if None is provided</span>

<span class="sd">    Args:</span>
<span class="sd">        coors_mm (tuple[float,float,float]): Target coordinates in mm (x,y,z). Use None to skip moving that axis.</span>
<span class="sd">        event_finished (threading.Event): An event to signal when the movement is finished.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># print(&#39;Motion_GoToCoor_Worker.work() called with coordinates (mm):&#39;,coors_mm)</span>
    <span class="c1"># print(&#39;Thread ID:&#39;, threading.current_thread().ident)</span>
    <span class="c1"># If None is provided, assign the current coordinates (i.e., do not move)</span>
    <span class="n">coor_x_mm</span><span class="p">,</span> <span class="n">coor_y_mm</span><span class="p">,</span> <span class="n">coor_z_mm</span> <span class="o">=</span> <span class="n">coors_mm</span>
    <span class="k">if</span> <span class="nb">any</span><span class="p">([</span><span class="n">coor_x_mm</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">,</span><span class="n">coor_y_mm</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">,</span><span class="n">coor_z_mm</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">]):</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_coor</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">res</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sig_mvmt_finished</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">msg_target_failed</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="n">coor_x_current</span><span class="p">,</span><span class="n">coor_y_current</span><span class="p">,</span><span class="n">coor_z_current</span> <span class="o">=</span> <span class="n">res</span>
        <span class="k">if</span> <span class="n">coor_x_mm</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span> <span class="n">coor_x_mm</span> <span class="o">=</span> <span class="n">coor_x_current</span>
        <span class="k">if</span> <span class="n">coor_y_mm</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span> <span class="n">coor_y_mm</span> <span class="o">=</span> <span class="n">coor_y_current</span>
        <span class="k">if</span> <span class="n">coor_z_mm</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span> <span class="n">coor_z_mm</span> <span class="o">=</span> <span class="n">coor_z_current</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">sig_mvmt_started</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="s1">&#39;Moving to X: </span><span class="si">{:.3f}</span><span class="s1"> Y: </span><span class="si">{:.3f}</span><span class="s1"> Z: </span><span class="si">{:.3f}</span><span class="s1"> mm&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">coor_x_mm</span><span class="p">,</span><span class="n">coor_y_mm</span><span class="p">,</span><span class="n">coor_z_mm</span><span class="p">))</span>

    <span class="c1"># Operate both stages at once</span>
    <span class="n">thread_xy_move</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">ctrl_xy</span><span class="o">.</span><span class="n">move_direct</span><span class="p">,</span><span class="n">args</span><span class="o">=</span><span class="p">((</span><span class="n">coor_x_mm</span><span class="p">,</span><span class="n">coor_y_mm</span><span class="p">),))</span>
    <span class="n">thread_z_move</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">ctrl_z</span><span class="o">.</span><span class="n">move_direct</span><span class="p">,</span><span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">coor_z_mm</span><span class="p">,))</span>

    <span class="n">thread_xy_move</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
    <span class="n">thread_z_move</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_notify_finish</span><span class="p">(</span><span class="n">thread_xy_move</span><span class="p">,</span><span class="n">thread_z_move</span><span class="p">,</span><span class="n">event_finished</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="iris.gui.motion_video.Motion_MoveBreathingZ_Worker" class="doc doc-heading">
            <code>Motion_MoveBreathingZ_Worker</code>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="PySide6.QtCore.QObject">QObject</span></code></p>



        <p>Moves the z-stage up and down for a few cycles</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>flg_done</code>
            </td>
            <td>
                  <code><span title="iris.utils.general.threading.Event">Event</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A flag to stop the breathing motion</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>








              <details class="mkdocstrings-source">
                <summary>Source code in <code>iris/gui/motion_video.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Motion_MoveBreathingZ_Worker</span><span class="p">(</span><span class="n">QObject</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Moves the z-stage up and down for a few cycles</span>

<span class="sd">    Args:</span>
<span class="sd">        flg_done (threading.Event): A flag to stop the breathing motion</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">signal_breathing_finished</span> <span class="o">=</span> <span class="n">Signal</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctrl_z</span><span class="p">:</span> <span class="s1">&#39;Controller_Z&#39;</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ctrl_z</span> <span class="o">=</span> <span class="n">ctrl_z</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_breathing_timer</span><span class="p">:</span> <span class="n">QTimer</span><span class="o">|</span><span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="nd">@Slot</span><span class="p">()</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">start</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_breathing_timer</span> <span class="o">=</span> <span class="n">QTimer</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_breathing_timer</span><span class="o">.</span><span class="n">timeout</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_do_breathing_step</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_breathing_state</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># Use a state machine to track the motion</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_breathing_timer</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="c1"># 50ms interval</span>

    <span class="nd">@Slot</span><span class="p">()</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_do_breathing_step</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># A simple state machine to perform the sequence</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_breathing_state</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ctrl_z</span><span class="o">.</span><span class="n">move_jog</span><span class="p">(</span><span class="s1">&#39;zfwd&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_breathing_state</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ctrl_z</span><span class="o">.</span><span class="n">move_jog</span><span class="p">(</span><span class="s1">&#39;zrev&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_breathing_state</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ctrl_z</span><span class="o">.</span><span class="n">move_jog</span><span class="p">(</span><span class="s1">&#39;zrev&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_breathing_state</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ctrl_z</span><span class="o">.</span><span class="n">move_jog</span><span class="p">(</span><span class="s1">&#39;zfwd&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_breathing_state</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_breathing_state</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="mi">4</span>

    <span class="nd">@Slot</span><span class="p">()</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">stop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_breathing_timer</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_breathing_timer</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">signal_breathing_finished</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
              </details>



<div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="iris.gui.motion_video.Wdg_MotionController" class="doc doc-heading">
            <code>Wdg_MotionController</code>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="iris.utils.general.qw.QGroupBox">QGroupBox</span></code></p>



        <p>A class to control the app subwindow for the motion:
- video output
- stage control and calibration</p>
<p>Future update:
- Image recognition of the stage &gt;&gt; auto-detect coordinates</p>
<blockquote>
<blockquote>
<p>move stage automatically by clicking on the video feed
also show the move distance limitation with a red square
inlayed on top of the video output</p>
</blockquote>
</blockquote>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>tk</code>
            </td>
            <td>
                  <code>None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Nothing needed here</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>








              <details class="mkdocstrings-source">
                <summary>Source code in <code>iris/gui/motion_video.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 405</span>
<span class="normal"> 406</span>
<span class="normal"> 407</span>
<span class="normal"> 408</span>
<span class="normal"> 409</span>
<span class="normal"> 410</span>
<span class="normal"> 411</span>
<span class="normal"> 412</span>
<span class="normal"> 413</span>
<span class="normal"> 414</span>
<span class="normal"> 415</span>
<span class="normal"> 416</span>
<span class="normal"> 417</span>
<span class="normal"> 418</span>
<span class="normal"> 419</span>
<span class="normal"> 420</span>
<span class="normal"> 421</span>
<span class="normal"> 422</span>
<span class="normal"> 423</span>
<span class="normal"> 424</span>
<span class="normal"> 425</span>
<span class="normal"> 426</span>
<span class="normal"> 427</span>
<span class="normal"> 428</span>
<span class="normal"> 429</span>
<span class="normal"> 430</span>
<span class="normal"> 431</span>
<span class="normal"> 432</span>
<span class="normal"> 433</span>
<span class="normal"> 434</span>
<span class="normal"> 435</span>
<span class="normal"> 436</span>
<span class="normal"> 437</span>
<span class="normal"> 438</span>
<span class="normal"> 439</span>
<span class="normal"> 440</span>
<span class="normal"> 441</span>
<span class="normal"> 442</span>
<span class="normal"> 443</span>
<span class="normal"> 444</span>
<span class="normal"> 445</span>
<span class="normal"> 446</span>
<span class="normal"> 447</span>
<span class="normal"> 448</span>
<span class="normal"> 449</span>
<span class="normal"> 450</span>
<span class="normal"> 451</span>
<span class="normal"> 452</span>
<span class="normal"> 453</span>
<span class="normal"> 454</span>
<span class="normal"> 455</span>
<span class="normal"> 456</span>
<span class="normal"> 457</span>
<span class="normal"> 458</span>
<span class="normal"> 459</span>
<span class="normal"> 460</span>
<span class="normal"> 461</span>
<span class="normal"> 462</span>
<span class="normal"> 463</span>
<span class="normal"> 464</span>
<span class="normal"> 465</span>
<span class="normal"> 466</span>
<span class="normal"> 467</span>
<span class="normal"> 468</span>
<span class="normal"> 469</span>
<span class="normal"> 470</span>
<span class="normal"> 471</span>
<span class="normal"> 472</span>
<span class="normal"> 473</span>
<span class="normal"> 474</span>
<span class="normal"> 475</span>
<span class="normal"> 476</span>
<span class="normal"> 477</span>
<span class="normal"> 478</span>
<span class="normal"> 479</span>
<span class="normal"> 480</span>
<span class="normal"> 481</span>
<span class="normal"> 482</span>
<span class="normal"> 483</span>
<span class="normal"> 484</span>
<span class="normal"> 485</span>
<span class="normal"> 486</span>
<span class="normal"> 487</span>
<span class="normal"> 488</span>
<span class="normal"> 489</span>
<span class="normal"> 490</span>
<span class="normal"> 491</span>
<span class="normal"> 492</span>
<span class="normal"> 493</span>
<span class="normal"> 494</span>
<span class="normal"> 495</span>
<span class="normal"> 496</span>
<span class="normal"> 497</span>
<span class="normal"> 498</span>
<span class="normal"> 499</span>
<span class="normal"> 500</span>
<span class="normal"> 501</span>
<span class="normal"> 502</span>
<span class="normal"> 503</span>
<span class="normal"> 504</span>
<span class="normal"> 505</span>
<span class="normal"> 506</span>
<span class="normal"> 507</span>
<span class="normal"> 508</span>
<span class="normal"> 509</span>
<span class="normal"> 510</span>
<span class="normal"> 511</span>
<span class="normal"> 512</span>
<span class="normal"> 513</span>
<span class="normal"> 514</span>
<span class="normal"> 515</span>
<span class="normal"> 516</span>
<span class="normal"> 517</span>
<span class="normal"> 518</span>
<span class="normal"> 519</span>
<span class="normal"> 520</span>
<span class="normal"> 521</span>
<span class="normal"> 522</span>
<span class="normal"> 523</span>
<span class="normal"> 524</span>
<span class="normal"> 525</span>
<span class="normal"> 526</span>
<span class="normal"> 527</span>
<span class="normal"> 528</span>
<span class="normal"> 529</span>
<span class="normal"> 530</span>
<span class="normal"> 531</span>
<span class="normal"> 532</span>
<span class="normal"> 533</span>
<span class="normal"> 534</span>
<span class="normal"> 535</span>
<span class="normal"> 536</span>
<span class="normal"> 537</span>
<span class="normal"> 538</span>
<span class="normal"> 539</span>
<span class="normal"> 540</span>
<span class="normal"> 541</span>
<span class="normal"> 542</span>
<span class="normal"> 543</span>
<span class="normal"> 544</span>
<span class="normal"> 545</span>
<span class="normal"> 546</span>
<span class="normal"> 547</span>
<span class="normal"> 548</span>
<span class="normal"> 549</span>
<span class="normal"> 550</span>
<span class="normal"> 551</span>
<span class="normal"> 552</span>
<span class="normal"> 553</span>
<span class="normal"> 554</span>
<span class="normal"> 555</span>
<span class="normal"> 556</span>
<span class="normal"> 557</span>
<span class="normal"> 558</span>
<span class="normal"> 559</span>
<span class="normal"> 560</span>
<span class="normal"> 561</span>
<span class="normal"> 562</span>
<span class="normal"> 563</span>
<span class="normal"> 564</span>
<span class="normal"> 565</span>
<span class="normal"> 566</span>
<span class="normal"> 567</span>
<span class="normal"> 568</span>
<span class="normal"> 569</span>
<span class="normal"> 570</span>
<span class="normal"> 571</span>
<span class="normal"> 572</span>
<span class="normal"> 573</span>
<span class="normal"> 574</span>
<span class="normal"> 575</span>
<span class="normal"> 576</span>
<span class="normal"> 577</span>
<span class="normal"> 578</span>
<span class="normal"> 579</span>
<span class="normal"> 580</span>
<span class="normal"> 581</span>
<span class="normal"> 582</span>
<span class="normal"> 583</span>
<span class="normal"> 584</span>
<span class="normal"> 585</span>
<span class="normal"> 586</span>
<span class="normal"> 587</span>
<span class="normal"> 588</span>
<span class="normal"> 589</span>
<span class="normal"> 590</span>
<span class="normal"> 591</span>
<span class="normal"> 592</span>
<span class="normal"> 593</span>
<span class="normal"> 594</span>
<span class="normal"> 595</span>
<span class="normal"> 596</span>
<span class="normal"> 597</span>
<span class="normal"> 598</span>
<span class="normal"> 599</span>
<span class="normal"> 600</span>
<span class="normal"> 601</span>
<span class="normal"> 602</span>
<span class="normal"> 603</span>
<span class="normal"> 604</span>
<span class="normal"> 605</span>
<span class="normal"> 606</span>
<span class="normal"> 607</span>
<span class="normal"> 608</span>
<span class="normal"> 609</span>
<span class="normal"> 610</span>
<span class="normal"> 611</span>
<span class="normal"> 612</span>
<span class="normal"> 613</span>
<span class="normal"> 614</span>
<span class="normal"> 615</span>
<span class="normal"> 616</span>
<span class="normal"> 617</span>
<span class="normal"> 618</span>
<span class="normal"> 619</span>
<span class="normal"> 620</span>
<span class="normal"> 621</span>
<span class="normal"> 622</span>
<span class="normal"> 623</span>
<span class="normal"> 624</span>
<span class="normal"> 625</span>
<span class="normal"> 626</span>
<span class="normal"> 627</span>
<span class="normal"> 628</span>
<span class="normal"> 629</span>
<span class="normal"> 630</span>
<span class="normal"> 631</span>
<span class="normal"> 632</span>
<span class="normal"> 633</span>
<span class="normal"> 634</span>
<span class="normal"> 635</span>
<span class="normal"> 636</span>
<span class="normal"> 637</span>
<span class="normal"> 638</span>
<span class="normal"> 639</span>
<span class="normal"> 640</span>
<span class="normal"> 641</span>
<span class="normal"> 642</span>
<span class="normal"> 643</span>
<span class="normal"> 644</span>
<span class="normal"> 645</span>
<span class="normal"> 646</span>
<span class="normal"> 647</span>
<span class="normal"> 648</span>
<span class="normal"> 649</span>
<span class="normal"> 650</span>
<span class="normal"> 651</span>
<span class="normal"> 652</span>
<span class="normal"> 653</span>
<span class="normal"> 654</span>
<span class="normal"> 655</span>
<span class="normal"> 656</span>
<span class="normal"> 657</span>
<span class="normal"> 658</span>
<span class="normal"> 659</span>
<span class="normal"> 660</span>
<span class="normal"> 661</span>
<span class="normal"> 662</span>
<span class="normal"> 663</span>
<span class="normal"> 664</span>
<span class="normal"> 665</span>
<span class="normal"> 666</span>
<span class="normal"> 667</span>
<span class="normal"> 668</span>
<span class="normal"> 669</span>
<span class="normal"> 670</span>
<span class="normal"> 671</span>
<span class="normal"> 672</span>
<span class="normal"> 673</span>
<span class="normal"> 674</span>
<span class="normal"> 675</span>
<span class="normal"> 676</span>
<span class="normal"> 677</span>
<span class="normal"> 678</span>
<span class="normal"> 679</span>
<span class="normal"> 680</span>
<span class="normal"> 681</span>
<span class="normal"> 682</span>
<span class="normal"> 683</span>
<span class="normal"> 684</span>
<span class="normal"> 685</span>
<span class="normal"> 686</span>
<span class="normal"> 687</span>
<span class="normal"> 688</span>
<span class="normal"> 689</span>
<span class="normal"> 690</span>
<span class="normal"> 691</span>
<span class="normal"> 692</span>
<span class="normal"> 693</span>
<span class="normal"> 694</span>
<span class="normal"> 695</span>
<span class="normal"> 696</span>
<span class="normal"> 697</span>
<span class="normal"> 698</span>
<span class="normal"> 699</span>
<span class="normal"> 700</span>
<span class="normal"> 701</span>
<span class="normal"> 702</span>
<span class="normal"> 703</span>
<span class="normal"> 704</span>
<span class="normal"> 705</span>
<span class="normal"> 706</span>
<span class="normal"> 707</span>
<span class="normal"> 708</span>
<span class="normal"> 709</span>
<span class="normal"> 710</span>
<span class="normal"> 711</span>
<span class="normal"> 712</span>
<span class="normal"> 713</span>
<span class="normal"> 714</span>
<span class="normal"> 715</span>
<span class="normal"> 716</span>
<span class="normal"> 717</span>
<span class="normal"> 718</span>
<span class="normal"> 719</span>
<span class="normal"> 720</span>
<span class="normal"> 721</span>
<span class="normal"> 722</span>
<span class="normal"> 723</span>
<span class="normal"> 724</span>
<span class="normal"> 725</span>
<span class="normal"> 726</span>
<span class="normal"> 727</span>
<span class="normal"> 728</span>
<span class="normal"> 729</span>
<span class="normal"> 730</span>
<span class="normal"> 731</span>
<span class="normal"> 732</span>
<span class="normal"> 733</span>
<span class="normal"> 734</span>
<span class="normal"> 735</span>
<span class="normal"> 736</span>
<span class="normal"> 737</span>
<span class="normal"> 738</span>
<span class="normal"> 739</span>
<span class="normal"> 740</span>
<span class="normal"> 741</span>
<span class="normal"> 742</span>
<span class="normal"> 743</span>
<span class="normal"> 744</span>
<span class="normal"> 745</span>
<span class="normal"> 746</span>
<span class="normal"> 747</span>
<span class="normal"> 748</span>
<span class="normal"> 749</span>
<span class="normal"> 750</span>
<span class="normal"> 751</span>
<span class="normal"> 752</span>
<span class="normal"> 753</span>
<span class="normal"> 754</span>
<span class="normal"> 755</span>
<span class="normal"> 756</span>
<span class="normal"> 757</span>
<span class="normal"> 758</span>
<span class="normal"> 759</span>
<span class="normal"> 760</span>
<span class="normal"> 761</span>
<span class="normal"> 762</span>
<span class="normal"> 763</span>
<span class="normal"> 764</span>
<span class="normal"> 765</span>
<span class="normal"> 766</span>
<span class="normal"> 767</span>
<span class="normal"> 768</span>
<span class="normal"> 769</span>
<span class="normal"> 770</span>
<span class="normal"> 771</span>
<span class="normal"> 772</span>
<span class="normal"> 773</span>
<span class="normal"> 774</span>
<span class="normal"> 775</span>
<span class="normal"> 776</span>
<span class="normal"> 777</span>
<span class="normal"> 778</span>
<span class="normal"> 779</span>
<span class="normal"> 780</span>
<span class="normal"> 781</span>
<span class="normal"> 782</span>
<span class="normal"> 783</span>
<span class="normal"> 784</span>
<span class="normal"> 785</span>
<span class="normal"> 786</span>
<span class="normal"> 787</span>
<span class="normal"> 788</span>
<span class="normal"> 789</span>
<span class="normal"> 790</span>
<span class="normal"> 791</span>
<span class="normal"> 792</span>
<span class="normal"> 793</span>
<span class="normal"> 794</span>
<span class="normal"> 795</span>
<span class="normal"> 796</span>
<span class="normal"> 797</span>
<span class="normal"> 798</span>
<span class="normal"> 799</span>
<span class="normal"> 800</span>
<span class="normal"> 801</span>
<span class="normal"> 802</span>
<span class="normal"> 803</span>
<span class="normal"> 804</span>
<span class="normal"> 805</span>
<span class="normal"> 806</span>
<span class="normal"> 807</span>
<span class="normal"> 808</span>
<span class="normal"> 809</span>
<span class="normal"> 810</span>
<span class="normal"> 811</span>
<span class="normal"> 812</span>
<span class="normal"> 813</span>
<span class="normal"> 814</span>
<span class="normal"> 815</span>
<span class="normal"> 816</span>
<span class="normal"> 817</span>
<span class="normal"> 818</span>
<span class="normal"> 819</span>
<span class="normal"> 820</span>
<span class="normal"> 821</span>
<span class="normal"> 822</span>
<span class="normal"> 823</span>
<span class="normal"> 824</span>
<span class="normal"> 825</span>
<span class="normal"> 826</span>
<span class="normal"> 827</span>
<span class="normal"> 828</span>
<span class="normal"> 829</span>
<span class="normal"> 830</span>
<span class="normal"> 831</span>
<span class="normal"> 832</span>
<span class="normal"> 833</span>
<span class="normal"> 834</span>
<span class="normal"> 835</span>
<span class="normal"> 836</span>
<span class="normal"> 837</span>
<span class="normal"> 838</span>
<span class="normal"> 839</span>
<span class="normal"> 840</span>
<span class="normal"> 841</span>
<span class="normal"> 842</span>
<span class="normal"> 843</span>
<span class="normal"> 844</span>
<span class="normal"> 845</span>
<span class="normal"> 846</span>
<span class="normal"> 847</span>
<span class="normal"> 848</span>
<span class="normal"> 849</span>
<span class="normal"> 850</span>
<span class="normal"> 851</span>
<span class="normal"> 852</span>
<span class="normal"> 853</span>
<span class="normal"> 854</span>
<span class="normal"> 855</span>
<span class="normal"> 856</span>
<span class="normal"> 857</span>
<span class="normal"> 858</span>
<span class="normal"> 859</span>
<span class="normal"> 860</span>
<span class="normal"> 861</span>
<span class="normal"> 862</span>
<span class="normal"> 863</span>
<span class="normal"> 864</span>
<span class="normal"> 865</span>
<span class="normal"> 866</span>
<span class="normal"> 867</span>
<span class="normal"> 868</span>
<span class="normal"> 869</span>
<span class="normal"> 870</span>
<span class="normal"> 871</span>
<span class="normal"> 872</span>
<span class="normal"> 873</span>
<span class="normal"> 874</span>
<span class="normal"> 875</span>
<span class="normal"> 876</span>
<span class="normal"> 877</span>
<span class="normal"> 878</span>
<span class="normal"> 879</span>
<span class="normal"> 880</span>
<span class="normal"> 881</span>
<span class="normal"> 882</span>
<span class="normal"> 883</span>
<span class="normal"> 884</span>
<span class="normal"> 885</span>
<span class="normal"> 886</span>
<span class="normal"> 887</span>
<span class="normal"> 888</span>
<span class="normal"> 889</span>
<span class="normal"> 890</span>
<span class="normal"> 891</span>
<span class="normal"> 892</span>
<span class="normal"> 893</span>
<span class="normal"> 894</span>
<span class="normal"> 895</span>
<span class="normal"> 896</span>
<span class="normal"> 897</span>
<span class="normal"> 898</span>
<span class="normal"> 899</span>
<span class="normal"> 900</span>
<span class="normal"> 901</span>
<span class="normal"> 902</span>
<span class="normal"> 903</span>
<span class="normal"> 904</span>
<span class="normal"> 905</span>
<span class="normal"> 906</span>
<span class="normal"> 907</span>
<span class="normal"> 908</span>
<span class="normal"> 909</span>
<span class="normal"> 910</span>
<span class="normal"> 911</span>
<span class="normal"> 912</span>
<span class="normal"> 913</span>
<span class="normal"> 914</span>
<span class="normal"> 915</span>
<span class="normal"> 916</span>
<span class="normal"> 917</span>
<span class="normal"> 918</span>
<span class="normal"> 919</span>
<span class="normal"> 920</span>
<span class="normal"> 921</span>
<span class="normal"> 922</span>
<span class="normal"> 923</span>
<span class="normal"> 924</span>
<span class="normal"> 925</span>
<span class="normal"> 926</span>
<span class="normal"> 927</span>
<span class="normal"> 928</span>
<span class="normal"> 929</span>
<span class="normal"> 930</span>
<span class="normal"> 931</span>
<span class="normal"> 932</span>
<span class="normal"> 933</span>
<span class="normal"> 934</span>
<span class="normal"> 935</span>
<span class="normal"> 936</span>
<span class="normal"> 937</span>
<span class="normal"> 938</span>
<span class="normal"> 939</span>
<span class="normal"> 940</span>
<span class="normal"> 941</span>
<span class="normal"> 942</span>
<span class="normal"> 943</span>
<span class="normal"> 944</span>
<span class="normal"> 945</span>
<span class="normal"> 946</span>
<span class="normal"> 947</span>
<span class="normal"> 948</span>
<span class="normal"> 949</span>
<span class="normal"> 950</span>
<span class="normal"> 951</span>
<span class="normal"> 952</span>
<span class="normal"> 953</span>
<span class="normal"> 954</span>
<span class="normal"> 955</span>
<span class="normal"> 956</span>
<span class="normal"> 957</span>
<span class="normal"> 958</span>
<span class="normal"> 959</span>
<span class="normal"> 960</span>
<span class="normal"> 961</span>
<span class="normal"> 962</span>
<span class="normal"> 963</span>
<span class="normal"> 964</span>
<span class="normal"> 965</span>
<span class="normal"> 966</span>
<span class="normal"> 967</span>
<span class="normal"> 968</span>
<span class="normal"> 969</span>
<span class="normal"> 970</span>
<span class="normal"> 971</span>
<span class="normal"> 972</span>
<span class="normal"> 973</span>
<span class="normal"> 974</span>
<span class="normal"> 975</span>
<span class="normal"> 976</span>
<span class="normal"> 977</span>
<span class="normal"> 978</span>
<span class="normal"> 979</span>
<span class="normal"> 980</span>
<span class="normal"> 981</span>
<span class="normal"> 982</span>
<span class="normal"> 983</span>
<span class="normal"> 984</span>
<span class="normal"> 985</span>
<span class="normal"> 986</span>
<span class="normal"> 987</span>
<span class="normal"> 988</span>
<span class="normal"> 989</span>
<span class="normal"> 990</span>
<span class="normal"> 991</span>
<span class="normal"> 992</span>
<span class="normal"> 993</span>
<span class="normal"> 994</span>
<span class="normal"> 995</span>
<span class="normal"> 996</span>
<span class="normal"> 997</span>
<span class="normal"> 998</span>
<span class="normal"> 999</span>
<span class="normal">1000</span>
<span class="normal">1001</span>
<span class="normal">1002</span>
<span class="normal">1003</span>
<span class="normal">1004</span>
<span class="normal">1005</span>
<span class="normal">1006</span>
<span class="normal">1007</span>
<span class="normal">1008</span>
<span class="normal">1009</span>
<span class="normal">1010</span>
<span class="normal">1011</span>
<span class="normal">1012</span>
<span class="normal">1013</span>
<span class="normal">1014</span>
<span class="normal">1015</span>
<span class="normal">1016</span>
<span class="normal">1017</span>
<span class="normal">1018</span>
<span class="normal">1019</span>
<span class="normal">1020</span>
<span class="normal">1021</span>
<span class="normal">1022</span>
<span class="normal">1023</span>
<span class="normal">1024</span>
<span class="normal">1025</span>
<span class="normal">1026</span>
<span class="normal">1027</span>
<span class="normal">1028</span>
<span class="normal">1029</span>
<span class="normal">1030</span>
<span class="normal">1031</span>
<span class="normal">1032</span>
<span class="normal">1033</span>
<span class="normal">1034</span>
<span class="normal">1035</span>
<span class="normal">1036</span>
<span class="normal">1037</span>
<span class="normal">1038</span>
<span class="normal">1039</span>
<span class="normal">1040</span>
<span class="normal">1041</span>
<span class="normal">1042</span>
<span class="normal">1043</span>
<span class="normal">1044</span>
<span class="normal">1045</span>
<span class="normal">1046</span>
<span class="normal">1047</span>
<span class="normal">1048</span>
<span class="normal">1049</span>
<span class="normal">1050</span>
<span class="normal">1051</span>
<span class="normal">1052</span>
<span class="normal">1053</span>
<span class="normal">1054</span>
<span class="normal">1055</span>
<span class="normal">1056</span>
<span class="normal">1057</span>
<span class="normal">1058</span>
<span class="normal">1059</span>
<span class="normal">1060</span>
<span class="normal">1061</span>
<span class="normal">1062</span>
<span class="normal">1063</span>
<span class="normal">1064</span>
<span class="normal">1065</span>
<span class="normal">1066</span>
<span class="normal">1067</span>
<span class="normal">1068</span>
<span class="normal">1069</span>
<span class="normal">1070</span>
<span class="normal">1071</span>
<span class="normal">1072</span>
<span class="normal">1073</span>
<span class="normal">1074</span>
<span class="normal">1075</span>
<span class="normal">1076</span>
<span class="normal">1077</span>
<span class="normal">1078</span>
<span class="normal">1079</span>
<span class="normal">1080</span>
<span class="normal">1081</span>
<span class="normal">1082</span>
<span class="normal">1083</span>
<span class="normal">1084</span>
<span class="normal">1085</span>
<span class="normal">1086</span>
<span class="normal">1087</span>
<span class="normal">1088</span>
<span class="normal">1089</span>
<span class="normal">1090</span>
<span class="normal">1091</span>
<span class="normal">1092</span>
<span class="normal">1093</span>
<span class="normal">1094</span>
<span class="normal">1095</span>
<span class="normal">1096</span>
<span class="normal">1097</span>
<span class="normal">1098</span>
<span class="normal">1099</span>
<span class="normal">1100</span>
<span class="normal">1101</span>
<span class="normal">1102</span>
<span class="normal">1103</span>
<span class="normal">1104</span>
<span class="normal">1105</span>
<span class="normal">1106</span>
<span class="normal">1107</span>
<span class="normal">1108</span>
<span class="normal">1109</span>
<span class="normal">1110</span>
<span class="normal">1111</span>
<span class="normal">1112</span>
<span class="normal">1113</span>
<span class="normal">1114</span>
<span class="normal">1115</span>
<span class="normal">1116</span>
<span class="normal">1117</span>
<span class="normal">1118</span>
<span class="normal">1119</span>
<span class="normal">1120</span>
<span class="normal">1121</span>
<span class="normal">1122</span>
<span class="normal">1123</span>
<span class="normal">1124</span>
<span class="normal">1125</span>
<span class="normal">1126</span>
<span class="normal">1127</span>
<span class="normal">1128</span>
<span class="normal">1129</span>
<span class="normal">1130</span>
<span class="normal">1131</span>
<span class="normal">1132</span>
<span class="normal">1133</span>
<span class="normal">1134</span>
<span class="normal">1135</span>
<span class="normal">1136</span>
<span class="normal">1137</span>
<span class="normal">1138</span>
<span class="normal">1139</span>
<span class="normal">1140</span>
<span class="normal">1141</span>
<span class="normal">1142</span>
<span class="normal">1143</span>
<span class="normal">1144</span>
<span class="normal">1145</span>
<span class="normal">1146</span>
<span class="normal">1147</span>
<span class="normal">1148</span>
<span class="normal">1149</span>
<span class="normal">1150</span>
<span class="normal">1151</span>
<span class="normal">1152</span>
<span class="normal">1153</span>
<span class="normal">1154</span>
<span class="normal">1155</span>
<span class="normal">1156</span>
<span class="normal">1157</span>
<span class="normal">1158</span>
<span class="normal">1159</span>
<span class="normal">1160</span>
<span class="normal">1161</span>
<span class="normal">1162</span>
<span class="normal">1163</span>
<span class="normal">1164</span>
<span class="normal">1165</span>
<span class="normal">1166</span>
<span class="normal">1167</span>
<span class="normal">1168</span>
<span class="normal">1169</span>
<span class="normal">1170</span>
<span class="normal">1171</span>
<span class="normal">1172</span>
<span class="normal">1173</span>
<span class="normal">1174</span>
<span class="normal">1175</span>
<span class="normal">1176</span>
<span class="normal">1177</span>
<span class="normal">1178</span>
<span class="normal">1179</span>
<span class="normal">1180</span>
<span class="normal">1181</span>
<span class="normal">1182</span>
<span class="normal">1183</span>
<span class="normal">1184</span>
<span class="normal">1185</span>
<span class="normal">1186</span>
<span class="normal">1187</span>
<span class="normal">1188</span>
<span class="normal">1189</span>
<span class="normal">1190</span>
<span class="normal">1191</span>
<span class="normal">1192</span>
<span class="normal">1193</span>
<span class="normal">1194</span>
<span class="normal">1195</span>
<span class="normal">1196</span>
<span class="normal">1197</span>
<span class="normal">1198</span>
<span class="normal">1199</span>
<span class="normal">1200</span>
<span class="normal">1201</span>
<span class="normal">1202</span>
<span class="normal">1203</span>
<span class="normal">1204</span>
<span class="normal">1205</span>
<span class="normal">1206</span>
<span class="normal">1207</span>
<span class="normal">1208</span>
<span class="normal">1209</span>
<span class="normal">1210</span>
<span class="normal">1211</span>
<span class="normal">1212</span>
<span class="normal">1213</span>
<span class="normal">1214</span>
<span class="normal">1215</span>
<span class="normal">1216</span>
<span class="normal">1217</span>
<span class="normal">1218</span>
<span class="normal">1219</span>
<span class="normal">1220</span>
<span class="normal">1221</span>
<span class="normal">1222</span>
<span class="normal">1223</span>
<span class="normal">1224</span>
<span class="normal">1225</span>
<span class="normal">1226</span>
<span class="normal">1227</span>
<span class="normal">1228</span>
<span class="normal">1229</span>
<span class="normal">1230</span>
<span class="normal">1231</span>
<span class="normal">1232</span>
<span class="normal">1233</span>
<span class="normal">1234</span>
<span class="normal">1235</span>
<span class="normal">1236</span>
<span class="normal">1237</span>
<span class="normal">1238</span>
<span class="normal">1239</span>
<span class="normal">1240</span>
<span class="normal">1241</span>
<span class="normal">1242</span>
<span class="normal">1243</span>
<span class="normal">1244</span>
<span class="normal">1245</span>
<span class="normal">1246</span>
<span class="normal">1247</span>
<span class="normal">1248</span>
<span class="normal">1249</span>
<span class="normal">1250</span>
<span class="normal">1251</span>
<span class="normal">1252</span>
<span class="normal">1253</span>
<span class="normal">1254</span>
<span class="normal">1255</span>
<span class="normal">1256</span>
<span class="normal">1257</span>
<span class="normal">1258</span>
<span class="normal">1259</span>
<span class="normal">1260</span>
<span class="normal">1261</span>
<span class="normal">1262</span>
<span class="normal">1263</span>
<span class="normal">1264</span>
<span class="normal">1265</span>
<span class="normal">1266</span>
<span class="normal">1267</span>
<span class="normal">1268</span>
<span class="normal">1269</span>
<span class="normal">1270</span>
<span class="normal">1271</span>
<span class="normal">1272</span>
<span class="normal">1273</span>
<span class="normal">1274</span>
<span class="normal">1275</span>
<span class="normal">1276</span>
<span class="normal">1277</span>
<span class="normal">1278</span>
<span class="normal">1279</span>
<span class="normal">1280</span>
<span class="normal">1281</span>
<span class="normal">1282</span>
<span class="normal">1283</span>
<span class="normal">1284</span>
<span class="normal">1285</span>
<span class="normal">1286</span>
<span class="normal">1287</span>
<span class="normal">1288</span>
<span class="normal">1289</span>
<span class="normal">1290</span>
<span class="normal">1291</span>
<span class="normal">1292</span>
<span class="normal">1293</span>
<span class="normal">1294</span>
<span class="normal">1295</span>
<span class="normal">1296</span>
<span class="normal">1297</span>
<span class="normal">1298</span>
<span class="normal">1299</span>
<span class="normal">1300</span>
<span class="normal">1301</span>
<span class="normal">1302</span>
<span class="normal">1303</span>
<span class="normal">1304</span>
<span class="normal">1305</span>
<span class="normal">1306</span>
<span class="normal">1307</span>
<span class="normal">1308</span>
<span class="normal">1309</span>
<span class="normal">1310</span>
<span class="normal">1311</span>
<span class="normal">1312</span>
<span class="normal">1313</span>
<span class="normal">1314</span>
<span class="normal">1315</span>
<span class="normal">1316</span>
<span class="normal">1317</span>
<span class="normal">1318</span>
<span class="normal">1319</span>
<span class="normal">1320</span>
<span class="normal">1321</span>
<span class="normal">1322</span>
<span class="normal">1323</span>
<span class="normal">1324</span>
<span class="normal">1325</span>
<span class="normal">1326</span>
<span class="normal">1327</span>
<span class="normal">1328</span>
<span class="normal">1329</span>
<span class="normal">1330</span>
<span class="normal">1331</span>
<span class="normal">1332</span>
<span class="normal">1333</span>
<span class="normal">1334</span>
<span class="normal">1335</span>
<span class="normal">1336</span>
<span class="normal">1337</span>
<span class="normal">1338</span>
<span class="normal">1339</span>
<span class="normal">1340</span>
<span class="normal">1341</span>
<span class="normal">1342</span>
<span class="normal">1343</span>
<span class="normal">1344</span>
<span class="normal">1345</span>
<span class="normal">1346</span>
<span class="normal">1347</span>
<span class="normal">1348</span>
<span class="normal">1349</span>
<span class="normal">1350</span>
<span class="normal">1351</span>
<span class="normal">1352</span>
<span class="normal">1353</span>
<span class="normal">1354</span>
<span class="normal">1355</span>
<span class="normal">1356</span>
<span class="normal">1357</span>
<span class="normal">1358</span>
<span class="normal">1359</span>
<span class="normal">1360</span>
<span class="normal">1361</span>
<span class="normal">1362</span>
<span class="normal">1363</span>
<span class="normal">1364</span>
<span class="normal">1365</span>
<span class="normal">1366</span>
<span class="normal">1367</span>
<span class="normal">1368</span>
<span class="normal">1369</span>
<span class="normal">1370</span>
<span class="normal">1371</span>
<span class="normal">1372</span>
<span class="normal">1373</span>
<span class="normal">1374</span>
<span class="normal">1375</span>
<span class="normal">1376</span>
<span class="normal">1377</span>
<span class="normal">1378</span>
<span class="normal">1379</span>
<span class="normal">1380</span>
<span class="normal">1381</span>
<span class="normal">1382</span>
<span class="normal">1383</span>
<span class="normal">1384</span>
<span class="normal">1385</span>
<span class="normal">1386</span>
<span class="normal">1387</span>
<span class="normal">1388</span>
<span class="normal">1389</span>
<span class="normal">1390</span>
<span class="normal">1391</span>
<span class="normal">1392</span>
<span class="normal">1393</span>
<span class="normal">1394</span>
<span class="normal">1395</span>
<span class="normal">1396</span>
<span class="normal">1397</span>
<span class="normal">1398</span>
<span class="normal">1399</span>
<span class="normal">1400</span>
<span class="normal">1401</span>
<span class="normal">1402</span>
<span class="normal">1403</span>
<span class="normal">1404</span>
<span class="normal">1405</span>
<span class="normal">1406</span>
<span class="normal">1407</span>
<span class="normal">1408</span>
<span class="normal">1409</span>
<span class="normal">1410</span>
<span class="normal">1411</span>
<span class="normal">1412</span>
<span class="normal">1413</span>
<span class="normal">1414</span>
<span class="normal">1415</span>
<span class="normal">1416</span>
<span class="normal">1417</span>
<span class="normal">1418</span>
<span class="normal">1419</span>
<span class="normal">1420</span>
<span class="normal">1421</span>
<span class="normal">1422</span>
<span class="normal">1423</span>
<span class="normal">1424</span>
<span class="normal">1425</span>
<span class="normal">1426</span>
<span class="normal">1427</span>
<span class="normal">1428</span>
<span class="normal">1429</span>
<span class="normal">1430</span>
<span class="normal">1431</span>
<span class="normal">1432</span>
<span class="normal">1433</span>
<span class="normal">1434</span>
<span class="normal">1435</span>
<span class="normal">1436</span>
<span class="normal">1437</span>
<span class="normal">1438</span>
<span class="normal">1439</span>
<span class="normal">1440</span>
<span class="normal">1441</span>
<span class="normal">1442</span>
<span class="normal">1443</span>
<span class="normal">1444</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Wdg_MotionController</span><span class="p">(</span><span class="n">qw</span><span class="o">.</span><span class="n">QGroupBox</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A class to control the app subwindow for the motion:</span>
<span class="sd">    - video output</span>
<span class="sd">    - stage control and calibration</span>

<span class="sd">    Future update:</span>
<span class="sd">    - Image recognition of the stage &gt;&gt; auto-detect coordinates</span>
<span class="sd">    &gt;&gt; move stage automatically by clicking on the video feed</span>
<span class="sd">    &gt;&gt; also show the move distance limitation with a red square</span>
<span class="sd">    inlayed on top of the video output</span>

<span class="sd">    Args:</span>
<span class="sd">        tk (None): Nothing needed here</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">sig_statbar_message</span> <span class="o">=</span> <span class="n">Signal</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="nb">str</span><span class="p">)</span>  <span class="c1"># A signal to update the status bar message</span>
    <span class="n">sig_breathing_stopped</span> <span class="o">=</span> <span class="n">Signal</span><span class="p">()</span>

    <span class="n">_sig_go_to_coordinates</span> <span class="o">=</span> <span class="n">Signal</span><span class="p">(</span><span class="nb">tuple</span><span class="p">,</span><span class="n">threading</span><span class="o">.</span><span class="n">Event</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">parent</span><span class="p">,</span>
        <span class="n">xy_controller</span><span class="p">:</span><span class="n">Controller_XY</span><span class="p">,</span>
        <span class="n">z_controller</span><span class="p">:</span><span class="n">Controller_Z</span><span class="p">,</span>
        <span class="n">stageHub</span><span class="p">:</span><span class="n">DataStreamer_StageCam</span><span class="p">,</span>
        <span class="n">getter_imgcal</span><span class="p">:</span><span class="n">Callable</span><span class="p">[[],</span><span class="n">ImgMea_Cal</span><span class="p">],</span>
        <span class="n">flg_issimulation</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">main</span><span class="p">:</span><span class="nb">bool</span><span class="o">=</span><span class="kc">False</span>
        <span class="p">):</span>
        <span class="c1"># Initialise the class</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_stageHub</span><span class="p">:</span><span class="n">DataStreamer_StageCam</span> <span class="o">=</span> <span class="n">stageHub</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_getter_imgcal</span> <span class="o">=</span> <span class="n">getter_imgcal</span>   <span class="c1"># A getter method to get the image calibration</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_flg_isrunning</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Event</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_flg_isrunning</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>  <span class="c1"># A flag to check if the thread is running</span>

    <span class="c1"># &gt;&gt;&gt; Simulation setup &lt;&lt;&lt;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">flg_issimulation</span> <span class="o">=</span> <span class="n">flg_issimulation</span>    <span class="c1"># If True, request the motion controller to do a simulation instead</span>

    <span class="c1"># &gt;&gt;&gt; Top layout &lt;&lt;&lt;</span>
        <span class="n">main_layout</span> <span class="o">=</span> <span class="n">qw</span><span class="o">.</span><span class="n">QVBoxLayout</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>  <span class="c1"># The main layout for the entire frame</span>
        <span class="n">wdg_video</span> <span class="o">=</span> <span class="n">BrightfieldController</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>  <span class="c1"># Top layout compartment for the video</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_wdg_stage</span> <span class="o">=</span> <span class="n">StageControl</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_statbar</span> <span class="o">=</span> <span class="n">qw</span><span class="o">.</span><span class="n">QStatusBar</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>  <span class="c1"># Status bar at the bottom</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_statbar</span><span class="o">.</span><span class="n">showMessage</span><span class="p">(</span><span class="s2">&quot;Video and stage initialisation&quot;</span><span class="p">)</span>

        <span class="n">main_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">wdg_video</span><span class="p">)</span>
        <span class="n">main_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_wdg_stage</span><span class="p">)</span>
        <span class="n">main_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_statbar</span><span class="p">)</span>

    <span class="c1"># &gt;&gt;&gt; Video widgets and parameter setup &lt;&lt;&lt;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_camera_ctrl</span><span class="p">:</span><span class="n">CameraController</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_stageHub</span><span class="o">.</span><span class="n">get_camera_controller</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_video_height</span> <span class="o">=</span> <span class="n">ControllerConfigEnum</span><span class="o">.</span><span class="n">VIDEOFEED_HEIGHT</span><span class="o">.</span><span class="n">value</span>    <span class="c1"># Video feed height in pixel</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_flg_isvideorunning</span> <span class="o">=</span> <span class="kc">False</span>         <span class="c1"># A flag to turn on/off the video</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_currentImage</span><span class="p">:</span><span class="n">Image</span><span class="o">.</span><span class="n">Image</span><span class="o">|</span><span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>   <span class="c1"># The current image to be displayed</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_currentFrame</span> <span class="o">=</span> <span class="kc">None</span>               <span class="c1"># The current frame to be displayed</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_flg_isNewFrmReady</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Event</span><span class="p">()</span>  <span class="c1"># A flag to wait for the frame to be captured</span>

        <span class="c1"># &gt;&gt; Sub-frame setup &lt;&lt;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_init_video_widgets</span><span class="p">(</span><span class="n">stageHub</span><span class="p">,</span> <span class="n">wdg_video</span><span class="p">)</span>

    <span class="c1"># &gt;&gt;&gt; Motion widgets and parameter setup &lt;&lt;&lt;</span>
        <span class="c1"># Set up the variable for the controller later</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ctrl_xy</span> <span class="o">=</span> <span class="n">xy_controller</span>    <span class="c1"># The xy-stage controller (proxy)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ctrl_z</span> <span class="o">=</span> <span class="n">z_controller</span>      <span class="c1"># The z-stage controller (proxy)</span>

        <span class="k">try</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_controller_id_camera</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_stageHub</span><span class="o">.</span><span class="n">get_camera_controller</span><span class="p">()</span><span class="o">.</span><span class="n">get_identifier</span><span class="p">()</span>
        <span class="k">except</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_controller_id_camera</span> <span class="o">=</span> <span class="s1">&#39;failed to get camera ID&#39;</span><span class="p">;</span> <span class="n">qw</span><span class="o">.</span><span class="n">QErrorMessage</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">showMessage</span><span class="p">(</span><span class="s1">&#39;Failed to get camera ID&#39;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_controller_id_xy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ctrl_xy</span><span class="o">.</span><span class="n">get_identifier</span><span class="p">()</span>
        <span class="k">except</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_controller_id_xy</span> <span class="o">=</span> <span class="s1">&#39;failed to get xy ID&#39;</span><span class="p">;</span> <span class="n">qw</span><span class="o">.</span><span class="n">QErrorMessage</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">showMessage</span><span class="p">(</span><span class="s1">&#39;Failed to get xy stage ID&#39;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_controller_id_z</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ctrl_z</span><span class="o">.</span><span class="n">get_identifier</span><span class="p">()</span>
        <span class="k">except</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_controller_id_z</span> <span class="o">=</span> <span class="s1">&#39;failed to get z ID&#39;</span><span class="p">;</span> <span class="n">qw</span><span class="o">.</span><span class="n">QErrorMessage</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">showMessage</span><span class="p">(</span><span class="s1">&#39;Failed to get z stage ID&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_current_coor</span><span class="p">:</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>  <span class="c1"># The current coordinates of the stage, only to be used internally!</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_flg_ontarget_gotocoor</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Event</span><span class="p">()</span> <span class="c1"># A flag to check if the stage is on target for the go to coordinates</span>

        <span class="c1"># Connection flag</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_flg_connectionReady_xyz</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Event</span><span class="p">()</span>  <span class="c1"># A flag to check if the reconnection is in progress</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_flg_connectionReady_xyz</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>

    <span class="c1"># &gt;&gt;&gt; Continuous motion controller widgets &lt;&lt;&lt;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_init_xyz_control_widgets</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_wdg_stage</span><span class="p">)</span>

    <span class="c1"># &gt;&gt;&gt; Jogging configuration widgets &lt;&lt;&lt;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_init_xyz_jog_widgets</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_wdg_stage</span><span class="p">)</span>

    <span class="c1"># &gt;&gt;&gt; Go to coordinate widgets &lt;&lt;&lt;</span>
        <span class="c1"># Add the entry boxes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_init_gotocoor_widgets</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_wdg_stage</span><span class="p">)</span>

    <span class="c1"># &gt;&gt;&gt; Motor parameter setup widgets &lt;&lt;&lt;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_init_stageparam_widgets</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_wdg_stage</span><span class="p">)</span>

    <span class="c1"># &gt;&gt;&gt; Status update &lt;&lt;&lt;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sig_statbar_message</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">status_update</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sig_statbar_message</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="s1">&#39;Initialising the motion controllers&#39;</span><span class="p">,</span><span class="s1">&#39;yellow&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_motion_controller_initialisation</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_init_workers</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">video_initialise</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_init_stageparam_widgets</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">widget</span><span class="p">:</span><span class="n">StageControl</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialises the widgets for the motor parameter setup</span>

<span class="sd">        Args:</span>
<span class="sd">            widget (StageControl): The widget to add the motor parameter setups to</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Coordinate reporting</span>
        <span class="c1"># &gt; Coordinate reporting</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_lbl_coor</span> <span class="o">=</span> <span class="n">widget</span><span class="o">.</span><span class="n">lbl_coor_um</span>

        <span class="c1"># Add the entry boxes, label, and button for the speed parameter setups</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lbl_speed_xy</span> <span class="o">=</span> <span class="n">widget</span><span class="o">.</span><span class="n">lbl_speedxy</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lbl_speed_z</span> <span class="o">=</span> <span class="n">widget</span><span class="o">.</span><span class="n">lbl_speedz</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ent_speed_xy</span> <span class="o">=</span> <span class="n">widget</span><span class="o">.</span><span class="n">ent_speedxy</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ent_speed_z</span> <span class="o">=</span> <span class="n">widget</span><span class="o">.</span><span class="n">ent_speedz</span>

        <span class="c1"># Bind the functions</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ent_speed_xy</span><span class="o">.</span><span class="n">returnPressed</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_set_vel_acc_params</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ent_speed_z</span><span class="o">.</span><span class="n">returnPressed</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_set_vel_acc_params</span><span class="p">())</span>

        <span class="c1"># Disable the widgets until the controller is initialised</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ent_speed_xy</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ent_speed_z</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

        <span class="c1"># Add the entry boxes, label, and button for the jogging parameter setup</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lbl_jog_xy</span> <span class="o">=</span> <span class="n">widget</span><span class="o">.</span><span class="n">lbl_stepsizexy</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lbl_jog_z</span> <span class="o">=</span> <span class="n">widget</span><span class="o">.</span><span class="n">lbl_stepsizez</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ent_jog_xy</span> <span class="o">=</span> <span class="n">widget</span><span class="o">.</span><span class="n">ent_stepxy_um</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ent_jog_z</span> <span class="o">=</span> <span class="n">widget</span><span class="o">.</span><span class="n">ent_stepz_um</span>

        <span class="c1"># Bind the functions</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ent_jog_xy</span><span class="o">.</span><span class="n">returnPressed</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_set_jog_params</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ent_jog_z</span><span class="o">.</span><span class="n">returnPressed</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_set_jog_params</span><span class="p">())</span>

        <span class="c1"># Disable the widgets until the controller is initialised</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ent_jog_xy</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ent_jog_z</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_init_xyz_jog_widgets</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">widget</span><span class="p">:</span> <span class="n">StageControl</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialises the widgets for the jogging configuration</span>

<span class="sd">        Args:</span>
<span class="sd">            widget (StageControl): The widget to add the jogging configuration to</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_chkbox_jog_enabled</span> <span class="o">=</span> <span class="n">widget</span><span class="o">.</span><span class="n">chk_stepmode</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_chkbox_jog_enabled</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>  <span class="c1"># A flag to check if the jogging is enabled</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_init_gotocoor_widgets</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">widget</span><span class="p">:</span><span class="n">StageControl</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialises the widgets for the go to coordinate setup</span>

<span class="sd">        Args:</span>
<span class="sd">            widget (StageControl): The widget to add the go to coordinate controls to</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ent_coor_x</span> <span class="o">=</span> <span class="n">widget</span><span class="o">.</span><span class="n">ent_goto_x_um</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ent_coor_y</span> <span class="o">=</span> <span class="n">widget</span><span class="o">.</span><span class="n">ent_goto_y_um</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ent_coor_z</span> <span class="o">=</span> <span class="n">widget</span><span class="o">.</span><span class="n">ent_goto_z_um</span>

        <span class="c1"># Bind: Enter to go to the coordinates</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ent_coor_x</span><span class="o">.</span><span class="n">returnPressed</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_move_go_to</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ent_coor_y</span><span class="o">.</span><span class="n">returnPressed</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_move_go_to</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ent_coor_z</span><span class="o">.</span><span class="n">returnPressed</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_move_go_to</span><span class="p">())</span>

        <span class="c1"># Add the go to button</span>
        <span class="n">btn_goto</span> <span class="o">=</span> <span class="n">widget</span><span class="o">.</span><span class="n">btn_goto</span>
        <span class="n">btn_goto</span><span class="o">.</span><span class="n">released</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_move_go_to</span><span class="p">())</span>
        <span class="n">btn_goto</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_init_xyz_control_widgets</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">widget</span><span class="p">:</span><span class="n">StageControl</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialises the widgets for the xyz stage control.</span>

<span class="sd">        Args:</span>
<span class="sd">            widget (StageControl): The widget to add the stage control buttons to</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Add the buttons (disabled until controller initialisation)</span>
        <span class="c1">## Add the buttons for the xy stage</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">btn_xy_up</span> <span class="o">=</span> <span class="n">CustomButton</span><span class="p">(</span><span class="s1">&#39;up&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">btn_xy_down</span> <span class="o">=</span> <span class="n">CustomButton</span><span class="p">(</span><span class="s1">&#39;down&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">btn_xy_right</span><span class="o">=</span> <span class="n">CustomButton</span><span class="p">(</span><span class="s1">&#39;right&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">btn_xy_left</span> <span class="o">=</span> <span class="n">CustomButton</span><span class="p">(</span><span class="s1">&#39;left&#39;</span><span class="p">)</span>

        <span class="c1"># Disable the buttons until the controller is initialised</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">btn_xy_up</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">btn_xy_down</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">btn_xy_right</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">btn_xy_left</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

        <span class="c1"># Bind the functions</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">btn_xy_up</span><span class="o">.</span><span class="n">set_left_click_function</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">motion_button_manager</span><span class="p">(</span><span class="s1">&#39;yfwd&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">btn_xy_down</span><span class="o">.</span><span class="n">set_left_click_function</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">motion_button_manager</span><span class="p">(</span><span class="s1">&#39;yrev&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">btn_xy_right</span><span class="o">.</span><span class="n">set_left_click_function</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">motion_button_manager</span><span class="p">(</span><span class="s1">&#39;xfwd&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">btn_xy_left</span><span class="o">.</span><span class="n">set_left_click_function</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">motion_button_manager</span><span class="p">(</span><span class="s1">&#39;xrev&#39;</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">btn_xy_up</span><span class="o">.</span><span class="n">set_left_release_function</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">motion_button_manager</span><span class="p">(</span><span class="s1">&#39;ystop&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">btn_xy_down</span><span class="o">.</span><span class="n">set_left_release_function</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">motion_button_manager</span><span class="p">(</span><span class="s1">&#39;ystop&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">btn_xy_right</span><span class="o">.</span><span class="n">set_left_release_function</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">motion_button_manager</span><span class="p">(</span><span class="s1">&#39;xstop&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">btn_xy_left</span><span class="o">.</span><span class="n">set_left_release_function</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">motion_button_manager</span><span class="p">(</span><span class="s1">&#39;xstop&#39;</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">btn_xy_up</span><span class="o">.</span><span class="n">set_right_click_function</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">move_jog</span><span class="p">(</span><span class="s1">&#39;yfwd&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">btn_xy_down</span><span class="o">.</span><span class="n">set_right_click_function</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">move_jog</span><span class="p">(</span><span class="s1">&#39;yrev&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">btn_xy_right</span><span class="o">.</span><span class="n">set_right_click_function</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">move_jog</span><span class="p">(</span><span class="s1">&#39;xfwd&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">btn_xy_left</span><span class="o">.</span><span class="n">set_right_click_function</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">move_jog</span><span class="p">(</span><span class="s1">&#39;xrev&#39;</span><span class="p">))</span>

        <span class="c1"># Layout configuration</span>
        <span class="n">sslyt_xy_move</span> <span class="o">=</span> <span class="n">widget</span><span class="o">.</span><span class="n">lyt_xy</span>
        <span class="n">sslyt_xy_move</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">btn_xy_up</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">sslyt_xy_move</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">btn_xy_left</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">sslyt_xy_move</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">btn_xy_right</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
        <span class="n">sslyt_xy_move</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">btn_xy_down</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>

        <span class="c1">## Add the buttons for the z stage</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">btn_z_up</span> <span class="o">=</span> <span class="n">CustomButton</span><span class="p">(</span><span class="s1">&#39;up&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">btn_z_down</span> <span class="o">=</span> <span class="n">CustomButton</span><span class="p">(</span><span class="s1">&#39;down&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_btn_z_breathing</span> <span class="o">=</span> <span class="n">qw</span><span class="o">.</span><span class="n">QPushButton</span><span class="p">(</span><span class="s1">&#39;Breathing&#39;</span><span class="p">)</span>

        <span class="c1"># Disable the buttons until the controller is initialised</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">btn_z_up</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">btn_z_down</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_btn_z_breathing</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

        <span class="c1"># Bind the functions</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">btn_z_up</span><span class="o">.</span><span class="n">set_left_click_function</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">motion_button_manager</span><span class="p">(</span><span class="s1">&#39;zfwd&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">btn_z_down</span><span class="o">.</span><span class="n">set_left_click_function</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">motion_button_manager</span><span class="p">(</span><span class="s1">&#39;zrev&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_btn_z_breathing</span><span class="o">.</span><span class="n">released</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_start_breathing_z</span><span class="p">())</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">btn_z_up</span><span class="o">.</span><span class="n">set_left_release_function</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">motion_button_manager</span><span class="p">(</span><span class="s1">&#39;zstop&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">btn_z_down</span><span class="o">.</span><span class="n">set_left_release_function</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">motion_button_manager</span><span class="p">(</span><span class="s1">&#39;zstop&#39;</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">btn_z_up</span><span class="o">.</span><span class="n">set_right_click_function</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">move_jog</span><span class="p">(</span><span class="s1">&#39;zfwd&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">btn_z_down</span><span class="o">.</span><span class="n">set_right_click_function</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">move_jog</span><span class="p">(</span><span class="s1">&#39;zrev&#39;</span><span class="p">))</span>

        <span class="c1"># Layout configuration</span>
        <span class="n">sslyt_z_move</span> <span class="o">=</span> <span class="n">widget</span><span class="o">.</span><span class="n">lyt_z</span>
        <span class="n">sslyt_z_move</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">btn_z_up</span><span class="p">)</span>
        <span class="n">sslyt_z_move</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">btn_z_down</span><span class="p">)</span>
        <span class="n">sslyt_z_move</span><span class="o">.</span><span class="n">addStretch</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">sslyt_z_move</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_btn_z_breathing</span><span class="p">)</span>

        <span class="c1">## Home/Calibration buttons</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">btn_xy_home</span> <span class="o">=</span> <span class="n">widget</span><span class="o">.</span><span class="n">btn_home_xy</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">btn_z_home</span> <span class="o">=</span> <span class="n">widget</span><span class="o">.</span><span class="n">btn_home_z</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">btn_xy_home</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">btn_z_home</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">btn_xy_home</span><span class="o">.</span><span class="n">released</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">motion_button_manager</span><span class="p">(</span><span class="s1">&#39;xyhome&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">btn_z_home</span><span class="o">.</span><span class="n">released</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">motion_button_manager</span><span class="p">(</span><span class="s1">&#39;zhome&#39;</span><span class="p">))</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_init_video_widgets</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stageHub</span><span class="p">:</span> <span class="n">DataStreamer_StageCam</span><span class="p">,</span> <span class="n">wdg_video</span><span class="p">:</span> <span class="n">BrightfieldController</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialises the video widgets and layouts</span>

<span class="sd">        Args:</span>
<span class="sd">            stageHub (DataStreamer_StageCam): The stage hub for video streaming</span>
<span class="sd">            wdg_video (BrightfieldController): The widget for the video feed</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># &gt; Video</span>
        <span class="n">lyt</span> <span class="o">=</span> <span class="n">qw</span><span class="o">.</span><span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_lbl_video</span> <span class="o">=</span> <span class="n">ResizableQLabel</span><span class="p">(</span><span class="n">min_height</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">parent</span><span class="o">=</span><span class="n">wdg_video</span><span class="p">)</span>    <span class="c1"># A label to show the video feed</span>

        <span class="n">wdg_video</span><span class="o">.</span><span class="n">wdg_video</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">lyt</span><span class="p">)</span>
        <span class="n">lyt</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_lbl_video</span><span class="p">)</span>

        <span class="c1"># &gt; Video controllers</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_btn_videotoggle</span> <span class="o">=</span> <span class="n">wdg_video</span><span class="o">.</span><span class="n">btn_camera_onoff</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_btn_reinit_conn</span> <span class="o">=</span> <span class="n">wdg_video</span><span class="o">.</span><span class="n">pushButton_2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_btn_videotoggle</span><span class="o">.</span><span class="n">released</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">video_initialise</span><span class="p">())</span>
        <span class="c1"># self._btn_reinit_conn.released.connect(lambda: self.reinitialise_connection(&#39;camera&#39;))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_btn_reinit_conn</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_btn_videotoggle</span><span class="o">.</span><span class="n">setStyleSheet</span><span class="p">(</span><span class="s1">&#39;background-color: yellow&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_btn_reinit_conn</span><span class="o">.</span><span class="n">setStyleSheet</span><span class="p">(</span><span class="s1">&#39;background-color: yellow&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_chkbox_crosshair</span> <span class="o">=</span> <span class="n">wdg_video</span><span class="o">.</span><span class="n">chk_crosshair</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_chkbox_scalebar</span> <span class="o">=</span> <span class="n">wdg_video</span><span class="o">.</span><span class="n">chk_scalebar</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_chkbox_crosshair</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_chkbox_scalebar</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

        <span class="n">btn_set_imgproc_gain</span> <span class="o">=</span> <span class="n">wdg_video</span><span class="o">.</span><span class="n">btn_setffgain</span>
        <span class="n">btn_set_flatfield</span> <span class="o">=</span> <span class="n">wdg_video</span><span class="o">.</span><span class="n">btn_setff</span>
        <span class="n">btn_save_flatfield</span> <span class="o">=</span> <span class="n">wdg_video</span><span class="o">.</span><span class="n">btn_saveff</span>
        <span class="n">btn_load_flatfield</span> <span class="o">=</span> <span class="n">wdg_video</span><span class="o">.</span><span class="n">btn_loadff</span>
        <span class="n">btn_set_imgproc_gain</span><span class="o">.</span><span class="n">released</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_set_imageProc_gain</span><span class="p">())</span>
        <span class="n">btn_set_flatfield</span><span class="o">.</span><span class="n">released</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_set_flatfield_correction_camera</span><span class="p">())</span>
        <span class="n">btn_save_flatfield</span><span class="o">.</span><span class="n">released</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_save_flatfield_correction</span><span class="p">())</span>
        <span class="n">btn_load_flatfield</span><span class="o">.</span><span class="n">released</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_load_flatfield_correction</span><span class="p">())</span>

        <span class="c1"># Video corrections</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dict_vidcorrection</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_combo_vidcorrection</span> <span class="o">=</span> <span class="n">wdg_video</span><span class="o">.</span><span class="n">combo_image_correction</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_combo_vidcorrection</span><span class="o">.</span><span class="n">addItems</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">stageHub</span><span class="o">.</span><span class="n">Enum_CamCorrectionType</span><span class="o">.</span><span class="n">__members__</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_combo_vidcorrection</span><span class="o">.</span><span class="n">setCurrentIndex</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>


    <span class="k">def</span><span class="w"> </span><span class="nf">_init_workers</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialises the auto-updaters to be used post widget initialisations</span>
<span class="sd">        (ALL THREADS) to prevent the main thread from being blocked</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># For the coordinate status bar</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_worker_coor_report</span> <span class="o">=</span> <span class="n">Motion_AutoCoorReport_Worker</span><span class="p">(</span><span class="n">stageHub</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_stageHub</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_worker_coor_report</span><span class="o">.</span><span class="n">sig_coor</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_lbl_coor</span><span class="o">.</span><span class="n">setText</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_thread_coor_report</span> <span class="o">=</span> <span class="n">QThread</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_worker_coor_report</span><span class="o">.</span><span class="n">moveToThread</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_thread_coor_report</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_thread_coor_report</span><span class="o">.</span><span class="n">started</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_worker_coor_report</span><span class="o">.</span><span class="n">start</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_thread_coor_report</span><span class="o">.</span><span class="n">finished</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_worker_coor_report</span><span class="o">.</span><span class="n">deleteLater</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_thread_coor_report</span><span class="o">.</span><span class="n">finished</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_thread_coor_report</span><span class="o">.</span><span class="n">deleteLater</span><span class="p">)</span>
        <span class="c1"># Defer thread start until after initialization is complete</span>
        <span class="n">QTimer</span><span class="o">.</span><span class="n">singleShot</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_thread_coor_report</span><span class="o">.</span><span class="n">start</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">destroyed</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_thread_coor_report</span><span class="o">.</span><span class="n">quit</span><span class="p">)</span>

        <span class="c1"># For _worker_get_coordinates_closest_mm</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_worker_getcoorclosest</span> <span class="o">=</span> <span class="n">Motion_GetCoordinatesClosest_mm_Worker</span><span class="p">(</span><span class="n">stageHub</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_stageHub</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_thread_getcoorclosest</span> <span class="o">=</span> <span class="n">QThread</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_worker_getcoorclosest</span><span class="o">.</span><span class="n">moveToThread</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_thread_getcoorclosest</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_thread_getcoorclosest</span><span class="o">.</span><span class="n">finished</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_worker_getcoorclosest</span><span class="o">.</span><span class="n">deleteLater</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_thread_getcoorclosest</span><span class="o">.</span><span class="n">finished</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_thread_getcoorclosest</span><span class="o">.</span><span class="n">deleteLater</span><span class="p">)</span>
        <span class="c1"># Defer thread start until after initialization is complete</span>
        <span class="n">QTimer</span><span class="o">.</span><span class="n">singleShot</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_thread_getcoorclosest</span><span class="o">.</span><span class="n">start</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">destroyed</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_thread_getcoorclosest</span><span class="o">.</span><span class="n">quit</span><span class="p">)</span>

        <span class="c1"># For _worker_go_to_coordinates</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_worker_gotocoor</span> <span class="o">=</span> <span class="n">Motion_GoToCoor_Worker</span><span class="p">(</span>
            <span class="n">stageHub</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_stageHub</span><span class="p">,</span>
            <span class="n">ctrl_xy</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">ctrl_xy</span><span class="p">,</span>
            <span class="n">ctrl_z</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">ctrl_z</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_worker_gotocoor</span><span class="o">.</span><span class="n">sig_mvmt_started</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_statbar</span><span class="o">.</span><span class="n">showMessage</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_sig_go_to_coordinates</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_worker_gotocoor</span><span class="o">.</span><span class="n">work</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_thread_gotocoor</span> <span class="o">=</span> <span class="n">QThread</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_worker_gotocoor</span><span class="o">.</span><span class="n">moveToThread</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_thread_gotocoor</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_thread_gotocoor</span><span class="o">.</span><span class="n">finished</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_worker_gotocoor</span><span class="o">.</span><span class="n">deleteLater</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_thread_gotocoor</span><span class="o">.</span><span class="n">finished</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_thread_gotocoor</span><span class="o">.</span><span class="n">deleteLater</span><span class="p">)</span>
        <span class="c1"># Defer thread start until after initialization is complete</span>
        <span class="n">QTimer</span><span class="o">.</span><span class="n">singleShot</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_thread_gotocoor</span><span class="o">.</span><span class="n">start</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">destroyed</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_thread_gotocoor</span><span class="o">.</span><span class="n">quit</span><span class="p">)</span>

        <span class="c1"># self.destroyed.connect(self.terminate)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_goto_worker</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Motion_GoToCoor_Worker</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the worker to command the stage to go to specific coordinates</span>

<span class="sd">        Returns:</span>
<span class="sd">            Motion_GoToCoor_Worker: The worker to perform the goto coordinate command.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_worker_gotocoor</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_set_imageProc_gain</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the gain for the image processing (not setting the gain of the camera directly but</span>
<span class="sd">        through the stage hub). Especially useful for the flatfield correction without overexposing</span>
<span class="sd">        the camera.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">init_gain</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_stageHub</span><span class="o">.</span><span class="n">get_flatfield_gain</span><span class="p">()</span>
            <span class="n">new_gain</span> <span class="o">=</span> <span class="n">messagebox_request_input</span><span class="p">(</span>
                <span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
                <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Set gain&#39;</span><span class="p">,</span>
                <span class="n">message</span><span class="o">=</span><span class="s1">&#39;Set gain for the image processing (not camera gain)&#39;</span><span class="p">,</span>
                <span class="n">default</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">init_gain</span><span class="p">),</span>
                <span class="n">validator</span><span class="o">=</span><span class="n">validator_float_greaterThanZero</span><span class="p">,</span>
                <span class="n">invalid_msg</span><span class="o">=</span><span class="s1">&#39;Gain must be a positive number&#39;</span><span class="p">,</span>
                <span class="n">loop_until_valid</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">new_gain</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">qw</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">information</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;Gain not set&#39;</span><span class="p">,</span> <span class="s1">&#39;Gain not changed&#39;</span><span class="p">)</span>
                <span class="k">return</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_stageHub</span><span class="o">.</span><span class="n">set_flatfield_gain</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">new_gain</span><span class="p">))</span>
            <span class="n">qw</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">information</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;Gain set&#39;</span><span class="p">,</span> <span class="s1">&#39;Gain set to </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_stageHub</span><span class="o">.</span><span class="n">get_flatfield_gain</span><span class="p">()))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">qw</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">critical</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;Failed to set gain:</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_set_flatfield_correction_camera</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the flatfield correction using the camera&#39;s current image</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">img</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_camera_ctrl</span><span class="o">.</span><span class="n">img_capture</span><span class="p">()</span>
            <span class="n">img_arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_stageHub</span><span class="o">.</span><span class="n">set_flatfield_reference</span><span class="p">(</span><span class="n">img_arr</span><span class="p">)</span>
            <span class="n">qw</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">information</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;Flatfield correction&#39;</span><span class="p">,</span> <span class="s1">&#39;Flatfield correction set to the current camera image&#39;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">qw</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">critical</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;Failed to set flatfield correction:</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_save_flatfield_correction</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Saves the flatfield correction to a file</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">filename</span> <span class="o">=</span> <span class="n">qw</span><span class="o">.</span><span class="n">QFileDialog</span><span class="o">.</span><span class="n">getSaveFileName</span><span class="p">(</span>
                <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                <span class="n">caption</span><span class="o">=</span><span class="s1">&#39;Save flatfield correction file&#39;</span><span class="p">,</span>
                <span class="nb">filter</span><span class="o">=</span><span class="s1">&#39;Numpy files (*.npy);;All files (*)&#39;</span><span class="p">,</span>
            <span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">filename</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span> <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;No file selected&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_stageHub</span><span class="o">.</span><span class="n">save_flatfield_reference</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">qw</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">critical</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;Failed to save flatfield correction:</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_load_flatfield_correction</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Loads the flatfield correction from a file</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">filename</span> <span class="o">=</span> <span class="n">qw</span><span class="o">.</span><span class="n">QFileDialog</span><span class="o">.</span><span class="n">getOpenFileName</span><span class="p">(</span>
                <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                <span class="n">caption</span><span class="o">=</span><span class="s1">&#39;Select flatfield correction file&#39;</span><span class="p">,</span>
                <span class="nb">filter</span><span class="o">=</span><span class="s1">&#39;Numpy files (*.npy);;All files (*)&#39;</span><span class="p">,</span>
            <span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">filename</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span> <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;No file selected&#39;</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_stageHub</span><span class="o">.</span><span class="n">load_flatfield_reference</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
            <span class="n">qw</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">information</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;Flatfield correction&#39;</span><span class="p">,</span> <span class="s1">&#39;Flatfield correction loaded from </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">filename</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">qw</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">critical</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;Failed to load flatfield correction:</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_camera_exposure</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the camera exposure time in microseconds</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">main_window</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_camera_ctrl</span><span class="p">,</span><span class="s1">&#39;set_exposure_time&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_camera_ctrl</span><span class="p">,</span><span class="s1">&#39;get_exposure_time&#39;</span><span class="p">):</span>
            <span class="n">qw</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">critical</span><span class="p">(</span><span class="n">main_window</span><span class="p">,</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;Camera does not support exposure time setting&#39;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">init_exposure_time</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_camera_ctrl</span><span class="o">.</span><span class="n">get_exposure_time</span><span class="p">()</span>
            <span class="n">new_exposure_time</span> <span class="o">=</span> <span class="n">messagebox_request_input</span><span class="p">(</span>
                <span class="n">parent</span><span class="o">=</span><span class="n">main_window</span><span class="p">,</span>
                <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Set exposure time&#39;</span><span class="p">,</span>
                <span class="n">message</span><span class="o">=</span><span class="s1">&#39;Set exposure time in device unit&#39;</span><span class="p">,</span>
                <span class="n">default</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">init_exposure_time</span><span class="p">),</span>
                <span class="n">validator</span><span class="o">=</span><span class="n">validator_float_greaterThanZero</span><span class="p">,</span>
                <span class="n">invalid_msg</span><span class="o">=</span><span class="s1">&#39;Exposure time must be a positive number&#39;</span><span class="p">,</span>
                <span class="n">loop_until_valid</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">new_exposure_time</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span> 
                <span class="n">qw</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">information</span><span class="p">(</span><span class="n">main_window</span><span class="p">,</span> <span class="s1">&#39;Exposure time not set&#39;</span><span class="p">,</span> <span class="s1">&#39;Exposure time not changed&#39;</span><span class="p">)</span>
                <span class="k">return</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_camera_ctrl</span><span class="o">.</span><span class="n">set_exposure_time</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">new_exposure_time</span><span class="p">))</span>
            <span class="n">qw</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">information</span><span class="p">(</span><span class="n">main_window</span><span class="p">,</span> <span class="s1">&#39;Exposure time set&#39;</span><span class="p">,</span> <span class="s1">&#39;Exposure time set to </span><span class="si">{}</span><span class="s1"> ms&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_camera_ctrl</span><span class="o">.</span><span class="n">get_exposure_time</span><span class="p">()))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">qw</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">critical</span><span class="p">(</span><span class="n">main_window</span><span class="p">,</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;Failed to set exposure time:</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>

    <span class="c1"># @thread_assign</span>
    <span class="c1"># def reinitialise_connection(self,unit:Literal[&#39;xy&#39;,&#39;z&#39;,&#39;camera&#39;]) -&gt; threading.Thread:</span>
    <span class="c1">#     &quot;&quot;&quot;</span>
    <span class="c1">#     Reinitialises the connection to the stage or camera</span>

    <span class="c1">#     Args:</span>
    <span class="c1">#         unit (Literal[&#39;xy&#39;,&#39;z&#39;,&#39;camera&#39;]): The unit to reinitialise</span>

    <span class="c1">#     Returns:</span>
    <span class="c1">#         threading.Thread: The thread started</span>
    <span class="c1">#     &quot;&quot;&quot;</span>
    <span class="c1">#     if unit == &#39;xy&#39;:</span>
    <span class="c1">#         self.ctrl_xy.reinitialise_connection()</span>
    <span class="c1">#         self.signal_statbar_message.emit(&#39;XY stage re-initialised&#39;, None)</span>
    <span class="c1">#     elif unit == &#39;z&#39;:</span>
    <span class="c1">#         self.ctrl_z.reinitialise_connection()</span>
    <span class="c1">#         self.signal_statbar_message.emit(&#39;Z stage re-initialised&#39;, None)</span>
    <span class="c1">#     elif unit == &#39;camera&#39;:</span>
    <span class="c1">#         self._camera_ctrl.reinitialise_connection()</span>
    <span class="c1">#         self.signal_statbar_message.emit(&#39;Camera re-initialised&#39;, None)</span>
    <span class="c1">#     else:</span>
    <span class="c1">#         raise ValueError(&#39;Invalid unit for reinitialisation&#39;)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">disable_overlays</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Disables the overlays on the video feed</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_chkbox_crosshair</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_chkbox_scalebar</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">video_terminate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_flg_isvideorunning</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="c1"># By turning this flag off, the video autoupdater should automatically terminate, </span>
        <span class="c1"># disconnect from the camera, and resets all the parameters for next use.</span>

        <span class="c1"># Turn the button back into a camera on button</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_btn_videotoggle</span><span class="o">.</span><span class="n">released</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_btn_videotoggle</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s1">&#39;Turn camera ON&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_btn_videotoggle</span><span class="o">.</span><span class="n">released</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">video_initialise</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_btn_videotoggle</span><span class="o">.</span><span class="n">setStyleSheet</span><span class="p">(</span><span class="s1">&#39;background-color: yellow&#39;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">video_initialise</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialises the video:</span>
<span class="sd">        1. Define the controller</span>
<span class="sd">        2. Sets the first frame</span>
<span class="sd">        3. Starts the multi-threading to start the autoupdater</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_flg_isvideorunning</span><span class="p">:</span> <span class="k">return</span>
            <span class="c1"># Initialise the video capture</span>
            <span class="c1">## camera initialisation moved to self.video_update for responsiveness</span>
            <span class="c1"># Start multithreading for the video to constantly update the captured frame</span>
            <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">video_update</span><span class="p">,</span> <span class="n">daemon</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

            <span class="c1"># Turn the button into a video stop button</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_btn_videotoggle</span><span class="o">.</span><span class="n">released</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_btn_videotoggle</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s1">&#39;Turn camera OFF&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_btn_videotoggle</span><span class="o">.</span><span class="n">released</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">video_terminate</span><span class="p">())</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_btn_videotoggle</span><span class="o">.</span><span class="n">setStyleSheet</span><span class="p">(</span><span class="s1">&#39;background-color: red&#39;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Video feed cannot start:</span><span class="se">\n</span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_start_breathing_z</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Moves the z-stage up and down for a few cycles</span>

<span class="sd">        Returns:</span>
<span class="sd">            threading.Thread: The thread started</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Store references to prevent premature destruction</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_breathing_z_worker</span> <span class="o">=</span> <span class="n">Motion_MoveBreathingZ_Worker</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ctrl_z</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_breathing_z_worker</span><span class="o">.</span><span class="n">signal_breathing_finished</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sig_breathing_stopped</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_breathing_z_thread</span> <span class="o">=</span> <span class="n">QThread</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_breathing_z_worker</span><span class="o">.</span><span class="n">moveToThread</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_breathing_z_thread</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_breathing_z_thread</span><span class="o">.</span><span class="n">started</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_breathing_z_worker</span><span class="o">.</span><span class="n">start</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_breathing_z_thread</span><span class="o">.</span><span class="n">finished</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_breathing_z_worker</span><span class="o">.</span><span class="n">deleteLater</span><span class="p">)</span>

        <span class="c1"># Change the button to a stop button</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_btn_z_breathing</span><span class="o">.</span><span class="n">released</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_btn_z_breathing</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s1">&#39;STOP Breathing&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_btn_z_breathing</span><span class="o">.</span><span class="n">setStyleSheet</span><span class="p">(</span><span class="s1">&#39;background-color: red&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_btn_z_breathing</span><span class="o">.</span><span class="n">released</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_breathing_z_worker</span><span class="o">.</span><span class="n">stop</span><span class="p">)</span>

        <span class="c1"># Connect the breathing stopped signal to the stop function</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_breathing_z_worker</span><span class="o">.</span><span class="n">signal_breathing_finished</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_stop_breathing_and_thread</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_breathing_z_thread</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_stop_breathing_and_thread</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Stops the breathing thread and resets the button</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_breathing_z_thread</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_btn_z_breathing</span><span class="o">.</span><span class="n">released</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_btn_z_breathing</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s1">&#39;Breathing&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_btn_z_breathing</span><span class="o">.</span><span class="n">released</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_start_breathing_z</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_btn_z_breathing</span><span class="o">.</span><span class="n">setStyleSheet</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">move_jog</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="nb">dir</span><span class="p">:</span><span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Moves the stage per request from the button presses</span>

<span class="sd">        Args:</span>
<span class="sd">            dir (str): &#39;yfwd&#39;, &#39;xfwd&#39;, &#39;zfwd&#39;, &#39;yrev&#39;, &#39;xrev&#39;, &#39;zrev&#39;</span>
<span class="sd">            as described in self.motion_button_manager</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">def</span><span class="w"> </span><span class="nf">_move_jog</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sig_statbar_message</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Jogging to: </span><span class="si">{</span><span class="nb">dir</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;yellow&#39;</span><span class="p">)</span>

            <span class="k">if</span> <span class="nb">dir</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;yfwd&#39;</span><span class="p">,</span><span class="s1">&#39;xfwd&#39;</span><span class="p">,</span><span class="s1">&#39;zfwd&#39;</span><span class="p">,</span><span class="s1">&#39;yrev&#39;</span><span class="p">,</span><span class="s1">&#39;xrev&#39;</span><span class="p">,</span><span class="s1">&#39;zrev&#39;</span><span class="p">]:</span>
                <span class="k">raise</span> <span class="ne">SyntaxError</span><span class="p">(</span><span class="s1">&#39;move_jog: Invalid direction input&#39;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">dir</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;xfwd&#39;</span><span class="p">,</span><span class="s1">&#39;xrev&#39;</span><span class="p">,</span><span class="s1">&#39;yfwd&#39;</span><span class="p">,</span><span class="s1">&#39;yrev&#39;</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ctrl_xy</span><span class="o">.</span><span class="n">move_jog</span><span class="p">(</span><span class="nb">dir</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">dir</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;zfwd&#39;</span><span class="p">,</span><span class="s1">&#39;zrev&#39;</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ctrl_z</span><span class="o">.</span><span class="n">move_jog</span><span class="p">(</span><span class="nb">dir</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">sig_statbar_message</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="s1">&#39;_thread_jog&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_thread_jog</span><span class="o">.</span><span class="n">is_alive</span><span class="p">():</span> <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_thread_jog</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">_move_jog</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_thread_jog</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_update_set_jog_labels</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Updates the labels for the jogging parameters obtained from the device controllers</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">jog_x_mm</span><span class="p">,</span><span class="n">jog_y_mm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ctrl_xy</span><span class="o">.</span><span class="n">get_jog</span><span class="p">()[:</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">jog_z_mm</span><span class="p">,</span><span class="n">_</span><span class="p">,</span><span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ctrl_z</span><span class="o">.</span><span class="n">get_jog</span><span class="p">()</span>

        <span class="n">jog_x_um</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">jog_x_mm</span> <span class="o">*</span> <span class="mi">10</span><span class="o">**</span><span class="mi">3</span><span class="p">)</span>
        <span class="n">jog_y_um</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">jog_y_mm</span> <span class="o">*</span> <span class="mi">10</span><span class="o">**</span><span class="mi">3</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">jog_x_um</span><span class="o">!=</span><span class="n">jog_y_um</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sig_statbar_message</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="s1">&#39;Jogging parameters XY are not the same&#39;</span><span class="p">,</span><span class="s1">&#39;yellow&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Jogging parameters XY are not the same. Jog x: </span><span class="si">{:.1f}</span><span class="s1">m Jog y: </span><span class="si">{:.1f}</span><span class="s1">m&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">jog_x_mm</span><span class="p">,</span><span class="n">jog_y_mm</span><span class="p">))</span>
        <span class="n">jog_xy_um</span> <span class="o">=</span> <span class="n">jog_x_um</span>
        <span class="n">jog_z_um</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">jog_z_mm</span> <span class="o">*</span> <span class="mi">10</span><span class="o">**</span><span class="mi">3</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">lbl_jog_xy</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">jog_xy_um</span><span class="si">:</span><span class="s1">.1f</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lbl_jog_z</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">jog_z_um</span><span class="si">:</span><span class="s1">.1f</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_set_jog_params</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the motors jogging parameters according to the widget entries in [m]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Convert it to mm for the controller</span>
        <span class="n">jog_xy_ent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ent_jog_xy</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">jog_xy_ent</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span><span class="p">:</span> 
            <span class="n">jog_xy_mm</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">jog_xy_ent</span><span class="p">)</span><span class="o">*</span><span class="mi">10</span><span class="o">**-</span><span class="mi">3</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ctrl_xy</span><span class="o">.</span><span class="n">set_jog</span><span class="p">(</span><span class="n">dist_mm</span><span class="o">=</span><span class="n">jog_xy_mm</span><span class="p">)</span>

        <span class="n">jog_z_ent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ent_jog_z</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">jog_z_ent</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
            <span class="n">jog_z_mm</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">jog_z_ent</span><span class="p">)</span><span class="o">*</span><span class="mi">10</span><span class="o">**-</span><span class="mi">3</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ctrl_z</span><span class="o">.</span><span class="n">set_jog</span><span class="p">(</span><span class="n">dist_mm</span><span class="o">=</span><span class="n">jog_z_mm</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_update_set_jog_labels</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_update_set_vel_labels</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Updates the labels for the motor parameters obtained from the device controllers</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_</span><span class="p">,</span><span class="n">xy_speed</span><span class="p">,</span><span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ctrl_xy</span><span class="o">.</span><span class="n">get_vel_acc_relative</span><span class="p">()</span>
        <span class="n">_</span><span class="p">,</span><span class="n">z_speed</span><span class="p">,</span><span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ctrl_z</span><span class="o">.</span><span class="n">get_vel_acc_relative</span><span class="p">()</span>

        <span class="n">xy_speed</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">xy_speed</span><span class="p">)</span>
        <span class="n">z_speed</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">z_speed</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">xy_speed</span><span class="p">,</span><span class="nb">float</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">z_speed</span><span class="p">,</span><span class="nb">float</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">lbl_speed_xy</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">xy_speed</span><span class="si">:</span><span class="s1">.2f</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">lbl_speed_z</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">z_speed</span><span class="si">:</span><span class="s1">.2f</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_controller_identifiers</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the controller identifiers for the camera, xy-stage, and z-stage</span>
<span class="sd">        Returns:</span>
<span class="sd">            tuple: (camera-id, xy-stage-id, z-stage-id)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_controller_id_camera</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_controller_id_xy</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_controller_id_z</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_VelocityParameters</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the velocity parameters for the motors</span>

<span class="sd">        Returns:</span>
<span class="sd">            tuple: (xy-velocity, z-velocity) Velocity parameters for the xy-stage and z-stage in percentage</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">vel_xy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ctrl_xy</span><span class="o">.</span><span class="n">get_vel_acc_relative</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">vel_z</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ctrl_z</span><span class="o">.</span><span class="n">get_vel_acc_relative</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>

        <span class="k">return</span> <span class="p">(</span><span class="n">vel_xy</span><span class="p">,</span><span class="n">vel_z</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">incrase_decrease_speed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">stage</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span><span class="n">increase</span><span class="p">:</span><span class="nb">bool</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Increase or decrease the velocity of the motors by 5% or 1% for the xy-stage and z-stage</span>
<span class="sd">        (5% if speed is &gt;= 10%, 1% if speed is &lt; 10%)</span>

<span class="sd">        Args:</span>
<span class="sd">            stage (str): &#39;xy&#39; or &#39;z&#39; for the stage to be controlled</span>
<span class="sd">            increase (bool): True to increase, False to decrease</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="n">stage</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;xy&#39;</span><span class="p">,</span><span class="s1">&#39;z&#39;</span><span class="p">],</span> <span class="s1">&#39;Invalid stage input&#39;</span>

        <span class="n">mult</span> <span class="o">=</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">increase</span> <span class="k">else</span> <span class="o">-</span><span class="mi">1</span>
        <span class="n">velxy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ctrl_xy</span><span class="o">.</span><span class="n">get_vel_acc_relative</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">velz</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ctrl_z</span><span class="o">.</span><span class="n">get_vel_acc_relative</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">stage</span> <span class="o">==</span> <span class="s1">&#39;xy&#39;</span><span class="p">:</span>
            <span class="n">velxy</span> <span class="o">+=</span> <span class="mi">5</span><span class="o">*</span><span class="n">mult</span> <span class="k">if</span> <span class="n">velxy</span> <span class="o">&gt;=</span> <span class="mi">10</span> <span class="k">else</span> <span class="mi">1</span><span class="o">*</span><span class="n">mult</span>
            <span class="k">if</span> <span class="n">velxy</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span> <span class="n">velxy</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="k">elif</span> <span class="n">velxy</span> <span class="o">&gt;=</span> <span class="mi">100</span><span class="p">:</span> <span class="n">velxy</span> <span class="o">=</span> <span class="mi">100</span>
        <span class="k">elif</span> <span class="n">stage</span> <span class="o">==</span> <span class="s1">&#39;z&#39;</span><span class="p">:</span>
            <span class="n">velz</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ctrl_z</span><span class="o">.</span><span class="n">get_vel_acc_relative</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">velz</span> <span class="o">+=</span> <span class="mi">5</span><span class="o">*</span><span class="n">mult</span> <span class="k">if</span> <span class="n">velz</span> <span class="o">&gt;=</span> <span class="mi">10</span> <span class="k">else</span> <span class="mi">1</span><span class="o">*</span><span class="n">mult</span>
            <span class="k">if</span> <span class="n">velz</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span> <span class="n">velz</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="k">elif</span> <span class="n">velz</span> <span class="o">&gt;=</span> <span class="mi">100</span><span class="p">:</span> <span class="n">velz</span> <span class="o">=</span> <span class="mi">100</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">set_vel_relative</span><span class="p">(</span><span class="n">vel_xy</span><span class="o">=</span><span class="n">velxy</span><span class="p">,</span><span class="n">vel_z</span><span class="o">=</span><span class="n">velz</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">calculate_vel_relative</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vel_xy_mmPerSec</span><span class="p">:</span><span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates the velocity in percentage based on the given velocity in mm/s</span>
<span class="sd">        based on the each device controller&#39;s internal method.</span>

<span class="sd">        Args:</span>
<span class="sd">            vel_xy_mmPerSec (float): The velocity in mm/s</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: The velocity in percentage, relative to the device&#39;s maximum velocity</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ctrl_xy</span><span class="o">.</span><span class="n">calculate_vel_relative</span><span class="p">(</span><span class="n">vel_xy_mmPerSec</span><span class="p">)</span>

    <span class="nd">@Slot</span><span class="p">(</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">,</span><span class="n">threading</span><span class="o">.</span><span class="n">Event</span><span class="p">)</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">set_vel_relative</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">vel_xy</span><span class="p">:</span><span class="nb">float</span><span class="o">=-</span><span class="mf">1.0</span><span class="p">,</span><span class="n">vel_z</span><span class="p">:</span><span class="nb">float</span><span class="o">=-</span><span class="mf">1.0</span><span class="p">,</span><span class="n">event_finish</span><span class="p">:</span><span class="n">threading</span><span class="o">.</span><span class="n">Event</span><span class="o">|</span><span class="kc">None</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the velocity parameters for the motors</span>

<span class="sd">        Args:</span>
<span class="sd">            vel_xy (float, optional): Velocity (percentage) for the xy-stage. Must be between 0[%] and 100[%]. If -1, uses the current velocity. Defaults to None.</span>
<span class="sd">            vel_z (float, optional): Velocity (percentage) for the z-stage. Must be between 0[%] and 100[%]. If -1, uses the current velocity. Defaults to None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">vel_xy</span> <span class="o">&lt;=</span> <span class="mf">0.0</span> <span class="ow">or</span> <span class="n">vel_xy</span> <span class="o">&gt;</span> <span class="mf">100.0</span><span class="p">:</span> <span class="n">vel_xy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ctrl_xy</span><span class="o">.</span><span class="n">get_vel_acc_relative</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">vel_z</span> <span class="o">&lt;=</span> <span class="mf">0.0</span> <span class="ow">or</span> <span class="n">vel_z</span> <span class="o">&gt;</span> <span class="mf">100.0</span><span class="p">:</span> <span class="n">vel_z</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ctrl_z</span><span class="o">.</span><span class="n">get_vel_acc_relative</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>

        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">vel_xy</span><span class="p">,(</span><span class="nb">float</span><span class="p">,</span><span class="nb">int</span><span class="p">))</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">vel_z</span><span class="p">,(</span><span class="nb">float</span><span class="p">,</span><span class="nb">int</span><span class="p">)),</span> <span class="s1">&#39;Invalid input type for the velocity parameters&#39;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">ctrl_xy</span><span class="o">.</span><span class="n">set_vel_acc_relative</span><span class="p">(</span><span class="n">vel_homing</span><span class="o">=</span><span class="n">vel_xy</span><span class="p">,</span><span class="n">vel_move</span><span class="o">=</span><span class="n">vel_xy</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ctrl_z</span><span class="o">.</span><span class="n">set_vel_acc_relative</span><span class="p">(</span><span class="n">vel_homing</span><span class="o">=</span><span class="n">vel_z</span><span class="p">,</span><span class="n">vel_move</span><span class="o">=</span><span class="n">vel_z</span><span class="p">)</span>

        <span class="n">speed_xy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ctrl_xy</span><span class="o">.</span><span class="n">get_vel_acc_relative</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">speed_z</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ctrl_z</span><span class="o">.</span><span class="n">get_vel_acc_relative</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">event_finish</span><span class="p">,</span><span class="n">threading</span><span class="o">.</span><span class="n">Event</span><span class="p">):</span> <span class="n">event_finish</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_update_set_vel_labels</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_set_vel_acc_params</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the motors velocity and acceleration parameters according to the widget entries</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">def</span><span class="w"> </span><span class="nf">clear_status</span><span class="p">():</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sig_statbar_message</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="s1">&#39;Motor parameters have been set&#39;</span><span class="p">,</span> <span class="s1">&#39;green&#39;</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">speed_xy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ent_speed_xy</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
            <span class="n">speed_z</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ent_speed_z</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>

            <span class="k">if</span> <span class="n">speed_xy</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
                <span class="n">speed_xy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ctrl_xy</span><span class="o">.</span><span class="n">get_vel_acc_relative</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">speed_z</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
                <span class="n">speed_z</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ctrl_z</span><span class="o">.</span><span class="n">get_vel_acc_relative</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>

            <span class="n">speed_xy</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">speed_xy</span><span class="p">)</span>
            <span class="n">speed_z</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">speed_z</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">ctrl_xy</span><span class="o">.</span><span class="n">set_vel_acc_relative</span><span class="p">(</span><span class="n">vel_homing</span><span class="o">=</span><span class="n">speed_xy</span><span class="p">,</span><span class="n">vel_move</span><span class="o">=</span><span class="n">speed_xy</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ctrl_z</span><span class="o">.</span><span class="n">set_vel_acc_relative</span><span class="p">(</span><span class="n">vel_homing</span><span class="o">=</span><span class="n">speed_z</span><span class="p">,</span><span class="n">vel_move</span><span class="o">=</span><span class="n">speed_z</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">sig_statbar_message</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="s1">&#39;Motor parameters have been set&#39;</span><span class="p">,</span> <span class="s1">&#39;green&#39;</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sig_statbar_message</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="s1">&#39;Invalid input for the motor parameters&#39;</span><span class="p">,</span> <span class="s1">&#39;yellow&#39;</span><span class="p">)</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_update_set_vel_labels</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_move_go_to</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Moves the stage to specific coordinates using the coordinates given in the entry boxes</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">coor_x_um_str</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ent_coor_x</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
        <span class="n">coor_y_um_str</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ent_coor_y</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
        <span class="n">coor_z_um_str</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ent_coor_z</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>

        <span class="n">coor_x_current_mm</span><span class="p">,</span><span class="n">coor_y_current_mm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ctrl_xy</span><span class="o">.</span><span class="n">get_coordinates</span><span class="p">()</span>
        <span class="n">coor_z_current_mm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ctrl_z</span><span class="o">.</span><span class="n">get_coordinates</span><span class="p">()</span>

        <span class="k">try</span><span class="p">:</span> <span class="n">coor_x_mm</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">coor_x_um_str</span><span class="p">)</span><span class="o">/</span><span class="mf">1e3</span>
        <span class="k">except</span><span class="p">:</span> <span class="n">coor_x_mm</span> <span class="o">=</span> <span class="n">coor_x_current_mm</span>
        <span class="k">try</span><span class="p">:</span> <span class="n">coor_y_mm</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">coor_y_um_str</span><span class="p">)</span><span class="o">/</span><span class="mf">1e3</span>
        <span class="k">except</span><span class="p">:</span> <span class="n">coor_y_mm</span> <span class="o">=</span> <span class="n">coor_y_current_mm</span>
        <span class="k">try</span><span class="p">:</span> <span class="n">coor_z_mm</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">coor_z_um_str</span><span class="p">)</span><span class="o">/</span><span class="mf">1e3</span>
        <span class="k">except</span><span class="p">:</span> <span class="n">coor_z_mm</span> <span class="o">=</span> <span class="n">coor_z_current_mm</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">go_to_coordinates</span><span class="p">(</span><span class="n">coor_x_mm</span><span class="p">,</span><span class="n">coor_y_mm</span><span class="p">,</span><span class="n">coor_z_mm</span><span class="p">)</span>

        <span class="c1"># Empty the entry boxes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ent_coor_x</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ent_coor_y</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ent_coor_z</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">check_coordinates</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">coor_mm</span><span class="p">:</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Checks if the given coordinates are within the travel range of the stages</span>

<span class="sd">        Args:</span>
<span class="sd">            coor_mm (tuple[float,float,float]): The coordinates to check</span>

<span class="sd">        Returns:</span>
<span class="sd">            bool: True if the coordinates are within the travel range, False otherwise</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># NOTE: Implement this!</span>
        <span class="k">pass</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="nd">@Slot</span><span class="p">(</span><span class="nb">tuple</span><span class="p">,</span><span class="nb">bool</span><span class="p">,</span><span class="n">threading</span><span class="o">.</span><span class="n">Event</span><span class="p">)</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">go_to_coordinates</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">coors_mm</span><span class="p">:</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="o">|</span><span class="kc">None</span><span class="p">,</span><span class="nb">float</span><span class="o">|</span><span class="kc">None</span><span class="p">,</span><span class="nb">float</span><span class="o">|</span><span class="kc">None</span><span class="p">]</span><span class="o">=</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span><span class="kc">None</span><span class="p">,</span><span class="kc">None</span><span class="p">),</span>
        <span class="n">override_controls</span><span class="p">:</span><span class="nb">bool</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">event_finish</span><span class="p">:</span><span class="n">threading</span><span class="o">.</span><span class="n">Event</span><span class="o">|</span><span class="kc">None</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Moves the stage to specific coordinates, except if None is provided. (Asynchronous)</span>

<span class="sd">        Args:</span>
<span class="sd">            coors_mm (tuple[float|None,float|None,float|None], optional): A tuple of x, y, and z coordinates in mm to move to. If None</span>
<span class="sd">            override_controls (bool, optional): If True, does not disable/enable the controls. Defaults to False.</span>
<span class="sd">            event_finish (threading.Event, optional): An event to set when the movement is finished. Defaults to None.</span>

<span class="sd">        Raises:</span>
<span class="sd">            TimeoutError: If the stage does not move within the timeout</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">coor_x_mm</span><span class="p">,</span><span class="n">coor_y_mm</span><span class="p">,</span><span class="n">coor_z_mm</span> <span class="o">=</span> <span class="n">coors_mm</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">override_controls</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">disable_widgets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_sig_go_to_coordinates</span><span class="o">.</span><span class="n">emit</span><span class="p">((</span><span class="n">coor_x_mm</span><span class="p">,</span><span class="n">coor_y_mm</span><span class="p">,</span><span class="n">coor_z_mm</span><span class="p">),</span> <span class="n">event_finish</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">override_controls</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">enable_widgets</span><span class="p">()</span>

        <span class="c1"># Resets the statusbar, let the user know that it&#39;s done moving</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sig_statbar_message</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="s1">&#39;Stage movement complete&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_coordinates_closest_mm</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="o">|</span><span class="kc">None</span><span class="p">,</span><span class="nb">float</span><span class="o">|</span><span class="kc">None</span><span class="p">,</span><span class="nb">float</span><span class="o">|</span><span class="kc">None</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the current coordinate of both channels x, y, and z of the stages.</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: x, y, and z coordinates of the stage (converted from Thorlabs Decimals)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">timestamp_req</span> <span class="o">=</span> <span class="n">get_timestamp_us_int</span><span class="p">()</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_stageHub</span><span class="o">.</span><span class="n">get_coordinates_closest</span><span class="p">(</span><span class="n">timestamp_req</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">result</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span> <span class="k">return</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span><span class="kc">None</span><span class="p">,</span><span class="kc">None</span><span class="p">)</span>
        <span class="n">coor_x</span><span class="p">,</span><span class="n">coor_y</span><span class="p">,</span><span class="n">coor_z</span> <span class="o">=</span> <span class="n">result</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_current_coor</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">coor_x</span><span class="p">,</span><span class="n">coor_y</span><span class="p">,</span><span class="n">coor_z</span><span class="p">])</span>

        <span class="k">return</span> <span class="n">coor_x</span><span class="p">,</span><span class="n">coor_y</span><span class="p">,</span><span class="n">coor_z</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">motion_button_manager</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="nb">dir</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Moves the stage per request from the button presses and releases.</span>
<span class="sd">        Should be assigned to a worker thread.</span>

<span class="sd">        Args:</span>
<span class="sd">            dir (str): &#39;yfwd&#39;, &#39;xfwd&#39;, &#39;zfwd&#39;, &#39;yrev&#39;, &#39;xrev&#39;, &#39;zrev&#39;, &#39;ystop&#39;, &#39;xstop&#39;, &#39;zstop&#39;, &#39;xyhome&#39;, &#39;zhome&#39;</span>
<span class="sd">            for x, y and z motors with fwd, rev, and stop for forward, backward, and stop.</span>
<span class="sd">            &#39;xyhome&#39; and &#39;zhome&#39; are for calibrating and homing the xy and z stage respectively.</span>
<span class="sd">            Note that &#39;xstop&#39; and &#39;ystop&#39; will stop both x and y motors.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_chkbox_jog_enabled</span><span class="o">.</span><span class="n">isChecked</span><span class="p">():</span> <span class="bp">self</span><span class="o">.</span><span class="n">move_jog</span><span class="p">(</span><span class="nb">dir</span><span class="p">);</span> <span class="k">return</span>

        <span class="k">def</span><span class="w"> </span><span class="nf">_move</span><span class="p">():</span>
            <span class="k">if</span> <span class="nb">dir</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;yfwd&#39;</span><span class="p">,</span><span class="s1">&#39;xfwd&#39;</span><span class="p">,</span><span class="s1">&#39;zfwd&#39;</span><span class="p">,</span><span class="s1">&#39;yrev&#39;</span><span class="p">,</span><span class="s1">&#39;xrev&#39;</span><span class="p">,</span><span class="s1">&#39;zrev&#39;</span><span class="p">,</span><span class="s1">&#39;xyhome&#39;</span><span class="p">,</span><span class="s1">&#39;zhome&#39;</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">sig_statbar_message</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Moving: </span><span class="si">{</span><span class="nb">dir</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;yellow&#39;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">dir</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;xstop&#39;</span><span class="p">,</span><span class="s1">&#39;ystop&#39;</span><span class="p">,</span><span class="s1">&#39;zstop&#39;</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">sig_statbar_message</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Stopping: </span><span class="si">{</span><span class="nb">dir</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

            <span class="k">if</span> <span class="nb">dir</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;yfwd&#39;</span><span class="p">,</span><span class="s1">&#39;xfwd&#39;</span><span class="p">,</span><span class="s1">&#39;yrev&#39;</span><span class="p">,</span><span class="s1">&#39;xrev&#39;</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ctrl_xy</span><span class="o">.</span><span class="n">move_continuous</span><span class="p">(</span><span class="nb">dir</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">dir</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;zfwd&#39;</span><span class="p">,</span><span class="s1">&#39;zrev&#39;</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ctrl_z</span><span class="o">.</span><span class="n">move_continuous</span><span class="p">(</span><span class="nb">dir</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">dir</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;xstop&#39;</span><span class="p">,</span><span class="s1">&#39;ystop&#39;</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ctrl_xy</span><span class="o">.</span><span class="n">stop_move</span><span class="p">()</span>
            <span class="k">elif</span> <span class="nb">dir</span> <span class="o">==</span> <span class="s1">&#39;zstop&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ctrl_z</span><span class="o">.</span><span class="n">stop_move</span><span class="p">()</span>
            <span class="k">elif</span> <span class="nb">dir</span> <span class="o">==</span> <span class="s1">&#39;xyhome&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ctrl_xy</span><span class="o">.</span><span class="n">homing_n_coor_calibration</span><span class="p">()</span>
            <span class="k">elif</span> <span class="nb">dir</span> <span class="o">==</span> <span class="s1">&#39;zhome&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ctrl_z</span><span class="o">.</span><span class="n">homing_n_coor_calibration</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span> <span class="k">raise</span> <span class="ne">SyntaxError</span><span class="p">(</span><span class="s1">&#39;motion_button_manager: Invalid direction input&#39;</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">sig_statbar_message</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="s1">&#39;_thread_move&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_thread_move</span><span class="o">.</span><span class="n">is_alive</span><span class="p">():</span> <span class="k">return</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_thread_move</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">_move</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_thread_move</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_motion_controller_initialisation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialises the controller and enables the buttons</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Re-enables the controls</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_set_vel_labels</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_set_jog_labels</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">enable_widgets</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">disable_widgets</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Disables all stage control widgets</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">all_widgets</span> <span class="o">=</span> <span class="n">get_all_widgets</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_wdg_stage</span><span class="p">)</span>
        <span class="p">[</span><span class="n">widget</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span> <span class="k">for</span> <span class="n">widget</span> <span class="ow">in</span> <span class="n">all_widgets</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">widget</span><span class="p">,(</span><span class="n">qw</span><span class="o">.</span><span class="n">QPushButton</span><span class="p">,</span><span class="n">qw</span><span class="o">.</span><span class="n">QLineEdit</span><span class="p">))]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">enable_widgets</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Enables all stage control widgets</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">all_widgets</span> <span class="o">=</span> <span class="n">get_all_widgets</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_wdg_stage</span><span class="p">)</span>
        <span class="p">[</span><span class="n">widget</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span> <span class="k">for</span> <span class="n">widget</span> <span class="ow">in</span> <span class="n">all_widgets</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">widget</span><span class="p">,(</span><span class="n">qw</span><span class="o">.</span><span class="n">QPushButton</span><span class="p">,</span><span class="n">qw</span><span class="o">.</span><span class="n">QLineEdit</span><span class="p">))]</span>

        <span class="c1"># Updates the statusbar</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sig_statbar_message</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="s1">&#39;Stage controller ready&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_current_image</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">wait_newimage</span><span class="p">:</span><span class="nb">bool</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Image</span><span class="o">.</span><span class="n">Image</span><span class="o">|</span><span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the current frame of the video feed</span>

<span class="sd">        Returns:</span>
<span class="sd">            ImageTk.PhotoImage: The current frame of the video feed</span>
<span class="sd">            wait_newimage (bool, optional): Waits for a new image to be taken. Defaults to False.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">wait_newimage</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_flg_isNewFrmReady</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_flg_isNewFrmReady</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_currentImage</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_image_shape</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span><span class="nb">int</span><span class="p">]</span><span class="o">|</span><span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the shape of the current image in (width, height)</span>

<span class="sd">        Returns:</span>
<span class="sd">            tuple[int,int]|None: The shape of the current image in (width, height) or None if no image is available</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_currentImage</span><span class="p">,</span><span class="n">Image</span><span class="o">.</span><span class="n">Image</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_currentImage</span><span class="o">.</span><span class="n">size</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_overlay_scalebar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">img</span><span class="p">:</span><span class="n">Image</span><span class="o">.</span><span class="n">Image</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Image</span><span class="o">.</span><span class="n">Image</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Overlays a scalebar on the image based on the image calibration file</span>

<span class="sd">        Args:</span>
<span class="sd">            img (Image.Image): The image to be overlayed with the scalebar</span>

<span class="sd">        Returns:</span>
<span class="sd">            Image.Image: The image with the scalebar overlayed</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">cal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getter_imgcal</span><span class="p">()</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">cal</span><span class="p">,</span><span class="n">ImgMea_Cal</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">cal</span><span class="o">.</span><span class="n">check_calibration_set</span><span class="p">():</span>
            <span class="k">return</span> <span class="n">img</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">img</span><span class="p">,</span><span class="n">Image</span><span class="o">.</span><span class="n">Image</span><span class="p">):</span> <span class="k">return</span> <span class="n">img</span>

        <span class="n">scalex</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="n">cal</span><span class="o">.</span><span class="n">scale_x_pixelPerMm</span>
        <span class="n">scalebar_length</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">ControllerConfigEnum</span><span class="o">.</span><span class="n">SCALEBAR_LENGTH_RATIO</span><span class="o">.</span><span class="n">value</span> <span class="o">*</span> <span class="n">img</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="c1"># in pixel</span>
        <span class="n">scalebar_height</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">ControllerConfigEnum</span><span class="o">.</span><span class="n">SCALEBAR_HEIGHT_RATIO</span><span class="o">.</span><span class="n">value</span> <span class="o">*</span> <span class="n">img</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="c1"># in pixel</span>

        <span class="n">length_mm</span> <span class="o">=</span> <span class="n">scalebar_length</span> <span class="o">*</span> <span class="n">scalex</span>
        <span class="n">font</span> <span class="o">=</span> <span class="n">ControllerConfigEnum</span><span class="o">.</span><span class="n">SCALEBAR_FONT</span><span class="o">.</span><span class="n">value</span>
        <span class="n">font_size</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">scalebar_length</span><span class="o">/</span><span class="mi">10</span> <span class="o">*</span> <span class="n">ControllerConfigEnum</span><span class="o">.</span><span class="n">SCALEBAR_FONT_RATIO</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
        <span class="n">line_width</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">scalebar_length</span><span class="o">/</span><span class="mi">50</span> <span class="o">*</span> <span class="n">ControllerConfigEnum</span><span class="o">.</span><span class="n">SCALEBAR_FONT_RATIO</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>

        <span class="n">line_offset</span> <span class="o">=</span> <span class="n">scalebar_length</span><span class="o">/</span><span class="mi">10</span>

        <span class="n">box_length</span> <span class="o">=</span> <span class="n">scalebar_length</span> <span class="o">+</span> <span class="mi">2</span><span class="o">*</span><span class="n">line_offset</span>
        <span class="n">box_height</span> <span class="o">=</span> <span class="n">scalebar_height</span> <span class="o">+</span> <span class="mi">2</span><span class="o">*</span><span class="n">line_offset</span>

        <span class="n">draw</span> <span class="o">=</span> <span class="n">ImageDraw</span><span class="o">.</span><span class="n">Draw</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
        <span class="c1"># Draw a box around the scalebar, taking consideration of the font size height</span>
        <span class="n">draw</span><span class="o">.</span><span class="n">rectangle</span><span class="p">([(</span><span class="n">img</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-</span><span class="n">box_length</span><span class="p">,</span> <span class="n">img</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="n">box_height</span><span class="p">),</span>
                        <span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">img</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">1</span><span class="p">])],</span> <span class="n">fill</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">))</span>
        <span class="n">draw</span><span class="o">.</span><span class="n">line</span><span class="p">([(</span><span class="n">img</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-</span><span class="n">scalebar_length</span><span class="o">-</span><span class="n">line_offset</span><span class="p">,</span> <span class="n">img</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="n">line_offset</span><span class="p">),</span>
                   <span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-</span><span class="n">line_offset</span><span class="p">,</span> <span class="n">img</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="n">line_offset</span><span class="p">)],</span>
                  <span class="n">fill</span><span class="o">=</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">),</span> <span class="n">width</span><span class="o">=</span><span class="n">line_width</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span> <span class="n">text_params</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;text&#39;</span><span class="p">:</span><span class="s1">&#39;</span><span class="si">{:.0f}</span><span class="s1"> m&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">length_mm</span><span class="o">*</span><span class="mf">1e3</span><span class="p">)),</span> <span class="s1">&#39;font&#39;</span><span class="p">:</span><span class="n">ImageFont</span><span class="o">.</span><span class="n">truetype</span><span class="p">(</span><span class="n">font</span><span class="p">,</span><span class="n">font_size</span><span class="p">)}</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span> <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Scalebar font file not found. Please check the font path in the configuration.&#39;</span><span class="p">)</span>

        <span class="n">text_length</span> <span class="o">=</span> <span class="n">draw</span><span class="o">.</span><span class="n">textlength</span><span class="p">(</span><span class="o">**</span><span class="n">text_params</span><span class="p">)</span>

        <span class="n">draw</span><span class="o">.</span><span class="n">text</span><span class="p">((</span><span class="n">img</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-</span><span class="n">box_length</span><span class="o">/</span><span class="mi">2</span><span class="o">-</span><span class="n">text_length</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">img</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="n">line_offset</span><span class="o">*</span><span class="mi">2</span><span class="o">-</span><span class="n">line_width</span><span class="o">-</span><span class="n">font_size</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span>
                  <span class="n">align</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">),</span> <span class="o">**</span><span class="n">text_params</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">img</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">video_update</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Updates the video feed, taking in mind Tkinter&#39;s single thread.</span>
<span class="sd">        Use in a worker thread, DO NOT use in the mainthread!!!</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">def</span><span class="w"> </span><span class="nf">draw_crosshair</span><span class="p">(</span><span class="n">img</span><span class="p">:</span><span class="n">Image</span><span class="o">.</span><span class="n">Image</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Image</span><span class="o">.</span><span class="n">Image</span><span class="p">:</span>
            <span class="n">width</span><span class="p">,</span> <span class="n">height</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">size</span>
            <span class="n">draw</span> <span class="o">=</span> <span class="n">ImageDraw</span><span class="o">.</span><span class="n">Draw</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
            <span class="n">line_color</span> <span class="o">=</span> <span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="c1"># Draw vertical line</span>
            <span class="n">draw</span><span class="o">.</span><span class="n">line</span><span class="p">([(</span><span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">height</span><span class="p">)],</span> <span class="n">fill</span><span class="o">=</span><span class="n">line_color</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
            <span class="c1"># Draw horizontal line</span>
            <span class="n">draw</span><span class="o">.</span><span class="n">line</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span> <span class="n">height</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="o">/</span><span class="mi">2</span><span class="p">)],</span> <span class="n">fill</span><span class="o">=</span><span class="n">line_color</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">img</span>

        <span class="c1"># Initialise the camera controller and grabs the first image</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_camera_ctrl</span><span class="o">.</span><span class="n">get_initialisation_status</span><span class="p">():</span> <span class="bp">self</span><span class="o">.</span><span class="n">_camera_ctrl</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_currentFrame</span> <span class="o">=</span> <span class="kc">None</span>            <span class="c1"># Empties the current frame</span>

        <span class="c1"># Loops the image updater to create outputs the video capture frame by frame</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_flg_isvideorunning</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># Enables the autoupdater</span>
        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">_flg_isvideorunning</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">time1</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
                <span class="c1"># Triggers the frame capture from the camera</span>
                <span class="n">request</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_combo_vidcorrection</span><span class="o">.</span><span class="n">currentText</span><span class="p">()</span>

                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_stageHub</span><span class="o">.</span><span class="n">Enum_CamCorrectionType</span><span class="p">[</span><span class="n">request</span><span class="p">]</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_stageHub</span><span class="o">.</span><span class="n">Enum_CamCorrectionType</span><span class="o">.</span><span class="n">RAW</span><span class="p">:</span>
                    <span class="n">img</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_camera_ctrl</span><span class="o">.</span><span class="n">img_capture</span><span class="p">()</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">img</span><span class="p">:</span><span class="n">Image</span><span class="o">.</span><span class="n">Image</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_stageHub</span><span class="o">.</span><span class="n">get_image</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_stageHub</span><span class="o">.</span><span class="n">Enum_CamCorrectionType</span><span class="p">[</span><span class="n">request</span><span class="p">])</span>
                <span class="c1"># video_width = int(img.size[1]/img.size[0]*self._video_height)</span>

                <span class="c1"># Add a scalebar to it</span>
                <span class="n">img</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_overlay_scalebar</span><span class="p">(</span><span class="n">img</span><span class="p">)</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_chkbox_scalebar</span><span class="o">.</span><span class="n">isChecked</span><span class="p">()</span> <span class="k">else</span> <span class="n">img</span>

                <span class="c1"># Overlay a crosshair if requested</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_chkbox_crosshair</span><span class="o">.</span><span class="n">isChecked</span><span class="p">():</span> <span class="n">img</span> <span class="o">=</span> <span class="n">draw_crosshair</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
                <span class="n">new_frame</span><span class="p">:</span><span class="n">QPixmap</span> <span class="o">=</span> <span class="n">ImageQt</span><span class="o">.</span><span class="n">toqpixmap</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>

                <span class="c1"># Update the image in the app window</span>
                <span class="c1"># Only update if the frame is different. Sometimes the program isn&#39;t done taking the new image.</span>
                <span class="c1"># In this case, it skips the frame update</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_currentFrame</span> <span class="o">!=</span> <span class="n">new_frame</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_lbl_video</span><span class="o">.</span><span class="n">setPixmap</span><span class="p">(</span><span class="n">new_frame</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_currentFrame</span> <span class="o">=</span> <span class="n">new_frame</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_currentImage</span> <span class="o">=</span> <span class="n">img</span>

                <span class="c1"># Let the coordinate updater know that the frame is ready if any is waiting</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_flg_isNewFrmReady</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>
                <span class="n">time_elapsed</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">time1</span>
                <span class="k">if</span> <span class="n">time_elapsed</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="o">/</span><span class="n">AppVideoEnum</span><span class="o">.</span><span class="n">VIDEOFEED_REFRESH_RATE</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
                    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="n">AppVideoEnum</span><span class="o">.</span><span class="n">VIDEOFEED_REFRESH_RATE</span><span class="o">.</span><span class="n">value</span> <span class="o">-</span> <span class="n">time_elapsed</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Video feed failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">);</span> <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.02</span><span class="p">)</span>

    <span class="nd">@Slot</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="nb">str</span><span class="p">)</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">status_update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">message</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">bg_colour</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        To update the status bar at the bottom</span>

<span class="sd">        Args:</span>
<span class="sd">            message (str, optional): The update message. Defualts to None</span>
<span class="sd">            bg_colour (str, optional): Background colour. Defaults to &#39;default&#39;.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">message</span><span class="p">:</span> <span class="n">message</span> <span class="o">=</span> <span class="s1">&#39;Motion controller ready&#39;</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_statbar</span><span class="o">.</span><span class="n">showMessage</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_statbar</span><span class="o">.</span><span class="n">setStyleSheet</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;background-color: </span><span class="si">{</span><span class="n">bg_colour</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="n">bg_colour</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">_statbar</span><span class="o">.</span><span class="n">setStyleSheet</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Status bar update failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">terminate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Terminates the motion controller</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_flg_isrunning</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">video_terminate</span><span class="p">()</span>  <span class="c1"># Terminates the camera controller as well</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ctrl_xy</span><span class="o">.</span><span class="n">terminate</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ctrl_z</span><span class="o">.</span><span class="n">terminate</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_camera_ctrl</span><span class="o">.</span><span class="n">camera_termination</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
              </details>



<div class="doc doc-children">










<div class="doc doc-object doc-function">


<h3 id="iris.gui.motion_video.Wdg_MotionController.calculate_vel_relative" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">calculate_vel_relative</span><span class="p">(</span><span class="n">vel_xy_mmPerSec</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Calculates the velocity in percentage based on the given velocity in mm/s
based on the each device controller's internal method.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>vel_xy_mmPerSec</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The velocity in mm/s</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>float</code></td>            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The velocity in percentage, relative to the device's maximum velocity</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/gui/motion_video.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1078</span>
<span class="normal">1079</span>
<span class="normal">1080</span>
<span class="normal">1081</span>
<span class="normal">1082</span>
<span class="normal">1083</span>
<span class="normal">1084</span>
<span class="normal">1085</span>
<span class="normal">1086</span>
<span class="normal">1087</span>
<span class="normal">1088</span>
<span class="normal">1089</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">calculate_vel_relative</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vel_xy_mmPerSec</span><span class="p">:</span><span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculates the velocity in percentage based on the given velocity in mm/s</span>
<span class="sd">    based on the each device controller&#39;s internal method.</span>

<span class="sd">    Args:</span>
<span class="sd">        vel_xy_mmPerSec (float): The velocity in mm/s</span>

<span class="sd">    Returns:</span>
<span class="sd">        float: The velocity in percentage, relative to the device&#39;s maximum velocity</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ctrl_xy</span><span class="o">.</span><span class="n">calculate_vel_relative</span><span class="p">(</span><span class="n">vel_xy_mmPerSec</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.gui.motion_video.Wdg_MotionController.check_coordinates" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">check_coordinates</span><span class="p">(</span><span class="n">coor_mm</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Checks if the given coordinates are within the travel range of the stages</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>coor_mm</code>
            </td>
            <td>
                  <code><span title="tuple">tuple</span>[<span title="float">float</span>, <span title="float">float</span>, <span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The coordinates to check</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>bool</code></td>            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if the coordinates are within the travel range, False otherwise</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/gui/motion_video.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1169</span>
<span class="normal">1170</span>
<span class="normal">1171</span>
<span class="normal">1172</span>
<span class="normal">1173</span>
<span class="normal">1174</span>
<span class="normal">1175</span>
<span class="normal">1176</span>
<span class="normal">1177</span>
<span class="normal">1178</span>
<span class="normal">1179</span>
<span class="normal">1180</span>
<span class="normal">1181</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">check_coordinates</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">coor_mm</span><span class="p">:</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Checks if the given coordinates are within the travel range of the stages</span>

<span class="sd">    Args:</span>
<span class="sd">        coor_mm (tuple[float,float,float]): The coordinates to check</span>

<span class="sd">    Returns:</span>
<span class="sd">        bool: True if the coordinates are within the travel range, False otherwise</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># NOTE: Implement this!</span>
    <span class="k">pass</span>
    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.gui.motion_video.Wdg_MotionController.disable_overlays" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">disable_overlays</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Disables the overlays on the video feed</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/gui/motion_video.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">880</span>
<span class="normal">881</span>
<span class="normal">882</span>
<span class="normal">883</span>
<span class="normal">884</span>
<span class="normal">885</span>
<span class="normal">886</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">disable_overlays</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Disables the overlays on the video feed</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_chkbox_crosshair</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_chkbox_scalebar</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
    <span class="k">return</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.gui.motion_video.Wdg_MotionController.disable_widgets" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">disable_widgets</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Disables all stage control widgets</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/gui/motion_video.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1275</span>
<span class="normal">1276</span>
<span class="normal">1277</span>
<span class="normal">1278</span>
<span class="normal">1279</span>
<span class="normal">1280</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">disable_widgets</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Disables all stage control widgets</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">all_widgets</span> <span class="o">=</span> <span class="n">get_all_widgets</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_wdg_stage</span><span class="p">)</span>
    <span class="p">[</span><span class="n">widget</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span> <span class="k">for</span> <span class="n">widget</span> <span class="ow">in</span> <span class="n">all_widgets</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">widget</span><span class="p">,(</span><span class="n">qw</span><span class="o">.</span><span class="n">QPushButton</span><span class="p">,</span><span class="n">qw</span><span class="o">.</span><span class="n">QLineEdit</span><span class="p">))]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.gui.motion_video.Wdg_MotionController.enable_widgets" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">enable_widgets</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Enables all stage control widgets</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/gui/motion_video.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1282</span>
<span class="normal">1283</span>
<span class="normal">1284</span>
<span class="normal">1285</span>
<span class="normal">1286</span>
<span class="normal">1287</span>
<span class="normal">1288</span>
<span class="normal">1289</span>
<span class="normal">1290</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">enable_widgets</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Enables all stage control widgets</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">all_widgets</span> <span class="o">=</span> <span class="n">get_all_widgets</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_wdg_stage</span><span class="p">)</span>
    <span class="p">[</span><span class="n">widget</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span> <span class="k">for</span> <span class="n">widget</span> <span class="ow">in</span> <span class="n">all_widgets</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">widget</span><span class="p">,(</span><span class="n">qw</span><span class="o">.</span><span class="n">QPushButton</span><span class="p">,</span><span class="n">qw</span><span class="o">.</span><span class="n">QLineEdit</span><span class="p">))]</span>

    <span class="c1"># Updates the statusbar</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">sig_statbar_message</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="s1">&#39;Stage controller ready&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.gui.motion_video.Wdg_MotionController.get_VelocityParameters" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_VelocityParameters</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Returns the velocity parameters for the motors</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>tuple</code></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>(xy-velocity, z-velocity) Velocity parameters for the xy-stage and z-stage in percentage</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/gui/motion_video.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1040</span>
<span class="normal">1041</span>
<span class="normal">1042</span>
<span class="normal">1043</span>
<span class="normal">1044</span>
<span class="normal">1045</span>
<span class="normal">1046</span>
<span class="normal">1047</span>
<span class="normal">1048</span>
<span class="normal">1049</span>
<span class="normal">1050</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_VelocityParameters</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the velocity parameters for the motors</span>

<span class="sd">    Returns:</span>
<span class="sd">        tuple: (xy-velocity, z-velocity) Velocity parameters for the xy-stage and z-stage in percentage</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">vel_xy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ctrl_xy</span><span class="o">.</span><span class="n">get_vel_acc_relative</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">vel_z</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ctrl_z</span><span class="o">.</span><span class="n">get_vel_acc_relative</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>

    <span class="k">return</span> <span class="p">(</span><span class="n">vel_xy</span><span class="p">,</span><span class="n">vel_z</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.gui.motion_video.Wdg_MotionController.get_controller_identifiers" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_controller_identifiers</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Returns the controller identifiers for the camera, xy-stage, and z-stage
Returns:
    tuple: (camera-id, xy-stage-id, z-stage-id)</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/gui/motion_video.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1030</span>
<span class="normal">1031</span>
<span class="normal">1032</span>
<span class="normal">1033</span>
<span class="normal">1034</span>
<span class="normal">1035</span>
<span class="normal">1036</span>
<span class="normal">1037</span>
<span class="normal">1038</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_controller_identifiers</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the controller identifiers for the camera, xy-stage, and z-stage</span>
<span class="sd">    Returns:</span>
<span class="sd">        tuple: (camera-id, xy-stage-id, z-stage-id)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_controller_id_camera</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_controller_id_xy</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_controller_id_z</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.gui.motion_video.Wdg_MotionController.get_coordinates_closest_mm" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_coordinates_closest_mm</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Returns the current coordinate of both channels x, y, and z of the stages.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>float</code></td>            <td>
                  <code><span title="tuple">tuple</span>[<span title="float">float</span> | None, <span title="float">float</span> | None, <span title="float">float</span> | None]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>x, y, and z coordinates of the stage (converted from Thorlabs Decimals)</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/gui/motion_video.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1209</span>
<span class="normal">1210</span>
<span class="normal">1211</span>
<span class="normal">1212</span>
<span class="normal">1213</span>
<span class="normal">1214</span>
<span class="normal">1215</span>
<span class="normal">1216</span>
<span class="normal">1217</span>
<span class="normal">1218</span>
<span class="normal">1219</span>
<span class="normal">1220</span>
<span class="normal">1221</span>
<span class="normal">1222</span>
<span class="normal">1223</span>
<span class="normal">1224</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_coordinates_closest_mm</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="o">|</span><span class="kc">None</span><span class="p">,</span><span class="nb">float</span><span class="o">|</span><span class="kc">None</span><span class="p">,</span><span class="nb">float</span><span class="o">|</span><span class="kc">None</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the current coordinate of both channels x, y, and z of the stages.</span>

<span class="sd">    Returns:</span>
<span class="sd">        float: x, y, and z coordinates of the stage (converted from Thorlabs Decimals)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">timestamp_req</span> <span class="o">=</span> <span class="n">get_timestamp_us_int</span><span class="p">()</span>
    <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_stageHub</span><span class="o">.</span><span class="n">get_coordinates_closest</span><span class="p">(</span><span class="n">timestamp_req</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">result</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span> <span class="k">return</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span><span class="kc">None</span><span class="p">,</span><span class="kc">None</span><span class="p">)</span>
    <span class="n">coor_x</span><span class="p">,</span><span class="n">coor_y</span><span class="p">,</span><span class="n">coor_z</span> <span class="o">=</span> <span class="n">result</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_current_coor</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">coor_x</span><span class="p">,</span><span class="n">coor_y</span><span class="p">,</span><span class="n">coor_z</span><span class="p">])</span>

    <span class="k">return</span> <span class="n">coor_x</span><span class="p">,</span><span class="n">coor_y</span><span class="p">,</span><span class="n">coor_z</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.gui.motion_video.Wdg_MotionController.get_current_image" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_current_image</span><span class="p">(</span><span class="n">wait_newimage</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Returns the current frame of the video feed</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td></td>            <td>
                  <code><span title="PIL.Image.Image">Image</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ImageTk.PhotoImage: The current frame of the video feed</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
<td><code>wait_newimage</code></td>            <td>
                  <code>(<span title="bool">bool</span>, <span title="optional">optional</span>)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Waits for a new image to be taken. Defaults to False.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/gui/motion_video.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1292</span>
<span class="normal">1293</span>
<span class="normal">1294</span>
<span class="normal">1295</span>
<span class="normal">1296</span>
<span class="normal">1297</span>
<span class="normal">1298</span>
<span class="normal">1299</span>
<span class="normal">1300</span>
<span class="normal">1301</span>
<span class="normal">1302</span>
<span class="normal">1303</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_current_image</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">wait_newimage</span><span class="p">:</span><span class="nb">bool</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Image</span><span class="o">.</span><span class="n">Image</span><span class="o">|</span><span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the current frame of the video feed</span>

<span class="sd">    Returns:</span>
<span class="sd">        ImageTk.PhotoImage: The current frame of the video feed</span>
<span class="sd">        wait_newimage (bool, optional): Waits for a new image to be taken. Defaults to False.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">wait_newimage</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_flg_isNewFrmReady</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_flg_isNewFrmReady</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_currentImage</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.gui.motion_video.Wdg_MotionController.get_goto_worker" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_goto_worker</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Returns the worker to command the stage to go to specific coordinates</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>Motion_GoToCoor_Worker</code></td>            <td>
                  <code><a class="autorefs autorefs-internal" title="Motion_GoToCoor_Worker (iris.gui.motion_video.Motion_GoToCoor_Worker)" href="#iris.gui.motion_video.Motion_GoToCoor_Worker">Motion_GoToCoor_Worker</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The worker to perform the goto coordinate command.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/gui/motion_video.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_goto_worker</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Motion_GoToCoor_Worker</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the worker to command the stage to go to specific coordinates</span>

<span class="sd">    Returns:</span>
<span class="sd">        Motion_GoToCoor_Worker: The worker to perform the goto coordinate command.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_worker_gotocoor</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.gui.motion_video.Wdg_MotionController.get_image_shape" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_image_shape</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Returns the shape of the current image in (width, height)</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="tuple">tuple</span>[<span title="int">int</span>, <span title="int">int</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>tuple[int,int]|None: The shape of the current image in (width, height) or None if no image is available</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/gui/motion_video.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1305</span>
<span class="normal">1306</span>
<span class="normal">1307</span>
<span class="normal">1308</span>
<span class="normal">1309</span>
<span class="normal">1310</span>
<span class="normal">1311</span>
<span class="normal">1312</span>
<span class="normal">1313</span>
<span class="normal">1314</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_image_shape</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span><span class="nb">int</span><span class="p">]</span><span class="o">|</span><span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the shape of the current image in (width, height)</span>

<span class="sd">    Returns:</span>
<span class="sd">        tuple[int,int]|None: The shape of the current image in (width, height) or None if no image is available</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_currentImage</span><span class="p">,</span><span class="n">Image</span><span class="o">.</span><span class="n">Image</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_currentImage</span><span class="o">.</span><span class="n">size</span>
    <span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.gui.motion_video.Wdg_MotionController.go_to_coordinates" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">go_to_coordinates</span><span class="p">(</span><span class="n">coors_mm</span><span class="o">=</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">override_controls</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">event_finish</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Moves the stage to specific coordinates, except if None is provided. (Asynchronous)</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>coors_mm</code>
            </td>
            <td>
                  <code><span title="tuple">tuple</span>[<span title="float">float</span> | None, <span title="float">float</span> | None, <span title="float">float</span> | None]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A tuple of x, y, and z coordinates in mm to move to. If None</p>
              </div>
            </td>
            <td>
                  <code>(None, None, None)</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>override_controls</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, does not disable/enable the controls. Defaults to False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>event_finish</code>
            </td>
            <td>
                  <code><span title="iris.utils.general.threading.Event">Event</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An event to set when the movement is finished. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="iris.utils.general.TimeoutError">TimeoutError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the stage does not move within the timeout</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/gui/motion_video.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1183</span>
<span class="normal">1184</span>
<span class="normal">1185</span>
<span class="normal">1186</span>
<span class="normal">1187</span>
<span class="normal">1188</span>
<span class="normal">1189</span>
<span class="normal">1190</span>
<span class="normal">1191</span>
<span class="normal">1192</span>
<span class="normal">1193</span>
<span class="normal">1194</span>
<span class="normal">1195</span>
<span class="normal">1196</span>
<span class="normal">1197</span>
<span class="normal">1198</span>
<span class="normal">1199</span>
<span class="normal">1200</span>
<span class="normal">1201</span>
<span class="normal">1202</span>
<span class="normal">1203</span>
<span class="normal">1204</span>
<span class="normal">1205</span>
<span class="normal">1206</span>
<span class="normal">1207</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@Slot</span><span class="p">(</span><span class="nb">tuple</span><span class="p">,</span><span class="nb">bool</span><span class="p">,</span><span class="n">threading</span><span class="o">.</span><span class="n">Event</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">go_to_coordinates</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">coors_mm</span><span class="p">:</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="o">|</span><span class="kc">None</span><span class="p">,</span><span class="nb">float</span><span class="o">|</span><span class="kc">None</span><span class="p">,</span><span class="nb">float</span><span class="o">|</span><span class="kc">None</span><span class="p">]</span><span class="o">=</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span><span class="kc">None</span><span class="p">,</span><span class="kc">None</span><span class="p">),</span>
    <span class="n">override_controls</span><span class="p">:</span><span class="nb">bool</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">event_finish</span><span class="p">:</span><span class="n">threading</span><span class="o">.</span><span class="n">Event</span><span class="o">|</span><span class="kc">None</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Moves the stage to specific coordinates, except if None is provided. (Asynchronous)</span>

<span class="sd">    Args:</span>
<span class="sd">        coors_mm (tuple[float|None,float|None,float|None], optional): A tuple of x, y, and z coordinates in mm to move to. If None</span>
<span class="sd">        override_controls (bool, optional): If True, does not disable/enable the controls. Defaults to False.</span>
<span class="sd">        event_finish (threading.Event, optional): An event to set when the movement is finished. Defaults to None.</span>

<span class="sd">    Raises:</span>
<span class="sd">        TimeoutError: If the stage does not move within the timeout</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">coor_x_mm</span><span class="p">,</span><span class="n">coor_y_mm</span><span class="p">,</span><span class="n">coor_z_mm</span> <span class="o">=</span> <span class="n">coors_mm</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">override_controls</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">disable_widgets</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_sig_go_to_coordinates</span><span class="o">.</span><span class="n">emit</span><span class="p">((</span><span class="n">coor_x_mm</span><span class="p">,</span><span class="n">coor_y_mm</span><span class="p">,</span><span class="n">coor_z_mm</span><span class="p">),</span> <span class="n">event_finish</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">override_controls</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">enable_widgets</span><span class="p">()</span>

    <span class="c1"># Resets the statusbar, let the user know that it&#39;s done moving</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">sig_statbar_message</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="s1">&#39;Stage movement complete&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.gui.motion_video.Wdg_MotionController.incrase_decrease_speed" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">incrase_decrease_speed</span><span class="p">(</span><span class="n">stage</span><span class="p">,</span> <span class="n">increase</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Increase or decrease the velocity of the motors by 5% or 1% for the xy-stage and z-stage
(5% if speed is &gt;= 10%, 1% if speed is &lt; 10%)</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>stage</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>'xy' or 'z' for the stage to be controlled</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>increase</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True to increase, False to decrease</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/gui/motion_video.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1052</span>
<span class="normal">1053</span>
<span class="normal">1054</span>
<span class="normal">1055</span>
<span class="normal">1056</span>
<span class="normal">1057</span>
<span class="normal">1058</span>
<span class="normal">1059</span>
<span class="normal">1060</span>
<span class="normal">1061</span>
<span class="normal">1062</span>
<span class="normal">1063</span>
<span class="normal">1064</span>
<span class="normal">1065</span>
<span class="normal">1066</span>
<span class="normal">1067</span>
<span class="normal">1068</span>
<span class="normal">1069</span>
<span class="normal">1070</span>
<span class="normal">1071</span>
<span class="normal">1072</span>
<span class="normal">1073</span>
<span class="normal">1074</span>
<span class="normal">1075</span>
<span class="normal">1076</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">incrase_decrease_speed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">stage</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span><span class="n">increase</span><span class="p">:</span><span class="nb">bool</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Increase or decrease the velocity of the motors by 5% or 1% for the xy-stage and z-stage</span>
<span class="sd">    (5% if speed is &gt;= 10%, 1% if speed is &lt; 10%)</span>

<span class="sd">    Args:</span>
<span class="sd">        stage (str): &#39;xy&#39; or &#39;z&#39; for the stage to be controlled</span>
<span class="sd">        increase (bool): True to increase, False to decrease</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">assert</span> <span class="n">stage</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;xy&#39;</span><span class="p">,</span><span class="s1">&#39;z&#39;</span><span class="p">],</span> <span class="s1">&#39;Invalid stage input&#39;</span>

    <span class="n">mult</span> <span class="o">=</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">increase</span> <span class="k">else</span> <span class="o">-</span><span class="mi">1</span>
    <span class="n">velxy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ctrl_xy</span><span class="o">.</span><span class="n">get_vel_acc_relative</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">velz</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ctrl_z</span><span class="o">.</span><span class="n">get_vel_acc_relative</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">stage</span> <span class="o">==</span> <span class="s1">&#39;xy&#39;</span><span class="p">:</span>
        <span class="n">velxy</span> <span class="o">+=</span> <span class="mi">5</span><span class="o">*</span><span class="n">mult</span> <span class="k">if</span> <span class="n">velxy</span> <span class="o">&gt;=</span> <span class="mi">10</span> <span class="k">else</span> <span class="mi">1</span><span class="o">*</span><span class="n">mult</span>
        <span class="k">if</span> <span class="n">velxy</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span> <span class="n">velxy</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">elif</span> <span class="n">velxy</span> <span class="o">&gt;=</span> <span class="mi">100</span><span class="p">:</span> <span class="n">velxy</span> <span class="o">=</span> <span class="mi">100</span>
    <span class="k">elif</span> <span class="n">stage</span> <span class="o">==</span> <span class="s1">&#39;z&#39;</span><span class="p">:</span>
        <span class="n">velz</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ctrl_z</span><span class="o">.</span><span class="n">get_vel_acc_relative</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">velz</span> <span class="o">+=</span> <span class="mi">5</span><span class="o">*</span><span class="n">mult</span> <span class="k">if</span> <span class="n">velz</span> <span class="o">&gt;=</span> <span class="mi">10</span> <span class="k">else</span> <span class="mi">1</span><span class="o">*</span><span class="n">mult</span>
        <span class="k">if</span> <span class="n">velz</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span> <span class="n">velz</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">elif</span> <span class="n">velz</span> <span class="o">&gt;=</span> <span class="mi">100</span><span class="p">:</span> <span class="n">velz</span> <span class="o">=</span> <span class="mi">100</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">set_vel_relative</span><span class="p">(</span><span class="n">vel_xy</span><span class="o">=</span><span class="n">velxy</span><span class="p">,</span><span class="n">vel_z</span><span class="o">=</span><span class="n">velz</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.gui.motion_video.Wdg_MotionController.motion_button_manager" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">motion_button_manager</span><span class="p">(</span><span class="nb">dir</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Moves the stage per request from the button presses and releases.
Should be assigned to a worker thread.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>dir</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>'yfwd', 'xfwd', 'zfwd', 'yrev', 'xrev', 'zrev', 'ystop', 'xstop', 'zstop', 'xyhome', 'zhome'</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/gui/motion_video.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1226</span>
<span class="normal">1227</span>
<span class="normal">1228</span>
<span class="normal">1229</span>
<span class="normal">1230</span>
<span class="normal">1231</span>
<span class="normal">1232</span>
<span class="normal">1233</span>
<span class="normal">1234</span>
<span class="normal">1235</span>
<span class="normal">1236</span>
<span class="normal">1237</span>
<span class="normal">1238</span>
<span class="normal">1239</span>
<span class="normal">1240</span>
<span class="normal">1241</span>
<span class="normal">1242</span>
<span class="normal">1243</span>
<span class="normal">1244</span>
<span class="normal">1245</span>
<span class="normal">1246</span>
<span class="normal">1247</span>
<span class="normal">1248</span>
<span class="normal">1249</span>
<span class="normal">1250</span>
<span class="normal">1251</span>
<span class="normal">1252</span>
<span class="normal">1253</span>
<span class="normal">1254</span>
<span class="normal">1255</span>
<span class="normal">1256</span>
<span class="normal">1257</span>
<span class="normal">1258</span>
<span class="normal">1259</span>
<span class="normal">1260</span>
<span class="normal">1261</span>
<span class="normal">1262</span>
<span class="normal">1263</span>
<span class="normal">1264</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">motion_button_manager</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="nb">dir</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Moves the stage per request from the button presses and releases.</span>
<span class="sd">    Should be assigned to a worker thread.</span>

<span class="sd">    Args:</span>
<span class="sd">        dir (str): &#39;yfwd&#39;, &#39;xfwd&#39;, &#39;zfwd&#39;, &#39;yrev&#39;, &#39;xrev&#39;, &#39;zrev&#39;, &#39;ystop&#39;, &#39;xstop&#39;, &#39;zstop&#39;, &#39;xyhome&#39;, &#39;zhome&#39;</span>
<span class="sd">        for x, y and z motors with fwd, rev, and stop for forward, backward, and stop.</span>
<span class="sd">        &#39;xyhome&#39; and &#39;zhome&#39; are for calibrating and homing the xy and z stage respectively.</span>
<span class="sd">        Note that &#39;xstop&#39; and &#39;ystop&#39; will stop both x and y motors.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_chkbox_jog_enabled</span><span class="o">.</span><span class="n">isChecked</span><span class="p">():</span> <span class="bp">self</span><span class="o">.</span><span class="n">move_jog</span><span class="p">(</span><span class="nb">dir</span><span class="p">);</span> <span class="k">return</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_move</span><span class="p">():</span>
        <span class="k">if</span> <span class="nb">dir</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;yfwd&#39;</span><span class="p">,</span><span class="s1">&#39;xfwd&#39;</span><span class="p">,</span><span class="s1">&#39;zfwd&#39;</span><span class="p">,</span><span class="s1">&#39;yrev&#39;</span><span class="p">,</span><span class="s1">&#39;xrev&#39;</span><span class="p">,</span><span class="s1">&#39;zrev&#39;</span><span class="p">,</span><span class="s1">&#39;xyhome&#39;</span><span class="p">,</span><span class="s1">&#39;zhome&#39;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sig_statbar_message</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Moving: </span><span class="si">{</span><span class="nb">dir</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;yellow&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">dir</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;xstop&#39;</span><span class="p">,</span><span class="s1">&#39;ystop&#39;</span><span class="p">,</span><span class="s1">&#39;zstop&#39;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sig_statbar_message</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Stopping: </span><span class="si">{</span><span class="nb">dir</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">dir</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;yfwd&#39;</span><span class="p">,</span><span class="s1">&#39;xfwd&#39;</span><span class="p">,</span><span class="s1">&#39;yrev&#39;</span><span class="p">,</span><span class="s1">&#39;xrev&#39;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ctrl_xy</span><span class="o">.</span><span class="n">move_continuous</span><span class="p">(</span><span class="nb">dir</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">dir</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;zfwd&#39;</span><span class="p">,</span><span class="s1">&#39;zrev&#39;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ctrl_z</span><span class="o">.</span><span class="n">move_continuous</span><span class="p">(</span><span class="nb">dir</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">dir</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;xstop&#39;</span><span class="p">,</span><span class="s1">&#39;ystop&#39;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ctrl_xy</span><span class="o">.</span><span class="n">stop_move</span><span class="p">()</span>
        <span class="k">elif</span> <span class="nb">dir</span> <span class="o">==</span> <span class="s1">&#39;zstop&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ctrl_z</span><span class="o">.</span><span class="n">stop_move</span><span class="p">()</span>
        <span class="k">elif</span> <span class="nb">dir</span> <span class="o">==</span> <span class="s1">&#39;xyhome&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ctrl_xy</span><span class="o">.</span><span class="n">homing_n_coor_calibration</span><span class="p">()</span>
        <span class="k">elif</span> <span class="nb">dir</span> <span class="o">==</span> <span class="s1">&#39;zhome&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ctrl_z</span><span class="o">.</span><span class="n">homing_n_coor_calibration</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span> <span class="k">raise</span> <span class="ne">SyntaxError</span><span class="p">(</span><span class="s1">&#39;motion_button_manager: Invalid direction input&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">sig_statbar_message</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="s1">&#39;_thread_move&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_thread_move</span><span class="o">.</span><span class="n">is_alive</span><span class="p">():</span> <span class="k">return</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_thread_move</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">_move</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_thread_move</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.gui.motion_video.Wdg_MotionController.move_jog" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">move_jog</span><span class="p">(</span><span class="nb">dir</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Moves the stage per request from the button presses</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>dir</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>'yfwd', 'xfwd', 'zfwd', 'yrev', 'xrev', 'zrev'</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/gui/motion_video.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">957</span>
<span class="normal">958</span>
<span class="normal">959</span>
<span class="normal">960</span>
<span class="normal">961</span>
<span class="normal">962</span>
<span class="normal">963</span>
<span class="normal">964</span>
<span class="normal">965</span>
<span class="normal">966</span>
<span class="normal">967</span>
<span class="normal">968</span>
<span class="normal">969</span>
<span class="normal">970</span>
<span class="normal">971</span>
<span class="normal">972</span>
<span class="normal">973</span>
<span class="normal">974</span>
<span class="normal">975</span>
<span class="normal">976</span>
<span class="normal">977</span>
<span class="normal">978</span>
<span class="normal">979</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">move_jog</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="nb">dir</span><span class="p">:</span><span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Moves the stage per request from the button presses</span>

<span class="sd">    Args:</span>
<span class="sd">        dir (str): &#39;yfwd&#39;, &#39;xfwd&#39;, &#39;zfwd&#39;, &#39;yrev&#39;, &#39;xrev&#39;, &#39;zrev&#39;</span>
<span class="sd">        as described in self.motion_button_manager</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_move_jog</span><span class="p">():</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sig_statbar_message</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Jogging to: </span><span class="si">{</span><span class="nb">dir</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;yellow&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">dir</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;yfwd&#39;</span><span class="p">,</span><span class="s1">&#39;xfwd&#39;</span><span class="p">,</span><span class="s1">&#39;zfwd&#39;</span><span class="p">,</span><span class="s1">&#39;yrev&#39;</span><span class="p">,</span><span class="s1">&#39;xrev&#39;</span><span class="p">,</span><span class="s1">&#39;zrev&#39;</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">SyntaxError</span><span class="p">(</span><span class="s1">&#39;move_jog: Invalid direction input&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">dir</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;xfwd&#39;</span><span class="p">,</span><span class="s1">&#39;xrev&#39;</span><span class="p">,</span><span class="s1">&#39;yfwd&#39;</span><span class="p">,</span><span class="s1">&#39;yrev&#39;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ctrl_xy</span><span class="o">.</span><span class="n">move_jog</span><span class="p">(</span><span class="nb">dir</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">dir</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;zfwd&#39;</span><span class="p">,</span><span class="s1">&#39;zrev&#39;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ctrl_z</span><span class="o">.</span><span class="n">move_jog</span><span class="p">(</span><span class="nb">dir</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">sig_statbar_message</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="s1">&#39;_thread_jog&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_thread_jog</span><span class="o">.</span><span class="n">is_alive</span><span class="p">():</span> <span class="k">return</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_thread_jog</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">_move_jog</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_thread_jog</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.gui.motion_video.Wdg_MotionController.set_camera_exposure" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_camera_exposure</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Sets the camera exposure time in microseconds</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/gui/motion_video.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">830</span>
<span class="normal">831</span>
<span class="normal">832</span>
<span class="normal">833</span>
<span class="normal">834</span>
<span class="normal">835</span>
<span class="normal">836</span>
<span class="normal">837</span>
<span class="normal">838</span>
<span class="normal">839</span>
<span class="normal">840</span>
<span class="normal">841</span>
<span class="normal">842</span>
<span class="normal">843</span>
<span class="normal">844</span>
<span class="normal">845</span>
<span class="normal">846</span>
<span class="normal">847</span>
<span class="normal">848</span>
<span class="normal">849</span>
<span class="normal">850</span>
<span class="normal">851</span>
<span class="normal">852</span>
<span class="normal">853</span>
<span class="normal">854</span>
<span class="normal">855</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_camera_exposure</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sets the camera exposure time in microseconds</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">main_window</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_camera_ctrl</span><span class="p">,</span><span class="s1">&#39;set_exposure_time&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_camera_ctrl</span><span class="p">,</span><span class="s1">&#39;get_exposure_time&#39;</span><span class="p">):</span>
        <span class="n">qw</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">critical</span><span class="p">(</span><span class="n">main_window</span><span class="p">,</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;Camera does not support exposure time setting&#39;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">init_exposure_time</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_camera_ctrl</span><span class="o">.</span><span class="n">get_exposure_time</span><span class="p">()</span>
        <span class="n">new_exposure_time</span> <span class="o">=</span> <span class="n">messagebox_request_input</span><span class="p">(</span>
            <span class="n">parent</span><span class="o">=</span><span class="n">main_window</span><span class="p">,</span>
            <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Set exposure time&#39;</span><span class="p">,</span>
            <span class="n">message</span><span class="o">=</span><span class="s1">&#39;Set exposure time in device unit&#39;</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">init_exposure_time</span><span class="p">),</span>
            <span class="n">validator</span><span class="o">=</span><span class="n">validator_float_greaterThanZero</span><span class="p">,</span>
            <span class="n">invalid_msg</span><span class="o">=</span><span class="s1">&#39;Exposure time must be a positive number&#39;</span><span class="p">,</span>
            <span class="n">loop_until_valid</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">new_exposure_time</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span> 
            <span class="n">qw</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">information</span><span class="p">(</span><span class="n">main_window</span><span class="p">,</span> <span class="s1">&#39;Exposure time not set&#39;</span><span class="p">,</span> <span class="s1">&#39;Exposure time not changed&#39;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_camera_ctrl</span><span class="o">.</span><span class="n">set_exposure_time</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">new_exposure_time</span><span class="p">))</span>
        <span class="n">qw</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">information</span><span class="p">(</span><span class="n">main_window</span><span class="p">,</span> <span class="s1">&#39;Exposure time set&#39;</span><span class="p">,</span> <span class="s1">&#39;Exposure time set to </span><span class="si">{}</span><span class="s1"> ms&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_camera_ctrl</span><span class="o">.</span><span class="n">get_exposure_time</span><span class="p">()))</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">qw</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">critical</span><span class="p">(</span><span class="n">main_window</span><span class="p">,</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;Failed to set exposure time:</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.gui.motion_video.Wdg_MotionController.set_vel_relative" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_vel_relative</span><span class="p">(</span><span class="n">vel_xy</span><span class="o">=-</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">vel_z</span><span class="o">=-</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">event_finish</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Sets the velocity parameters for the motors</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>vel_xy</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Velocity (percentage) for the xy-stage. Must be between 0[%] and 100[%]. If -1, uses the current velocity. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>-1.0</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>vel_z</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Velocity (percentage) for the z-stage. Must be between 0[%] and 100[%]. If -1, uses the current velocity. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>-1.0</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/gui/motion_video.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1091</span>
<span class="normal">1092</span>
<span class="normal">1093</span>
<span class="normal">1094</span>
<span class="normal">1095</span>
<span class="normal">1096</span>
<span class="normal">1097</span>
<span class="normal">1098</span>
<span class="normal">1099</span>
<span class="normal">1100</span>
<span class="normal">1101</span>
<span class="normal">1102</span>
<span class="normal">1103</span>
<span class="normal">1104</span>
<span class="normal">1105</span>
<span class="normal">1106</span>
<span class="normal">1107</span>
<span class="normal">1108</span>
<span class="normal">1109</span>
<span class="normal">1110</span>
<span class="normal">1111</span>
<span class="normal">1112</span>
<span class="normal">1113</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@Slot</span><span class="p">(</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">,</span><span class="n">threading</span><span class="o">.</span><span class="n">Event</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">set_vel_relative</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">vel_xy</span><span class="p">:</span><span class="nb">float</span><span class="o">=-</span><span class="mf">1.0</span><span class="p">,</span><span class="n">vel_z</span><span class="p">:</span><span class="nb">float</span><span class="o">=-</span><span class="mf">1.0</span><span class="p">,</span><span class="n">event_finish</span><span class="p">:</span><span class="n">threading</span><span class="o">.</span><span class="n">Event</span><span class="o">|</span><span class="kc">None</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sets the velocity parameters for the motors</span>

<span class="sd">    Args:</span>
<span class="sd">        vel_xy (float, optional): Velocity (percentage) for the xy-stage. Must be between 0[%] and 100[%]. If -1, uses the current velocity. Defaults to None.</span>
<span class="sd">        vel_z (float, optional): Velocity (percentage) for the z-stage. Must be between 0[%] and 100[%]. If -1, uses the current velocity. Defaults to None.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">vel_xy</span> <span class="o">&lt;=</span> <span class="mf">0.0</span> <span class="ow">or</span> <span class="n">vel_xy</span> <span class="o">&gt;</span> <span class="mf">100.0</span><span class="p">:</span> <span class="n">vel_xy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ctrl_xy</span><span class="o">.</span><span class="n">get_vel_acc_relative</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">vel_z</span> <span class="o">&lt;=</span> <span class="mf">0.0</span> <span class="ow">or</span> <span class="n">vel_z</span> <span class="o">&gt;</span> <span class="mf">100.0</span><span class="p">:</span> <span class="n">vel_z</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ctrl_z</span><span class="o">.</span><span class="n">get_vel_acc_relative</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>

    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">vel_xy</span><span class="p">,(</span><span class="nb">float</span><span class="p">,</span><span class="nb">int</span><span class="p">))</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">vel_z</span><span class="p">,(</span><span class="nb">float</span><span class="p">,</span><span class="nb">int</span><span class="p">)),</span> <span class="s1">&#39;Invalid input type for the velocity parameters&#39;</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">ctrl_xy</span><span class="o">.</span><span class="n">set_vel_acc_relative</span><span class="p">(</span><span class="n">vel_homing</span><span class="o">=</span><span class="n">vel_xy</span><span class="p">,</span><span class="n">vel_move</span><span class="o">=</span><span class="n">vel_xy</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">ctrl_z</span><span class="o">.</span><span class="n">set_vel_acc_relative</span><span class="p">(</span><span class="n">vel_homing</span><span class="o">=</span><span class="n">vel_z</span><span class="p">,</span><span class="n">vel_move</span><span class="o">=</span><span class="n">vel_z</span><span class="p">)</span>

    <span class="n">speed_xy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ctrl_xy</span><span class="o">.</span><span class="n">get_vel_acc_relative</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">speed_z</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ctrl_z</span><span class="o">.</span><span class="n">get_vel_acc_relative</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">event_finish</span><span class="p">,</span><span class="n">threading</span><span class="o">.</span><span class="n">Event</span><span class="p">):</span> <span class="n">event_finish</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_update_set_vel_labels</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.gui.motion_video.Wdg_MotionController.status_update" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">status_update</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">bg_colour</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>To update the status bar at the bottom</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>message</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The update message. Defualts to None</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>bg_colour</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Background colour. Defaults to 'default'.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/gui/motion_video.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1419</span>
<span class="normal">1420</span>
<span class="normal">1421</span>
<span class="normal">1422</span>
<span class="normal">1423</span>
<span class="normal">1424</span>
<span class="normal">1425</span>
<span class="normal">1426</span>
<span class="normal">1427</span>
<span class="normal">1428</span>
<span class="normal">1429</span>
<span class="normal">1430</span>
<span class="normal">1431</span>
<span class="normal">1432</span>
<span class="normal">1433</span>
<span class="normal">1434</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@Slot</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="nb">str</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">status_update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">message</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">bg_colour</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    To update the status bar at the bottom</span>

<span class="sd">    Args:</span>
<span class="sd">        message (str, optional): The update message. Defualts to None</span>
<span class="sd">        bg_colour (str, optional): Background colour. Defaults to &#39;default&#39;.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">message</span><span class="p">:</span> <span class="n">message</span> <span class="o">=</span> <span class="s1">&#39;Motion controller ready&#39;</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_statbar</span><span class="o">.</span><span class="n">showMessage</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_statbar</span><span class="o">.</span><span class="n">setStyleSheet</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;background-color: </span><span class="si">{</span><span class="n">bg_colour</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="n">bg_colour</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">_statbar</span><span class="o">.</span><span class="n">setStyleSheet</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Status bar update failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.gui.motion_video.Wdg_MotionController.terminate" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">terminate</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Terminates the motion controller</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/gui/motion_video.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1436</span>
<span class="normal">1437</span>
<span class="normal">1438</span>
<span class="normal">1439</span>
<span class="normal">1440</span>
<span class="normal">1441</span>
<span class="normal">1442</span>
<span class="normal">1443</span>
<span class="normal">1444</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">terminate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Terminates the motion controller</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_flg_isrunning</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">video_terminate</span><span class="p">()</span>  <span class="c1"># Terminates the camera controller as well</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">ctrl_xy</span><span class="o">.</span><span class="n">terminate</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">ctrl_z</span><span class="o">.</span><span class="n">terminate</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_camera_ctrl</span><span class="o">.</span><span class="n">camera_termination</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.gui.motion_video.Wdg_MotionController.video_initialise" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">video_initialise</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Initialises the video:
1. Define the controller
2. Sets the first frame
3. Starts the multi-threading to start the autoupdater</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/gui/motion_video.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">899</span>
<span class="normal">900</span>
<span class="normal">901</span>
<span class="normal">902</span>
<span class="normal">903</span>
<span class="normal">904</span>
<span class="normal">905</span>
<span class="normal">906</span>
<span class="normal">907</span>
<span class="normal">908</span>
<span class="normal">909</span>
<span class="normal">910</span>
<span class="normal">911</span>
<span class="normal">912</span>
<span class="normal">913</span>
<span class="normal">914</span>
<span class="normal">915</span>
<span class="normal">916</span>
<span class="normal">917</span>
<span class="normal">918</span>
<span class="normal">919</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">video_initialise</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialises the video:</span>
<span class="sd">    1. Define the controller</span>
<span class="sd">    2. Sets the first frame</span>
<span class="sd">    3. Starts the multi-threading to start the autoupdater</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_flg_isvideorunning</span><span class="p">:</span> <span class="k">return</span>
        <span class="c1"># Initialise the video capture</span>
        <span class="c1">## camera initialisation moved to self.video_update for responsiveness</span>
        <span class="c1"># Start multithreading for the video to constantly update the captured frame</span>
        <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">video_update</span><span class="p">,</span> <span class="n">daemon</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

        <span class="c1"># Turn the button into a video stop button</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_btn_videotoggle</span><span class="o">.</span><span class="n">released</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_btn_videotoggle</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s1">&#39;Turn camera OFF&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_btn_videotoggle</span><span class="o">.</span><span class="n">released</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">video_terminate</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_btn_videotoggle</span><span class="o">.</span><span class="n">setStyleSheet</span><span class="p">(</span><span class="s1">&#39;background-color: red&#39;</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Video feed cannot start:</span><span class="se">\n</span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="iris.gui.motion_video.Wdg_MotionController.video_update" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">video_update</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Updates the video feed, taking in mind Tkinter's single thread.
Use in a worker thread, DO NOT use in the mainthread!!!</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/gui/motion_video.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1364</span>
<span class="normal">1365</span>
<span class="normal">1366</span>
<span class="normal">1367</span>
<span class="normal">1368</span>
<span class="normal">1369</span>
<span class="normal">1370</span>
<span class="normal">1371</span>
<span class="normal">1372</span>
<span class="normal">1373</span>
<span class="normal">1374</span>
<span class="normal">1375</span>
<span class="normal">1376</span>
<span class="normal">1377</span>
<span class="normal">1378</span>
<span class="normal">1379</span>
<span class="normal">1380</span>
<span class="normal">1381</span>
<span class="normal">1382</span>
<span class="normal">1383</span>
<span class="normal">1384</span>
<span class="normal">1385</span>
<span class="normal">1386</span>
<span class="normal">1387</span>
<span class="normal">1388</span>
<span class="normal">1389</span>
<span class="normal">1390</span>
<span class="normal">1391</span>
<span class="normal">1392</span>
<span class="normal">1393</span>
<span class="normal">1394</span>
<span class="normal">1395</span>
<span class="normal">1396</span>
<span class="normal">1397</span>
<span class="normal">1398</span>
<span class="normal">1399</span>
<span class="normal">1400</span>
<span class="normal">1401</span>
<span class="normal">1402</span>
<span class="normal">1403</span>
<span class="normal">1404</span>
<span class="normal">1405</span>
<span class="normal">1406</span>
<span class="normal">1407</span>
<span class="normal">1408</span>
<span class="normal">1409</span>
<span class="normal">1410</span>
<span class="normal">1411</span>
<span class="normal">1412</span>
<span class="normal">1413</span>
<span class="normal">1414</span>
<span class="normal">1415</span>
<span class="normal">1416</span>
<span class="normal">1417</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">video_update</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Updates the video feed, taking in mind Tkinter&#39;s single thread.</span>
<span class="sd">    Use in a worker thread, DO NOT use in the mainthread!!!</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">draw_crosshair</span><span class="p">(</span><span class="n">img</span><span class="p">:</span><span class="n">Image</span><span class="o">.</span><span class="n">Image</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Image</span><span class="o">.</span><span class="n">Image</span><span class="p">:</span>
        <span class="n">width</span><span class="p">,</span> <span class="n">height</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">size</span>
        <span class="n">draw</span> <span class="o">=</span> <span class="n">ImageDraw</span><span class="o">.</span><span class="n">Draw</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
        <span class="n">line_color</span> <span class="o">=</span> <span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="c1"># Draw vertical line</span>
        <span class="n">draw</span><span class="o">.</span><span class="n">line</span><span class="p">([(</span><span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">height</span><span class="p">)],</span> <span class="n">fill</span><span class="o">=</span><span class="n">line_color</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
        <span class="c1"># Draw horizontal line</span>
        <span class="n">draw</span><span class="o">.</span><span class="n">line</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span> <span class="n">height</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="o">/</span><span class="mi">2</span><span class="p">)],</span> <span class="n">fill</span><span class="o">=</span><span class="n">line_color</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">img</span>

    <span class="c1"># Initialise the camera controller and grabs the first image</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_camera_ctrl</span><span class="o">.</span><span class="n">get_initialisation_status</span><span class="p">():</span> <span class="bp">self</span><span class="o">.</span><span class="n">_camera_ctrl</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_currentFrame</span> <span class="o">=</span> <span class="kc">None</span>            <span class="c1"># Empties the current frame</span>

    <span class="c1"># Loops the image updater to create outputs the video capture frame by frame</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_flg_isvideorunning</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># Enables the autoupdater</span>
    <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">_flg_isvideorunning</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">time1</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
            <span class="c1"># Triggers the frame capture from the camera</span>
            <span class="n">request</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_combo_vidcorrection</span><span class="o">.</span><span class="n">currentText</span><span class="p">()</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_stageHub</span><span class="o">.</span><span class="n">Enum_CamCorrectionType</span><span class="p">[</span><span class="n">request</span><span class="p">]</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_stageHub</span><span class="o">.</span><span class="n">Enum_CamCorrectionType</span><span class="o">.</span><span class="n">RAW</span><span class="p">:</span>
                <span class="n">img</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_camera_ctrl</span><span class="o">.</span><span class="n">img_capture</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">img</span><span class="p">:</span><span class="n">Image</span><span class="o">.</span><span class="n">Image</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_stageHub</span><span class="o">.</span><span class="n">get_image</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_stageHub</span><span class="o">.</span><span class="n">Enum_CamCorrectionType</span><span class="p">[</span><span class="n">request</span><span class="p">])</span>
            <span class="c1"># video_width = int(img.size[1]/img.size[0]*self._video_height)</span>

            <span class="c1"># Add a scalebar to it</span>
            <span class="n">img</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_overlay_scalebar</span><span class="p">(</span><span class="n">img</span><span class="p">)</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_chkbox_scalebar</span><span class="o">.</span><span class="n">isChecked</span><span class="p">()</span> <span class="k">else</span> <span class="n">img</span>

            <span class="c1"># Overlay a crosshair if requested</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_chkbox_crosshair</span><span class="o">.</span><span class="n">isChecked</span><span class="p">():</span> <span class="n">img</span> <span class="o">=</span> <span class="n">draw_crosshair</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
            <span class="n">new_frame</span><span class="p">:</span><span class="n">QPixmap</span> <span class="o">=</span> <span class="n">ImageQt</span><span class="o">.</span><span class="n">toqpixmap</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>

            <span class="c1"># Update the image in the app window</span>
            <span class="c1"># Only update if the frame is different. Sometimes the program isn&#39;t done taking the new image.</span>
            <span class="c1"># In this case, it skips the frame update</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_currentFrame</span> <span class="o">!=</span> <span class="n">new_frame</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_lbl_video</span><span class="o">.</span><span class="n">setPixmap</span><span class="p">(</span><span class="n">new_frame</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_currentFrame</span> <span class="o">=</span> <span class="n">new_frame</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_currentImage</span> <span class="o">=</span> <span class="n">img</span>

            <span class="c1"># Let the coordinate updater know that the frame is ready if any is waiting</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_flg_isNewFrmReady</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>
            <span class="n">time_elapsed</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">time1</span>
            <span class="k">if</span> <span class="n">time_elapsed</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="o">/</span><span class="n">AppVideoEnum</span><span class="o">.</span><span class="n">VIDEOFEED_REFRESH_RATE</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
                <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="n">AppVideoEnum</span><span class="o">.</span><span class="n">VIDEOFEED_REFRESH_RATE</span><span class="o">.</span><span class="n">value</span> <span class="o">-</span> <span class="n">time_elapsed</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Video feed failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">);</span> <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.02</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>


<div class="doc doc-object doc-function">


<h2 id="iris.gui.motion_video.check_and_create_config_file" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">check_and_create_config_file</span><span class="p">(</span><span class="n">config_file_path</span><span class="o">=</span><span class="s1">&#39;config.ini&#39;</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Generate a default config file if it does not exist</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>config_file</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Path to the config file. Defaults to 'config.ini'</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/utils/general.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">check_and_create_config_file</span><span class="p">(</span><span class="n">config_file_path</span><span class="p">:</span><span class="nb">str</span><span class="o">=</span><span class="s1">&#39;config.ini&#39;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generate a default config file if it does not exist</span>

<span class="sd">    Args:</span>
<span class="sd">        config_file (str): Path to the config file. Defaults to &#39;config.ini&#39;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Generate a default config file if it does not exist</span>
    <span class="n">updater</span> <span class="o">=</span> <span class="n">ConfigUpdater</span><span class="p">(</span><span class="n">allow_no_value</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">config_file_path</span><span class="p">):</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">config_file_path</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">configfile</span><span class="p">:</span> <span class="n">updater</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">configfile</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="iris.gui.motion_video.convert_ramanshift_to_wavelength" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">convert_ramanshift_to_wavelength</span><span class="p">(</span><span class="n">raman_shift</span><span class="p">,</span> <span class="n">excitation_wavelength</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Converts Raman shift to wavelength</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>raman_shift</code>
            </td>
            <td>
                  <code><span title="float">float</span> | <span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Raman shift in cm^-1</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>excitation_wavelength</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Excitation laser wavelength in nm</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="float">float</span> | <span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>float|np.ndarray: Wavelength in nm</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/utils/general.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">convert_ramanshift_to_wavelength</span><span class="p">(</span><span class="n">raman_shift</span><span class="p">:</span><span class="nb">float</span><span class="o">|</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span><span class="n">excitation_wavelength</span><span class="p">:</span><span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="o">|</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Converts Raman shift to wavelength</span>

<span class="sd">    Args:</span>
<span class="sd">        raman_shift (float|np.ndarray): Raman shift in cm^-1</span>
<span class="sd">        excitation_wavelength (float): Excitation laser wavelength in nm</span>

<span class="sd">    Returns:</span>
<span class="sd">        float|np.ndarray: Wavelength in nm</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">wavelength</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="n">excitation_wavelength</span> <span class="o">-</span> <span class="n">raman_shift</span><span class="o">/</span><span class="mf">1e7</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">wavelength</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="iris.gui.motion_video.convert_timestamp_us_int_to_str" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">convert_timestamp_us_int_to_str</span><span class="p">(</span><span class="n">timestamp</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Converts timestamp integer to string</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>timestamp</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Timestamp in us</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Timestamp as string in the format %y%m%d_%H%M%S_%f</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/utils/general.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">convert_timestamp_us_int_to_str</span><span class="p">(</span><span class="n">timestamp</span><span class="p">:</span><span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Converts timestamp integer to string</span>

<span class="sd">    Args:</span>
<span class="sd">        timestamp (int): Timestamp in us</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: Timestamp as string in the format %y%m%d_%H%M%S_%f</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">timestamp_str</span> <span class="o">=</span> <span class="n">dt</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">(</span><span class="n">timestamp</span><span class="o">*</span><span class="mf">1e-6</span><span class="p">)</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%y%m</span><span class="si">%d</span><span class="s2">_%H%M%S_</span><span class="si">%f</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">timestamp_str</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="iris.gui.motion_video.convert_timestamp_us_str_to_int" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">convert_timestamp_us_str_to_int</span><span class="p">(</span><span class="n">timestamp</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Converts timestamp string to integer</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>timestamp</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Timestamp, has to be in the format %y%m%d_%H%M%S_%f</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>int</code></td>            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Timestamp as integer in us</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/utils/general.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">convert_timestamp_us_str_to_int</span><span class="p">(</span><span class="n">timestamp</span><span class="p">:</span><span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Converts timestamp string to integer</span>

<span class="sd">    Args:</span>
<span class="sd">        timestamp (str): Timestamp, has to be in the format %y%m%d_%H%M%S_%f</span>

<span class="sd">    Returns:</span>
<span class="sd">        int: Timestamp as integer in us</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">timestamp_int</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">timestamp</span><span class="p">,</span> <span class="s2">&quot;%y%m</span><span class="si">%d</span><span class="s2">_%H%M%S_</span><span class="si">%f</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">timestamp</span><span class="p">()</span><span class="o">*</span><span class="mf">1e6</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">timestamp_int</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="iris.gui.motion_video.convert_wavelength_to_ramanshift" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">convert_wavelength_to_ramanshift</span><span class="p">(</span><span class="n">wavelength</span><span class="p">,</span> <span class="n">excitation_wavelength</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Converts wavelength to Raman shift</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>wavelength</code>
            </td>
            <td>
                  <code><span title="float">float</span> | <span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Wavelength in nm</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>excitation_wavelength</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Excitation laser wavelength in nm</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="float">float</span> | <span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>float|np.ndarray: Raman shift in cm^-1</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/utils/general.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">convert_wavelength_to_ramanshift</span><span class="p">(</span><span class="n">wavelength</span><span class="p">:</span><span class="nb">float</span><span class="o">|</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span><span class="n">excitation_wavelength</span><span class="p">:</span><span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="o">|</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Converts wavelength to Raman shift</span>

<span class="sd">    Args:</span>
<span class="sd">        wavelength (float|np.ndarray): Wavelength in nm</span>
<span class="sd">        excitation_wavelength (float): Excitation laser wavelength in nm</span>

<span class="sd">    Returns:</span>
<span class="sd">        float|np.ndarray: Raman shift in cm^-1</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">wavelength</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span> <span class="ow">and</span> <span class="n">wavelength</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span> <span class="n">wavelength</span> <span class="o">=</span> <span class="mf">0.0001</span>
    <span class="k">else</span><span class="p">:</span> <span class="n">wavelength</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">wavelength</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.0001</span><span class="p">,</span> <span class="n">wavelength</span><span class="p">)</span>
    <span class="n">raman_shift</span> <span class="o">=</span> <span class="mf">1e7</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="n">excitation_wavelength</span> <span class="o">-</span> <span class="mi">1</span><span class="o">/</span><span class="n">wavelength</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">raman_shift</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="iris.gui.motion_video.generate_dummy_motion_controller" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">generate_dummy_motion_controller</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Generates a dummy motion controller for testing purposes.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>parent</code>
            </td>
            <td>
                  <code><span title="iris.utils.general.qw.QWidget">QWidget</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The parent QWidget to attach the motion controller to.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>Frm_MotionController</code></td>            <td>
                  <code><a class="autorefs autorefs-internal" title="Wdg_MotionController (iris.gui.motion_video.Wdg_MotionController)" href="#iris.gui.motion_video.Wdg_MotionController">Wdg_MotionController</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The dummy motion controller</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/gui/motion_video.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1446</span>
<span class="normal">1447</span>
<span class="normal">1448</span>
<span class="normal">1449</span>
<span class="normal">1450</span>
<span class="normal">1451</span>
<span class="normal">1452</span>
<span class="normal">1453</span>
<span class="normal">1454</span>
<span class="normal">1455</span>
<span class="normal">1456</span>
<span class="normal">1457</span>
<span class="normal">1458</span>
<span class="normal">1459</span>
<span class="normal">1460</span>
<span class="normal">1461</span>
<span class="normal">1462</span>
<span class="normal">1463</span>
<span class="normal">1464</span>
<span class="normal">1465</span>
<span class="normal">1466</span>
<span class="normal">1467</span>
<span class="normal">1468</span>
<span class="normal">1469</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">generate_dummy_motion_controller</span><span class="p">(</span><span class="n">parent</span><span class="p">:</span><span class="n">qw</span><span class="o">.</span><span class="n">QWidget</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Wdg_MotionController</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generates a dummy motion controller for testing purposes.</span>

<span class="sd">    Args:</span>
<span class="sd">        parent (qw.QWidget): The parent QWidget to attach the motion controller to.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Frm_MotionController: The dummy motion controller</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">iris.multiprocessing.dataStreamer_StageCam</span><span class="w"> </span><span class="kn">import</span> <span class="n">generate_dummy_stageHub</span>

    <span class="n">stagehub</span><span class="p">,</span> <span class="n">xyproxy</span><span class="p">,</span> <span class="n">zproxy</span><span class="p">,</span> <span class="n">camproxy</span><span class="p">,</span> <span class="n">stage_namespace</span> <span class="o">=</span> <span class="n">generate_dummy_stageHub</span><span class="p">()</span>
    <span class="n">stagehub</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

    <span class="n">frm_motion</span> <span class="o">=</span> <span class="n">Wdg_MotionController</span><span class="p">(</span>
        <span class="n">parent</span><span class="o">=</span><span class="n">parent</span><span class="p">,</span>
        <span class="n">xy_controller</span><span class="o">=</span><span class="n">xyproxy</span><span class="p">,</span>
        <span class="n">z_controller</span><span class="o">=</span><span class="n">zproxy</span><span class="p">,</span>
        <span class="n">stageHub</span><span class="o">=</span><span class="n">stagehub</span><span class="p">,</span>
        <span class="n">getter_imgcal</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="kc">None</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">frm_motion</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="iris.gui.motion_video.generate_test_app" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">generate_test_app</span><span class="p">(</span><span class="n">lyt</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Generates a test QApplication and QVBoxLayout for testing purposes</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="tuple">tuple</span>[<span title="PySide6.QtWidgets.QApplication">QApplication</span>, <span title="PySide6.QtWidgets.QWidget">QWidget</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>tuple[qw.QApplication, qw.QWidget]: The QApplication and QWidget instances</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/utils/general.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">generate_test_app</span><span class="p">(</span><span class="n">lyt</span><span class="p">:</span><span class="n">qw</span><span class="o">.</span><span class="n">QVBoxLayout</span><span class="o">|</span><span class="n">qw</span><span class="o">.</span><span class="n">QHBoxLayout</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">qw</span><span class="o">.</span><span class="n">QApplication</span><span class="p">,</span><span class="n">qw</span><span class="o">.</span><span class="n">QWidget</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generates a test QApplication and QVBoxLayout for testing purposes</span>

<span class="sd">    Returns:</span>
<span class="sd">        tuple[qw.QApplication, qw.QWidget]: The QApplication and QWidget instances</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">app</span> <span class="o">=</span> <span class="n">qw</span><span class="o">.</span><span class="n">QApplication</span><span class="p">([])</span>
    <span class="n">main_window</span> <span class="o">=</span> <span class="n">qw</span><span class="o">.</span><span class="n">QMainWindow</span><span class="p">()</span>
    <span class="n">main_window</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
    <span class="n">wdg</span> <span class="o">=</span> <span class="n">qw</span><span class="o">.</span><span class="n">QWidget</span><span class="p">()</span>
    <span class="n">main_window</span><span class="o">.</span><span class="n">setCentralWidget</span><span class="p">(</span><span class="n">wdg</span><span class="p">)</span>
    <span class="n">wdg</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">lyt</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">app</span><span class="p">,</span> <span class="n">wdg</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="iris.gui.motion_video.get_all_widgets" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_all_widgets</span><span class="p">(</span><span class="n">parent_widget</span><span class="p">,</span> <span class="n">get_all</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>A function that returns all widgets in a frame and optionally, its subframes (all levels)</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>parent_widget</code>
            </td>
            <td>
                  <code><span title="PySide6.QtWidgets.QWidget">QWidget</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Widget which children need to be listed</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>get_all</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True it will get the widgets in the sub-widgets as well</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<span title="PySide6.QtWidgets.QWidget">QWidget</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>list[qw.QWidget]: List of all widgets in the widget</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/utils/general.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_all_widgets</span><span class="p">(</span><span class="n">parent_widget</span><span class="p">:</span><span class="n">qw</span><span class="o">.</span><span class="n">QWidget</span><span class="p">,</span><span class="n">get_all</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">qw</span><span class="o">.</span><span class="n">QWidget</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A function that returns all widgets in a frame and optionally, its subframes (all levels)</span>

<span class="sd">    Args:</span>
<span class="sd">        parent_widget (qw.QWidget): Widget which children need to be listed</span>
<span class="sd">        get_all (bool, optional): If True it will get the widgets in the sub-widgets as well</span>

<span class="sd">    Returns:</span>
<span class="sd">        list[qw.QWidget]: List of all widgets in the widget</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">get_all</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">parent_widget</span><span class="o">.</span><span class="n">findChildren</span><span class="p">(</span><span class="n">qw</span><span class="o">.</span><span class="n">QWidget</span><span class="p">)</span>   <span class="c1"># The default findChildren() is already recursive</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># findChildren() with a search option that limits depth</span>
        <span class="c1"># For a single level, findChildren(type, options) is useful</span>
        <span class="c1"># We find widgets that are immediate children of the parent.</span>
        <span class="k">return</span> <span class="n">parent_widget</span><span class="o">.</span><span class="n">findChildren</span><span class="p">(</span><span class="n">qw</span><span class="o">.</span><span class="n">QWidget</span><span class="p">,</span> <span class="n">qc</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">FindChildOption</span><span class="o">.</span><span class="n">FindDirectChildrenOnly</span><span class="p">)</span> <span class="c1"># type: ignore</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="iris.gui.motion_video.get_all_widgets_from_layout" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_all_widgets_from_layout</span><span class="p">(</span><span class="n">parent_layout</span><span class="p">,</span> <span class="n">get_all</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>A function that returns all widgets in a layout and optionally, its sub-layouts (all levels)</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>parent_layout</code>
            </td>
            <td>
                  <code><span title="PySide6.QtWidgets.QLayout">QLayout</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Layout which children need to be listed</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>get_all</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True it will get the widgets in the sub-layouts as well</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<span title="PySide6.QtWidgets.QWidget">QWidget</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>list[qw.QWidget]: List of all widgets in the layout</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/utils/general.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_all_widgets_from_layout</span><span class="p">(</span><span class="n">parent_layout</span><span class="p">:</span><span class="n">qw</span><span class="o">.</span><span class="n">QLayout</span><span class="p">,</span><span class="n">get_all</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">qw</span><span class="o">.</span><span class="n">QWidget</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A function that returns all widgets in a layout and optionally, its sub-layouts (all levels)</span>

<span class="sd">    Args:</span>
<span class="sd">        parent_layout (qw.QLayout): Layout which children need to be listed</span>
<span class="sd">        get_all (bool, optional): If True it will get the widgets in the sub-layouts as well</span>

<span class="sd">    Returns:</span>
<span class="sd">        list[qw.QWidget]: List of all widgets in the layout</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">list_widget</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">parent_layout</span><span class="o">.</span><span class="n">count</span><span class="p">()):</span>
        <span class="n">item</span> <span class="o">=</span> <span class="n">parent_layout</span><span class="o">.</span><span class="n">itemAt</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">widget</span><span class="p">():</span>
            <span class="n">list_widget</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">widget</span><span class="p">())</span>
            <span class="k">if</span> <span class="n">get_all</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">widget</span><span class="p">(),</span> <span class="n">qw</span><span class="o">.</span><span class="n">QWidget</span><span class="p">):</span>
                <span class="n">child_widgets</span> <span class="o">=</span> <span class="n">get_all_widgets</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">widget</span><span class="p">(),</span> <span class="n">get_all</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                <span class="n">list_widget</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">child_widgets</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">item</span><span class="o">.</span><span class="n">layout</span><span class="p">()</span> <span class="ow">and</span> <span class="n">get_all</span><span class="p">:</span>
            <span class="n">child_widgets</span> <span class="o">=</span> <span class="n">get_all_widgets_from_layout</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">layout</span><span class="p">(),</span> <span class="n">get_all</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">list_widget</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">child_widgets</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">list_widget</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="iris.gui.motion_video.get_timestamp_day" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_timestamp_day</span><span class="p">()</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Gets the current timestamp in days</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Timestamp without time: yymmdd</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/utils/general.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_timestamp_day</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Gets the current timestamp in days</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: Timestamp without time: yymmdd</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">dt</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%y%m</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="iris.gui.motion_video.get_timestamp_sec" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_timestamp_sec</span><span class="p">()</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Gets the current timestamp in seconds</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Timestamp with time: yymmdd_hhmmss</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/utils/general.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_timestamp_sec</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Gets the current timestamp in seconds</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: Timestamp with time: yymmdd_hhmmss</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">dt</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%y%m</span><span class="si">%d</span><span class="s2">_%H%M%S&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="iris.gui.motion_video.get_timestamp_us_int" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_timestamp_us_int</span><span class="p">()</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Gets the current timestamp in us as integer</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>int</code></td>            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Timestamp in us</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/utils/general.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_timestamp_us_int</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Gets the current timestamp in us as integer</span>

<span class="sd">    Returns:</span>
<span class="sd">        int: Timestamp in us</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">timestamp</span><span class="p">()</span><span class="o">*</span><span class="mf">1e6</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="iris.gui.motion_video.get_timestamp_us_str" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_timestamp_us_str</span><span class="p">()</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Gets the current timestamp in us as string</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Timestamp with time and milliseconds: yymmdd_hhmmss_us(6 digits)</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/utils/general.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_timestamp_us_str</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Gets the current timestamp in us as string</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: Timestamp with time and milliseconds: yymmdd_hhmmss_us(6 digits)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">dt</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%y%m</span><span class="si">%d</span><span class="s2">_%H%M%S_</span><span class="si">%f</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="iris.gui.motion_video.messagebox_request_input" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">messagebox_request_input</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">message</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">validator</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">invalid_msg</span><span class="o">=</span><span class="s1">&#39;The entered value is invalid. Please try again.&#39;</span><span class="p">,</span> <span class="n">loop_until_valid</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>A function that creates a QInputDialog to request input with optional validation.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>parent</code>
            </td>
            <td>
                  <code><span title="PySide6.QtWidgets.QWidget">QWidget</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The parent widget for the dialog (recommended).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>title</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Title of the dialog box.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>message</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Message/label to be displayed for the input field.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>default</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Default value of the input.</p>
              </div>
            </td>
            <td>
                  <code>&#39;&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>validator</code>
            </td>
            <td>
                  <code><span title="typing.Callable">Callable</span>[[<span title="str">str</span>], <span title="bool">bool</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A function that takes the 
input string and returns True if valid, False otherwise.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>invalid_msg</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Message to show if validation fails.</p>
              </div>
            </td>
            <td>
                  <code>&#39;The entered value is invalid. Please try again.&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>loop_until_valid</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, keeps asking until the input is valid 
or the user presses Cancel.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>str | None: User input string if OK was pressed and validation passed, 
        otherwise None (if Cancel was pressed).</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/utils/general.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">messagebox_request_input</span><span class="p">(</span>
        <span class="n">parent</span><span class="p">:</span> <span class="n">qw</span><span class="o">.</span><span class="n">QWidget</span><span class="p">,</span> 
        <span class="n">title</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> 
        <span class="n">message</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> 
        <span class="n">default</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
        <span class="n">validator</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="nb">str</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]</span><span class="o">|</span><span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">invalid_msg</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;The entered value is invalid. Please try again.&quot;</span><span class="p">,</span>
        <span class="n">loop_until_valid</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A function that creates a QInputDialog to request input with optional validation.</span>

<span class="sd">    Args:</span>
<span class="sd">        parent (qw.QWidget): The parent widget for the dialog (recommended).</span>
<span class="sd">        title (str): Title of the dialog box.</span>
<span class="sd">        message (str): Message/label to be displayed for the input field.</span>
<span class="sd">        default (str, optional): Default value of the input.</span>
<span class="sd">        validator (Callable[[str], bool]|None, optional): A function that takes the </span>
<span class="sd">            input string and returns True if valid, False otherwise.</span>
<span class="sd">        invalid_msg (str): Message to show if validation fails.</span>
<span class="sd">        loop_until_valid (bool): If True, keeps asking until the input is valid </span>
<span class="sd">            or the user presses Cancel.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str | None: User input string if OK was pressed and validation passed, </span>
<span class="sd">                    otherwise None (if Cancel was pressed).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">current_default</span> <span class="o">=</span> <span class="n">default</span>

    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="c1"># 1. Show the input dialog</span>
        <span class="n">user_input</span><span class="p">,</span> <span class="n">ok</span> <span class="o">=</span> <span class="n">qw</span><span class="o">.</span><span class="n">QInputDialog</span><span class="o">.</span><span class="n">getText</span><span class="p">(</span>
            <span class="n">parent</span><span class="p">,</span>
            <span class="n">title</span><span class="p">,</span>
            <span class="n">message</span><span class="p">,</span>
            <span class="n">qw</span><span class="o">.</span><span class="n">QLineEdit</span><span class="o">.</span><span class="n">Normal</span><span class="p">,</span> <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
            <span class="n">current_default</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">ok</span><span class="p">:</span> <span class="k">return</span> <span class="kc">None</span>  <span class="c1"># User pressed Cancel</span>

        <span class="n">is_valid</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="n">validator</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span> <span class="n">is_valid</span> <span class="o">=</span> <span class="n">validator</span><span class="p">(</span><span class="n">user_input</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">is_valid</span><span class="p">:</span> <span class="k">return</span> <span class="n">user_input</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">loop_until_valid</span><span class="p">:</span> <span class="k">return</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">qw</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="s2">&quot;Invalid Input&quot;</span><span class="p">,</span> <span class="n">invalid_msg</span><span class="p">)</span>
            <span class="n">current_default</span> <span class="o">=</span> <span class="n">user_input</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="iris.gui.motion_video.read_update_config_file_section" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">read_update_config_file_section</span><span class="p">(</span><span class="n">dict_controllers_default</span><span class="p">,</span> <span class="n">dict_controllers_comments</span><span class="p">,</span> <span class="n">section</span><span class="p">,</span> <span class="n">config_file</span><span class="o">=</span><span class="s1">&#39;config.ini&#39;</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Read the config file and automatically add an entry if it does not exist
based on the given default values (dict form) and returns the read values
after the update. Additionally, it will also automatically append comments
given by the comments dictionary at the end of each respective key's value
in the config file. If the values are already present, it will just read the values.
If the config file is not present, it will automatically try to create one.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>dict_controllers_default</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dictionary of the default values</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>dict_controllers_comments</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dictionary of the comments for each key in the default values</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>section</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Section name in the config file</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>config_file</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Path to the config file. Defaults to 'config.ini'.</p>
              </div>
            </td>
            <td>
                  <code>&#39;config.ini&#39;</code>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="NotImplementedError">NotImplementedError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the conversion of the default value type is not implemented</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>dict</code></td>            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dictionary of the read values (after the update) in the correct format
given by the default values dictionary</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/utils/general.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">read_update_config_file_section</span><span class="p">(</span><span class="n">dict_controllers_default</span><span class="p">:</span><span class="nb">dict</span><span class="p">,</span> <span class="n">dict_controllers_comments</span><span class="p">:</span><span class="nb">dict</span><span class="p">,</span>
    <span class="n">section</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">config_file</span><span class="p">:</span><span class="nb">str</span><span class="o">=</span><span class="s1">&#39;config.ini&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Read the config file and automatically add an entry if it does not exist</span>
<span class="sd">    based on the given default values (dict form) and returns the read values</span>
<span class="sd">    after the update. Additionally, it will also automatically append comments</span>
<span class="sd">    given by the comments dictionary at the end of each respective key&#39;s value</span>
<span class="sd">    in the config file. If the values are already present, it will just read the values.</span>
<span class="sd">    If the config file is not present, it will automatically try to create one.</span>

<span class="sd">    Args:</span>
<span class="sd">        dict_controllers_default (dict): Dictionary of the default values</span>
<span class="sd">        dict_controllers_comments (dict): Dictionary of the comments for each key in the default values</span>
<span class="sd">        section (str): Section name in the config file</span>
<span class="sd">        config_file (str, optional): Path to the config file. Defaults to &#39;config.ini&#39;.</span>

<span class="sd">    Raises:</span>
<span class="sd">        NotImplementedError: If the conversion of the default value type is not implemented</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: Dictionary of the read values (after the update) in the correct format</span>
<span class="sd">            given by the default values dictionary</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">check_and_create_config_file</span><span class="p">(</span><span class="n">config_file</span><span class="p">)</span>

    <span class="c1"># Read the config file and automatically add an entry if it does not exist </span>
    <span class="c1"># (along with its comments)</span>
    <span class="n">updater</span> <span class="o">=</span> <span class="n">ConfigUpdater</span><span class="p">(</span><span class="n">allow_no_value</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">updater</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">config_file</span><span class="p">)</span>

    <span class="n">splitter</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\t</span><span class="s1">&#39;</span>
    <span class="n">commenter</span> <span class="o">=</span> <span class="s1">&#39;; &#39;</span>
    <span class="n">list_splitters</span> <span class="o">=</span> <span class="p">[</span><span class="n">splitter</span><span class="p">,</span> <span class="n">commenter</span><span class="p">]</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">updater</span><span class="o">.</span><span class="n">has_section</span><span class="p">(</span><span class="n">section</span><span class="p">):</span>
        <span class="n">updater</span><span class="o">.</span><span class="n">add_section</span><span class="p">(</span><span class="n">section</span><span class="p">)</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">config_file</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">updater</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">dict_controllers_default</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">updater</span><span class="o">.</span><span class="n">has_option</span><span class="p">(</span><span class="n">section</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">dict_controllers_default</span><span class="p">[</span><span class="n">key</span><span class="p">])</span> <span class="o">!=</span> <span class="nb">str</span><span class="p">:</span>
                <span class="n">updater</span><span class="o">.</span><span class="n">set</span><span class="p">(</span>
                    <span class="n">section</span><span class="o">=</span><span class="n">section</span><span class="p">,</span>
                    <span class="n">option</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
                    <span class="n">value</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">dict_controllers_default</span><span class="p">[</span><span class="n">key</span><span class="p">])</span> <span class="o">+</span> <span class="n">splitter</span> <span class="o">+</span> <span class="n">commenter</span> <span class="o">+</span> <span class="n">dict_controllers_comments</span><span class="p">[</span><span class="n">key</span><span class="p">],</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>   <span class="c1"># Add quotes to the string values</span>
                <span class="n">updater</span><span class="o">.</span><span class="n">set</span><span class="p">(</span>
                    <span class="n">section</span><span class="o">=</span><span class="n">section</span><span class="p">,</span>
                    <span class="n">option</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
                    <span class="n">value</span><span class="o">=</span><span class="s1">&#39;&quot;&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">dict_controllers_default</span><span class="p">[</span><span class="n">key</span><span class="p">])</span> <span class="o">+</span> <span class="s1">&#39;&quot;&#39;</span> <span class="o">+</span> <span class="n">splitter</span> <span class="o">+</span> <span class="n">commenter</span> <span class="o">+</span> <span class="n">dict_controllers_comments</span><span class="p">[</span><span class="n">key</span><span class="p">],</span>
                <span class="p">)</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">config_file</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span> <span class="n">updater</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

    <span class="n">dict_controllers_read</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">updater</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">config_file</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span><span class="n">value</span> <span class="ow">in</span> <span class="n">updater</span><span class="o">.</span><span class="n">items</span><span class="p">(</span><span class="n">section</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">dict_controllers_default</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span> <span class="k">continue</span>
        <span class="n">def_val_type</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">dict_controllers_default</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>

        <span class="c1"># Process different types of values separately</span>
        <span class="c1"># note that the splits are to remove the comments</span>
        <span class="k">if</span> <span class="n">def_val_type</span> <span class="o">==</span> <span class="nb">bool</span><span class="p">:</span>
            <span class="n">read_line</span><span class="p">:</span><span class="nb">str</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">value</span>
            <span class="k">for</span> <span class="n">splitter</span> <span class="ow">in</span> <span class="n">list_splitters</span><span class="p">:</span>
                <span class="n">read_line</span> <span class="o">=</span> <span class="n">read_line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">splitter</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">val</span> <span class="o">=</span> <span class="n">read_line</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">val</span> <span class="o">!=</span> <span class="s1">&#39;true&#39;</span> <span class="ow">and</span> <span class="n">val</span> <span class="o">!=</span> <span class="s1">&#39;false&#39;</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error: </span><span class="si">{</span><span class="n">val</span><span class="si">}</span><span class="s2"> is not a boolean value.&quot;</span><span class="p">)</span>
            <span class="n">dict_controllers_read</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">read_line</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;true&#39;</span>
        <span class="k">elif</span> <span class="n">def_val_type</span> <span class="ow">in</span> <span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
            <span class="n">read_line</span><span class="p">:</span><span class="nb">str</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">value</span>
            <span class="k">for</span> <span class="n">splitter</span> <span class="ow">in</span> <span class="n">list_splitters</span><span class="p">:</span>
                <span class="n">read_line</span> <span class="o">=</span> <span class="n">read_line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">splitter</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">conv_val</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">dict_controllers_default</span><span class="p">[</span><span class="n">key</span><span class="p">])(</span><span class="n">read_line</span><span class="p">)</span>
            <span class="n">dict_controllers_read</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">conv_val</span>
        <span class="k">elif</span> <span class="n">def_val_type</span> <span class="o">==</span> <span class="nb">str</span><span class="p">:</span>
            <span class="k">if</span> <span class="s1">&#39;&quot;&#39;</span> <span class="ow">in</span> <span class="n">value</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
                <span class="n">conv_val</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">conv_val</span><span class="p">:</span><span class="nb">str</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">value</span>
                <span class="k">for</span> <span class="n">splitter</span> <span class="ow">in</span> <span class="n">list_splitters</span><span class="p">:</span>
                    <span class="n">conv_val</span> <span class="o">=</span> <span class="n">conv_val</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">splitter</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">dict_controllers_read</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">conv_val</span>
        <span class="k">else</span><span class="p">:</span> <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error: </span><span class="si">{</span><span class="n">def_val_type</span><span class="si">}</span><span class="s2"> conversion is not implemented.&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">dict_controllers_read</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="iris.gui.motion_video.run_with_timeout" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">run_with_timeout</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(),</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{},</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Runs a function with a timeout.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>func</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The function to execute.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>args</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Tuple of positional arguments for the function.</p>
              </div>
            </td>
            <td>
                  <code>()</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>kwargs</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dictionary of keyword arguments for the function.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>timeout</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The timeout in seconds.</p>
              </div>
            </td>
            <td>
                  <code>5</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The result of the function if it completes within the timeout.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="iris.utils.general.TimeoutError">TimeoutError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the function does not complete within the timeout.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/utils/general.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">run_with_timeout</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(),</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{},</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">5</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Runs a function with a timeout.</span>

<span class="sd">    Args:</span>
<span class="sd">        func: The function to execute.</span>
<span class="sd">        args: Tuple of positional arguments for the function.</span>
<span class="sd">        kwargs: Dictionary of keyword arguments for the function.</span>
<span class="sd">        timeout: The timeout in seconds.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The result of the function if it completes within the timeout.</span>

<span class="sd">    Raises:</span>
<span class="sd">        TimeoutError: If the function does not complete within the timeout.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">result</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">exception</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">finished</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Event</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">target</span><span class="p">():</span>
        <span class="k">nonlocal</span> <span class="n">result</span><span class="p">,</span> <span class="n">exception</span>
        <span class="k">try</span><span class="p">:</span> <span class="n">result</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span> <span class="n">exception</span> <span class="o">=</span> <span class="n">e</span>
        <span class="k">finally</span><span class="p">:</span> <span class="n">finished</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>

    <span class="n">timer</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Timer</span><span class="p">(</span><span class="n">timeout</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">finished</span><span class="o">.</span><span class="n">set</span><span class="p">())</span>
    <span class="n">thread</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">target</span><span class="p">)</span>

    <span class="n">timer</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
    <span class="n">thread</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

    <span class="n">finished</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>
    <span class="n">timer</span><span class="o">.</span><span class="n">cancel</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">thread</span><span class="o">.</span><span class="n">is_alive</span><span class="p">():</span>
        <span class="k">raise</span> <span class="ne">TimeoutError</span><span class="p">(</span><span class="s2">&quot;Function execution timed out&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">exception</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">exception</span>

    <span class="k">return</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="iris.gui.motion_video.validator_float_greaterThanZero" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">validator_float_greaterThanZero</span><span class="p">(</span><span class="n">input_str</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>A validator function that checks if the input string can be converted to a non-negative float</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>input_str</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Input string to validate</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>bool</code></td>            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if valid, False otherwise</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>iris/utils/general.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">validator_float_greaterThanZero</span><span class="p">(</span><span class="n">input_str</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A validator function that checks if the input string can be converted to a non-negative float</span>

<span class="sd">    Args:</span>
<span class="sd">        input_str (str): Input string to validate</span>

<span class="sd">    Returns:</span>
<span class="sd">        bool: True if valid, False otherwise</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">val</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">input_str</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">val</span> <span class="o">&gt;=</span> <span class="mf">0.0</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../../..", "features": [], "search": "../../../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>